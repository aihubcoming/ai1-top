var y$=Object.defineProperty;var gS=e=>{throw TypeError(e)};var C$=(e,t,r)=>t in e?y$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ii=(e,t,r)=>C$(e,typeof t!="symbol"?t+"":t,r),Sy=(e,t,r)=>t.has(e)||gS("Cannot "+r);var q=(e,t,r)=>(Sy(e,t,"read from private field"),r?r.call(e):t.get(e)),Qe=(e,t,r)=>t.has(e)?gS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Re=(e,t,r,n)=>(Sy(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Gr=(e,t,r)=>(Sy(e,t,"access private method"),r);var hf=(e,t,r,n)=>({set _(i){Re(e,t,i,r)},get _(){return q(e,t,n)}});function v$(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function ht(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var IR={exports:{}},Nm={},yR={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg=Symbol.for("react.element"),b$=Symbol.for("react.portal"),x$=Symbol.for("react.fragment"),A$=Symbol.for("react.strict_mode"),w$=Symbol.for("react.profiler"),S$=Symbol.for("react.provider"),k$=Symbol.for("react.context"),B$=Symbol.for("react.forward_ref"),N$=Symbol.for("react.suspense"),j$=Symbol.for("react.memo"),T$=Symbol.for("react.lazy"),fS=Symbol.iterator;function E$(e){return e===null||typeof e!="object"?null:(e=fS&&e[fS]||e["@@iterator"],typeof e=="function"?e:null)}var CR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vR=Object.assign,bR={};function ru(e,t,r){this.props=e,this.context=t,this.refs=bR,this.updater=r||CR}ru.prototype.isReactComponent={};ru.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ru.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xR(){}xR.prototype=ru.prototype;function Mx(e,t,r){this.props=e,this.context=t,this.refs=bR,this.updater=r||CR}var Zx=Mx.prototype=new xR;Zx.constructor=Mx;vR(Zx,ru.prototype);Zx.isPureReactComponent=!0;var hS=Array.isArray,AR=Object.prototype.hasOwnProperty,Hx={current:null},wR={key:!0,ref:!0,__self:!0,__source:!0};function SR(e,t,r){var n,i={},o=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)AR.call(t,n)&&!wR.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Mg,type:e,key:o,ref:s,props:i,_owner:Hx.current}}function R$(e,t){return{$$typeof:Mg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mg}function O$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var pS=/\/+/g;function ky(e,t){return typeof e=="object"&&e!==null&&e.key!=null?O$(""+e.key):t.toString(36)}function fh(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Mg:case b$:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+ky(s,0):n,hS(i)?(r="",e!=null&&(r=e.replace(pS,"$&/")+"/"),fh(i,t,r,"",function(u){return u})):i!=null&&(Lx(i)&&(i=R$(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(pS,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",hS(e))for(var a=0;a<e.length;a++){o=e[a];var c=n+ky(o,a);s+=fh(o,t,r,c,i)}else if(c=E$(e),typeof c=="function")for(e=c.call(e),a=0;!(o=e.next()).done;)o=o.value,c=n+ky(o,a++),s+=fh(o,t,r,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function pf(e,t,r){if(e==null)return e;var n=[],i=0;return fh(e,n,"","",function(o){return t.call(r,o,i++)}),n}function G$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var en={current:null},hh={transition:null},P$={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:hh,ReactCurrentOwner:Hx};function kR(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:pf,forEach:function(e,t,r){pf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return pf(e,function(){t++}),t},toArray:function(e){return pf(e,function(t){return t})||[]},only:function(e){if(!Lx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ve.Component=ru;Ve.Fragment=x$;Ve.Profiler=w$;Ve.PureComponent=Mx;Ve.StrictMode=A$;Ve.Suspense=N$;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P$;Ve.act=kR;Ve.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=vR({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Hx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)AR.call(t,c)&&!wR.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Mg,type:e.type,key:i,ref:o,props:n,_owner:s}};Ve.createContext=function(e){return e={$$typeof:k$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:S$,_context:e},e.Consumer=e};Ve.createElement=SR;Ve.createFactory=function(e){var t=SR.bind(null,e);return t.type=e,t};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(e){return{$$typeof:B$,render:e}};Ve.isValidElement=Lx;Ve.lazy=function(e){return{$$typeof:T$,_payload:{_status:-1,_result:e},_init:G$}};Ve.memo=function(e,t){return{$$typeof:j$,type:e,compare:t===void 0?null:t}};Ve.startTransition=function(e){var t=hh.transition;hh.transition={};try{e()}finally{hh.transition=t}};Ve.unstable_act=kR;Ve.useCallback=function(e,t){return en.current.useCallback(e,t)};Ve.useContext=function(e){return en.current.useContext(e)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(e){return en.current.useDeferredValue(e)};Ve.useEffect=function(e,t){return en.current.useEffect(e,t)};Ve.useId=function(){return en.current.useId()};Ve.useImperativeHandle=function(e,t,r){return en.current.useImperativeHandle(e,t,r)};Ve.useInsertionEffect=function(e,t){return en.current.useInsertionEffect(e,t)};Ve.useLayoutEffect=function(e,t){return en.current.useLayoutEffect(e,t)};Ve.useMemo=function(e,t){return en.current.useMemo(e,t)};Ve.useReducer=function(e,t,r){return en.current.useReducer(e,t,r)};Ve.useRef=function(e){return en.current.useRef(e)};Ve.useState=function(e){return en.current.useState(e)};Ve.useSyncExternalStore=function(e,t,r){return en.current.useSyncExternalStore(e,t,r)};Ve.useTransition=function(){return en.current.useTransition()};Ve.version="18.3.1";yR.exports=Ve;var b=yR.exports;const H=ht(b),jm=v$({__proto__:null,default:H},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _$=b,M$=Symbol.for("react.element"),Z$=Symbol.for("react.fragment"),H$=Object.prototype.hasOwnProperty,L$=_$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W$={key:!0,ref:!0,__self:!0,__source:!0};function BR(e,t,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)H$.call(t,n)&&!W$.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:M$,type:e,key:o,ref:s,props:i,_owner:L$.current}}Nm.Fragment=Z$;Nm.jsx=BR;Nm.jsxs=BR;IR.exports=Nm;var l=IR.exports,NR={exports:{}},Mn={},jR={exports:{}},TR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(G,T){var L=G.length;G.push(T);e:for(;0<L;){var W=L-1>>>1,X=G[W];if(0<i(X,T))G[W]=T,G[L]=X,L=W;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var T=G[0],L=G.pop();if(L!==T){G[0]=L;e:for(var W=0,X=G.length,V=X>>>1;W<V;){var z=2*(W+1)-1,ee=G[z],D=z+1,F=G[D];if(0>i(ee,L))D<X&&0>i(F,ee)?(G[W]=F,G[D]=L,W=D):(G[W]=ee,G[z]=L,W=z);else if(D<X&&0>i(F,L))G[W]=F,G[D]=L,W=D;else break e}}return T}function i(G,T){var L=G.sortIndex-T.sortIndex;return L!==0?L:G.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var c=[],u=[],d=1,g=null,f=3,m=!1,v=!1,p=!1,I=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=G)n(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(u)}}function x(G){if(p=!1,C(G),!v)if(r(c)!==null)v=!0,E(A);else{var T=r(u);T!==null&&M(x,T.startTime-G)}}function A(G,T){v=!1,p&&(p=!1,h(k),k=-1),m=!0;var L=f;try{for(C(T),g=r(c);g!==null&&(!(g.expirationTime>T)||G&&!_());){var W=g.callback;if(typeof W=="function"){g.callback=null,f=g.priorityLevel;var X=W(g.expirationTime<=T);T=e.unstable_now(),typeof X=="function"?g.callback=X:g===r(c)&&n(c),C(T)}else n(c);g=r(c)}if(g!==null)var V=!0;else{var z=r(u);z!==null&&M(x,z.startTime-T),V=!1}return V}finally{g=null,f=L,m=!1}}var w=!1,S=null,k=-1,R=5,j=-1;function _(){return!(e.unstable_now()-j<R)}function O(){if(S!==null){var G=e.unstable_now();j=G;var T=!0;try{T=S(!0,G)}finally{T?P():(w=!1,S=null)}}else w=!1}var P;if(typeof y=="function")P=function(){y(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,B=N.port2;N.port1.onmessage=O,P=function(){B.postMessage(null)}}else P=function(){I(O,0)};function E(G){S=G,w||(w=!0,P())}function M(G,T){k=I(function(){G(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,E(A))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(G){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var L=f;f=T;try{return G()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,T){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var L=f;f=G;try{return T()}finally{f=L}},e.unstable_scheduleCallback=function(G,T,L){var W=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?W+L:W):L=W,G){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=L+X,G={id:d++,callback:T,priorityLevel:G,startTime:L,expirationTime:X,sortIndex:-1},L>W?(G.sortIndex=L,t(u,G),r(c)===null&&G===r(u)&&(p?(h(k),k=-1):p=!0,M(x,L-W))):(G.sortIndex=X,t(c,G),v||m||(v=!0,E(A))),G},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(G){var T=f;return function(){var L=f;f=T;try{return G.apply(this,arguments)}finally{f=L}}}})(TR);jR.exports=TR;var D$=jR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $$=b,Gn=D$;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ER=new Set,Id={};function al(e,t){mc(e,t),mc(e+"Capture",t)}function mc(e,t){for(Id[e]=t,e=0;e<t.length;e++)ER.add(t[e])}var $o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vv=Object.prototype.hasOwnProperty,X$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mS={},IS={};function F$(e){return vv.call(IS,e)?!0:vv.call(mS,e)?!1:X$.test(e)?IS[e]=!0:(mS[e]=!0,!1)}function K$(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function V$(e,t,r,n){if(t===null||typeof t>"u"||K$(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tn(e,t,r,n,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jr[e]=new tn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jr[t]=new tn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jr[e]=new tn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jr[e]=new tn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jr[e]=new tn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jr[e]=new tn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jr[e]=new tn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jr[e]=new tn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jr[e]=new tn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wx=/[\-:]([a-z])/g;function Dx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wx,Dx);jr[t]=new tn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wx,Dx);jr[t]=new tn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wx,Dx);jr[t]=new tn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jr[e]=new tn(e,1,!1,e.toLowerCase(),null,!1,!1)});jr.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jr[e]=new tn(e,1,!1,e.toLowerCase(),null,!0,!0)});function $x(e,t,r,n){var i=jr.hasOwnProperty(t)?jr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(V$(t,r,i,n)&&(r=null),n||i===null?F$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var rs=$$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mf=Symbol.for("react.element"),jl=Symbol.for("react.portal"),Tl=Symbol.for("react.fragment"),Xx=Symbol.for("react.strict_mode"),bv=Symbol.for("react.profiler"),RR=Symbol.for("react.provider"),OR=Symbol.for("react.context"),Fx=Symbol.for("react.forward_ref"),xv=Symbol.for("react.suspense"),Av=Symbol.for("react.suspense_list"),Kx=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),GR=Symbol.for("react.offscreen"),yS=Symbol.iterator;function Au(e){return e===null||typeof e!="object"?null:(e=yS&&e[yS]||e["@@iterator"],typeof e=="function"?e:null)}var Kt=Object.assign,By;function Fu(e){if(By===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);By=t&&t[1]||""}return`
`+By+e}var Ny=!1;function jy(e,t){if(!e||Ny)return"";Ny=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=a);break}}}finally{Ny=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fu(e):""}function z$(e){switch(e.tag){case 5:return Fu(e.type);case 16:return Fu("Lazy");case 13:return Fu("Suspense");case 19:return Fu("SuspenseList");case 0:case 2:case 15:return e=jy(e.type,!1),e;case 11:return e=jy(e.type.render,!1),e;case 1:return e=jy(e.type,!0),e;default:return""}}function wv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tl:return"Fragment";case jl:return"Portal";case bv:return"Profiler";case Xx:return"StrictMode";case xv:return"Suspense";case Av:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case OR:return(e.displayName||"Context")+".Consumer";case RR:return(e._context.displayName||"Context")+".Provider";case Fx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kx:return t=e.displayName||null,t!==null?t:wv(e.type)||"Memo";case Is:t=e._payload,e=e._init;try{return wv(e(t))}catch{}}return null}function Y$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wv(t);case 8:return t===Xx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function PR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function U$(e){var t=PR(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function If(e){e._valueTracker||(e._valueTracker=U$(e))}function _R(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=PR(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Gh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sv(e,t){var r=t.checked;return Kt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function CS(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MR(e,t){t=t.checked,t!=null&&$x(e,"checked",t,!1)}function kv(e,t){MR(e,t);var r=Vs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bv(e,t.type,r):t.hasOwnProperty("defaultValue")&&Bv(e,t.type,Vs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Bv(e,t,r){(t!=="number"||Gh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ku=Array.isArray;function Fl(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Nv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Kt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ne(92));if(Ku(r)){if(1<r.length)throw Error(ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vs(r)}}function ZR(e,t){var r=Vs(t.value),n=Vs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function xS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function HR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?HR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yf,LR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yf=yf||document.createElement("div"),yf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var td={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J$=["Webkit","ms","Moz","O"];Object.keys(td).forEach(function(e){J$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),td[t]=td[e]})});function WR(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||td.hasOwnProperty(e)&&td[e]?(""+t).trim():t+"px"}function DR(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=WR(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Q$=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tv(e,t){if(t){if(Q$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function Ev(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rv=null;function Vx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ov=null,Kl=null,Vl=null;function AS(e){if(e=Lg(e)){if(typeof Ov!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=Gm(t),Ov(e.stateNode,e.type,t))}}function $R(e){Kl?Vl?Vl.push(e):Vl=[e]:Kl=e}function XR(){if(Kl){var e=Kl,t=Vl;if(Vl=Kl=null,AS(e),t)for(e=0;e<t.length;e++)AS(t[e])}}function FR(e,t){return e(t)}function KR(){}var Ty=!1;function VR(e,t,r){if(Ty)return e(t,r);Ty=!0;try{return FR(e,t,r)}finally{Ty=!1,(Kl!==null||Vl!==null)&&(KR(),XR())}}function Cd(e,t){var r=e.stateNode;if(r===null)return null;var n=Gm(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ne(231,t,typeof r));return r}var Gv=!1;if($o)try{var wu={};Object.defineProperty(wu,"passive",{get:function(){Gv=!0}}),window.addEventListener("test",wu,wu),window.removeEventListener("test",wu,wu)}catch{Gv=!1}function q$(e,t,r,n,i,o,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var rd=!1,Ph=null,_h=!1,Pv=null,e3={onError:function(e){rd=!0,Ph=e}};function t3(e,t,r,n,i,o,s,a,c){rd=!1,Ph=null,q$.apply(e3,arguments)}function r3(e,t,r,n,i,o,s,a,c){if(t3.apply(this,arguments),rd){if(rd){var u=Ph;rd=!1,Ph=null}else throw Error(ne(198));_h||(_h=!0,Pv=u)}}function ll(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wS(e){if(ll(e)!==e)throw Error(ne(188))}function n3(e){var t=e.alternate;if(!t){if(t=ll(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return wS(i),e;if(o===n)return wS(i),t;o=o.sibling}throw Error(ne(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?e:t}function YR(e){return e=n3(e),e!==null?UR(e):null}function UR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=UR(e);if(t!==null)return t;e=e.sibling}return null}var JR=Gn.unstable_scheduleCallback,SS=Gn.unstable_cancelCallback,i3=Gn.unstable_shouldYield,o3=Gn.unstable_requestPaint,Qt=Gn.unstable_now,s3=Gn.unstable_getCurrentPriorityLevel,zx=Gn.unstable_ImmediatePriority,QR=Gn.unstable_UserBlockingPriority,Mh=Gn.unstable_NormalPriority,a3=Gn.unstable_LowPriority,qR=Gn.unstable_IdlePriority,Tm=null,ro=null;function l3(e){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(Tm,e,void 0,(e.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:d3,c3=Math.log,u3=Math.LN2;function d3(e){return e>>>=0,e===0?32:31-(c3(e)/u3|0)|0}var Cf=64,vf=4194304;function Vu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=Vu(a):(o&=s,o!==0&&(n=Vu(o)))}else s=r&~i,s!==0?n=Vu(s):o!==0&&(n=Vu(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ti(t),i=1<<r,n|=e[r],t&=~i;return n}function g3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f3(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Ti(o),a=1<<s,c=i[s];c===-1?(!(a&r)||a&n)&&(i[s]=g3(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}function _v(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function eO(){var e=Cf;return Cf<<=1,!(Cf&4194240)&&(Cf=64),e}function Ey(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Zg(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ti(t),e[t]=r}function h3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Ti(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function Yx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ti(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var ft=0;function tO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var rO,Ux,nO,iO,oO,Mv=!1,bf=[],Ps=null,_s=null,Ms=null,vd=new Map,bd=new Map,bs=[],p3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kS(e,t){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":vd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bd.delete(t.pointerId)}}function Su(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Lg(t),t!==null&&Ux(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function m3(e,t,r,n,i){switch(t){case"focusin":return Ps=Su(Ps,e,t,r,n,i),!0;case"dragenter":return _s=Su(_s,e,t,r,n,i),!0;case"mouseover":return Ms=Su(Ms,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return vd.set(o,Su(vd.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,bd.set(o,Su(bd.get(o)||null,e,t,r,n,i)),!0}return!1}function sO(e){var t=Na(e.target);if(t!==null){var r=ll(t);if(r!==null){if(t=r.tag,t===13){if(t=zR(r),t!==null){e.blockedOn=t,oO(e.priority,function(){nO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ph(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Rv=n,r.target.dispatchEvent(n),Rv=null}else return t=Lg(r),t!==null&&Ux(t),e.blockedOn=r,!1;t.shift()}return!0}function BS(e,t,r){ph(e)&&r.delete(t)}function I3(){Mv=!1,Ps!==null&&ph(Ps)&&(Ps=null),_s!==null&&ph(_s)&&(_s=null),Ms!==null&&ph(Ms)&&(Ms=null),vd.forEach(BS),bd.forEach(BS)}function ku(e,t){e.blockedOn===t&&(e.blockedOn=null,Mv||(Mv=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,I3)))}function xd(e){function t(i){return ku(i,e)}if(0<bf.length){ku(bf[0],e);for(var r=1;r<bf.length;r++){var n=bf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ps!==null&&ku(Ps,e),_s!==null&&ku(_s,e),Ms!==null&&ku(Ms,e),vd.forEach(t),bd.forEach(t),r=0;r<bs.length;r++)n=bs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<bs.length&&(r=bs[0],r.blockedOn===null);)sO(r),r.blockedOn===null&&bs.shift()}var zl=rs.ReactCurrentBatchConfig,Hh=!0;function y3(e,t,r,n){var i=ft,o=zl.transition;zl.transition=null;try{ft=1,Jx(e,t,r,n)}finally{ft=i,zl.transition=o}}function C3(e,t,r,n){var i=ft,o=zl.transition;zl.transition=null;try{ft=4,Jx(e,t,r,n)}finally{ft=i,zl.transition=o}}function Jx(e,t,r,n){if(Hh){var i=Zv(e,t,r,n);if(i===null)Wy(e,t,n,Lh,r),kS(e,n);else if(m3(i,e,t,r,n))n.stopPropagation();else if(kS(e,n),t&4&&-1<p3.indexOf(e)){for(;i!==null;){var o=Lg(i);if(o!==null&&rO(o),o=Zv(e,t,r,n),o===null&&Wy(e,t,n,Lh,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else Wy(e,t,n,null,r)}}var Lh=null;function Zv(e,t,r,n){if(Lh=null,e=Vx(n),e=Na(e),e!==null)if(t=ll(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zR(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Lh=e,null}function aO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s3()){case zx:return 1;case QR:return 4;case Mh:case a3:return 16;case qR:return 536870912;default:return 16}default:return 16}}var Es=null,Qx=null,mh=null;function lO(){if(mh)return mh;var e,t=Qx,r=t.length,n,i="value"in Es?Es.value:Es.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[o-n];n++);return mh=i.slice(e,1<n?1-n:void 0)}function Ih(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xf(){return!0}function NS(){return!1}function Zn(e){function t(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?xf:NS,this.isPropagationStopped=NS,this}return Kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=xf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=xf)},persist:function(){},isPersistent:xf}),t}var nu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qx=Zn(nu),Hg=Kt({},nu,{view:0,detail:0}),v3=Zn(Hg),Ry,Oy,Bu,Em=Kt({},Hg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eA,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bu&&(Bu&&e.type==="mousemove"?(Ry=e.screenX-Bu.screenX,Oy=e.screenY-Bu.screenY):Oy=Ry=0,Bu=e),Ry)},movementY:function(e){return"movementY"in e?e.movementY:Oy}}),jS=Zn(Em),b3=Kt({},Em,{dataTransfer:0}),x3=Zn(b3),A3=Kt({},Hg,{relatedTarget:0}),Gy=Zn(A3),w3=Kt({},nu,{animationName:0,elapsedTime:0,pseudoElement:0}),S3=Zn(w3),k3=Kt({},nu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),B3=Zn(k3),N3=Kt({},nu,{data:0}),TS=Zn(N3),j3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=E3[e])?!!t[e]:!1}function eA(){return R3}var O3=Kt({},Hg,{key:function(e){if(e.key){var t=j3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ih(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eA,charCode:function(e){return e.type==="keypress"?Ih(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ih(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),G3=Zn(O3),P3=Kt({},Em,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ES=Zn(P3),_3=Kt({},Hg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eA}),M3=Zn(_3),Z3=Kt({},nu,{propertyName:0,elapsedTime:0,pseudoElement:0}),H3=Zn(Z3),L3=Kt({},Em,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),W3=Zn(L3),D3=[9,13,27,32],tA=$o&&"CompositionEvent"in window,nd=null;$o&&"documentMode"in document&&(nd=document.documentMode);var $3=$o&&"TextEvent"in window&&!nd,cO=$o&&(!tA||nd&&8<nd&&11>=nd),RS=" ",OS=!1;function uO(e,t){switch(e){case"keyup":return D3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var El=!1;function X3(e,t){switch(e){case"compositionend":return dO(t);case"keypress":return t.which!==32?null:(OS=!0,RS);case"textInput":return e=t.data,e===RS&&OS?null:e;default:return null}}function F3(e,t){if(El)return e==="compositionend"||!tA&&uO(e,t)?(e=lO(),mh=Qx=Es=null,El=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cO&&t.locale!=="ko"?null:t.data;default:return null}}var K3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K3[e.type]:t==="textarea"}function gO(e,t,r,n){$R(n),t=Wh(t,"onChange"),0<t.length&&(r=new qx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var id=null,Ad=null;function V3(e){AO(e,0)}function Rm(e){var t=Gl(e);if(_R(t))return e}function z3(e,t){if(e==="change")return t}var fO=!1;if($o){var Py;if($o){var _y="oninput"in document;if(!_y){var PS=document.createElement("div");PS.setAttribute("oninput","return;"),_y=typeof PS.oninput=="function"}Py=_y}else Py=!1;fO=Py&&(!document.documentMode||9<document.documentMode)}function _S(){id&&(id.detachEvent("onpropertychange",hO),Ad=id=null)}function hO(e){if(e.propertyName==="value"&&Rm(Ad)){var t=[];gO(t,Ad,e,Vx(e)),VR(V3,t)}}function Y3(e,t,r){e==="focusin"?(_S(),id=t,Ad=r,id.attachEvent("onpropertychange",hO)):e==="focusout"&&_S()}function U3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rm(Ad)}function J3(e,t){if(e==="click")return Rm(t)}function Q3(e,t){if(e==="input"||e==="change")return Rm(t)}function q3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _i=typeof Object.is=="function"?Object.is:q3;function wd(e,t){if(_i(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!vv.call(t,i)||!_i(e[i],t[i]))return!1}return!0}function MS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ZS(e,t){var r=MS(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=MS(r)}}function pO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mO(){for(var e=window,t=Gh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Gh(e.document)}return t}function rA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eX(e){var t=mO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&pO(r.ownerDocument.documentElement,r)){if(n!==null&&rA(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=ZS(r,o);var s=ZS(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tX=$o&&"documentMode"in document&&11>=document.documentMode,Rl=null,Hv=null,od=null,Lv=!1;function HS(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lv||Rl==null||Rl!==Gh(n)||(n=Rl,"selectionStart"in n&&rA(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),od&&wd(od,n)||(od=n,n=Wh(Hv,"onSelect"),0<n.length&&(t=new qx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Rl)))}function Af(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ol={animationend:Af("Animation","AnimationEnd"),animationiteration:Af("Animation","AnimationIteration"),animationstart:Af("Animation","AnimationStart"),transitionend:Af("Transition","TransitionEnd")},My={},IO={};$o&&(IO=document.createElement("div").style,"AnimationEvent"in window||(delete Ol.animationend.animation,delete Ol.animationiteration.animation,delete Ol.animationstart.animation),"TransitionEvent"in window||delete Ol.transitionend.transition);function Om(e){if(My[e])return My[e];if(!Ol[e])return e;var t=Ol[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in IO)return My[e]=t[r];return e}var yO=Om("animationend"),CO=Om("animationiteration"),vO=Om("animationstart"),bO=Om("transitionend"),xO=new Map,LS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(e,t){xO.set(e,t),al(t,[e])}for(var Zy=0;Zy<LS.length;Zy++){var Hy=LS[Zy],rX=Hy.toLowerCase(),nX=Hy[0].toUpperCase()+Hy.slice(1);ra(rX,"on"+nX)}ra(yO,"onAnimationEnd");ra(CO,"onAnimationIteration");ra(vO,"onAnimationStart");ra("dblclick","onDoubleClick");ra("focusin","onFocus");ra("focusout","onBlur");ra(bO,"onTransitionEnd");mc("onMouseEnter",["mouseout","mouseover"]);mc("onMouseLeave",["mouseout","mouseover"]);mc("onPointerEnter",["pointerout","pointerover"]);mc("onPointerLeave",["pointerout","pointerover"]);al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));al("onBeforeInput",["compositionend","keypress","textInput","paste"]);al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iX=new Set("cancel close invalid load scroll toggle".split(" ").concat(zu));function WS(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,r3(n,t,void 0,e),e.currentTarget=null}function AO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;WS(i,a,u),o=c}else for(s=0;s<n.length;s++){if(a=n[s],c=a.instance,u=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;WS(i,a,u),o=c}}}if(_h)throw e=Pv,_h=!1,Pv=null,e}function Rt(e,t){var r=t[Fv];r===void 0&&(r=t[Fv]=new Set);var n=e+"__bubble";r.has(n)||(wO(t,e,2,!1),r.add(n))}function Ly(e,t,r){var n=0;t&&(n|=4),wO(r,e,n,t)}var wf="_reactListening"+Math.random().toString(36).slice(2);function Sd(e){if(!e[wf]){e[wf]=!0,ER.forEach(function(r){r!=="selectionchange"&&(iX.has(r)||Ly(r,!1,e),Ly(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wf]||(t[wf]=!0,Ly("selectionchange",!1,t))}}function wO(e,t,r,n){switch(aO(t)){case 1:var i=y3;break;case 4:i=C3;break;default:i=Jx}r=i.bind(null,t,r,e),i=void 0,!Gv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Wy(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Na(a),s===null)return;if(c=s.tag,c===5||c===6){n=o=s;continue e}a=a.parentNode}}n=n.return}VR(function(){var u=o,d=Vx(r),g=[];e:{var f=xO.get(e);if(f!==void 0){var m=qx,v=e;switch(e){case"keypress":if(Ih(r)===0)break e;case"keydown":case"keyup":m=G3;break;case"focusin":v="focus",m=Gy;break;case"focusout":v="blur",m=Gy;break;case"beforeblur":case"afterblur":m=Gy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=jS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=x3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=M3;break;case yO:case CO:case vO:m=S3;break;case bO:m=H3;break;case"scroll":m=v3;break;case"wheel":m=W3;break;case"copy":case"cut":case"paste":m=B3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ES}var p=(t&4)!==0,I=!p&&e==="scroll",h=p?f!==null?f+"Capture":null:f;p=[];for(var y=u,C;y!==null;){C=y;var x=C.stateNode;if(C.tag===5&&x!==null&&(C=x,h!==null&&(x=Cd(y,h),x!=null&&p.push(kd(y,x,C)))),I)break;y=y.return}0<p.length&&(f=new m(f,v,null,r,d),g.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==Rv&&(v=r.relatedTarget||r.fromElement)&&(Na(v)||v[Xo]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=u,v=v?Na(v):null,v!==null&&(I=ll(v),v!==I||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(p=jS,x="onMouseLeave",h="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=ES,x="onPointerLeave",h="onPointerEnter",y="pointer"),I=m==null?f:Gl(m),C=v==null?f:Gl(v),f=new p(x,y+"leave",m,r,d),f.target=I,f.relatedTarget=C,x=null,Na(d)===u&&(p=new p(h,y+"enter",v,r,d),p.target=C,p.relatedTarget=I,x=p),I=x,m&&v)t:{for(p=m,h=v,y=0,C=p;C;C=pl(C))y++;for(C=0,x=h;x;x=pl(x))C++;for(;0<y-C;)p=pl(p),y--;for(;0<C-y;)h=pl(h),C--;for(;y--;){if(p===h||h!==null&&p===h.alternate)break t;p=pl(p),h=pl(h)}p=null}else p=null;m!==null&&DS(g,f,m,p,!1),v!==null&&I!==null&&DS(g,I,v,p,!0)}}e:{if(f=u?Gl(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var A=z3;else if(GS(f))if(fO)A=Q3;else{A=U3;var w=Y3}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=J3);if(A&&(A=A(e,u))){gO(g,A,r,d);break e}w&&w(e,f,u),e==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&Bv(f,"number",f.value)}switch(w=u?Gl(u):window,e){case"focusin":(GS(w)||w.contentEditable==="true")&&(Rl=w,Hv=u,od=null);break;case"focusout":od=Hv=Rl=null;break;case"mousedown":Lv=!0;break;case"contextmenu":case"mouseup":case"dragend":Lv=!1,HS(g,r,d);break;case"selectionchange":if(tX)break;case"keydown":case"keyup":HS(g,r,d)}var S;if(tA)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else El?uO(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(cO&&r.locale!=="ko"&&(El||k!=="onCompositionStart"?k==="onCompositionEnd"&&El&&(S=lO()):(Es=d,Qx="value"in Es?Es.value:Es.textContent,El=!0)),w=Wh(u,k),0<w.length&&(k=new TS(k,e,null,r,d),g.push({event:k,listeners:w}),S?k.data=S:(S=dO(r),S!==null&&(k.data=S)))),(S=$3?X3(e,r):F3(e,r))&&(u=Wh(u,"onBeforeInput"),0<u.length&&(d=new TS("onBeforeInput","beforeinput",null,r,d),g.push({event:d,listeners:u}),d.data=S))}AO(g,t)})}function kd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wh(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Cd(e,r),o!=null&&n.unshift(kd(e,o,i)),o=Cd(e,t),o!=null&&n.push(kd(e,o,i))),e=e.return}return n}function pl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function DS(e,t,r,n,i){for(var o=t._reactName,s=[];r!==null&&r!==n;){var a=r,c=a.alternate,u=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&u!==null&&(a=u,i?(c=Cd(r,o),c!=null&&s.unshift(kd(r,c,a))):i||(c=Cd(r,o),c!=null&&s.push(kd(r,c,a)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var oX=/\r\n?/g,sX=/\u0000|\uFFFD/g;function $S(e){return(typeof e=="string"?e:""+e).replace(oX,`
`).replace(sX,"")}function Sf(e,t,r){if(t=$S(t),$S(e)!==t&&r)throw Error(ne(425))}function Dh(){}var Wv=null,Dv=null;function $v(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xv=typeof setTimeout=="function"?setTimeout:void 0,aX=typeof clearTimeout=="function"?clearTimeout:void 0,XS=typeof Promise=="function"?Promise:void 0,lX=typeof queueMicrotask=="function"?queueMicrotask:typeof XS<"u"?function(e){return XS.resolve(null).then(e).catch(cX)}:Xv;function cX(e){setTimeout(function(){throw e})}function Dy(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),xd(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);xd(t)}function Zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function FS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var iu=Math.random().toString(36).slice(2),Ji="__reactFiber$"+iu,Bd="__reactProps$"+iu,Xo="__reactContainer$"+iu,Fv="__reactEvents$"+iu,uX="__reactListeners$"+iu,dX="__reactHandles$"+iu;function Na(e){var t=e[Ji];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Xo]||r[Ji]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=FS(e);e!==null;){if(r=e[Ji])return r;e=FS(e)}return t}e=r,r=e.parentNode}return null}function Lg(e){return e=e[Ji]||e[Xo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Gm(e){return e[Bd]||null}var Kv=[],Pl=-1;function na(e){return{current:e}}function _t(e){0>Pl||(e.current=Kv[Pl],Kv[Pl]=null,Pl--)}function kt(e,t){Pl++,Kv[Pl]=e.current,e.current=t}var zs={},Hr=na(zs),dn=na(!1),Ka=zs;function Ic(e,t){var r=e.type.contextTypes;if(!r)return zs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function gn(e){return e=e.childContextTypes,e!=null}function $h(){_t(dn),_t(Hr)}function KS(e,t,r){if(Hr.current!==zs)throw Error(ne(168));kt(Hr,t),kt(dn,r)}function SO(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ne(108,Y$(e)||"Unknown",i));return Kt({},r,n)}function Xh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zs,Ka=Hr.current,kt(Hr,e),kt(dn,dn.current),!0}function VS(e,t,r){var n=e.stateNode;if(!n)throw Error(ne(169));r?(e=SO(e,t,Ka),n.__reactInternalMemoizedMergedChildContext=e,_t(dn),_t(Hr),kt(Hr,e)):_t(dn),kt(dn,r)}var wo=null,Pm=!1,$y=!1;function kO(e){wo===null?wo=[e]:wo.push(e)}function gX(e){Pm=!0,kO(e)}function ia(){if(!$y&&wo!==null){$y=!0;var e=0,t=ft;try{var r=wo;for(ft=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wo=null,Pm=!1}catch(i){throw wo!==null&&(wo=wo.slice(e+1)),JR(zx,ia),i}finally{ft=t,$y=!1}}return null}var _l=[],Ml=0,Fh=null,Kh=0,zn=[],Yn=0,Va=null,jo=1,To="";function Ca(e,t){_l[Ml++]=Kh,_l[Ml++]=Fh,Fh=e,Kh=t}function BO(e,t,r){zn[Yn++]=jo,zn[Yn++]=To,zn[Yn++]=Va,Va=e;var n=jo;e=To;var i=32-Ti(n)-1;n&=~(1<<i),r+=1;var o=32-Ti(t)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,jo=1<<32-Ti(t)+i|r<<i|n,To=o+e}else jo=1<<o|r<<i|n,To=e}function nA(e){e.return!==null&&(Ca(e,1),BO(e,1,0))}function iA(e){for(;e===Fh;)Fh=_l[--Ml],_l[Ml]=null,Kh=_l[--Ml],_l[Ml]=null;for(;e===Va;)Va=zn[--Yn],zn[Yn]=null,To=zn[--Yn],zn[Yn]=null,jo=zn[--Yn],zn[Yn]=null}var jn=null,Nn=null,Zt=!1,Bi=null;function NO(e,t){var r=ti(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function zS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jn=e,Nn=Zs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jn=e,Nn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Va!==null?{id:jo,overflow:To}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ti(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,jn=e,Nn=null,!0):!1;default:return!1}}function Vv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zv(e){if(Zt){var t=Nn;if(t){var r=t;if(!zS(e,t)){if(Vv(e))throw Error(ne(418));t=Zs(r.nextSibling);var n=jn;t&&zS(e,t)?NO(n,r):(e.flags=e.flags&-4097|2,Zt=!1,jn=e)}}else{if(Vv(e))throw Error(ne(418));e.flags=e.flags&-4097|2,Zt=!1,jn=e}}}function YS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jn=e}function kf(e){if(e!==jn)return!1;if(!Zt)return YS(e),Zt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$v(e.type,e.memoizedProps)),t&&(t=Nn)){if(Vv(e))throw jO(),Error(ne(418));for(;t;)NO(e,t),t=Zs(t.nextSibling)}if(YS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Nn=Zs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Nn=null}}else Nn=jn?Zs(e.stateNode.nextSibling):null;return!0}function jO(){for(var e=Nn;e;)e=Zs(e.nextSibling)}function yc(){Nn=jn=null,Zt=!1}function oA(e){Bi===null?Bi=[e]:Bi.push(e)}var fX=rs.ReactCurrentBatchConfig;function Nu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function Bf(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function US(e){var t=e._init;return t(e._payload)}function TO(e){function t(h,y){if(e){var C=h.deletions;C===null?(h.deletions=[y],h.flags|=16):C.push(y)}}function r(h,y){if(!e)return null;for(;y!==null;)t(h,y),y=y.sibling;return null}function n(h,y){for(h=new Map;y!==null;)y.key!==null?h.set(y.key,y):h.set(y.index,y),y=y.sibling;return h}function i(h,y){return h=Ds(h,y),h.index=0,h.sibling=null,h}function o(h,y,C){return h.index=C,e?(C=h.alternate,C!==null?(C=C.index,C<y?(h.flags|=2,y):C):(h.flags|=2,y)):(h.flags|=1048576,y)}function s(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,y,C,x){return y===null||y.tag!==6?(y=Uy(C,h.mode,x),y.return=h,y):(y=i(y,C),y.return=h,y)}function c(h,y,C,x){var A=C.type;return A===Tl?d(h,y,C.props.children,x,C.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Is&&US(A)===y.type)?(x=i(y,C.props),x.ref=Nu(h,y,C),x.return=h,x):(x=wh(C.type,C.key,C.props,null,h.mode,x),x.ref=Nu(h,y,C),x.return=h,x)}function u(h,y,C,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=Jy(C,h.mode,x),y.return=h,y):(y=i(y,C.children||[]),y.return=h,y)}function d(h,y,C,x,A){return y===null||y.tag!==7?(y=Wa(C,h.mode,x,A),y.return=h,y):(y=i(y,C),y.return=h,y)}function g(h,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Uy(""+y,h.mode,C),y.return=h,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mf:return C=wh(y.type,y.key,y.props,null,h.mode,C),C.ref=Nu(h,null,y),C.return=h,C;case jl:return y=Jy(y,h.mode,C),y.return=h,y;case Is:var x=y._init;return g(h,x(y._payload),C)}if(Ku(y)||Au(y))return y=Wa(y,h.mode,C,null),y.return=h,y;Bf(h,y)}return null}function f(h,y,C,x){var A=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return A!==null?null:a(h,y,""+C,x);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case mf:return C.key===A?c(h,y,C,x):null;case jl:return C.key===A?u(h,y,C,x):null;case Is:return A=C._init,f(h,y,A(C._payload),x)}if(Ku(C)||Au(C))return A!==null?null:d(h,y,C,x,null);Bf(h,C)}return null}function m(h,y,C,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return h=h.get(C)||null,a(y,h,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case mf:return h=h.get(x.key===null?C:x.key)||null,c(y,h,x,A);case jl:return h=h.get(x.key===null?C:x.key)||null,u(y,h,x,A);case Is:var w=x._init;return m(h,y,C,w(x._payload),A)}if(Ku(x)||Au(x))return h=h.get(C)||null,d(y,h,x,A,null);Bf(y,x)}return null}function v(h,y,C,x){for(var A=null,w=null,S=y,k=y=0,R=null;S!==null&&k<C.length;k++){S.index>k?(R=S,S=null):R=S.sibling;var j=f(h,S,C[k],x);if(j===null){S===null&&(S=R);break}e&&S&&j.alternate===null&&t(h,S),y=o(j,y,k),w===null?A=j:w.sibling=j,w=j,S=R}if(k===C.length)return r(h,S),Zt&&Ca(h,k),A;if(S===null){for(;k<C.length;k++)S=g(h,C[k],x),S!==null&&(y=o(S,y,k),w===null?A=S:w.sibling=S,w=S);return Zt&&Ca(h,k),A}for(S=n(h,S);k<C.length;k++)R=m(S,h,k,C[k],x),R!==null&&(e&&R.alternate!==null&&S.delete(R.key===null?k:R.key),y=o(R,y,k),w===null?A=R:w.sibling=R,w=R);return e&&S.forEach(function(_){return t(h,_)}),Zt&&Ca(h,k),A}function p(h,y,C,x){var A=Au(C);if(typeof A!="function")throw Error(ne(150));if(C=A.call(C),C==null)throw Error(ne(151));for(var w=A=null,S=y,k=y=0,R=null,j=C.next();S!==null&&!j.done;k++,j=C.next()){S.index>k?(R=S,S=null):R=S.sibling;var _=f(h,S,j.value,x);if(_===null){S===null&&(S=R);break}e&&S&&_.alternate===null&&t(h,S),y=o(_,y,k),w===null?A=_:w.sibling=_,w=_,S=R}if(j.done)return r(h,S),Zt&&Ca(h,k),A;if(S===null){for(;!j.done;k++,j=C.next())j=g(h,j.value,x),j!==null&&(y=o(j,y,k),w===null?A=j:w.sibling=j,w=j);return Zt&&Ca(h,k),A}for(S=n(h,S);!j.done;k++,j=C.next())j=m(S,h,k,j.value,x),j!==null&&(e&&j.alternate!==null&&S.delete(j.key===null?k:j.key),y=o(j,y,k),w===null?A=j:w.sibling=j,w=j);return e&&S.forEach(function(O){return t(h,O)}),Zt&&Ca(h,k),A}function I(h,y,C,x){if(typeof C=="object"&&C!==null&&C.type===Tl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case mf:e:{for(var A=C.key,w=y;w!==null;){if(w.key===A){if(A=C.type,A===Tl){if(w.tag===7){r(h,w.sibling),y=i(w,C.props.children),y.return=h,h=y;break e}}else if(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Is&&US(A)===w.type){r(h,w.sibling),y=i(w,C.props),y.ref=Nu(h,w,C),y.return=h,h=y;break e}r(h,w);break}else t(h,w);w=w.sibling}C.type===Tl?(y=Wa(C.props.children,h.mode,x,C.key),y.return=h,h=y):(x=wh(C.type,C.key,C.props,null,h.mode,x),x.ref=Nu(h,y,C),x.return=h,h=x)}return s(h);case jl:e:{for(w=C.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){r(h,y.sibling),y=i(y,C.children||[]),y.return=h,h=y;break e}else{r(h,y);break}else t(h,y);y=y.sibling}y=Jy(C,h.mode,x),y.return=h,h=y}return s(h);case Is:return w=C._init,I(h,y,w(C._payload),x)}if(Ku(C))return v(h,y,C,x);if(Au(C))return p(h,y,C,x);Bf(h,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(r(h,y.sibling),y=i(y,C),y.return=h,h=y):(r(h,y),y=Uy(C,h.mode,x),y.return=h,h=y),s(h)):r(h,y)}return I}var Cc=TO(!0),EO=TO(!1),Vh=na(null),zh=null,Zl=null,sA=null;function aA(){sA=Zl=zh=null}function lA(e){var t=Vh.current;_t(Vh),e._currentValue=t}function Yv(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yl(e,t){zh=e,sA=Zl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ln=!0),e.firstContext=null)}function oi(e){var t=e._currentValue;if(sA!==e)if(e={context:e,memoizedValue:t,next:null},Zl===null){if(zh===null)throw Error(ne(308));Zl=e,zh.dependencies={lanes:0,firstContext:e}}else Zl=Zl.next=e;return t}var ja=null;function cA(e){ja===null?ja=[e]:ja.push(e)}function RO(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,cA(t)):(r.next=i.next,i.next=r),t.interleaved=r,Fo(e,n)}function Fo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ys=!1;function uA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,nt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Fo(e,r)}return i=n.interleaved,i===null?(t.next=t,cA(n)):(t.next=i.next,i.next=t),n.interleaved=t,Fo(e,r)}function yh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yx(e,r)}}function JS(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Yh(e,t,r,n){var i=e.updateQueue;ys=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,s===null?o=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(o!==null){var g=i.baseState;s=0,d=u=c=null,a=o;do{var f=a.lane,m=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,p=a;switch(f=t,m=r,p.tag){case 1:if(v=p.payload,typeof v=="function"){g=v.call(m,g,f);break e}g=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,f=typeof v=="function"?v.call(m,g,f):v,f==null)break e;g=Kt({},g,f);break e;case 2:ys=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,c=g):d=d.next=m,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(c=g),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Ya|=s,e.lanes=s,e.memoizedState=g}}function QS(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ne(191,i));i.call(n)}}}var Wg={},no=na(Wg),Nd=na(Wg),jd=na(Wg);function Ta(e){if(e===Wg)throw Error(ne(174));return e}function dA(e,t){switch(kt(jd,t),kt(Nd,e),kt(no,Wg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jv(t,e)}_t(no),kt(no,t)}function vc(){_t(no),_t(Nd),_t(jd)}function GO(e){Ta(jd.current);var t=Ta(no.current),r=jv(t,e.type);t!==r&&(kt(Nd,e),kt(no,r))}function gA(e){Nd.current===e&&(_t(no),_t(Nd))}var Xt=na(0);function Uh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xy=[];function fA(){for(var e=0;e<Xy.length;e++)Xy[e]._workInProgressVersionPrimary=null;Xy.length=0}var Ch=rs.ReactCurrentDispatcher,Fy=rs.ReactCurrentBatchConfig,za=0,Ft=null,lr=null,pr=null,Jh=!1,sd=!1,Td=0,hX=0;function Pr(){throw Error(ne(321))}function hA(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!_i(e[r],t[r]))return!1;return!0}function pA(e,t,r,n,i,o){if(za=o,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ch.current=e===null||e.memoizedState===null?yX:CX,e=r(n,i),sd){o=0;do{if(sd=!1,Td=0,25<=o)throw Error(ne(301));o+=1,pr=lr=null,t.updateQueue=null,Ch.current=vX,e=r(n,i)}while(sd)}if(Ch.current=Qh,t=lr!==null&&lr.next!==null,za=0,pr=lr=Ft=null,Jh=!1,t)throw Error(ne(300));return e}function mA(){var e=Td!==0;return Td=0,e}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Ft.memoizedState=pr=e:pr=pr.next=e,pr}function si(){if(lr===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=lr.next;var t=pr===null?Ft.memoizedState:pr.next;if(t!==null)pr=t,lr=e;else{if(e===null)throw Error(ne(310));lr=e,e={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},pr===null?Ft.memoizedState=pr=e:pr=pr.next=e}return pr}function Ed(e,t){return typeof t=="function"?t(e):t}function Ky(e){var t=si(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=lr,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,c=null,u=o;do{var d=u.lane;if((za&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var g={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=g,s=n):c=c.next=g,Ft.lanes|=d,Ya|=d}u=u.next}while(u!==null&&u!==o);c===null?s=n:c.next=a,_i(n,t.memoizedState)||(ln=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,Ft.lanes|=o,Ya|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vy(e){var t=si(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);_i(o,t.memoizedState)||(ln=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function PO(){}function _O(e,t){var r=Ft,n=si(),i=t(),o=!_i(n.memoizedState,i);if(o&&(n.memoizedState=i,ln=!0),n=n.queue,IA(HO.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||pr!==null&&pr.memoizedState.tag&1){if(r.flags|=2048,Rd(9,ZO.bind(null,r,n,i,t),void 0,null),yr===null)throw Error(ne(349));za&30||MO(r,t,i)}return i}function MO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ZO(e,t,r,n){t.value=r,t.getSnapshot=n,LO(t)&&WO(e)}function HO(e,t,r){return r(function(){LO(t)&&WO(e)})}function LO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_i(e,r)}catch{return!0}}function WO(e){var t=Fo(e,1);t!==null&&Ei(t,e,1,-1)}function qS(e){var t=Fi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:e},t.queue=e,e=e.dispatch=IX.bind(null,Ft,e),[t.memoizedState,e]}function Rd(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function DO(){return si().memoizedState}function vh(e,t,r,n){var i=Fi();Ft.flags|=e,i.memoizedState=Rd(1|t,r,void 0,n===void 0?null:n)}function _m(e,t,r,n){var i=si();n=n===void 0?null:n;var o=void 0;if(lr!==null){var s=lr.memoizedState;if(o=s.destroy,n!==null&&hA(n,s.deps)){i.memoizedState=Rd(t,r,o,n);return}}Ft.flags|=e,i.memoizedState=Rd(1|t,r,o,n)}function ek(e,t){return vh(8390656,8,e,t)}function IA(e,t){return _m(2048,8,e,t)}function $O(e,t){return _m(4,2,e,t)}function XO(e,t){return _m(4,4,e,t)}function FO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function KO(e,t,r){return r=r!=null?r.concat([e]):null,_m(4,4,FO.bind(null,t,e),r)}function yA(){}function VO(e,t){var r=si();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hA(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function zO(e,t){var r=si();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hA(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function YO(e,t,r){return za&21?(_i(r,t)||(r=eO(),Ft.lanes|=r,Ya|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ln=!0),e.memoizedState=r)}function pX(e,t){var r=ft;ft=r!==0&&4>r?r:4,e(!0);var n=Fy.transition;Fy.transition={};try{e(!1),t()}finally{ft=r,Fy.transition=n}}function UO(){return si().memoizedState}function mX(e,t,r){var n=Ws(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},JO(e))QO(t,r);else if(r=RO(e,t,r,n),r!==null){var i=Ur();Ei(r,e,n,i),qO(r,t,n)}}function IX(e,t,r){var n=Ws(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(JO(e))QO(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,_i(a,s)){var c=t.interleaved;c===null?(i.next=i,cA(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=RO(e,t,i,n),r!==null&&(i=Ur(),Ei(r,e,n,i),qO(r,t,n))}}function JO(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function QO(e,t){sd=Jh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qO(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yx(e,r)}}var Qh={readContext:oi,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},yX={readContext:oi,useCallback:function(e,t){return Fi().memoizedState=[e,t===void 0?null:t],e},useContext:oi,useEffect:ek,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,vh(4194308,4,FO.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vh(4194308,4,e,t)},useInsertionEffect:function(e,t){return vh(4,2,e,t)},useMemo:function(e,t){var r=Fi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Fi();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=mX.bind(null,Ft,e),[n.memoizedState,e]},useRef:function(e){var t=Fi();return e={current:e},t.memoizedState=e},useState:qS,useDebugValue:yA,useDeferredValue:function(e){return Fi().memoizedState=e},useTransition:function(){var e=qS(!1),t=e[0];return e=pX.bind(null,e[1]),Fi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ft,i=Fi();if(Zt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=t(),yr===null)throw Error(ne(349));za&30||MO(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,ek(HO.bind(null,n,o,e),[e]),n.flags|=2048,Rd(9,ZO.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Fi(),t=yr.identifierPrefix;if(Zt){var r=To,n=jo;r=(n&~(1<<32-Ti(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Td++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=hX++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CX={readContext:oi,useCallback:VO,useContext:oi,useEffect:IA,useImperativeHandle:KO,useInsertionEffect:$O,useLayoutEffect:XO,useMemo:zO,useReducer:Ky,useRef:DO,useState:function(){return Ky(Ed)},useDebugValue:yA,useDeferredValue:function(e){var t=si();return YO(t,lr.memoizedState,e)},useTransition:function(){var e=Ky(Ed)[0],t=si().memoizedState;return[e,t]},useMutableSource:PO,useSyncExternalStore:_O,useId:UO,unstable_isNewReconciler:!1},vX={readContext:oi,useCallback:VO,useContext:oi,useEffect:IA,useImperativeHandle:KO,useInsertionEffect:$O,useLayoutEffect:XO,useMemo:zO,useReducer:Vy,useRef:DO,useState:function(){return Vy(Ed)},useDebugValue:yA,useDeferredValue:function(e){var t=si();return lr===null?t.memoizedState=e:YO(t,lr.memoizedState,e)},useTransition:function(){var e=Vy(Ed)[0],t=si().memoizedState;return[e,t]},useMutableSource:PO,useSyncExternalStore:_O,useId:UO,unstable_isNewReconciler:!1};function xi(e,t){if(e&&e.defaultProps){t=Kt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Uv(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Kt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Mm={isMounted:function(e){return(e=e._reactInternals)?ll(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ur(),i=Ws(e),o=Mo(n,i);o.payload=t,r!=null&&(o.callback=r),t=Hs(e,o,i),t!==null&&(Ei(t,e,i,n),yh(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ur(),i=Ws(e),o=Mo(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Hs(e,o,i),t!==null&&(Ei(t,e,i,n),yh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ur(),n=Ws(e),i=Mo(r,n);i.tag=2,t!=null&&(i.callback=t),t=Hs(e,i,n),t!==null&&(Ei(t,e,n,r),yh(t,e,n))}};function tk(e,t,r,n,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,s):t.prototype&&t.prototype.isPureReactComponent?!wd(r,n)||!wd(i,o):!0}function eG(e,t,r){var n=!1,i=zs,o=t.contextType;return typeof o=="object"&&o!==null?o=oi(o):(i=gn(t)?Ka:Hr.current,n=t.contextTypes,o=(n=n!=null)?Ic(e,i):zs),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Mm,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function rk(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Mm.enqueueReplaceState(t,t.state,null)}function Jv(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},uA(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=oi(o):(o=gn(t)?Ka:Hr.current,i.context=Ic(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Uv(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Mm.enqueueReplaceState(i,i.state,null),Yh(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function bc(e,t){try{var r="",n=t;do r+=z$(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function zy(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Qv(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var bX=typeof WeakMap=="function"?WeakMap:Map;function tG(e,t,r){r=Mo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ep||(ep=!0,l0=n),Qv(e,t)},r}function rG(e,t,r){r=Mo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Qv(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Qv(e,t),typeof n!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function nk(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new bX;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=PX.bind(null,e,t,r),t.then(e,e))}function ik(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ok(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Mo(-1,1),t.tag=2,Hs(r,t,1))),r.lanes|=1),e)}var xX=rs.ReactCurrentOwner,ln=!1;function $r(e,t,r,n){t.child=e===null?EO(t,null,r,n):Cc(t,e.child,r,n)}function sk(e,t,r,n,i){r=r.render;var o=t.ref;return Yl(t,i),n=pA(e,t,r,n,o,i),r=mA(),e!==null&&!ln?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ko(e,t,i)):(Zt&&r&&nA(t),t.flags|=1,$r(e,t,n,i),t.child)}function ak(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!kA(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,nG(e,t,o,n,i)):(e=wh(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:wd,r(s,n)&&e.ref===t.ref)return Ko(e,t,i)}return t.flags|=1,e=Ds(o,n),e.ref=t.ref,e.return=t,t.child=e}function nG(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(wd(o,n)&&e.ref===t.ref)if(ln=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(ln=!0);else return t.lanes=e.lanes,Ko(e,t,i)}return qv(e,t,r,n,i)}function iG(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Ll,An),An|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kt(Ll,An),An|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,kt(Ll,An),An|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,kt(Ll,An),An|=n;return $r(e,t,i,r),t.child}function oG(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function qv(e,t,r,n,i){var o=gn(r)?Ka:Hr.current;return o=Ic(t,o),Yl(t,i),r=pA(e,t,r,n,o,i),n=mA(),e!==null&&!ln?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ko(e,t,i)):(Zt&&n&&nA(t),t.flags|=1,$r(e,t,r,i),t.child)}function lk(e,t,r,n,i){if(gn(r)){var o=!0;Xh(t)}else o=!1;if(Yl(t,i),t.stateNode===null)bh(e,t),eG(t,r,n),Jv(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=oi(u):(u=gn(r)?Ka:Hr.current,u=Ic(t,u));var d=r.getDerivedStateFromProps,g=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";g||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||c!==u)&&rk(t,s,n,u),ys=!1;var f=t.memoizedState;s.state=f,Yh(t,n,s,i),c=t.memoizedState,a!==n||f!==c||dn.current||ys?(typeof d=="function"&&(Uv(t,r,d,n),c=t.memoizedState),(a=ys||tk(t,r,a,n,f,c,u))?(g||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,OO(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:xi(t.type,a),s.props=u,g=t.pendingProps,f=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=oi(c):(c=gn(r)?Ka:Hr.current,c=Ic(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||f!==c)&&rk(t,s,n,c),ys=!1,f=t.memoizedState,s.state=f,Yh(t,n,s,i);var v=t.memoizedState;a!==g||f!==v||dn.current||ys?(typeof m=="function"&&(Uv(t,r,m,n),v=t.memoizedState),(u=ys||tk(t,r,u,n,f,v,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),s.props=n,s.state=v,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return e0(e,t,r,n,o,i)}function e0(e,t,r,n,i,o){oG(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&VS(t,r,!1),Ko(e,t,o);n=t.stateNode,xX.current=t;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Cc(t,e.child,null,o),t.child=Cc(t,null,a,o)):$r(e,t,a,o),t.memoizedState=n.state,i&&VS(t,r,!0),t.child}function sG(e){var t=e.stateNode;t.pendingContext?KS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&KS(e,t.context,!1),dA(e,t.containerInfo)}function ck(e,t,r,n,i){return yc(),oA(i),t.flags|=256,$r(e,t,r,n),t.child}var t0={dehydrated:null,treeContext:null,retryLane:0};function r0(e){return{baseLanes:e,cachePool:null,transitions:null}}function aG(e,t,r){var n=t.pendingProps,i=Xt.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),kt(Xt,i&1),e===null)return zv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,o?(n=t.mode,o=t.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Lm(s,n,0,null),e=Wa(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=r0(r),t.memoizedState=t0,e):CA(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return AX(e,t,s,n,a,i,r);if(o){o=n.fallback,s=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ds(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ds(a,o):(o=Wa(o,s,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,s=e.child.memoizedState,s=s===null?r0(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~r,t.memoizedState=t0,n}return o=e.child,e=o.sibling,n=Ds(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function CA(e,t){return t=Lm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Nf(e,t,r,n){return n!==null&&oA(n),Cc(t,e.child,null,r),e=CA(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function AX(e,t,r,n,i,o,s){if(r)return t.flags&256?(t.flags&=-257,n=zy(Error(ne(422))),Nf(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=Lm({mode:"visible",children:n.children},i,0,null),o=Wa(o,i,s,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Cc(t,e.child,null,s),t.child.memoizedState=r0(s),t.memoizedState=t0,o);if(!(t.mode&1))return Nf(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(ne(419)),n=zy(o,n,void 0),Nf(e,t,s,n)}if(a=(s&e.childLanes)!==0,ln||a){if(n=yr,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Fo(e,i),Ei(n,e,i,-1))}return SA(),n=zy(Error(ne(421))),Nf(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=_X.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Nn=Zs(i.nextSibling),jn=t,Zt=!0,Bi=null,e!==null&&(zn[Yn++]=jo,zn[Yn++]=To,zn[Yn++]=Va,jo=e.id,To=e.overflow,Va=t),t=CA(t,n.children),t.flags|=4096,t)}function uk(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Yv(e.return,t,r)}function Yy(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function lG(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if($r(e,t,n.children,r),n=Xt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uk(e,r,t);else if(e.tag===19)uk(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(kt(Xt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Uh(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Yy(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Uh(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Yy(t,!0,r,null,o);break;case"together":Yy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ko(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ya|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,r=Ds(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ds(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function wX(e,t,r){switch(t.tag){case 3:sG(t),yc();break;case 5:GO(t);break;case 1:gn(t.type)&&Xh(t);break;case 4:dA(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;kt(Vh,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(kt(Xt,Xt.current&1),t.flags|=128,null):r&t.child.childLanes?aG(e,t,r):(kt(Xt,Xt.current&1),e=Ko(e,t,r),e!==null?e.sibling:null);kt(Xt,Xt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return lG(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kt(Xt,Xt.current),n)break;return null;case 22:case 23:return t.lanes=0,iG(e,t,r)}return Ko(e,t,r)}var cG,n0,uG,dG;cG=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};n0=function(){};uG=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ta(no.current);var o=null;switch(r){case"input":i=Sv(e,i),n=Sv(e,n),o=[];break;case"select":i=Kt({},i,{value:void 0}),n=Kt({},n,{value:void 0}),o=[];break;case"textarea":i=Nv(e,i),n=Nv(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Dh)}Tv(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Id.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Id.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Rt("scroll",e),o||a===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};dG=function(e,t,r,n){r!==n&&(t.flags|=4)};function ju(e,t){if(!Zt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function _r(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function SX(e,t,r){var n=t.pendingProps;switch(iA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(t),null;case 1:return gn(t.type)&&$h(),_r(t),null;case 3:return n=t.stateNode,vc(),_t(dn),_t(Hr),fA(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(kf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bi!==null&&(d0(Bi),Bi=null))),n0(e,t),_r(t),null;case 5:gA(t);var i=Ta(jd.current);if(r=t.type,e!==null&&t.stateNode!=null)uG(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ne(166));return _r(t),null}if(e=Ta(no.current),kf(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Ji]=t,n[Bd]=o,e=(t.mode&1)!==0,r){case"dialog":Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":case"embed":Rt("load",n);break;case"video":case"audio":for(i=0;i<zu.length;i++)Rt(zu[i],n);break;case"source":Rt("error",n);break;case"img":case"image":case"link":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"input":CS(n,o),Rt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Rt("invalid",n);break;case"textarea":bS(n,o),Rt("invalid",n)}Tv(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&Sf(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Sf(n.textContent,a,e),i=["children",""+a]):Id.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Rt("scroll",n)}switch(r){case"input":If(n),vS(n,o,!0);break;case"textarea":If(n),xS(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Dh)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=HR(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Ji]=t,e[Bd]=n,cG(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ev(r,n),r){case"dialog":Rt("cancel",e),Rt("close",e),i=n;break;case"iframe":case"object":case"embed":Rt("load",e),i=n;break;case"video":case"audio":for(i=0;i<zu.length;i++)Rt(zu[i],e);i=n;break;case"source":Rt("error",e),i=n;break;case"img":case"image":case"link":Rt("error",e),Rt("load",e),i=n;break;case"details":Rt("toggle",e),i=n;break;case"input":CS(e,n),i=Sv(e,n),Rt("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Kt({},n,{value:void 0}),Rt("invalid",e);break;case"textarea":bS(e,n),i=Nv(e,n),Rt("invalid",e);break;default:i=n}Tv(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?DR(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&LR(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&yd(e,c):typeof c=="number"&&yd(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Id.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Rt("scroll",e):c!=null&&$x(e,o,c,s))}switch(r){case"input":If(e),vS(e,n,!1);break;case"textarea":If(e),xS(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vs(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Fl(e,!!n.multiple,o,!1):n.defaultValue!=null&&Fl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Dh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _r(t),null;case 6:if(e&&t.stateNode!=null)dG(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ne(166));if(r=Ta(jd.current),Ta(no.current),kf(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ji]=t,(o=n.nodeValue!==r)&&(e=jn,e!==null))switch(e.tag){case 3:Sf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sf(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ji]=t,t.stateNode=n}return _r(t),null;case 13:if(_t(Xt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zt&&Nn!==null&&t.mode&1&&!(t.flags&128))jO(),yc(),t.flags|=98560,o=!1;else if(o=kf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(ne(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[Ji]=t}else yc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_r(t),o=!1}else Bi!==null&&(d0(Bi),Bi=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Xt.current&1?cr===0&&(cr=3):SA())),t.updateQueue!==null&&(t.flags|=4),_r(t),null);case 4:return vc(),n0(e,t),e===null&&Sd(t.stateNode.containerInfo),_r(t),null;case 10:return lA(t.type._context),_r(t),null;case 17:return gn(t.type)&&$h(),_r(t),null;case 19:if(_t(Xt),o=t.memoizedState,o===null)return _r(t),null;if(n=(t.flags&128)!==0,s=o.rendering,s===null)if(n)ju(o,!1);else{if(cr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Uh(e),s!==null){for(t.flags|=128,ju(o,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return kt(Xt,Xt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Qt()>xc&&(t.flags|=128,n=!0,ju(o,!1),t.lanes=4194304)}else{if(!n)if(e=Uh(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ju(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Zt)return _r(t),null}else 2*Qt()-o.renderingStartTime>xc&&r!==1073741824&&(t.flags|=128,n=!0,ju(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(r=o.last,r!==null?r.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qt(),t.sibling=null,r=Xt.current,kt(Xt,n?r&1|2:r&1),t):(_r(t),null);case 22:case 23:return wA(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?An&1073741824&&(_r(t),t.subtreeFlags&6&&(t.flags|=8192)):_r(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function kX(e,t){switch(iA(t),t.tag){case 1:return gn(t.type)&&$h(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vc(),_t(dn),_t(Hr),fA(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gA(t),null;case 13:if(_t(Xt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));yc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _t(Xt),null;case 4:return vc(),null;case 10:return lA(t.type._context),null;case 22:case 23:return wA(),null;case 24:return null;default:return null}}var jf=!1,Mr=!1,BX=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Hl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zt(e,t,n)}else r.current=null}function i0(e,t,r){try{r()}catch(n){zt(e,t,n)}}var dk=!1;function NX(e,t){if(Wv=Hh,e=mO(),rA(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,c=-1,u=0,d=0,g=e,f=null;t:for(;;){for(var m;g!==r||i!==0&&g.nodeType!==3||(a=s+i),g!==o||n!==0&&g.nodeType!==3||(c=s+n),g.nodeType===3&&(s+=g.nodeValue.length),(m=g.firstChild)!==null;)f=g,g=m;for(;;){if(g===e)break t;if(f===r&&++u===i&&(a=s),f===o&&++d===n&&(c=s),(m=g.nextSibling)!==null)break;g=f,f=g.parentNode}g=m}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Dv={focusedElem:e,selectionRange:r},Hh=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,I=v.memoizedState,h=t.stateNode,y=h.getSnapshotBeforeUpdate(t.elementType===t.type?p:xi(t.type,p),I);h.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(x){zt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return v=dk,dk=!1,v}function ad(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&i0(t,r,o)}i=i.next}while(i!==n)}}function Zm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function o0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function gG(e){var t=e.alternate;t!==null&&(e.alternate=null,gG(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ji],delete t[Bd],delete t[Fv],delete t[uX],delete t[dX])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fG(e){return e.tag===5||e.tag===3||e.tag===4}function gk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fG(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function s0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Dh));else if(n!==4&&(e=e.child,e!==null))for(s0(e,t,r),e=e.sibling;e!==null;)s0(e,t,r),e=e.sibling}function a0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(a0(e,t,r),e=e.sibling;e!==null;)a0(e,t,r),e=e.sibling}var kr=null,ki=!1;function cs(e,t,r){for(r=r.child;r!==null;)hG(e,t,r),r=r.sibling}function hG(e,t,r){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(Tm,r)}catch{}switch(r.tag){case 5:Mr||Hl(r,t);case 6:var n=kr,i=ki;kr=null,cs(e,t,r),kr=n,ki=i,kr!==null&&(ki?(e=kr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):kr.removeChild(r.stateNode));break;case 18:kr!==null&&(ki?(e=kr,r=r.stateNode,e.nodeType===8?Dy(e.parentNode,r):e.nodeType===1&&Dy(e,r),xd(e)):Dy(kr,r.stateNode));break;case 4:n=kr,i=ki,kr=r.stateNode.containerInfo,ki=!0,cs(e,t,r),kr=n,ki=i;break;case 0:case 11:case 14:case 15:if(!Mr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&i0(r,t,s),i=i.next}while(i!==n)}cs(e,t,r);break;case 1:if(!Mr&&(Hl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){zt(r,t,a)}cs(e,t,r);break;case 21:cs(e,t,r);break;case 22:r.mode&1?(Mr=(n=Mr)||r.memoizedState!==null,cs(e,t,r),Mr=n):cs(e,t,r);break;default:cs(e,t,r)}}function fk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new BX),t.forEach(function(n){var i=MX.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function yi(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:kr=a.stateNode,ki=!1;break e;case 3:kr=a.stateNode.containerInfo,ki=!0;break e;case 4:kr=a.stateNode.containerInfo,ki=!0;break e}a=a.return}if(kr===null)throw Error(ne(160));hG(o,s,i),kr=null,ki=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){zt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pG(t,e),t=t.sibling}function pG(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yi(t,e),Xi(e),n&4){try{ad(3,e,e.return),Zm(3,e)}catch(p){zt(e,e.return,p)}try{ad(5,e,e.return)}catch(p){zt(e,e.return,p)}}break;case 1:yi(t,e),Xi(e),n&512&&r!==null&&Hl(r,r.return);break;case 5:if(yi(t,e),Xi(e),n&512&&r!==null&&Hl(r,r.return),e.flags&32){var i=e.stateNode;try{yd(i,"")}catch(p){zt(e,e.return,p)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=r!==null?r.memoizedProps:o,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&MR(i,o),Ev(a,s);var u=Ev(a,o);for(s=0;s<c.length;s+=2){var d=c[s],g=c[s+1];d==="style"?DR(i,g):d==="dangerouslySetInnerHTML"?LR(i,g):d==="children"?yd(i,g):$x(i,d,g,u)}switch(a){case"input":kv(i,o);break;case"textarea":ZR(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Fl(i,!!o.multiple,m,!1):f!==!!o.multiple&&(o.defaultValue!=null?Fl(i,!!o.multiple,o.defaultValue,!0):Fl(i,!!o.multiple,o.multiple?[]:"",!1))}i[Bd]=o}catch(p){zt(e,e.return,p)}}break;case 6:if(yi(t,e),Xi(e),n&4){if(e.stateNode===null)throw Error(ne(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(p){zt(e,e.return,p)}}break;case 3:if(yi(t,e),Xi(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xd(t.containerInfo)}catch(p){zt(e,e.return,p)}break;case 4:yi(t,e),Xi(e);break;case 13:yi(t,e),Xi(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(xA=Qt())),n&4&&fk(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Mr=(u=Mr)||d,yi(t,e),Mr=u):yi(t,e),Xi(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ie=e,d=e.child;d!==null;){for(g=Ie=d;Ie!==null;){switch(f=Ie,m=f.child,f.tag){case 0:case 11:case 14:case 15:ad(4,f,f.return);break;case 1:Hl(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){zt(n,r,p)}}break;case 5:Hl(f,f.return);break;case 22:if(f.memoizedState!==null){pk(g);continue}}m!==null?(m.return=f,Ie=m):pk(g)}d=d.sibling}e:for(d=null,g=e;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=g.stateNode,c=g.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=WR("display",s))}catch(p){zt(e,e.return,p)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(p){zt(e,e.return,p)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:yi(t,e),Xi(e),n&4&&fk(e);break;case 21:break;default:yi(t,e),Xi(e)}}function Xi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(fG(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(yd(i,""),n.flags&=-33);var o=gk(e);a0(e,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=gk(e);s0(e,a,s);break;default:throw Error(ne(161))}}catch(c){zt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jX(e,t,r){Ie=e,mG(e)}function mG(e,t,r){for(var n=(e.mode&1)!==0;Ie!==null;){var i=Ie,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||jf;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Mr;a=jf;var u=Mr;if(jf=s,(Mr=c)&&!u)for(Ie=i;Ie!==null;)s=Ie,c=s.child,s.tag===22&&s.memoizedState!==null?mk(i):c!==null?(c.return=s,Ie=c):mk(i);for(;o!==null;)Ie=o,mG(o),o=o.sibling;Ie=i,jf=a,Mr=u}hk(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ie=o):hk(e)}}function hk(e){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mr||Zm(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Mr)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:xi(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&QS(t,o,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}QS(t,s,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&xd(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Mr||t.flags&512&&o0(t)}catch(f){zt(t,t.return,f)}}if(t===e){Ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ie=r;break}Ie=t.return}}function pk(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ie=r;break}Ie=t.return}}function mk(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Zm(4,t)}catch(c){zt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){zt(t,i,c)}}var o=t.return;try{o0(t)}catch(c){zt(t,o,c)}break;case 5:var s=t.return;try{o0(t)}catch(c){zt(t,s,c)}}}catch(c){zt(t,t.return,c)}if(t===e){Ie=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ie=a;break}Ie=t.return}}var TX=Math.ceil,qh=rs.ReactCurrentDispatcher,vA=rs.ReactCurrentOwner,ii=rs.ReactCurrentBatchConfig,nt=0,yr=null,rr=null,Nr=0,An=0,Ll=na(0),cr=0,Od=null,Ya=0,Hm=0,bA=0,ld=null,an=null,xA=0,xc=1/0,xo=null,ep=!1,l0=null,Ls=null,Tf=!1,Rs=null,tp=0,cd=0,c0=null,xh=-1,Ah=0;function Ur(){return nt&6?Qt():xh!==-1?xh:xh=Qt()}function Ws(e){return e.mode&1?nt&2&&Nr!==0?Nr&-Nr:fX.transition!==null?(Ah===0&&(Ah=eO()),Ah):(e=ft,e!==0||(e=window.event,e=e===void 0?16:aO(e.type)),e):1}function Ei(e,t,r,n){if(50<cd)throw cd=0,c0=null,Error(ne(185));Zg(e,r,n),(!(nt&2)||e!==yr)&&(e===yr&&(!(nt&2)&&(Hm|=r),cr===4&&xs(e,Nr)),fn(e,n),r===1&&nt===0&&!(t.mode&1)&&(xc=Qt()+500,Pm&&ia()))}function fn(e,t){var r=e.callbackNode;f3(e,t);var n=Zh(e,e===yr?Nr:0);if(n===0)r!==null&&SS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&SS(r),t===1)e.tag===0?gX(Ik.bind(null,e)):kO(Ik.bind(null,e)),lX(function(){!(nt&6)&&ia()}),r=null;else{switch(tO(n)){case 1:r=zx;break;case 4:r=QR;break;case 16:r=Mh;break;case 536870912:r=qR;break;default:r=Mh}r=wG(r,IG.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function IG(e,t){if(xh=-1,Ah=0,nt&6)throw Error(ne(327));var r=e.callbackNode;if(Ul()&&e.callbackNode!==r)return null;var n=Zh(e,e===yr?Nr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=rp(e,n);else{t=n;var i=nt;nt|=2;var o=CG();(yr!==e||Nr!==t)&&(xo=null,xc=Qt()+500,La(e,t));do try{OX();break}catch(a){yG(e,a)}while(!0);aA(),qh.current=o,nt=i,rr!==null?t=0:(yr=null,Nr=0,t=cr)}if(t!==0){if(t===2&&(i=_v(e),i!==0&&(n=i,t=u0(e,i))),t===1)throw r=Od,La(e,0),xs(e,n),fn(e,Qt()),r;if(t===6)xs(e,n);else{if(i=e.current.alternate,!(n&30)&&!EX(i)&&(t=rp(e,n),t===2&&(o=_v(e),o!==0&&(n=o,t=u0(e,o))),t===1))throw r=Od,La(e,0),xs(e,n),fn(e,Qt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ne(345));case 2:va(e,an,xo);break;case 3:if(xs(e,n),(n&130023424)===n&&(t=xA+500-Qt(),10<t)){if(Zh(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ur(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Xv(va.bind(null,e,an,xo),t);break}va(e,an,xo);break;case 4:if(xs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Ti(n);o=1<<s,s=t[s],s>i&&(i=s),n&=~o}if(n=i,n=Qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*TX(n/1960))-n,10<n){e.timeoutHandle=Xv(va.bind(null,e,an,xo),n);break}va(e,an,xo);break;case 5:va(e,an,xo);break;default:throw Error(ne(329))}}}return fn(e,Qt()),e.callbackNode===r?IG.bind(null,e):null}function u0(e,t){var r=ld;return e.current.memoizedState.isDehydrated&&(La(e,t).flags|=256),e=rp(e,t),e!==2&&(t=an,an=r,t!==null&&d0(t)),e}function d0(e){an===null?an=e:an.push.apply(an,e)}function EX(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!_i(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xs(e,t){for(t&=~bA,t&=~Hm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ti(t),n=1<<r;e[r]=-1,t&=~n}}function Ik(e){if(nt&6)throw Error(ne(327));Ul();var t=Zh(e,0);if(!(t&1))return fn(e,Qt()),null;var r=rp(e,t);if(e.tag!==0&&r===2){var n=_v(e);n!==0&&(t=n,r=u0(e,n))}if(r===1)throw r=Od,La(e,0),xs(e,t),fn(e,Qt()),r;if(r===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,va(e,an,xo),fn(e,Qt()),null}function AA(e,t){var r=nt;nt|=1;try{return e(t)}finally{nt=r,nt===0&&(xc=Qt()+500,Pm&&ia())}}function Ua(e){Rs!==null&&Rs.tag===0&&!(nt&6)&&Ul();var t=nt;nt|=1;var r=ii.transition,n=ft;try{if(ii.transition=null,ft=1,e)return e()}finally{ft=n,ii.transition=r,nt=t,!(nt&6)&&ia()}}function wA(){An=Ll.current,_t(Ll)}function La(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,aX(r)),rr!==null)for(r=rr.return;r!==null;){var n=r;switch(iA(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$h();break;case 3:vc(),_t(dn),_t(Hr),fA();break;case 5:gA(n);break;case 4:vc();break;case 13:_t(Xt);break;case 19:_t(Xt);break;case 10:lA(n.type._context);break;case 22:case 23:wA()}r=r.return}if(yr=e,rr=e=Ds(e.current,null),Nr=An=t,cr=0,Od=null,bA=Hm=Ya=0,an=ld=null,ja!==null){for(t=0;t<ja.length;t++)if(r=ja[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}ja=null}return e}function yG(e,t){do{var r=rr;try{if(aA(),Ch.current=Qh,Jh){for(var n=Ft.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Jh=!1}if(za=0,pr=lr=Ft=null,sd=!1,Td=0,vA.current=null,r===null||r.return===null){cr=1,Od=t,rr=null;break}e:{var o=e,s=r.return,a=r,c=t;if(t=Nr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=ik(s);if(m!==null){m.flags&=-257,ok(m,s,a,o,t),m.mode&1&&nk(o,u,t),t=m,c=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(c),t.updateQueue=p}else v.add(c);break e}else{if(!(t&1)){nk(o,u,t),SA();break e}c=Error(ne(426))}}else if(Zt&&a.mode&1){var I=ik(s);if(I!==null){!(I.flags&65536)&&(I.flags|=256),ok(I,s,a,o,t),oA(bc(c,a));break e}}o=c=bc(c,a),cr!==4&&(cr=2),ld===null?ld=[o]:ld.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var h=tG(o,c,t);JS(o,h);break e;case 1:a=c;var y=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ls===null||!Ls.has(C)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=rG(o,a,t);JS(o,x);break e}}o=o.return}while(o!==null)}bG(r)}catch(A){t=A,rr===r&&r!==null&&(rr=r=r.return);continue}break}while(!0)}function CG(){var e=qh.current;return qh.current=Qh,e===null?Qh:e}function SA(){(cr===0||cr===3||cr===2)&&(cr=4),yr===null||!(Ya&268435455)&&!(Hm&268435455)||xs(yr,Nr)}function rp(e,t){var r=nt;nt|=2;var n=CG();(yr!==e||Nr!==t)&&(xo=null,La(e,t));do try{RX();break}catch(i){yG(e,i)}while(!0);if(aA(),nt=r,qh.current=n,rr!==null)throw Error(ne(261));return yr=null,Nr=0,cr}function RX(){for(;rr!==null;)vG(rr)}function OX(){for(;rr!==null&&!i3();)vG(rr)}function vG(e){var t=AG(e.alternate,e,An);e.memoizedProps=e.pendingProps,t===null?bG(e):rr=t,vA.current=null}function bG(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kX(r,t),r!==null){r.flags&=32767,rr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{cr=6,rr=null;return}}else if(r=SX(r,t,An),r!==null){rr=r;return}if(t=t.sibling,t!==null){rr=t;return}rr=t=e}while(t!==null);cr===0&&(cr=5)}function va(e,t,r){var n=ft,i=ii.transition;try{ii.transition=null,ft=1,GX(e,t,r,n)}finally{ii.transition=i,ft=n}return null}function GX(e,t,r,n){do Ul();while(Rs!==null);if(nt&6)throw Error(ne(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(h3(e,o),e===yr&&(rr=yr=null,Nr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Tf||(Tf=!0,wG(Mh,function(){return Ul(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=ii.transition,ii.transition=null;var s=ft;ft=1;var a=nt;nt|=4,vA.current=null,NX(e,r),pG(r,e),eX(Dv),Hh=!!Wv,Dv=Wv=null,e.current=r,jX(r),o3(),nt=a,ft=s,ii.transition=o}else e.current=r;if(Tf&&(Tf=!1,Rs=e,tp=i),o=e.pendingLanes,o===0&&(Ls=null),l3(r.stateNode),fn(e,Qt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(ep)throw ep=!1,e=l0,l0=null,e;return tp&1&&e.tag!==0&&Ul(),o=e.pendingLanes,o&1?e===c0?cd++:(cd=0,c0=e):cd=0,ia(),null}function Ul(){if(Rs!==null){var e=tO(tp),t=ii.transition,r=ft;try{if(ii.transition=null,ft=16>e?16:e,Rs===null)var n=!1;else{if(e=Rs,Rs=null,tp=0,nt&6)throw Error(ne(331));var i=nt;for(nt|=4,Ie=e.current;Ie!==null;){var o=Ie,s=o.child;if(Ie.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Ie=u;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:ad(8,d,o)}var g=d.child;if(g!==null)g.return=d,Ie=g;else for(;Ie!==null;){d=Ie;var f=d.sibling,m=d.return;if(gG(d),d===u){Ie=null;break}if(f!==null){f.return=m,Ie=f;break}Ie=m}}}var v=o.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var I=p.sibling;p.sibling=null,p=I}while(p!==null)}}Ie=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Ie=s;else e:for(;Ie!==null;){if(o=Ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ad(9,o,o.return)}var h=o.sibling;if(h!==null){h.return=o.return,Ie=h;break e}Ie=o.return}}var y=e.current;for(Ie=y;Ie!==null;){s=Ie;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,Ie=C;else e:for(s=y;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zm(9,a)}}catch(A){zt(a,a.return,A)}if(a===s){Ie=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ie=x;break e}Ie=a.return}}if(nt=i,ia(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(Tm,e)}catch{}n=!0}return n}finally{ft=r,ii.transition=t}}return!1}function yk(e,t,r){t=bc(r,t),t=tG(e,t,1),e=Hs(e,t,1),t=Ur(),e!==null&&(Zg(e,1,t),fn(e,t))}function zt(e,t,r){if(e.tag===3)yk(e,e,r);else for(;t!==null;){if(t.tag===3){yk(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ls===null||!Ls.has(n))){e=bc(r,e),e=rG(t,e,1),t=Hs(t,e,1),e=Ur(),t!==null&&(Zg(t,1,e),fn(t,e));break}}t=t.return}}function PX(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ur(),e.pingedLanes|=e.suspendedLanes&r,yr===e&&(Nr&r)===r&&(cr===4||cr===3&&(Nr&130023424)===Nr&&500>Qt()-xA?La(e,0):bA|=r),fn(e,t)}function xG(e,t){t===0&&(e.mode&1?(t=vf,vf<<=1,!(vf&130023424)&&(vf=4194304)):t=1);var r=Ur();e=Fo(e,t),e!==null&&(Zg(e,t,r),fn(e,r))}function _X(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),xG(e,r)}function MX(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(t),xG(e,r)}var AG;AG=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||dn.current)ln=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ln=!1,wX(e,t,r);ln=!!(e.flags&131072)}else ln=!1,Zt&&t.flags&1048576&&BO(t,Kh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;bh(e,t),e=t.pendingProps;var i=Ic(t,Hr.current);Yl(t,r),i=pA(null,t,n,e,i,r);var o=mA();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gn(n)?(o=!0,Xh(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uA(t),i.updater=Mm,t.stateNode=i,i._reactInternals=t,Jv(t,n,e,r),t=e0(null,t,n,!0,o,r)):(t.tag=0,Zt&&o&&nA(t),$r(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(bh(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=HX(n),e=xi(n,e),i){case 0:t=qv(null,t,n,e,r);break e;case 1:t=lk(null,t,n,e,r);break e;case 11:t=sk(null,t,n,e,r);break e;case 14:t=ak(null,t,n,xi(n.type,e),r);break e}throw Error(ne(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:xi(n,i),qv(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:xi(n,i),lk(e,t,n,i,r);case 3:e:{if(sG(t),e===null)throw Error(ne(387));n=t.pendingProps,o=t.memoizedState,i=o.element,OO(e,t),Yh(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=bc(Error(ne(423)),t),t=ck(e,t,n,r,i);break e}else if(n!==i){i=bc(Error(ne(424)),t),t=ck(e,t,n,r,i);break e}else for(Nn=Zs(t.stateNode.containerInfo.firstChild),jn=t,Zt=!0,Bi=null,r=EO(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yc(),n===i){t=Ko(e,t,r);break e}$r(e,t,n,r)}t=t.child}return t;case 5:return GO(t),e===null&&zv(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,$v(n,i)?s=null:o!==null&&$v(n,o)&&(t.flags|=32),oG(e,t),$r(e,t,s,r),t.child;case 6:return e===null&&zv(t),null;case 13:return aG(e,t,r);case 4:return dA(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Cc(t,null,n,r):$r(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:xi(n,i),sk(e,t,n,i,r);case 7:return $r(e,t,t.pendingProps,r),t.child;case 8:return $r(e,t,t.pendingProps.children,r),t.child;case 12:return $r(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,kt(Vh,n._currentValue),n._currentValue=s,o!==null)if(_i(o.value,s)){if(o.children===i.children&&!dn.current){t=Ko(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Mo(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Yv(o.return,r,t),a.lanes|=r;break}c=c.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ne(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),Yv(s,r,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}$r(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Yl(t,r),i=oi(i),n=n(i),t.flags|=1,$r(e,t,n,r),t.child;case 14:return n=t.type,i=xi(n,t.pendingProps),i=xi(n.type,i),ak(e,t,n,i,r);case 15:return nG(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:xi(n,i),bh(e,t),t.tag=1,gn(n)?(e=!0,Xh(t)):e=!1,Yl(t,r),eG(t,n,i),Jv(t,n,i,r),e0(null,t,n,!0,e,r);case 19:return lG(e,t,r);case 22:return iG(e,t,r)}throw Error(ne(156,t.tag))};function wG(e,t){return JR(e,t)}function ZX(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(e,t,r,n){return new ZX(e,t,r,n)}function kA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HX(e){if(typeof e=="function")return kA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fx)return 11;if(e===Kx)return 14}return 2}function Ds(e,t){var r=e.alternate;return r===null?(r=ti(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wh(e,t,r,n,i,o){var s=2;if(n=e,typeof e=="function")kA(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Tl:return Wa(r.children,i,o,t);case Xx:s=8,i|=8;break;case bv:return e=ti(12,r,t,i|2),e.elementType=bv,e.lanes=o,e;case xv:return e=ti(13,r,t,i),e.elementType=xv,e.lanes=o,e;case Av:return e=ti(19,r,t,i),e.elementType=Av,e.lanes=o,e;case GR:return Lm(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case RR:s=10;break e;case OR:s=9;break e;case Fx:s=11;break e;case Kx:s=14;break e;case Is:s=16,n=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=ti(s,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Wa(e,t,r,n){return e=ti(7,e,n,t),e.lanes=r,e}function Lm(e,t,r,n){return e=ti(22,e,n,t),e.elementType=GR,e.lanes=r,e.stateNode={isHidden:!1},e}function Uy(e,t,r){return e=ti(6,e,null,t),e.lanes=r,e}function Jy(e,t,r){return t=ti(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function LX(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ey(0),this.expirationTimes=Ey(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ey(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function BA(e,t,r,n,i,o,s,a,c){return e=new LX(e,t,r,a,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ti(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},uA(o),e}function WX(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jl,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function SG(e){if(!e)return zs;e=e._reactInternals;e:{if(ll(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var r=e.type;if(gn(r))return SO(e,r,t)}return t}function kG(e,t,r,n,i,o,s,a,c){return e=BA(r,n,!0,e,i,o,s,a,c),e.context=SG(null),r=e.current,n=Ur(),i=Ws(r),o=Mo(n,i),o.callback=t??null,Hs(r,o,i),e.current.lanes=i,Zg(e,i,n),fn(e,n),e}function Wm(e,t,r,n){var i=t.current,o=Ur(),s=Ws(i);return r=SG(r),t.context===null?t.context=r:t.pendingContext=r,t=Mo(o,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Hs(i,t,s),e!==null&&(Ei(e,i,s,o),yh(e,i,s)),s}function np(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ck(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function NA(e,t){Ck(e,t),(e=e.alternate)&&Ck(e,t)}function DX(){return null}var BG=typeof reportError=="function"?reportError:function(e){console.error(e)};function jA(e){this._internalRoot=e}Dm.prototype.render=jA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));Wm(e,t,null,null)};Dm.prototype.unmount=jA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ua(function(){Wm(null,e,null,null)}),t[Xo]=null}};function Dm(e){this._internalRoot=e}Dm.prototype.unstable_scheduleHydration=function(e){if(e){var t=iO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bs.length&&t!==0&&t<bs[r].priority;r++);bs.splice(r,0,e),r===0&&sO(e)}};function TA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vk(){}function $X(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var u=np(s);o.call(u)}}var s=kG(t,n,e,0,null,!1,!1,"",vk);return e._reactRootContainer=s,e[Xo]=s.current,Sd(e.nodeType===8?e.parentNode:e),Ua(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=np(c);a.call(u)}}var c=BA(e,0,!1,null,null,!1,!1,"",vk);return e._reactRootContainer=c,e[Xo]=c.current,Sd(e.nodeType===8?e.parentNode:e),Ua(function(){Wm(t,c,r,n)}),c}function Xm(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=np(s);a.call(c)}}Wm(t,s,e,i)}else s=$X(r,t,e,i,n);return np(s)}rO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vu(t.pendingLanes);r!==0&&(Yx(t,r|1),fn(t,Qt()),!(nt&6)&&(xc=Qt()+500,ia()))}break;case 13:Ua(function(){var n=Fo(e,1);if(n!==null){var i=Ur();Ei(n,e,1,i)}}),NA(e,1)}};Ux=function(e){if(e.tag===13){var t=Fo(e,134217728);if(t!==null){var r=Ur();Ei(t,e,134217728,r)}NA(e,134217728)}};nO=function(e){if(e.tag===13){var t=Ws(e),r=Fo(e,t);if(r!==null){var n=Ur();Ei(r,e,t,n)}NA(e,t)}};iO=function(){return ft};oO=function(e,t){var r=ft;try{return ft=e,t()}finally{ft=r}};Ov=function(e,t,r){switch(t){case"input":if(kv(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Gm(n);if(!i)throw Error(ne(90));_R(n),kv(n,i)}}}break;case"textarea":ZR(e,r);break;case"select":t=r.value,t!=null&&Fl(e,!!r.multiple,t,!1)}};FR=AA;KR=Ua;var XX={usingClientEntryPoint:!1,Events:[Lg,Gl,Gm,$R,XR,AA]},Tu={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FX={bundleType:Tu.bundleType,version:Tu.version,rendererPackageName:Tu.rendererPackageName,rendererConfig:Tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=YR(e),e===null?null:e.stateNode},findFiberByHostInstance:Tu.findFiberByHostInstance||DX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ef.isDisabled&&Ef.supportsFiber)try{Tm=Ef.inject(FX),ro=Ef}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XX;Mn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TA(t))throw Error(ne(200));return WX(e,t,null,r)};Mn.createRoot=function(e,t){if(!TA(e))throw Error(ne(299));var r=!1,n="",i=BG;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=BA(e,1,!1,null,null,r,!1,n,i),e[Xo]=t.current,Sd(e.nodeType===8?e.parentNode:e),new jA(t)};Mn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=YR(t),e=e===null?null:e.stateNode,e};Mn.flushSync=function(e){return Ua(e)};Mn.hydrate=function(e,t,r){if(!$m(t))throw Error(ne(200));return Xm(null,e,t,!0,r)};Mn.hydrateRoot=function(e,t,r){if(!TA(e))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=BG;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=kG(t,null,e,1,r??null,i,!1,o,s),e[Xo]=t.current,Sd(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Dm(t)};Mn.render=function(e,t,r){if(!$m(t))throw Error(ne(200));return Xm(null,e,t,!1,r)};Mn.unmountComponentAtNode=function(e){if(!$m(e))throw Error(ne(40));return e._reactRootContainer?(Ua(function(){Xm(null,null,e,!1,function(){e._reactRootContainer=null,e[Xo]=null})}),!0):!1};Mn.unstable_batchedUpdates=AA;Mn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$m(r))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return Xm(e,t,r,!1,n)};Mn.version="18.3.1-next-f1338f8080-20240426";function NG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NG)}catch(e){console.error(e)}}NG(),NR.exports=Mn;var Li=NR.exports;const jG=ht(Li);var TG,bk=Li;TG=bk.createRoot,bk.hydrateRoot;const KX=1,VX=1e6;let Qy=0;function zX(){return Qy=(Qy+1)%Number.MAX_SAFE_INTEGER,Qy.toString()}const qy=new Map,xk=e=>{if(qy.has(e))return;const t=setTimeout(()=>{qy.delete(e),ud({type:"REMOVE_TOAST",toastId:e})},VX);qy.set(e,t)},YX=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,KX)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?xk(r):e.toasts.forEach(n=>{xk(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Sh=[];let kh={toasts:[]};function ud(e){kh=YX(kh,e),Sh.forEach(t=>{t(kh)})}function UX({...e}){const t=zX(),r=i=>ud({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>ud({type:"DISMISS_TOAST",toastId:t});return ud({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function JX(){const[e,t]=b.useState(kh);return b.useEffect(()=>(Sh.push(t),()=>{const r=Sh.indexOf(t);r>-1&&Sh.splice(r,1)}),[e]),{...e,toast:UX,dismiss:r=>ud({type:"DISMISS_TOAST",toastId:r})}}function we(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Ak(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function EA(...e){return t=>{let r=!1;const n=e.map(i=>{const o=Ak(i,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let i=0;i<n.length;i++){const o=n[i];typeof o=="function"?o():Ak(e[i],null)}}}}function Ye(...e){return b.useCallback(EA(...e),e)}function QX(e,t){const r=b.createContext(t),n=o=>{const{children:s,...a}=o,c=b.useMemo(()=>a,Object.values(a));return l.jsx(r.Provider,{value:c,children:s})};n.displayName=e+"Provider";function i(o){const s=b.useContext(r);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,i]}function Wi(e,t=[]){let r=[];function n(o,s){const a=b.createContext(s),c=r.length;r=[...r,s];const u=g=>{var h;const{scope:f,children:m,...v}=g,p=((h=f==null?void 0:f[e])==null?void 0:h[c])||a,I=b.useMemo(()=>v,Object.values(v));return l.jsx(p.Provider,{value:I,children:m})};u.displayName=o+"Provider";function d(g,f){var p;const m=((p=f==null?void 0:f[e])==null?void 0:p[c])||a,v=b.useContext(m);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[u,d]}const i=()=>{const o=r.map(s=>b.createContext(s));return function(a){const c=(a==null?void 0:a[e])||o;return b.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return i.scopeName=e,[n,qX(i,...t)]}function qX(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=n.reduce((a,{useScope:c,scopeName:u})=>{const g=c(o)[`__scope${u}`];return{...a,...g}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}function Gd(e){const t=e5(e),r=b.forwardRef((n,i)=>{const{children:o,...s}=n,a=b.Children.toArray(o),c=a.find(r5);if(c){const u=c.props.children,d=a.map(g=>g===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:g);return l.jsx(t,{...s,ref:i,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return l.jsx(t,{...s,ref:i,children:o})});return r.displayName=`${e}.Slot`,r}function e5(e){const t=b.forwardRef((r,n)=>{const{children:i,...o}=r;if(b.isValidElement(i)){const s=i5(i),a=n5(o,i.props);return i.type!==b.Fragment&&(a.ref=n?EA(n,s):s),b.cloneElement(i,a)}return b.Children.count(i)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var EG=Symbol("radix.slottable");function t5(e){const t=({children:r})=>l.jsx(l.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=EG,t}function r5(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===EG}function n5(e,t){const r={...t};for(const n in t){const i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...a)=>{const c=o(...a);return i(...a),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}function i5(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function RA(e){const t=e+"CollectionProvider",[r,n]=Wi(t),[i,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:I,children:h}=p,y=H.useRef(null),C=H.useRef(new Map).current;return l.jsx(i,{scope:I,itemMap:C,collectionRef:y,children:h})};s.displayName=t;const a=e+"CollectionSlot",c=Gd(a),u=H.forwardRef((p,I)=>{const{scope:h,children:y}=p,C=o(a,h),x=Ye(I,C.collectionRef);return l.jsx(c,{ref:x,children:y})});u.displayName=a;const d=e+"CollectionItemSlot",g="data-radix-collection-item",f=Gd(d),m=H.forwardRef((p,I)=>{const{scope:h,children:y,...C}=p,x=H.useRef(null),A=Ye(I,x),w=o(d,h);return H.useEffect(()=>(w.itemMap.set(x,{ref:x,...C}),()=>void w.itemMap.delete(x))),l.jsx(f,{[g]:"",ref:A,children:y})});m.displayName=d;function v(p){const I=o(e+"CollectionConsumer",p);return H.useCallback(()=>{const y=I.collectionRef.current;if(!y)return[];const C=Array.from(y.querySelectorAll(`[${g}]`));return Array.from(I.itemMap.values()).sort((w,S)=>C.indexOf(w.ref.current)-C.indexOf(S.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:s,Slot:u,ItemSlot:m},v,n]}var o5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Te=o5.reduce((e,t)=>{const r=Gd(`Primitive.${t}`),n=b.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function RG(e,t){e&&Li.flushSync(()=>e.dispatchEvent(t))}function nr(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function s5(e,t=globalThis==null?void 0:globalThis.document){const r=nr(e);b.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var a5="DismissableLayer",g0="dismissableLayer.update",l5="dismissableLayer.pointerDownOutside",c5="dismissableLayer.focusOutside",wk,OG=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dg=b.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...c}=e,u=b.useContext(OG),[d,g]=b.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),v=Ye(t,S=>g(S)),p=Array.from(u.layers),[I]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),h=p.indexOf(I),y=d?p.indexOf(d):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,x=y>=h,A=d5(S=>{const k=S.target,R=[...u.branches].some(j=>j.contains(k));!x||R||(i==null||i(S),s==null||s(S),S.defaultPrevented||a==null||a())},f),w=g5(S=>{const k=S.target;[...u.branches].some(j=>j.contains(k))||(o==null||o(S),s==null||s(S),S.defaultPrevented||a==null||a())},f);return s5(S=>{y===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),b.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(wk=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Sk(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=wk)}},[d,f,r,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Sk())},[d,u]),b.useEffect(()=>{const S=()=>m({});return document.addEventListener(g0,S),()=>document.removeEventListener(g0,S)},[]),l.jsx(Te.div,{...c,ref:v,style:{pointerEvents:C?x?"auto":"none":void 0,...e.style},onFocusCapture:we(e.onFocusCapture,w.onFocusCapture),onBlurCapture:we(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:we(e.onPointerDownCapture,A.onPointerDownCapture)})});Dg.displayName=a5;var u5="DismissableLayerBranch",GG=b.forwardRef((e,t)=>{const r=b.useContext(OG),n=b.useRef(null),i=Ye(t,n);return b.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),l.jsx(Te.div,{...e,ref:i})});GG.displayName=u5;function d5(e,t=globalThis==null?void 0:globalThis.document){const r=nr(e),n=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const o=a=>{if(a.target&&!n.current){let c=function(){PG(l5,r,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function g5(e,t=globalThis==null?void 0:globalThis.document){const r=nr(e),n=b.useRef(!1);return b.useEffect(()=>{const i=o=>{o.target&&!n.current&&PG(c5,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Sk(){const e=new CustomEvent(g0);document.dispatchEvent(e)}function PG(e,t,r,{discrete:n}){const i=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?RG(i,o):i.dispatchEvent(o)}var f5=Dg,h5=GG,er=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},p5="Portal",Fm=b.forwardRef((e,t)=>{var a;const{container:r,...n}=e,[i,o]=b.useState(!1);er(()=>o(!0),[]);const s=r||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?jG.createPortal(l.jsx(Te.div,{...n,ref:t}),s):null});Fm.displayName=p5;function m5(e,t){return b.useReducer((r,n)=>t[r][n]??r,e)}var ci=e=>{const{present:t,children:r}=e,n=I5(t),i=typeof r=="function"?r({present:n.isPresent}):b.Children.only(r),o=Ye(n.ref,y5(i));return typeof r=="function"||n.isPresent?b.cloneElement(i,{ref:o}):null};ci.displayName="Presence";function I5(e){const[t,r]=b.useState(),n=b.useRef(null),i=b.useRef(e),o=b.useRef("none"),s=e?"mounted":"unmounted",[a,c]=m5(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=Rf(n.current);o.current=a==="mounted"?u:"none"},[a]),er(()=>{const u=n.current,d=i.current;if(d!==e){const f=o.current,m=Rf(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),er(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,g=m=>{const p=Rf(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&p&&(c("ANIMATION_END"),!i.current)){const I=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=I)})}},f=m=>{m.target===t&&(o.current=Rf(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",g),t.addEventListener("animationend",g),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",g),t.removeEventListener("animationend",g)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Rf(e){return(e==null?void 0:e.animationName)||"none"}function y5(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var C5=jm[" useInsertionEffect ".trim().toString()]||er;function Ys({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,o,s]=v5({defaultProp:t,onChange:r}),a=e!==void 0,c=a?e:i;{const d=b.useRef(e!==void 0);b.useEffect(()=>{const g=d.current;g!==a&&console.warn(`${n} is changing from ${g?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,n])}const u=b.useCallback(d=>{var g;if(a){const f=b5(d)?d(e):d;f!==e&&((g=s.current)==null||g.call(s,f))}else o(d)},[a,e,o,s]);return[c,u]}function v5({defaultProp:e,onChange:t}){const[r,n]=b.useState(e),i=b.useRef(r),o=b.useRef(t);return C5(()=>{o.current=t},[t]),b.useEffect(()=>{var s;i.current!==r&&((s=o.current)==null||s.call(o,r),i.current=r)},[r,i]),[r,n,o]}function b5(e){return typeof e=="function"}var _G=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),x5="VisuallyHidden",Km=b.forwardRef((e,t)=>l.jsx(Te.span,{...e,ref:t,style:{..._G,...e.style}}));Km.displayName=x5;var A5=Km,OA="ToastProvider",[GA,w5,S5]=RA("Toast"),[MG]=Wi("Toast",[S5]),[k5,Vm]=MG(OA),ZG=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=e,[a,c]=b.useState(null),[u,d]=b.useState(0),g=b.useRef(!1),f=b.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${OA}\`. Expected non-empty \`string\`.`),l.jsx(GA.Provider,{scope:t,children:l.jsx(k5,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:o,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:b.useCallback(()=>d(m=>m+1),[]),onToastRemove:b.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:f,children:s})})};ZG.displayName=OA;var HG="ToastViewport",B5=["F8"],f0="toast.viewportPause",h0="toast.viewportResume",LG=b.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=B5,label:i="Notifications ({hotkey})",...o}=e,s=Vm(HG,r),a=w5(r),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),g=b.useRef(null),f=Ye(t,g,s.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=s.toastCount>0;b.useEffect(()=>{const I=h=>{var C;n.length!==0&&n.every(x=>h[x]||h.code===x)&&((C=g.current)==null||C.focus())};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[n]),b.useEffect(()=>{const I=c.current,h=g.current;if(v&&I&&h){const y=()=>{if(!s.isClosePausedRef.current){const w=new CustomEvent(f0);h.dispatchEvent(w),s.isClosePausedRef.current=!0}},C=()=>{if(s.isClosePausedRef.current){const w=new CustomEvent(h0);h.dispatchEvent(w),s.isClosePausedRef.current=!1}},x=w=>{!I.contains(w.relatedTarget)&&C()},A=()=>{I.contains(document.activeElement)||C()};return I.addEventListener("focusin",y),I.addEventListener("focusout",x),I.addEventListener("pointermove",y),I.addEventListener("pointerleave",A),window.addEventListener("blur",y),window.addEventListener("focus",C),()=>{I.removeEventListener("focusin",y),I.removeEventListener("focusout",x),I.removeEventListener("pointermove",y),I.removeEventListener("pointerleave",A),window.removeEventListener("blur",y),window.removeEventListener("focus",C)}}},[v,s.isClosePausedRef]);const p=b.useCallback(({tabbingDirection:I})=>{const y=a().map(C=>{const x=C.ref.current,A=[x,...L5(x)];return I==="forwards"?A:A.reverse()});return(I==="forwards"?y.reverse():y).flat()},[a]);return b.useEffect(()=>{const I=g.current;if(I){const h=y=>{var A,w,S;const C=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!C){const k=document.activeElement,R=y.shiftKey;if(y.target===I&&R){(A=u.current)==null||A.focus();return}const O=p({tabbingDirection:R?"backwards":"forwards"}),P=O.findIndex(N=>N===k);eC(O.slice(P+1))?y.preventDefault():R?(w=u.current)==null||w.focus():(S=d.current)==null||S.focus()}};return I.addEventListener("keydown",h),()=>I.removeEventListener("keydown",h)}},[a,p]),l.jsxs(h5,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&l.jsx(p0,{ref:u,onFocusFromOutsideViewport:()=>{const I=p({tabbingDirection:"forwards"});eC(I)}}),l.jsx(GA.Slot,{scope:r,children:l.jsx(Te.ol,{tabIndex:-1,...o,ref:f})}),v&&l.jsx(p0,{ref:d,onFocusFromOutsideViewport:()=>{const I=p({tabbingDirection:"backwards"});eC(I)}})]})});LG.displayName=HG;var WG="ToastFocusProxy",p0=b.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,o=Vm(WG,r);return l.jsx(Km,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:s=>{var u;const a=s.relatedTarget;!((u=o.viewport)!=null&&u.contains(a))&&n()}})});p0.displayName=WG;var $g="Toast",N5="toast.swipeStart",j5="toast.swipeMove",T5="toast.swipeCancel",E5="toast.swipeEnd",DG=b.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:o,...s}=e,[a,c]=Ys({prop:n,defaultProp:i??!0,onChange:o,caller:$g});return l.jsx(ci,{present:r||a,children:l.jsx(G5,{open:a,...s,ref:t,onClose:()=>c(!1),onPause:nr(e.onPause),onResume:nr(e.onResume),onSwipeStart:we(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:we(e.onSwipeMove,u=>{const{x:d,y:g}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:we(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:we(e.onSwipeEnd,u=>{const{x:d,y:g}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),c(!1)})})})});DG.displayName=$g;var[R5,O5]=MG($g,{onClose(){}}),G5=b.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:g,onSwipeCancel:f,onSwipeEnd:m,...v}=e,p=Vm($g,r),[I,h]=b.useState(null),y=Ye(t,N=>h(N)),C=b.useRef(null),x=b.useRef(null),A=i||p.duration,w=b.useRef(0),S=b.useRef(A),k=b.useRef(0),{onToastAdd:R,onToastRemove:j}=p,_=nr(()=>{var B;(I==null?void 0:I.contains(document.activeElement))&&((B=p.viewport)==null||B.focus()),s()}),O=b.useCallback(N=>{!N||N===1/0||(window.clearTimeout(k.current),w.current=new Date().getTime(),k.current=window.setTimeout(_,N))},[_]);b.useEffect(()=>{const N=p.viewport;if(N){const B=()=>{O(S.current),u==null||u()},E=()=>{const M=new Date().getTime()-w.current;S.current=S.current-M,window.clearTimeout(k.current),c==null||c()};return N.addEventListener(f0,E),N.addEventListener(h0,B),()=>{N.removeEventListener(f0,E),N.removeEventListener(h0,B)}}},[p.viewport,A,c,u,O]),b.useEffect(()=>{o&&!p.isClosePausedRef.current&&O(A)},[o,A,p.isClosePausedRef,O]),b.useEffect(()=>(R(),()=>j()),[R,j]);const P=b.useMemo(()=>I?YG(I):null,[I]);return p.viewport?l.jsxs(l.Fragment,{children:[P&&l.jsx(P5,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:P}),l.jsx(R5,{scope:r,onClose:_,children:Li.createPortal(l.jsx(GA.ItemSlot,{scope:r,children:l.jsx(f5,{asChild:!0,onEscapeKeyDown:we(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||_(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(Te.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:we(e.onKeyDown,N=>{N.key==="Escape"&&(a==null||a(N.nativeEvent),N.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:we(e.onPointerDown,N=>{N.button===0&&(C.current={x:N.clientX,y:N.clientY})}),onPointerMove:we(e.onPointerMove,N=>{if(!C.current)return;const B=N.clientX-C.current.x,E=N.clientY-C.current.y,M=!!x.current,G=["left","right"].includes(p.swipeDirection),T=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,L=G?T(0,B):0,W=G?0:T(0,E),X=N.pointerType==="touch"?10:2,V={x:L,y:W},z={originalEvent:N,delta:V};M?(x.current=V,Of(j5,g,z,{discrete:!1})):kk(V,p.swipeDirection,X)?(x.current=V,Of(N5,d,z,{discrete:!1}),N.target.setPointerCapture(N.pointerId)):(Math.abs(B)>X||Math.abs(E)>X)&&(C.current=null)}),onPointerUp:we(e.onPointerUp,N=>{const B=x.current,E=N.target;if(E.hasPointerCapture(N.pointerId)&&E.releasePointerCapture(N.pointerId),x.current=null,C.current=null,B){const M=N.currentTarget,G={originalEvent:N,delta:B};kk(B,p.swipeDirection,p.swipeThreshold)?Of(E5,m,G,{discrete:!0}):Of(T5,f,G,{discrete:!0}),M.addEventListener("click",T=>T.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),P5=e=>{const{__scopeToast:t,children:r,...n}=e,i=Vm($g,t),[o,s]=b.useState(!1),[a,c]=b.useState(!1);return Z5(()=>s(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:l.jsx(Fm,{asChild:!0,children:l.jsx(Km,{...n,children:o&&l.jsxs(l.Fragment,{children:[i.label," ",r]})})})},_5="ToastTitle",$G=b.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return l.jsx(Te.div,{...n,ref:t})});$G.displayName=_5;var M5="ToastDescription",XG=b.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return l.jsx(Te.div,{...n,ref:t})});XG.displayName=M5;var FG="ToastAction",KG=b.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?l.jsx(zG,{altText:r,asChild:!0,children:l.jsx(PA,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${FG}\`. Expected non-empty \`string\`.`),null)});KG.displayName=FG;var VG="ToastClose",PA=b.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=O5(VG,r);return l.jsx(zG,{asChild:!0,children:l.jsx(Te.button,{type:"button",...n,ref:t,onClick:we(e.onClick,i.onClose)})})});PA.displayName=VG;var zG=b.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return l.jsx(Te.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function YG(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),H5(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=n.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...YG(n))}}),t}function Of(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?RG(i,o):i.dispatchEvent(o)}var kk=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),o=n>i;return t==="left"||t==="right"?o&&n>r:!o&&i>r};function Z5(e=()=>{}){const t=nr(e);er(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function H5(e){return e.nodeType===e.ELEMENT_NODE}function L5(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function eC(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var W5=ZG,UG=LG,JG=DG,QG=$G,qG=XG,eP=KG,tP=PA;function rP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=rP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function rt(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=rP(e))&&(n&&(n+=" "),n+=t);return n}const Bk=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Nk=rt,Xg=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Nk(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],g=o==null?void 0:o[u];if(d===null)return null;const f=Bk(d)||Bk(g);return i[u][f]}),a=r&&Object.entries(r).reduce((u,d)=>{let[g,f]=d;return f===void 0||(u[g]=f),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:g,className:f,...m}=d;return Object.entries(m).every(v=>{let[p,I]=v;return Array.isArray(I)?I.includes({...o,...a}[p]):{...o,...a}[p]===I})?[...u,g,f]:u},[]);return Nk(e,s,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nP=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:s,...a},c)=>b.createElement("svg",{ref:c,...$5,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:nP("lucide",i),...a},[...s.map(([u,d])=>b.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(e,t)=>{const r=b.forwardRef(({className:n,...i},o)=>b.createElement(X5,{ref:o,iconNode:t,className:nP(`lucide-${D5(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=ge("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=ge("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=ge("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=ge("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=ge("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=ge("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=ge("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=ge("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=ge("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=ge("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=ge("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=ge("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=ge("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=ge("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=ge("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ge("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=ge("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=ge("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=ge("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=ge("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=ge("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=ge("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=ge("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=ge("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=ge("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=ge("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=ge("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=ge("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=ge("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=ge("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=ge("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=ge("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=ge("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=ge("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=ge("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ge("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=ge("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=ge("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=ge("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=ge("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ge("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=ge("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=ge("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=ge("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),DA="-",vF=e=>{const t=xF(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:s=>{const a=s.split(DA);return a[0]===""&&a.length!==1&&a.shift(),uP(a,t)||bF(s)},getConflictingClassGroupIds:(s,a)=>{const c=r[s]||[];return a&&n[s]?[...c,...n[s]]:c}}},uP=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?uP(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(DA);return(s=t.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},Ek=/^\[(.+)\]$/,bF=e=>{if(Ek.test(e)){const t=Ek.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},xF=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return wF(Object.entries(e.classGroups),r).forEach(([o,s])=>{C0(s,n,o,t)}),n},C0=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:Rk(t,i);o.classGroupId=r;return}if(typeof i=="function"){if(AF(i)){C0(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,s])=>{C0(s,Rk(t,o),r,n)})})},Rk=(e,t)=>{let r=e;return t.split(DA).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},AF=e=>e.isThemeGetter,wF=(e,t)=>t?e.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[t+s,a])):o);return[r,i]}):e,SF=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(o,s)=>{r.set(o,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let s=r.get(o);if(s!==void 0)return s;if((s=n.get(o))!==void 0)return i(o,s),s},set(o,s){r.has(o)?r.set(o,s):i(o,s)}}},dP="!",kF=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],o=t.length,s=a=>{const c=[];let u=0,d=0,g;for(let I=0;I<a.length;I++){let h=a[I];if(u===0){if(h===i&&(n||a.slice(I,I+o)===t)){c.push(a.slice(d,I)),d=I+o;continue}if(h==="/"){g=I;continue}}h==="["?u++:h==="]"&&u--}const f=c.length===0?a:a.substring(d),m=f.startsWith(dP),v=m?f.substring(1):f,p=g&&g>d?g-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:p}};return r?a=>r({className:a,parseClassName:s}):s},BF=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},NF=e=>({cache:SF(e.cacheSize),parseClassName:kF(e),...vF(e)}),jF=/\s+/,TF=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,o=[],s=e.trim().split(jF);let a="";for(let c=s.length-1;c>=0;c-=1){const u=s[c],{modifiers:d,hasImportantModifier:g,baseClassName:f,maybePostfixModifierPosition:m}=r(u);let v=!!m,p=n(v?f.substring(0,m):f);if(!p){if(!v){a=u+(a.length>0?" "+a:a);continue}if(p=n(f),!p){a=u+(a.length>0?" "+a:a);continue}v=!1}const I=BF(d).join(":"),h=g?I+dP:I,y=h+p;if(o.includes(y))continue;o.push(y);const C=i(p,v);for(let x=0;x<C.length;++x){const A=C[x];o.push(h+A)}a=u+(a.length>0?" "+a:a)}return a};function EF(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=gP(t))&&(n&&(n+=" "),n+=r);return n}const gP=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=gP(e[n]))&&(r&&(r+=" "),r+=t);return r};function RF(e,...t){let r,n,i,o=s;function s(c){const u=t.reduce((d,g)=>g(d),e());return r=NF(u),n=r.cache.get,i=r.cache.set,o=a,a(c)}function a(c){const u=n(c);if(u)return u;const d=TF(c,r);return i(c,d),d}return function(){return o(EF.apply(null,arguments))}}const Et=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},fP=/^\[(?:([a-z-]+):)?(.+)\]$/i,OF=/^\d+\/\d+$/,GF=new Set(["px","full","screen"]),PF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_F=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ZF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,HF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Co=e=>Ql(e)||GF.has(e)||OF.test(e),us=e=>ou(e,"length",VF),Ql=e=>!!e&&!Number.isNaN(Number(e)),rC=e=>ou(e,"number",Ql),Eu=e=>!!e&&Number.isInteger(Number(e)),LF=e=>e.endsWith("%")&&Ql(e.slice(0,-1)),Le=e=>fP.test(e),ds=e=>PF.test(e),WF=new Set(["length","size","percentage"]),DF=e=>ou(e,WF,hP),$F=e=>ou(e,"position",hP),XF=new Set(["image","url"]),FF=e=>ou(e,XF,YF),KF=e=>ou(e,"",zF),Ru=()=>!0,ou=(e,t,r)=>{const n=fP.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},VF=e=>_F.test(e)&&!MF.test(e),hP=()=>!1,zF=e=>ZF.test(e),YF=e=>HF.test(e),UF=()=>{const e=Et("colors"),t=Et("spacing"),r=Et("blur"),n=Et("brightness"),i=Et("borderColor"),o=Et("borderRadius"),s=Et("borderSpacing"),a=Et("borderWidth"),c=Et("contrast"),u=Et("grayscale"),d=Et("hueRotate"),g=Et("invert"),f=Et("gap"),m=Et("gradientColorStops"),v=Et("gradientColorStopPositions"),p=Et("inset"),I=Et("margin"),h=Et("opacity"),y=Et("padding"),C=Et("saturate"),x=Et("scale"),A=Et("sepia"),w=Et("skew"),S=Et("space"),k=Et("translate"),R=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",Le,t],O=()=>[Le,t],P=()=>["",Co,us],N=()=>["auto",Ql,Le],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],E=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],T=()=>["","0",Le],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Ql,Le];return{cacheSize:500,separator:":",theme:{colors:[Ru],spacing:[Co,us],blur:["none","",ds,Le],brightness:W(),borderColor:[e],borderRadius:["none","","full",ds,Le],borderSpacing:O(),borderWidth:P(),contrast:W(),grayscale:T(),hueRotate:W(),invert:T(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[LF,us],inset:_(),margin:_(),opacity:W(),padding:O(),saturate:W(),scale:W(),sepia:T(),skew:W(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[ds]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Le]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Eu,Le]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Eu,Le]}],"grid-cols":[{"grid-cols":[Ru]}],"col-start-end":[{col:["auto",{span:["full",Eu,Le]},Le]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[Ru]}],"row-start-end":[{row:["auto",{span:[Eu,Le]},Le]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,t]}],"min-w":[{"min-w":[Le,t,"min","max","fit"]}],"max-w":[{"max-w":[Le,t,"none","full","min","max","fit","prose",{screen:[ds]},ds]}],h:[{h:[Le,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ds,us]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rC]}],"font-family":[{font:[Ru]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",Ql,rC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Co,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[h]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[h]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...E(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Co,us]}],"underline-offset":[{"underline-offset":["auto",Co,Le]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[h]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),$F]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",DF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},FF]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[h]}],"border-style":[{border:[...E(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[h]}],"divide-style":[{divide:E()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...E()]}],"outline-offset":[{"outline-offset":[Co,Le]}],"outline-w":[{outline:[Co,us]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[h]}],"ring-offset-w":[{"ring-offset":[Co,us]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ds,KF]}],"shadow-color":[{shadow:[Ru]}],opacity:[{opacity:[h]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ds,Le]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[g]}],saturate:[{saturate:[C]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[h]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Eu,Le]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Co,us,rC]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},JF=RF(UF);function de(...e){return JF(rt(e))}const QF=W5,pP=b.forwardRef(({className:e,...t},r)=>l.jsx(UG,{ref:r,className:de("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));pP.displayName=UG.displayName;const qF=Xg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),mP=b.forwardRef(({className:e,variant:t,...r},n)=>l.jsx(JG,{ref:n,className:de(qF({variant:t}),e),...r}));mP.displayName=JG.displayName;const eK=b.forwardRef(({className:e,...t},r)=>l.jsx(eP,{ref:r,className:de("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));eK.displayName=eP.displayName;const IP=b.forwardRef(({className:e,...t},r)=>l.jsx(tP,{ref:r,className:de("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:l.jsx(Cr,{className:"h-4 w-4"})}));IP.displayName=tP.displayName;const yP=b.forwardRef(({className:e,...t},r)=>l.jsx(QG,{ref:r,className:de("text-sm font-semibold",e),...t}));yP.displayName=QG.displayName;const CP=b.forwardRef(({className:e,...t},r)=>l.jsx(qG,{ref:r,className:de("text-sm opacity-90",e),...t}));CP.displayName=qG.displayName;function tK(){const{toasts:e}=JX();return l.jsxs(QF,{children:[e.map(function({id:t,title:r,description:n,action:i,...o}){return l.jsxs(mP,{...o,children:[l.jsxs("div",{className:"grid gap-1",children:[r&&l.jsx(yP,{children:r}),n&&l.jsx(CP,{children:n})]}),i,l.jsx(IP,{})]},t)}),l.jsx(pP,{})]})}var Ok=["light","dark"],rK="(prefers-color-scheme: dark)",nK=b.createContext(void 0),iK={setTheme:e=>{},themes:[]},oK=()=>{var e;return(e=b.useContext(nK))!=null?e:iK};b.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:o,value:s,attrs:a,nonce:c})=>{let u=o==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,g=i?Ok.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,p=!1,I=!0)=>{let h=s?s[v]:v,y=p?v+"|| ''":`'${h}'`,C="";return i&&I&&!p&&Ok.includes(v)&&(C+=`d.style.colorScheme = '${v}';`),r==="class"?p||h?C+=`c.add(${y})`:C+="null":h&&(C+=`d[s](n,${y})`),C},m=e?`!function(){${d}${f(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${rK}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${f(s?"x[e]":"e",!0)}}${u?"":"else{"+f(o,!1,!1)+"}"}${g}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${f(s?"x[e]":"e",!0)}}else{${f(o,!1,!1)};}${g}}catch(t){}}();`;return b.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var sK=e=>{switch(e){case"success":return cK;case"info":return dK;case"warning":return uK;case"error":return gK;default:return null}},aK=Array(12).fill(0),lK=({visible:e,className:t})=>H.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},H.createElement("div",{className:"sonner-spinner"},aK.map((r,n)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),cK=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),uK=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),dK=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),gK=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fK=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),hK=()=>{let[e,t]=H.useState(document.hidden);return H.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},v0=1,pK=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:v0++,o=this.toasts.find(a=>a.id===i),s=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...e,id:i,title:r}),{...a,...e,id:i,dismissible:s,title:r}):a):this.addToast({title:r,...n,dismissible:s,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),i=r!==void 0,o,s=n.then(async c=>{if(o=["resolve",c],H.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(IK(c)&&!c.ok){i=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){i=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){i=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),a=()=>new Promise((c,u)=>s.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:a}:Object.assign(r,{unwrap:a})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||v0++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},sn=new pK,mK=(e,t)=>{let r=(t==null?void 0:t.id)||v0++;return sn.addToast({title:e,...t,id:r}),r},IK=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",yK=mK,CK=()=>sn.toasts,vK=()=>sn.getActiveToasts(),ml=Object.assign(yK,{success:sn.success,info:sn.info,warning:sn.warning,error:sn.error,custom:sn.custom,message:sn.message,promise:sn.promise,dismiss:sn.dismiss,loading:sn.loading},{getHistory:CK,getToasts:vK});function bK(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}bK(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Pf(e){return e.label!==void 0}var xK=3,AK="32px",wK="16px",Gk=4e3,SK=356,kK=14,BK=20,NK=200;function Ci(...e){return e.filter(Boolean).join(" ")}function jK(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var TK=e=>{var t,r,n,i,o,s,a,c,u,d,g;let{invert:f,toast:m,unstyled:v,interacting:p,setHeights:I,visibleToasts:h,heights:y,index:C,toasts:x,expanded:A,removeToast:w,defaultRichColors:S,closeButton:k,style:R,cancelButtonStyle:j,actionButtonStyle:_,className:O="",descriptionClassName:P="",duration:N,position:B,gap:E,loadingIcon:M,expandByDefault:G,classNames:T,icons:L,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:X}=e,[V,z]=H.useState(null),[ee,D]=H.useState(null),[F,Z]=H.useState(!1),[$,J]=H.useState(!1),[U,K]=H.useState(!1),[re,ce]=H.useState(!1),[Me,Ee]=H.useState(!1),[Ke,Nt]=H.useState(0),[te,he]=H.useState(0),Ze=H.useRef(m.duration||N||Gk),se=H.useRef(null),ae=H.useRef(null),He=C===0,Ue=C+1<=h,vt=m.type,jt=m.dismissible!==!1,Lr=m.className||"",bt=m.descriptionClassName||"",rn=H.useMemo(()=>y.findIndex(ve=>ve.toastId===m.id)||0,[y,m.id]),Wr=H.useMemo(()=>{var ve;return(ve=m.closeButton)!=null?ve:k},[m.closeButton,k]),br=H.useMemo(()=>m.duration||N||Gk,[m.duration,N]),Jt=H.useRef(0),Rr=H.useRef(0),xt=H.useRef(0),xr=H.useRef(null),[Ar,Y]=B.split("-"),Se=H.useMemo(()=>y.reduce((ve,Ge,xe)=>xe>=rn?ve:ve+Ge.height,0),[y,rn]),Be=hK(),ke=m.invert||f,be=vt==="loading";Rr.current=H.useMemo(()=>rn*E+Se,[rn,Se]),H.useEffect(()=>{Ze.current=br},[br]),H.useEffect(()=>{Z(!0)},[]),H.useEffect(()=>{let ve=ae.current;if(ve){let Ge=ve.getBoundingClientRect().height;return he(Ge),I(xe=>[{toastId:m.id,height:Ge,position:m.position},...xe]),()=>I(xe=>xe.filter(Wt=>Wt.toastId!==m.id))}},[I,m.id]),H.useLayoutEffect(()=>{if(!F)return;let ve=ae.current,Ge=ve.style.height;ve.style.height="auto";let xe=ve.getBoundingClientRect().height;ve.style.height=Ge,he(xe),I(Wt=>Wt.find(Tt=>Tt.toastId===m.id)?Wt.map(Tt=>Tt.toastId===m.id?{...Tt,height:xe}:Tt):[{toastId:m.id,height:xe,position:m.position},...Wt])},[F,m.title,m.description,I,m.id]);let Je=H.useCallback(()=>{J(!0),Nt(Rr.current),I(ve=>ve.filter(Ge=>Ge.toastId!==m.id)),setTimeout(()=>{w(m)},NK)},[m,w,I,Rr]);H.useEffect(()=>{if(m.promise&&vt==="loading"||m.duration===1/0||m.type==="loading")return;let ve;return A||p||X&&Be?(()=>{if(xt.current<Jt.current){let Ge=new Date().getTime()-Jt.current;Ze.current=Ze.current-Ge}xt.current=new Date().getTime()})():Ze.current!==1/0&&(Jt.current=new Date().getTime(),ve=setTimeout(()=>{var Ge;(Ge=m.onAutoClose)==null||Ge.call(m,m),Je()},Ze.current)),()=>clearTimeout(ve)},[A,p,m,vt,X,Be,Je]),H.useEffect(()=>{m.delete&&Je()},[Je,m.delete]);function Lt(){var ve,Ge,xe;return L!=null&&L.loading?H.createElement("div",{className:Ci(T==null?void 0:T.loader,(ve=m==null?void 0:m.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":vt==="loading"},L.loading):M?H.createElement("div",{className:Ci(T==null?void 0:T.loader,(Ge=m==null?void 0:m.classNames)==null?void 0:Ge.loader,"sonner-loader"),"data-visible":vt==="loading"},M):H.createElement(lK,{className:Ci(T==null?void 0:T.loader,(xe=m==null?void 0:m.classNames)==null?void 0:xe.loader),visible:vt==="loading"})}return H.createElement("li",{tabIndex:0,ref:ae,className:Ci(O,Lr,T==null?void 0:T.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,T==null?void 0:T.default,T==null?void 0:T[vt],(r=m==null?void 0:m.classNames)==null?void 0:r[vt]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:S,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":F,"data-promise":!!m.promise,"data-swiped":Me,"data-removed":$,"data-visible":Ue,"data-y-position":Ar,"data-x-position":Y,"data-index":C,"data-front":He,"data-swiping":U,"data-dismissible":jt,"data-type":vt,"data-invert":ke,"data-swipe-out":re,"data-swipe-direction":ee,"data-expanded":!!(A||G&&F),style:{"--index":C,"--toasts-before":C,"--z-index":x.length-C,"--offset":`${$?Ke:Rr.current}px`,"--initial-height":G?"auto":`${te}px`,...R,...m.style},onDragEnd:()=>{K(!1),z(null),xr.current=null},onPointerDown:ve=>{be||!jt||(se.current=new Date,Nt(Rr.current),ve.target.setPointerCapture(ve.pointerId),ve.target.tagName!=="BUTTON"&&(K(!0),xr.current={x:ve.clientX,y:ve.clientY}))},onPointerUp:()=>{var ve,Ge,xe,Wt;if(re||!jt)return;xr.current=null;let Tt=Number(((ve=ae.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Or=Number(((Ge=ae.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vn=new Date().getTime()-((xe=se.current)==null?void 0:xe.getTime()),nn=V==="x"?Tt:Or,mi=Math.abs(nn)/vn;if(Math.abs(nn)>=BK||mi>.11){Nt(Rr.current),(Wt=m.onDismiss)==null||Wt.call(m,m),D(V==="x"?Tt>0?"right":"left":Or>0?"down":"up"),Je(),ce(!0),Ee(!1);return}K(!1),z(null)},onPointerMove:ve=>{var Ge,xe,Wt,Tt;if(!xr.current||!jt||((Ge=window.getSelection())==null?void 0:Ge.toString().length)>0)return;let Or=ve.clientY-xr.current.y,vn=ve.clientX-xr.current.x,nn=(xe=e.swipeDirections)!=null?xe:jK(B);!V&&(Math.abs(vn)>1||Math.abs(Or)>1)&&z(Math.abs(vn)>Math.abs(Or)?"x":"y");let mi={x:0,y:0};V==="y"?(nn.includes("top")||nn.includes("bottom"))&&(nn.includes("top")&&Or<0||nn.includes("bottom")&&Or>0)&&(mi.y=Or):V==="x"&&(nn.includes("left")||nn.includes("right"))&&(nn.includes("left")&&vn<0||nn.includes("right")&&vn>0)&&(mi.x=vn),(Math.abs(mi.x)>0||Math.abs(mi.y)>0)&&Ee(!0),(Wt=ae.current)==null||Wt.style.setProperty("--swipe-amount-x",`${mi.x}px`),(Tt=ae.current)==null||Tt.style.setProperty("--swipe-amount-y",`${mi.y}px`)}},Wr&&!m.jsx?H.createElement("button",{"aria-label":W,"data-disabled":be,"data-close-button":!0,onClick:be||!jt?()=>{}:()=>{var ve;Je(),(ve=m.onDismiss)==null||ve.call(m,m)},className:Ci(T==null?void 0:T.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(o=L==null?void 0:L.close)!=null?o:fK):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:H.createElement(H.Fragment,null,vt||m.icon||m.promise?H.createElement("div",{"data-icon":"",className:Ci(T==null?void 0:T.icon,(s=m==null?void 0:m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Lt():null,m.type!=="loading"?m.icon||(L==null?void 0:L[vt])||sK(vt):null):null,H.createElement("div",{"data-content":"",className:Ci(T==null?void 0:T.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},H.createElement("div",{"data-title":"",className:Ci(T==null?void 0:T.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?H.createElement("div",{"data-description":"",className:Ci(P,bt,T==null?void 0:T.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&Pf(m.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||j,onClick:ve=>{var Ge,xe;Pf(m.cancel)&&jt&&((xe=(Ge=m.cancel).onClick)==null||xe.call(Ge,ve),Je())},className:Ci(T==null?void 0:T.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&Pf(m.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||_,onClick:ve=>{var Ge,xe;Pf(m.action)&&((xe=(Ge=m.action).onClick)==null||xe.call(Ge,ve),!ve.defaultPrevented&&Je())},className:Ci(T==null?void 0:T.actionButton,(g=m==null?void 0:m.classNames)==null?void 0:g.actionButton)},m.action.label):null))};function Pk(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function EK(e,t){let r={};return[e,t].forEach((n,i)=>{let o=i===1,s=o?"--mobile-offset":"--offset",a=o?wK:AK;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${s}-${u}`]=a:r[`${s}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(a)}),r}var RK=b.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:a,offset:c,mobileOffset:u,theme:d="light",richColors:g,duration:f,style:m,visibleToasts:v=xK,toastOptions:p,dir:I=Pk(),gap:h=kK,loadingIcon:y,icons:C,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:A}=e,[w,S]=H.useState([]),k=H.useMemo(()=>Array.from(new Set([n].concat(w.filter(X=>X.position).map(X=>X.position)))),[w,n]),[R,j]=H.useState([]),[_,O]=H.useState(!1),[P,N]=H.useState(!1),[B,E]=H.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=H.useRef(null),G=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=H.useRef(null),L=H.useRef(!1),W=H.useCallback(X=>{S(V=>{var z;return(z=V.find(ee=>ee.id===X.id))!=null&&z.delete||sn.dismiss(X.id),V.filter(({id:ee})=>ee!==X.id)})},[]);return H.useEffect(()=>sn.subscribe(X=>{if(X.dismiss){S(V=>V.map(z=>z.id===X.id?{...z,delete:!0}:z));return}setTimeout(()=>{jG.flushSync(()=>{S(V=>{let z=V.findIndex(ee=>ee.id===X.id);return z!==-1?[...V.slice(0,z),{...V[z],...X},...V.slice(z+1)]:[X,...V]})})})}),[]),H.useEffect(()=>{if(d!=="system"){E(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?E("dark"):E("light")),typeof window>"u")return;let X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:V})=>{E(V?"dark":"light")})}catch{X.addListener(({matches:z})=>{try{E(z?"dark":"light")}catch(ee){console.error(ee)}})}},[d]),H.useEffect(()=>{w.length<=1&&O(!1)},[w]),H.useEffect(()=>{let X=V=>{var z,ee;i.every(D=>V[D]||V.code===D)&&(O(!0),(z=M.current)==null||z.focus()),V.code==="Escape"&&(document.activeElement===M.current||(ee=M.current)!=null&&ee.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),H.useEffect(()=>{if(M.current)return()=>{T.current&&(T.current.focus({preventScroll:!0}),T.current=null,L.current=!1)}},[M.current]),H.createElement("section",{ref:t,"aria-label":`${x} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((X,V)=>{var z;let[ee,D]=X.split("-");return w.length?H.createElement("ol",{key:X,dir:I==="auto"?Pk():I,tabIndex:-1,ref:M,className:a,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":ee,"data-lifted":_&&w.length>1&&!o,"data-x-position":D,style:{"--front-toast-height":`${((z=R[0])==null?void 0:z.height)||0}px`,"--width":`${SK}px`,"--gap":`${h}px`,...m,...EK(c,u)},onBlur:F=>{L.current&&!F.currentTarget.contains(F.relatedTarget)&&(L.current=!1,T.current&&(T.current.focus({preventScroll:!0}),T.current=null))},onFocus:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||L.current||(L.current=!0,T.current=F.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{P||O(!1)},onDragEnd:()=>O(!1),onPointerDown:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||N(!0)},onPointerUp:()=>N(!1)},w.filter(F=>!F.position&&V===0||F.position===X).map((F,Z)=>{var $,J;return H.createElement(TK,{key:F.id,icons:C,index:Z,toast:F,defaultRichColors:g,duration:($=p==null?void 0:p.duration)!=null?$:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:r,visibleToasts:v,closeButton:(J=p==null?void 0:p.closeButton)!=null?J:s,interacting:P,position:X,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:W,toasts:w.filter(U=>U.position==F.position),heights:R.filter(U=>U.position==F.position),setHeights:j,expandByDefault:o,gap:h,loadingIcon:y,expanded:_,pauseWhenPageIsHidden:A,swipeDirections:e.swipeDirections})})):null}))});const OK=({...e})=>{const{theme:t="system"}=oK();return l.jsx(RK,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var GK=jm[" useId ".trim().toString()]||(()=>{}),PK=0;function $s(e){const[t,r]=b.useState(GK());return er(()=>{r(n=>n??String(PK++))},[e]),t?`radix-${t}`:""}const _K=["top","right","bottom","left"],Js=Math.min,wn=Math.max,ap=Math.round,_f=Math.floor,oo=e=>({x:e,y:e}),MK={left:"right",right:"left",bottom:"top",top:"bottom"},ZK={start:"end",end:"start"};function b0(e,t,r){return wn(e,Js(t,r))}function zo(e,t){return typeof e=="function"?e(t):e}function Yo(e){return e.split("-")[0]}function su(e){return e.split("-")[1]}function $A(e){return e==="x"?"y":"x"}function XA(e){return e==="y"?"height":"width"}const HK=new Set(["top","bottom"]);function qi(e){return HK.has(Yo(e))?"y":"x"}function FA(e){return $A(qi(e))}function LK(e,t,r){r===void 0&&(r=!1);const n=su(e),i=FA(e),o=XA(i);let s=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=lp(s)),[s,lp(s)]}function WK(e){const t=lp(e);return[x0(e),t,x0(t)]}function x0(e){return e.replace(/start|end/g,t=>ZK[t])}const _k=["left","right"],Mk=["right","left"],DK=["top","bottom"],$K=["bottom","top"];function XK(e,t,r){switch(e){case"top":case"bottom":return r?t?Mk:_k:t?_k:Mk;case"left":case"right":return t?DK:$K;default:return[]}}function FK(e,t,r,n){const i=su(e);let o=XK(Yo(e),r==="start",n);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(x0)))),o}function lp(e){return e.replace(/left|right|bottom|top/g,t=>MK[t])}function KK(e){return{top:0,right:0,bottom:0,left:0,...e}}function vP(e){return typeof e!="number"?KK(e):{top:e,right:e,bottom:e,left:e}}function cp(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function Zk(e,t,r){let{reference:n,floating:i}=e;const o=qi(t),s=FA(t),a=XA(s),c=Yo(t),u=o==="y",d=n.x+n.width/2-i.width/2,g=n.y+n.height/2-i.height/2,f=n[a]/2-i[a]/2;let m;switch(c){case"top":m={x:d,y:n.y-i.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:g};break;case"left":m={x:n.x-i.width,y:g};break;default:m={x:n.x,y:n.y}}switch(su(t)){case"start":m[s]-=f*(r&&u?-1:1);break;case"end":m[s]+=f*(r&&u?-1:1);break}return m}const VK=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:s}=r,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:g}=Zk(u,n,c),f=n,m={},v=0;for(let p=0;p<a.length;p++){const{name:I,fn:h}=a[p],{x:y,y:C,data:x,reset:A}=await h({x:d,y:g,initialPlacement:n,placement:f,strategy:i,middlewareData:m,rects:u,platform:s,elements:{reference:e,floating:t}});d=y??d,g=C??g,m={...m,[I]:{...m[I],...x}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(f=A.placement),A.rects&&(u=A.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):A.rects),{x:d,y:g}=Zk(u,f,c)),p=-1)}return{x:d,y:g,placement:f,strategy:i,middlewareData:m}};async function Zd(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:o,rects:s,elements:a,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:g="floating",altBoundary:f=!1,padding:m=0}=zo(t,e),v=vP(m),I=a[f?g==="floating"?"reference":"floating":g],h=cp(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(I)))==null||r?I:I.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),y=g==="floating"?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),x=await(o.isElement==null?void 0:o.isElement(C))?await(o.getScale==null?void 0:o.getScale(C))||{x:1,y:1}:{x:1,y:1},A=cp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:C,strategy:c}):y);return{top:(h.top-A.top+v.top)/x.y,bottom:(A.bottom-h.bottom+v.bottom)/x.y,left:(h.left-A.left+v.left)/x.x,right:(A.right-h.right+v.right)/x.x}}const zK=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:o,platform:s,elements:a,middlewareData:c}=t,{element:u,padding:d=0}=zo(e,t)||{};if(u==null)return{};const g=vP(d),f={x:r,y:n},m=FA(i),v=XA(m),p=await s.getDimensions(u),I=m==="y",h=I?"top":"left",y=I?"bottom":"right",C=I?"clientHeight":"clientWidth",x=o.reference[v]+o.reference[m]-f[m]-o.floating[v],A=f[m]-o.reference[m],w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let S=w?w[C]:0;(!S||!await(s.isElement==null?void 0:s.isElement(w)))&&(S=a.floating[C]||o.floating[v]);const k=x/2-A/2,R=S/2-p[v]/2-1,j=Js(g[h],R),_=Js(g[y],R),O=j,P=S-p[v]-_,N=S/2-p[v]/2+k,B=b0(O,N,P),E=!c.arrow&&su(i)!=null&&N!==B&&o.reference[v]/2-(N<O?j:_)-p[v]/2<0,M=E?N<O?N-O:N-P:0;return{[m]:f[m]+M,data:{[m]:B,centerOffset:N-B-M,...E&&{alignmentOffset:M}},reset:E}}}),YK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:g=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...I}=zo(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const h=Yo(i),y=qi(a),C=Yo(a)===a,x=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=f||(C||!p?[lp(a)]:WK(a)),w=v!=="none";!f&&w&&A.push(...FK(a,p,v,x));const S=[a,...A],k=await Zd(t,I),R=[];let j=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&R.push(k[h]),g){const N=LK(i,s,x);R.push(k[N[0]],k[N[1]])}if(j=[...j,{placement:i,overflows:R}],!R.every(N=>N<=0)){var _,O;const N=(((_=o.flip)==null?void 0:_.index)||0)+1,B=S[N];if(B&&(!(g==="alignment"?y!==qi(B):!1)||j.every(G=>qi(G.placement)===y?G.overflows[0]>0:!0)))return{data:{index:N,overflows:j},reset:{placement:B}};let E=(O=j.filter(M=>M.overflows[0]<=0).sort((M,G)=>M.overflows[1]-G.overflows[1])[0])==null?void 0:O.placement;if(!E)switch(m){case"bestFit":{var P;const M=(P=j.filter(G=>{if(w){const T=qi(G.placement);return T===y||T==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(T=>T>0).reduce((T,L)=>T+L,0)]).sort((G,T)=>G[1]-T[1])[0])==null?void 0:P[0];M&&(E=M);break}case"initialPlacement":E=a;break}if(i!==E)return{reset:{placement:E}}}return{}}}};function Hk(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Lk(e){return _K.some(t=>e[t]>=0)}const UK=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=zo(e,t);switch(n){case"referenceHidden":{const o=await Zd(t,{...i,elementContext:"reference"}),s=Hk(o,r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Lk(s)}}}case"escaped":{const o=await Zd(t,{...i,altBoundary:!0}),s=Hk(o,r.floating);return{data:{escapedOffsets:s,escaped:Lk(s)}}}default:return{}}}}},bP=new Set(["left","top"]);async function JK(e,t){const{placement:r,platform:n,elements:i}=e,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),s=Yo(r),a=su(r),c=qi(r)==="y",u=bP.has(s)?-1:1,d=o&&c?-1:1,g=zo(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const QK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:o,placement:s,middlewareData:a}=t,c=await JK(t,e);return s===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},qK=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:I=>{let{x:h,y}=I;return{x:h,y}}},...c}=zo(e,t),u={x:r,y:n},d=await Zd(t,c),g=qi(Yo(i)),f=$A(g);let m=u[f],v=u[g];if(o){const I=f==="y"?"top":"left",h=f==="y"?"bottom":"right",y=m+d[I],C=m-d[h];m=b0(y,m,C)}if(s){const I=g==="y"?"top":"left",h=g==="y"?"bottom":"right",y=v+d[I],C=v-d[h];v=b0(y,v,C)}const p=a.fn({...t,[f]:m,[g]:v});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[f]:o,[g]:s}}}}}},eV=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=zo(e,t),d={x:r,y:n},g=qi(i),f=$A(g);let m=d[f],v=d[g];const p=zo(a,t),I=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const C=f==="y"?"height":"width",x=o.reference[f]-o.floating[C]+I.mainAxis,A=o.reference[f]+o.reference[C]-I.mainAxis;m<x?m=x:m>A&&(m=A)}if(u){var h,y;const C=f==="y"?"width":"height",x=bP.has(Yo(i)),A=o.reference[g]-o.floating[C]+(x&&((h=s.offset)==null?void 0:h[g])||0)+(x?0:I.crossAxis),w=o.reference[g]+o.reference[C]+(x?0:((y=s.offset)==null?void 0:y[g])||0)-(x?I.crossAxis:0);v<A?v=A:v>w&&(v=w)}return{[f]:m,[g]:v}}}},tV=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:c=()=>{},...u}=zo(e,t),d=await Zd(t,u),g=Yo(i),f=su(i),m=qi(i)==="y",{width:v,height:p}=o.floating;let I,h;g==="top"||g==="bottom"?(I=g,h=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(h=g,I=f==="end"?"top":"bottom");const y=p-d.top-d.bottom,C=v-d.left-d.right,x=Js(p-d[I],y),A=Js(v-d[h],C),w=!t.middlewareData.shift;let S=x,k=A;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=C),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=y),w&&!f){const j=wn(d.left,0),_=wn(d.right,0),O=wn(d.top,0),P=wn(d.bottom,0);m?k=v-2*(j!==0||_!==0?j+_:wn(d.left,d.right)):S=p-2*(O!==0||P!==0?O+P:wn(d.top,d.bottom))}await c({...t,availableWidth:k,availableHeight:S});const R=await s.getDimensions(a.floating);return v!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function Qm(){return typeof window<"u"}function au(e){return xP(e)?(e.nodeName||"").toLowerCase():"#document"}function En(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function po(e){var t;return(t=(xP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xP(e){return Qm()?e instanceof Node||e instanceof En(e).Node:!1}function Mi(e){return Qm()?e instanceof Element||e instanceof En(e).Element:!1}function go(e){return Qm()?e instanceof HTMLElement||e instanceof En(e).HTMLElement:!1}function Wk(e){return!Qm()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof En(e).ShadowRoot}const rV=new Set(["inline","contents"]);function Vg(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=Zi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!rV.has(i)}const nV=new Set(["table","td","th"]);function iV(e){return nV.has(au(e))}const oV=[":popover-open",":modal"];function qm(e){return oV.some(t=>{try{return e.matches(t)}catch{return!1}})}const sV=["transform","translate","scale","rotate","perspective"],aV=["transform","translate","scale","rotate","perspective","filter"],lV=["paint","layout","strict","content"];function KA(e){const t=VA(),r=Mi(e)?Zi(e):e;return sV.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||aV.some(n=>(r.willChange||"").includes(n))||lV.some(n=>(r.contain||"").includes(n))}function cV(e){let t=Qs(e);for(;go(t)&&!Ac(t);){if(KA(t))return t;if(qm(t))return null;t=Qs(t)}return null}function VA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uV=new Set(["html","body","#document"]);function Ac(e){return uV.has(au(e))}function Zi(e){return En(e).getComputedStyle(e)}function eI(e){return Mi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qs(e){if(au(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wk(e)&&e.host||po(e);return Wk(t)?t.host:t}function AP(e){const t=Qs(e);return Ac(t)?e.ownerDocument?e.ownerDocument.body:e.body:go(t)&&Vg(t)?t:AP(t)}function Hd(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=AP(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),s=En(i);if(o){const a=A0(s);return t.concat(s,s.visualViewport||[],Vg(i)?i:[],a&&r?Hd(a):[])}return t.concat(i,Hd(i,[],r))}function A0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function wP(e){const t=Zi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=go(e),o=i?e.offsetWidth:r,s=i?e.offsetHeight:n,a=ap(r)!==o||ap(n)!==s;return a&&(r=o,n=s),{width:r,height:n,$:a}}function zA(e){return Mi(e)?e:e.contextElement}function ql(e){const t=zA(e);if(!go(t))return oo(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:o}=wP(t);let s=(o?ap(r.width):r.width)/n,a=(o?ap(r.height):r.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const dV=oo(0);function SP(e){const t=En(e);return!VA()||!t.visualViewport?dV:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gV(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==En(e)?!1:t}function qa(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=zA(e);let s=oo(1);t&&(n?Mi(n)&&(s=ql(n)):s=ql(e));const a=gV(o,r,n)?SP(o):oo(0);let c=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,d=i.width/s.x,g=i.height/s.y;if(o){const f=En(o),m=n&&Mi(n)?En(n):n;let v=f,p=A0(v);for(;p&&n&&m!==v;){const I=ql(p),h=p.getBoundingClientRect(),y=Zi(p),C=h.left+(p.clientLeft+parseFloat(y.paddingLeft))*I.x,x=h.top+(p.clientTop+parseFloat(y.paddingTop))*I.y;c*=I.x,u*=I.y,d*=I.x,g*=I.y,c+=C,u+=x,v=En(p),p=A0(v)}}return cp({width:d,height:g,x:c,y:u})}function tI(e,t){const r=eI(e).scrollLeft;return t?t.left+r:qa(po(e)).left+r}function kP(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-tI(e,r),i=r.top+t.scrollTop;return{x:n,y:i}}function fV(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const o=i==="fixed",s=po(n),a=t?qm(t.floating):!1;if(n===s||a&&o)return r;let c={scrollLeft:0,scrollTop:0},u=oo(1);const d=oo(0),g=go(n);if((g||!g&&!o)&&((au(n)!=="body"||Vg(s))&&(c=eI(n)),go(n))){const m=qa(n);u=ql(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const f=s&&!g&&!o?kP(s,c):oo(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-c.scrollTop*u.y+d.y+f.y}}function hV(e){return Array.from(e.getClientRects())}function pV(e){const t=po(e),r=eI(e),n=e.ownerDocument.body,i=wn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=wn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-r.scrollLeft+tI(e);const a=-r.scrollTop;return Zi(n).direction==="rtl"&&(s+=wn(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:s,y:a}}const Dk=25;function mV(e,t){const r=En(e),n=po(e),i=r.visualViewport;let o=n.clientWidth,s=n.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;const d=VA();(!d||d&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}const u=tI(n);if(u<=0){const d=n.ownerDocument,g=d.body,f=getComputedStyle(g),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,v=Math.abs(n.clientWidth-g.clientWidth-m);v<=Dk&&(o-=v)}else u<=Dk&&(o+=u);return{width:o,height:s,x:a,y:c}}const IV=new Set(["absolute","fixed"]);function yV(e,t){const r=qa(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=go(e)?ql(e):oo(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,c=i*o.x,u=n*o.y;return{width:s,height:a,x:c,y:u}}function $k(e,t,r){let n;if(t==="viewport")n=mV(e,r);else if(t==="document")n=pV(po(e));else if(Mi(t))n=yV(t,r);else{const i=SP(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return cp(n)}function BP(e,t){const r=Qs(e);return r===t||!Mi(r)||Ac(r)?!1:Zi(r).position==="fixed"||BP(r,t)}function CV(e,t){const r=t.get(e);if(r)return r;let n=Hd(e,[],!1).filter(a=>Mi(a)&&au(a)!=="body"),i=null;const o=Zi(e).position==="fixed";let s=o?Qs(e):e;for(;Mi(s)&&!Ac(s);){const a=Zi(s),c=KA(s);!c&&a.position==="fixed"&&(i=null),(o?!c&&!i:!c&&a.position==="static"&&!!i&&IV.has(i.position)||Vg(s)&&!c&&BP(e,s))?n=n.filter(d=>d!==s):i=a,s=Qs(s)}return t.set(e,n),n}function vV(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const s=[...r==="clippingAncestors"?qm(t)?[]:CV(t,this._c):[].concat(r),n],a=s[0],c=s.reduce((u,d)=>{const g=$k(t,d,i);return u.top=wn(g.top,u.top),u.right=Js(g.right,u.right),u.bottom=Js(g.bottom,u.bottom),u.left=wn(g.left,u.left),u},$k(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function bV(e){const{width:t,height:r}=wP(e);return{width:t,height:r}}function xV(e,t,r){const n=go(t),i=po(t),o=r==="fixed",s=qa(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const c=oo(0);function u(){c.x=tI(i)}if(n||!n&&!o)if((au(t)!=="body"||Vg(i))&&(a=eI(t)),n){const m=qa(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else i&&u();o&&!n&&i&&u();const d=i&&!n&&!o?kP(i,a):oo(0),g=s.left+a.scrollLeft-c.x-d.x,f=s.top+a.scrollTop-c.y-d.y;return{x:g,y:f,width:s.width,height:s.height}}function nC(e){return Zi(e).position==="static"}function Xk(e,t){if(!go(e)||Zi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return po(e)===r&&(r=r.ownerDocument.body),r}function NP(e,t){const r=En(e);if(qm(e))return r;if(!go(e)){let i=Qs(e);for(;i&&!Ac(i);){if(Mi(i)&&!nC(i))return i;i=Qs(i)}return r}let n=Xk(e,t);for(;n&&iV(n)&&nC(n);)n=Xk(n,t);return n&&Ac(n)&&nC(n)&&!KA(n)?r:n||cV(e)||r}const AV=async function(e){const t=this.getOffsetParent||NP,r=this.getDimensions,n=await r(e.floating);return{reference:xV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function wV(e){return Zi(e).direction==="rtl"}const SV={convertOffsetParentRelativeRectToViewportRelativeRect:fV,getDocumentElement:po,getClippingRect:vV,getOffsetParent:NP,getElementRects:AV,getClientRects:hV,getDimensions:bV,getScale:ql,isElement:Mi,isRTL:wV};function jP(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function kV(e,t){let r=null,n;const i=po(e);function o(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function s(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:g,width:f,height:m}=u;if(a||t(),!f||!m)return;const v=_f(g),p=_f(i.clientWidth-(d+f)),I=_f(i.clientHeight-(g+m)),h=_f(d),C={rootMargin:-v+"px "+-p+"px "+-I+"px "+-h+"px",threshold:wn(0,Js(1,c))||1};let x=!0;function A(w){const S=w[0].intersectionRatio;if(S!==c){if(!x)return s();S?s(!1,S):n=setTimeout(()=>{s(!1,1e-7)},1e3)}S===1&&!jP(u,e.getBoundingClientRect())&&s(),x=!1}try{r=new IntersectionObserver(A,{...C,root:i.ownerDocument})}catch{r=new IntersectionObserver(A,C)}r.observe(e)}return s(!0),o}function BV(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=zA(e),d=i||o?[...u?Hd(u):[],...Hd(t)]:[];d.forEach(h=>{i&&h.addEventListener("scroll",r,{passive:!0}),o&&h.addEventListener("resize",r)});const g=u&&a?kV(u,r):null;let f=-1,m=null;s&&(m=new ResizeObserver(h=>{let[y]=h;y&&y.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let v,p=c?qa(e):null;c&&I();function I(){const h=qa(e);p&&!jP(p,h)&&r(),p=h,v=requestAnimationFrame(I)}return r(),()=>{var h;d.forEach(y=>{i&&y.removeEventListener("scroll",r),o&&y.removeEventListener("resize",r)}),g==null||g(),(h=m)==null||h.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const NV=QK,jV=qK,TV=YK,EV=tV,RV=UK,Fk=zK,OV=eV,GV=(e,t,r)=>{const n=new Map,i={platform:SV,...r},o={...i.platform,_c:n};return VK(e,t,{...i,platform:o})};var PV=typeof document<"u",_V=function(){},Bh=PV?b.useLayoutEffect:_V;function up(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!up(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&e.$$typeof)&&!up(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function TP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Kk(e,t){const r=TP(e);return Math.round(t*r)/r}function iC(e){const t=b.useRef(e);return Bh(()=>{t.current=e}),t}function MV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:c,open:u}=e,[d,g]=b.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=b.useState(n);up(f,n)||m(n);const[v,p]=b.useState(null),[I,h]=b.useState(null),y=b.useCallback(G=>{G!==w.current&&(w.current=G,p(G))},[]),C=b.useCallback(G=>{G!==S.current&&(S.current=G,h(G))},[]),x=o||v,A=s||I,w=b.useRef(null),S=b.useRef(null),k=b.useRef(d),R=c!=null,j=iC(c),_=iC(i),O=iC(u),P=b.useCallback(()=>{if(!w.current||!S.current)return;const G={placement:t,strategy:r,middleware:f};_.current&&(G.platform=_.current),GV(w.current,S.current,G).then(T=>{const L={...T,isPositioned:O.current!==!1};N.current&&!up(k.current,L)&&(k.current=L,Li.flushSync(()=>{g(L)}))})},[f,t,r,_,O]);Bh(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,g(G=>({...G,isPositioned:!1})))},[u]);const N=b.useRef(!1);Bh(()=>(N.current=!0,()=>{N.current=!1}),[]),Bh(()=>{if(x&&(w.current=x),A&&(S.current=A),x&&A){if(j.current)return j.current(x,A,P);P()}},[x,A,P,j,R]);const B=b.useMemo(()=>({reference:w,floating:S,setReference:y,setFloating:C}),[y,C]),E=b.useMemo(()=>({reference:x,floating:A}),[x,A]),M=b.useMemo(()=>{const G={position:r,left:0,top:0};if(!E.floating)return G;const T=Kk(E.floating,d.x),L=Kk(E.floating,d.y);return a?{...G,transform:"translate("+T+"px, "+L+"px)",...TP(E.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:T,top:L}},[r,a,E.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:P,refs:B,elements:E,floatingStyles:M}),[d,P,B,E,M])}const ZV=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Fk({element:n.current,padding:i}).fn(r):{}:n?Fk({element:n,padding:i}).fn(r):{}}}},HV=(e,t)=>({...NV(e),options:[e,t]}),LV=(e,t)=>({...jV(e),options:[e,t]}),WV=(e,t)=>({...OV(e),options:[e,t]}),DV=(e,t)=>({...TV(e),options:[e,t]}),$V=(e,t)=>({...EV(e),options:[e,t]}),XV=(e,t)=>({...RV(e),options:[e,t]}),FV=(e,t)=>({...ZV(e),options:[e,t]});var KV="Arrow",EP=b.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...o}=e;return l.jsx(Te.svg,{...o,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});EP.displayName=KV;var VV=EP;function YA(e){const[t,r]=b.useState(void 0);return er(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;s=u.inlineSize,a=u.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var UA="Popper",[RP,rI]=Wi(UA),[zV,OP]=RP(UA),GP=e=>{const{__scopePopper:t,children:r}=e,[n,i]=b.useState(null);return l.jsx(zV,{scope:t,anchor:n,onAnchorChange:i,children:r})};GP.displayName=UA;var PP="PopperAnchor",_P=b.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,o=OP(PP,r),s=b.useRef(null),a=Ye(t,s),c=b.useRef(null);return b.useEffect(()=>{const u=c.current;c.current=(n==null?void 0:n.current)||s.current,u!==c.current&&o.onAnchorChange(c.current)}),n?null:l.jsx(Te.div,{...i,ref:a})});_P.displayName=PP;var JA="PopperContent",[YV,UV]=RP(JA),MP=b.forwardRef((e,t)=>{var F,Z,$,J,U,K;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:g="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,...p}=e,I=OP(JA,r),[h,y]=b.useState(null),C=Ye(t,re=>y(re)),[x,A]=b.useState(null),w=YA(x),S=(w==null?void 0:w.width)??0,k=(w==null?void 0:w.height)??0,R=n+(o!=="center"?"-"+o:""),j=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},_=Array.isArray(u)?u:[u],O=_.length>0,P={padding:j,boundary:_.filter(QV),altBoundary:O},{refs:N,floatingStyles:B,placement:E,isPositioned:M,middlewareData:G}=MV({strategy:"fixed",placement:R,whileElementsMounted:(...re)=>BV(...re,{animationFrame:m==="always"}),elements:{reference:I.anchor},middleware:[HV({mainAxis:i+k,alignmentAxis:s}),c&&LV({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?WV():void 0,...P}),c&&DV({...P}),$V({...P,apply:({elements:re,rects:ce,availableWidth:Me,availableHeight:Ee})=>{const{width:Ke,height:Nt}=ce.reference,te=re.floating.style;te.setProperty("--radix-popper-available-width",`${Me}px`),te.setProperty("--radix-popper-available-height",`${Ee}px`),te.setProperty("--radix-popper-anchor-width",`${Ke}px`),te.setProperty("--radix-popper-anchor-height",`${Nt}px`)}}),x&&FV({element:x,padding:a}),qV({arrowWidth:S,arrowHeight:k}),f&&XV({strategy:"referenceHidden",...P})]}),[T,L]=LP(E),W=nr(v);er(()=>{M&&(W==null||W())},[M,W]);const X=(F=G.arrow)==null?void 0:F.x,V=(Z=G.arrow)==null?void 0:Z.y,z=(($=G.arrow)==null?void 0:$.centerOffset)!==0,[ee,D]=b.useState();return er(()=>{h&&D(window.getComputedStyle(h).zIndex)},[h]),l.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:M?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(J=G.transformOrigin)==null?void 0:J.x,(U=G.transformOrigin)==null?void 0:U.y].join(" "),...((K=G.hide)==null?void 0:K.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:l.jsx(YV,{scope:r,placedSide:T,onArrowChange:A,arrowX:X,arrowY:V,shouldHideArrow:z,children:l.jsx(Te.div,{"data-side":T,"data-align":L,...p,ref:C,style:{...p.style,animation:M?void 0:"none"}})})})});MP.displayName=JA;var ZP="PopperArrow",JV={top:"bottom",right:"left",bottom:"top",left:"right"},HP=b.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,o=UV(ZP,n),s=JV[o.placedSide];return l.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:l.jsx(VV,{...i,ref:r,style:{...i.style,display:"block"}})})});HP.displayName=ZP;function QV(e){return e!==null}var qV=e=>({name:"transformOrigin",options:e,fn(t){var I,h,y;const{placement:r,rects:n,middlewareData:i}=t,s=((I=i.arrow)==null?void 0:I.centerOffset)!==0,a=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[u,d]=LP(r),g={start:"0%",center:"50%",end:"100%"}[d],f=(((h=i.arrow)==null?void 0:h.x)??0)+a/2,m=(((y=i.arrow)==null?void 0:y.y)??0)+c/2;let v="",p="";return u==="bottom"?(v=s?g:`${f}px`,p=`${-c}px`):u==="top"?(v=s?g:`${f}px`,p=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,p=s?g:`${m}px`):u==="left"&&(v=`${n.floating.width+c}px`,p=s?g:`${m}px`),{data:{x:v,y:p}}}});function LP(e){const[t,r="center"]=e.split("-");return[t,r]}var ez=GP,WP=_P,DP=MP,$P=HP,[nI]=Wi("Tooltip",[rI]),QA=rI(),XP="TooltipProvider",tz=700,Vk="tooltip.open",[rz,FP]=nI(XP),KP=e=>{const{__scopeTooltip:t,delayDuration:r=tz,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:o}=e,s=b.useRef(!0),a=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(rz,{scope:t,isOpenDelayedRef:s,delayDuration:r,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),s.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(u=>{a.current=u},[]),disableHoverableContent:i,children:o})};KP.displayName=XP;var VP="Tooltip",[HBe,iI]=nI(VP),w0="TooltipTrigger",nz=b.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=iI(w0,r),o=FP(w0,r),s=QA(r),a=b.useRef(null),c=Ye(t,a,i.onTriggerChange),u=b.useRef(!1),d=b.useRef(!1),g=b.useCallback(()=>u.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),l.jsx(WP,{asChild:!0,...s,children:l.jsx(Te.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:we(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:we(e.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:we(e.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:we(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:we(e.onBlur,i.onClose),onClick:we(e.onClick,i.onClose)})})});nz.displayName=w0;var iz="TooltipPortal",[LBe,oz]=nI(iz,{forceMount:void 0}),wc="TooltipContent",zP=b.forwardRef((e,t)=>{const r=oz(wc,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...o}=e,s=iI(wc,e.__scopeTooltip);return l.jsx(ci,{present:n||s.open,children:s.disableHoverableContent?l.jsx(YP,{side:i,...o,ref:t}):l.jsx(sz,{side:i,...o,ref:t})})}),sz=b.forwardRef((e,t)=>{const r=iI(wc,e.__scopeTooltip),n=FP(wc,e.__scopeTooltip),i=b.useRef(null),o=Ye(t,i),[s,a]=b.useState(null),{trigger:c,onClose:u}=r,d=i.current,{onPointerInTransitChange:g}=n,f=b.useCallback(()=>{a(null),g(!1)},[g]),m=b.useCallback((v,p)=>{const I=v.currentTarget,h={x:v.clientX,y:v.clientY},y=dz(h,I.getBoundingClientRect()),C=gz(h,y),x=fz(p.getBoundingClientRect()),A=pz([...C,...x]);a(A),g(!0)},[g]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(c&&d){const v=I=>m(I,d),p=I=>m(I,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",p)}}},[c,d,m,f]),b.useEffect(()=>{if(s){const v=p=>{const I=p.target,h={x:p.clientX,y:p.clientY},y=(c==null?void 0:c.contains(I))||(d==null?void 0:d.contains(I)),C=!hz(h,s);y?f():C&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,s,u,f]),l.jsx(YP,{...e,ref:o})}),[az,lz]=nI(VP,{isInside:!1}),cz=t5("TooltipContent"),YP=b.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:s,...a}=e,c=iI(wc,r),u=QA(r),{onClose:d}=c;return b.useEffect(()=>(document.addEventListener(Vk,d),()=>document.removeEventListener(Vk,d)),[d]),b.useEffect(()=>{if(c.trigger){const g=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[c.trigger,d]),l.jsx(Dg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:g=>g.preventDefault(),onDismiss:d,children:l.jsxs(DP,{"data-state":c.stateAttribute,...u,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(cz,{children:n}),l.jsx(az,{scope:r,isInside:!0,children:l.jsx(A5,{id:c.contentId,role:"tooltip",children:i||n})})]})})});zP.displayName=wc;var UP="TooltipArrow",uz=b.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=QA(r);return lz(UP,r).isInside?null:l.jsx($P,{...i,...n,ref:t})});uz.displayName=UP;function dz(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,i,o)){case o:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function gz(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function fz(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}function hz(e,t){const{x:r,y:n}=e;let i=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o],c=t[s],u=a.x,d=a.y,g=c.x,f=c.y;d>n!=f>n&&r<(g-u)*(n-d)/(f-d)+u&&(i=!i)}return i}function pz(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),mz(t)}function mz(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const o=t[t.length-1],s=t[t.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;r.length>=2;){const o=r[r.length-1],s=r[r.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Iz=KP,JP=zP;const yz=Iz,Cz=b.forwardRef(({className:e,sideOffset:t=4,...r},n)=>l.jsx(JP,{ref:n,sideOffset:t,className:de("z-[2000] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Cz.displayName=JP.displayName;var vz=Symbol.for("react.lazy"),dp=jm[" use ".trim().toString()];function bz(e){return typeof e=="object"&&e!==null&&"then"in e}function QP(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===vz&&"_payload"in e&&bz(e._payload)}function qP(e){const t=Az(e),r=b.forwardRef((n,i)=>{let{children:o,...s}=n;QP(o)&&typeof dp=="function"&&(o=dp(o._payload));const a=b.Children.toArray(o),c=a.find(Sz);if(c){const u=c.props.children,d=a.map(g=>g===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:g);return l.jsx(t,{...s,ref:i,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return l.jsx(t,{...s,ref:i,children:o})});return r.displayName=`${e}.Slot`,r}var xz=qP("Slot");function Az(e){const t=b.forwardRef((r,n)=>{let{children:i,...o}=r;if(QP(i)&&typeof dp=="function"&&(i=dp(i._payload)),b.isValidElement(i)){const s=Bz(i),a=kz(o,i.props);return i.type!==b.Fragment&&(a.ref=n?EA(n,s):s),b.cloneElement(i,a)}return b.Children.count(i)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wz=Symbol("radix.slottable");function Sz(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wz}function kz(e,t){const r={...t};for(const n in t){const i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...a)=>{const c=o(...a);return i(...a),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}function Bz(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const Nz=Xg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ie=b.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},o)=>{const s=n?xz:"button";return l.jsx(s,{className:de(Nz({variant:t,size:r,className:e})),ref:o,...i})});ie.displayName="Button";const zk="cookie-consent";function jz({className:e}){const[t,r]=b.useState(!1);b.useEffect(()=>{if(!localStorage.getItem(zk)){const s=setTimeout(()=>{r(!0)},1e3);return()=>clearTimeout(s)}},[]);const n=()=>{localStorage.setItem(zk,"accepted"),r(!1)},i=()=>{r(!1)};return t?l.jsxs("div",{className:de("fixed bottom-4 left-4 right-4 z-[9999] mx-auto max-w-md","rounded-lg border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80","shadow-lg animate-in slide-in-from-bottom-5 fade-in-20 duration-300","sm:bottom-6 sm:left-6 sm:right-auto sm:max-w-md",e),children:[l.jsxs("div",{className:"relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] bg-gradient-to-r from-primary/40 via-primary to-primary/40"}),l.jsxs("div",{className:"flex items-start p-5",children:[l.jsx("div",{className:"flex-shrink-0 mr-4 mt-1",children:l.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:l.jsx(eF,{className:"h-5 w-5 text-primary"})})}),l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Cookie Consent"}),l.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"We use cookies to improve your experience and analyze site usage."})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("a",{href:"",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-primary hover:underline",children:[l.jsx("span",{children:"Privacy Policy"}),l.jsx(rF,{className:"ml-1 h-3 w-3"})]}),l.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[l.jsx(ie,{variant:"outline",size:"sm",onClick:i,className:"text-xs h-8",children:"Decline"}),l.jsx(ie,{size:"sm",onClick:n,className:"text-xs h-8 bg-primary text-primary-foreground hover:bg-primary/90",children:"Accept All"})]})]})]})]})]}),l.jsxs(ie,{variant:"ghost",size:"sm",className:"absolute top-3 right-3 h-6 w-6 p-0 rounded-full opacity-70 hover:opacity-100 transition-opacity",onClick:i,children:[l.jsx(Cr,{className:"h-3.5 w-3.5"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]}):null}var oI=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Tz={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ss,_x,lR,Ez=(lR=class{constructor(){Qe(this,Ss,Tz);Qe(this,_x,!1)}setTimeoutProvider(e){Re(this,Ss,e)}setTimeout(e,t){return q(this,Ss).setTimeout(e,t)}clearTimeout(e){q(this,Ss).clearTimeout(e)}setInterval(e,t){return q(this,Ss).setInterval(e,t)}clearInterval(e){q(this,Ss).clearInterval(e)}},Ss=new WeakMap,_x=new WeakMap,lR),S0=new Ez;function Rz(e){setTimeout(e,0)}var sI=typeof window>"u"||"Deno"in globalThis;function Ai(){}function Oz(e,t){return typeof e=="function"?e(t):e}function Gz(e){return typeof e=="number"&&e>=0&&e!==1/0}function Pz(e,t){return Math.max(e+(t||0)-Date.now(),0)}function k0(e,t){return typeof e=="function"?e(t):e}function _z(e,t){return typeof e=="function"?e(t):e}function Yk(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s){if(n){if(t.queryHash!==qA(s,t.options))return!1}else if(!Wd(t.queryKey,s))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function Uk(e,t){const{exact:r,status:n,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(Ld(t.options.mutationKey)!==Ld(o))return!1}else if(!Wd(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function qA(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ld)(e)}function Ld(e){return JSON.stringify(e,(t,r)=>B0(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Wd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Wd(e[r],t[r])):!1}var Mz=Object.prototype.hasOwnProperty;function e_(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=Jk(e)&&Jk(t);if(!n&&!(B0(e)&&B0(t)))return t;const o=(n?e:Object.keys(e)).length,s=n?t:Object.keys(t),a=s.length,c=n?new Array(a):{};let u=0;for(let d=0;d<a;d++){const g=n?d:s[d],f=e[g],m=t[g];if(f===m){c[g]=f,(n?d<o:Mz.call(e,g))&&u++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){c[g]=m;continue}const v=e_(f,m,r+1);c[g]=v,v===f&&u++}return o===a&&u===o?e:c}function Jk(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function B0(e){if(!Qk(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Qk(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Qk(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zz(e){return new Promise(t=>{S0.setTimeout(t,e)})}function Hz(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?e_(e,t):t}function Lz(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Wz(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var ew=Symbol();function t_(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ew?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Dz(e,t,r){let n=!1,i;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(i??(i=t()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),e}var Ga,ks,lc,cR,$z=(cR=class extends oI{constructor(){super();Qe(this,Ga);Qe(this,ks);Qe(this,lc);Re(this,lc,t=>{if(!sI&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){q(this,ks)||this.setEventListener(q(this,lc))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,ks))==null||t.call(this),Re(this,ks,void 0))}setEventListener(t){var r;Re(this,lc,t),(r=q(this,ks))==null||r.call(this),Re(this,ks,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){q(this,Ga)!==t&&(Re(this,Ga,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof q(this,Ga)=="boolean"?q(this,Ga):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ga=new WeakMap,ks=new WeakMap,lc=new WeakMap,cR),r_=new $z;function Xz(){let e,t;const r=new Promise((i,o)=>{e=i,t=o});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var Fz=Rz;function Kz(){let e=[],t=0,r=a=>{a()},n=a=>{a()},i=Fz;const o=a=>{t?e.push(a):i(()=>{r(a)})},s=()=>{const a=e;e=[],a.length&&i(()=>{n(()=>{a.forEach(c=>{r(c)})})})};return{batch:a=>{let c;t++;try{c=a()}finally{t--,t||s()}return c},batchCalls:a=>(...c)=>{o(()=>{a(...c)})},schedule:o,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var Xr=Kz(),cc,Bs,uc,uR,Vz=(uR=class extends oI{constructor(){super();Qe(this,cc,!0);Qe(this,Bs);Qe(this,uc);Re(this,uc,t=>{if(!sI&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){q(this,Bs)||this.setEventListener(q(this,uc))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Bs))==null||t.call(this),Re(this,Bs,void 0))}setEventListener(t){var r;Re(this,uc,t),(r=q(this,Bs))==null||r.call(this),Re(this,Bs,t(this.setOnline.bind(this)))}setOnline(t){q(this,cc)!==t&&(Re(this,cc,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return q(this,cc)}},cc=new WeakMap,Bs=new WeakMap,uc=new WeakMap,uR),gp=new Vz;function zz(e){return Math.min(1e3*2**e,3e4)}function n_(e){return(e??"online")==="online"?gp.isOnline():!0}var N0=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function i_(e){let t=!1,r=0,n;const i=Xz(),o=()=>i.status!=="pending",s=p=>{var I;if(!o()){const h=new N0(p);f(h),(I=e.onCancel)==null||I.call(e,h)}},a=()=>{t=!0},c=()=>{t=!1},u=()=>r_.isFocused()&&(e.networkMode==="always"||gp.isOnline())&&e.canRun(),d=()=>n_(e.networkMode)&&e.canRun(),g=p=>{o()||(n==null||n(),i.resolve(p))},f=p=>{o()||(n==null||n(),i.reject(p))},m=()=>new Promise(p=>{var I;n=h=>{(o()||u())&&p(h)},(I=e.onPause)==null||I.call(e)}).then(()=>{var p;n=void 0,o()||(p=e.onContinue)==null||p.call(e)}),v=()=>{if(o())return;let p;const I=r===0?e.initialPromise:void 0;try{p=I??e.fn()}catch(h){p=Promise.reject(h)}Promise.resolve(p).then(g).catch(h=>{var w;if(o())return;const y=e.retry??(sI?0:3),C=e.retryDelay??zz,x=typeof C=="function"?C(r,h):C,A=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,h);if(t||!A){f(h);return}r++,(w=e.onFail)==null||w.call(e,r,h),Zz(x).then(()=>u()?void 0:m()).then(()=>{t?f(h):v()})})};return{promise:i,status:()=>i.status,cancel:s,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?v():m().then(v),i)}}var Pa,dR,o_=(dR=class{constructor(){Qe(this,Pa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gz(this.gcTime)&&Re(this,Pa,S0.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(sI?1/0:5*60*1e3))}clearGcTimeout(){q(this,Pa)&&(S0.clearTimeout(q(this,Pa)),Re(this,Pa,void 0))}},Pa=new WeakMap,dR),_a,dc,Fn,Ma,gr,Gg,Za,wi,bo,gR,Yz=(gR=class extends o_{constructor(t){super();Qe(this,wi);Qe(this,_a);Qe(this,dc);Qe(this,Fn);Qe(this,Ma);Qe(this,gr);Qe(this,Gg);Qe(this,Za);Re(this,Za,!1),Re(this,Gg,t.defaultOptions),this.setOptions(t.options),this.observers=[],Re(this,Ma,t.client),Re(this,Fn,q(this,Ma).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Re(this,_a,eB(this.options)),this.state=t.state??q(this,_a),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,gr))==null?void 0:t.promise}setOptions(t){if(this.options={...q(this,Gg),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=eB(this.options);r.data!==void 0&&(this.setState(qk(r.data,r.dataUpdatedAt)),Re(this,_a,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,Fn).remove(this)}setData(t,r){const n=Hz(this.state.data,t,this.options);return Gr(this,wi,bo).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Gr(this,wi,bo).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=q(this,gr))==null?void 0:n.promise;return(i=q(this,gr))==null||i.cancel(t),r?r.then(Ai).catch(Ai):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,_a))}isActive(){return this.observers.some(t=>_z(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ew||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>k0(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Pz(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,gr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,gr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,Fn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(q(this,gr)&&(q(this,Za)?q(this,gr).cancel({revert:!0}):q(this,gr).cancelRetry()),this.scheduleGc()),q(this,Fn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gr(this,wi,bo).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,g,f,m,v,p,I,h,y,C;if(this.state.fetchStatus!=="idle"&&((c=q(this,gr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(q(this,gr))return q(this,gr).continueRetry(),q(this,gr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const x=this.observers.find(A=>A.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(Re(this,Za,!0),n.signal)})},o=()=>{const x=t_(this.options,r),w=(()=>{const S={client:q(this,Ma),queryKey:this.queryKey,meta:this.meta};return i(S),S})();return Re(this,Za,!1),this.options.persister?this.options.persister(x,w,this):x(w)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:q(this,Ma),state:this.state,fetchFn:o};return i(x),x})();(u=this.options.behavior)==null||u.onFetch(a,this),Re(this,dc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Gr(this,wi,bo).call(this,{type:"fetch",meta:(g=a.fetchOptions)==null?void 0:g.meta}),Re(this,gr,i_({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof N0&&x.revert&&this.setState({...q(this,dc),fetchStatus:"idle"}),n.abort()},onFail:(x,A)=>{Gr(this,wi,bo).call(this,{type:"failed",failureCount:x,error:A})},onPause:()=>{Gr(this,wi,bo).call(this,{type:"pause"})},onContinue:()=>{Gr(this,wi,bo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await q(this,gr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(m=(f=q(this,Fn).config).onSuccess)==null||m.call(f,x,this),(p=(v=q(this,Fn).config).onSettled)==null||p.call(v,x,this.state.error,this),x}catch(x){if(x instanceof N0){if(x.silent)return q(this,gr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Gr(this,wi,bo).call(this,{type:"error",error:x}),(h=(I=q(this,Fn).config).onError)==null||h.call(I,x,this),(C=(y=q(this,Fn).config).onSettled)==null||C.call(y,this.state.data,x,this),x}finally{this.scheduleGc()}}},_a=new WeakMap,dc=new WeakMap,Fn=new WeakMap,Ma=new WeakMap,gr=new WeakMap,Gg=new WeakMap,Za=new WeakMap,wi=new WeakSet,bo=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Uz(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...qk(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Re(this,dc,t.manual?i:void 0),i;case"error":const o=t.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Xr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),q(this,Fn).notify({query:this,type:"updated",action:t})})},gR);function Uz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:n_(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qk(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function eB(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function tB(e){return{onFetch:(t,r)=>{var d,g,f,m,v;const n=t.options,i=(f=(g=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:g.fetchMore)==null?void 0:f.direction,o=((m=t.state.data)==null?void 0:m.pages)||[],s=((v=t.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const I=C=>{Dz(C,()=>t.signal,()=>p=!0)},h=t_(t.options,t.fetchOptions),y=async(C,x,A)=>{if(p)return Promise.reject();if(x==null&&C.pages.length)return Promise.resolve(C);const S=(()=>{const _={client:t.client,queryKey:t.queryKey,pageParam:x,direction:A?"backward":"forward",meta:t.options.meta};return I(_),_})(),k=await h(S),{maxPages:R}=t.options,j=A?Wz:Lz;return{pages:j(C.pages,k,R),pageParams:j(C.pageParams,x,R)}};if(i&&o.length){const C=i==="backward",x=C?Jz:rB,A={pages:o,pageParams:s},w=x(n,A);a=await y(A,w,C)}else{const C=e??o.length;do{const x=c===0?s[0]??n.initialPageParam:rB(n,a);if(c>0&&x==null)break;a=await y(a,x),c++}while(c<C)}return a};t.options.persister?t.fetchFn=()=>{var p,I;return(I=(p=t.options).persister)==null?void 0:I.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function rB(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Jz(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Pg,Vi,Dr,Ha,zi,hs,fR,Qz=(fR=class extends o_{constructor(t){super();Qe(this,zi);Qe(this,Pg);Qe(this,Vi);Qe(this,Dr);Qe(this,Ha);Re(this,Pg,t.client),this.mutationId=t.mutationId,Re(this,Dr,t.mutationCache),Re(this,Vi,[]),this.state=t.state||qz(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,Vi).includes(t)||(q(this,Vi).push(t),this.clearGcTimeout(),q(this,Dr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Re(this,Vi,q(this,Vi).filter(r=>r!==t)),this.scheduleGc(),q(this,Dr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,Vi).length||(this.state.status==="pending"?this.scheduleGc():q(this,Dr).remove(this))}continue(){var t;return((t=q(this,Ha))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,c,u,d,g,f,m,v,p,I,h,y,C,x,A,w,S,k,R;const r=()=>{Gr(this,zi,hs).call(this,{type:"continue"})},n={client:q(this,Pg),meta:this.options.meta,mutationKey:this.options.mutationKey};Re(this,Ha,i_({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(j,_)=>{Gr(this,zi,hs).call(this,{type:"failed",failureCount:j,error:_})},onPause:()=>{Gr(this,zi,hs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,Dr).canRun(this)}));const i=this.state.status==="pending",o=!q(this,Ha).canStart();try{if(i)r();else{Gr(this,zi,hs).call(this,{type:"pending",variables:t,isPaused:o}),await((a=(s=q(this,Dr).config).onMutate)==null?void 0:a.call(s,t,this,n));const _=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));_!==this.state.context&&Gr(this,zi,hs).call(this,{type:"pending",context:_,variables:t,isPaused:o})}const j=await q(this,Ha).start();return await((g=(d=q(this,Dr).config).onSuccess)==null?void 0:g.call(d,j,t,this.state.context,this,n)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,j,t,this.state.context,n)),await((p=(v=q(this,Dr).config).onSettled)==null?void 0:p.call(v,j,null,this.state.variables,this.state.context,this,n)),await((h=(I=this.options).onSettled)==null?void 0:h.call(I,j,null,t,this.state.context,n)),Gr(this,zi,hs).call(this,{type:"success",data:j}),j}catch(j){try{await((C=(y=q(this,Dr).config).onError)==null?void 0:C.call(y,j,t,this.state.context,this,n))}catch(_){Promise.reject(_)}try{await((A=(x=this.options).onError)==null?void 0:A.call(x,j,t,this.state.context,n))}catch(_){Promise.reject(_)}try{await((S=(w=q(this,Dr).config).onSettled)==null?void 0:S.call(w,void 0,j,this.state.variables,this.state.context,this,n))}catch(_){Promise.reject(_)}try{await((R=(k=this.options).onSettled)==null?void 0:R.call(k,void 0,j,t,this.state.context,n))}catch(_){Promise.reject(_)}throw Gr(this,zi,hs).call(this,{type:"error",error:j}),j}finally{q(this,Dr).runNext(this)}}},Pg=new WeakMap,Vi=new WeakMap,Dr=new WeakMap,Ha=new WeakMap,zi=new WeakSet,hs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Xr.batch(()=>{q(this,Vi).forEach(n=>{n.onMutationUpdate(t)}),q(this,Dr).notify({mutation:this,type:"updated",action:t})})},fR);function qz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ko,Si,_g,hR,e9=(hR=class extends oI{constructor(t={}){super();Qe(this,ko);Qe(this,Si);Qe(this,_g);this.config=t,Re(this,ko,new Set),Re(this,Si,new Map),Re(this,_g,0)}build(t,r,n){const i=new Qz({client:t,mutationCache:this,mutationId:++hf(this,_g)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){q(this,ko).add(t);const r=Mf(t);if(typeof r=="string"){const n=q(this,Si).get(r);n?n.push(t):q(this,Si).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(q(this,ko).delete(t)){const r=Mf(t);if(typeof r=="string"){const n=q(this,Si).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&q(this,Si).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Mf(t);if(typeof r=="string"){const n=q(this,Si).get(r),i=n==null?void 0:n.find(o=>o.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=Mf(t);if(typeof r=="string"){const i=(n=q(this,Si).get(r))==null?void 0:n.find(o=>o!==t&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xr.batch(()=>{q(this,ko).forEach(t=>{this.notify({type:"removed",mutation:t})}),q(this,ko).clear(),q(this,Si).clear()})}getAll(){return Array.from(q(this,ko))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Uk(r,n))}findAll(t={}){return this.getAll().filter(r=>Uk(t,r))}notify(t){Xr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Xr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ai))))}},ko=new WeakMap,Si=new WeakMap,_g=new WeakMap,hR);function Mf(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Yi,pR,t9=(pR=class extends oI{constructor(t={}){super();Qe(this,Yi);this.config=t,Re(this,Yi,new Map)}build(t,r,n){const i=r.queryKey,o=r.queryHash??qA(i,r);let s=this.get(o);return s||(s=new Yz({client:t,queryKey:i,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){q(this,Yi).has(t.queryHash)||(q(this,Yi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=q(this,Yi).get(t.queryHash);r&&(t.destroy(),r===t&&q(this,Yi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,Yi).get(t)}getAll(){return[...q(this,Yi).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Yk(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Yk(t,n)):r}notify(t){Xr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Xr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Yi=new WeakMap,pR),Vt,Ns,js,gc,fc,Ts,hc,pc,mR,r9=(mR=class{constructor(e={}){Qe(this,Vt);Qe(this,Ns);Qe(this,js);Qe(this,gc);Qe(this,fc);Qe(this,Ts);Qe(this,hc);Qe(this,pc);Re(this,Vt,e.queryCache||new t9),Re(this,Ns,e.mutationCache||new e9),Re(this,js,e.defaultOptions||{}),Re(this,gc,new Map),Re(this,fc,new Map),Re(this,Ts,0)}mount(){hf(this,Ts)._++,q(this,Ts)===1&&(Re(this,hc,r_.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Vt).onFocus())})),Re(this,pc,gp.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Vt).onOnline())})))}unmount(){var e,t;hf(this,Ts)._--,q(this,Ts)===0&&((e=q(this,hc))==null||e.call(this),Re(this,hc,void 0),(t=q(this,pc))==null||t.call(this),Re(this,pc,void 0))}isFetching(e){return q(this,Vt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,Ns).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,Vt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=q(this,Vt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(k0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return q(this,Vt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=q(this,Vt).get(n.queryHash),o=i==null?void 0:i.state.data,s=Oz(t,o);if(s!==void 0)return q(this,Vt).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return Xr.batch(()=>q(this,Vt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,Vt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=q(this,Vt);Xr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=q(this,Vt);return Xr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Xr.batch(()=>q(this,Vt).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Ai).catch(Ai)}invalidateQueries(e,t={}){return Xr.batch(()=>(q(this,Vt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Xr.batch(()=>q(this,Vt).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(Ai)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Ai)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=q(this,Vt).build(this,t);return r.isStaleByTime(k0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ai).catch(Ai)}fetchInfiniteQuery(e){return e.behavior=tB(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ai).catch(Ai)}ensureInfiniteQueryData(e){return e.behavior=tB(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gp.isOnline()?q(this,Ns).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,Vt)}getMutationCache(){return q(this,Ns)}getDefaultOptions(){return q(this,js)}setDefaultOptions(e){Re(this,js,e)}setQueryDefaults(e,t){q(this,gc).set(Ld(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,gc).values()],r={};return t.forEach(n=>{Wd(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){q(this,fc).set(Ld(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,fc).values()],r={};return t.forEach(n=>{Wd(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,js).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=qA(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ew&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,js).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,Vt).clear(),q(this,Ns).clear()}},Vt=new WeakMap,Ns=new WeakMap,js=new WeakMap,gc=new WeakMap,fc=new WeakMap,Ts=new WeakMap,hc=new WeakMap,pc=new WeakMap,mR),n9=b.createContext(void 0),i9=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(n9.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fp.apply(this,arguments)}var Gs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gs||(Gs={}));const nB="popstate";function o9(e){e===void 0&&(e={});function t(n,i){let{pathname:o,search:s,hash:a}=n.location;return j0("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:a_(i)}return a9(t,r,null,e)}function mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function s_(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function s9(){return Math.random().toString(36).substr(2,8)}function iB(e,t){return{usr:e.state,key:e.key,idx:t}}function j0(e,t,r,n){return r===void 0&&(r=null),fp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?aI(t):t,{state:r,key:t&&t.key||n||s9()})}function a_(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function aI(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function a9(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,s=i.history,a=Gs.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(fp({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function g(){a=Gs.Pop;let I=d(),h=I==null?null:I-u;u=I,c&&c({action:a,location:p.location,delta:h})}function f(I,h){a=Gs.Push;let y=j0(p.location,I,h);u=d()+1;let C=iB(y,u),x=p.createHref(y);try{s.pushState(C,"",x)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(x)}o&&c&&c({action:a,location:p.location,delta:1})}function m(I,h){a=Gs.Replace;let y=j0(p.location,I,h);u=d();let C=iB(y,u),x=p.createHref(y);s.replaceState(C,"",x),o&&c&&c({action:a,location:p.location,delta:0})}function v(I){let h=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof I=="string"?I:a_(I);return y=y.replace(/ $/,"%20"),mn(h,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,h)}let p={get action(){return a},get location(){return e(i,s)},listen(I){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(nB,g),c=I,()=>{i.removeEventListener(nB,g),c=null}},createHref(I){return t(i,I)},createURL:v,encodeLocation(I){let h=v(I);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:f,replace:m,go(I){return s.go(I)}};return p}var oB;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(oB||(oB={}));function l9(e,t,r){return r===void 0&&(r="/"),c9(e,t,r)}function c9(e,t,r,n){let i=typeof t=="string"?aI(t):t,o=u_(i.pathname||"/",r);if(o==null)return null;let s=l_(e);u9(s);let a=null;for(let c=0;a==null&&c<s.length;++c){let u=x9(o);a=C9(s[c],u)}return a}function l_(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,s,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};c.relativePath.startsWith("/")&&(mn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ec([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(mn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),l_(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:I9(u,o.index),routesMeta:d})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let c of c_(o.path))i(o,s,c)}),t}function c_(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let s=c_(n.join("/")),a=[];return a.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&a.push(...s),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function u9(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:y9(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const d9=/^:[\w-]+$/,g9=3,f9=2,h9=1,p9=10,m9=-2,sB=e=>e==="*";function I9(e,t){let r=e.split("/"),n=r.length;return r.some(sB)&&(n+=m9),t&&(n+=f9),r.filter(i=>!sB(i)).reduce((i,o)=>i+(d9.test(o)?g9:o===""?h9:p9),n)}function y9(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function C9(e,t,r){let{routesMeta:n}=e,i={},o="/",s=[];for(let a=0;a<n.length;++a){let c=n[a],u=a===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",g=v9({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:ec([o,g.pathname]),pathnameBase:A9(ec([o,g.pathnameBase])),route:f}),g.pathnameBase!=="/"&&(o=ec([o,g.pathnameBase]))}return s}function v9(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=b9(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,d,g)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=a[g]||"";s=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const v=a[g];return m&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function b9(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),s_(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,c)=>(n.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function x9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return s_(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function u_(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const ec=e=>e.join("/").replace(/\/\/+/g,"/"),A9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function w9(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const d_=["post","put","patch","delete"];new Set(d_);const S9=["get",...d_];new Set(S9);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hp(){return hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hp.apply(this,arguments)}const k9=b.createContext(null),B9=b.createContext(null),g_=b.createContext(null),lI=b.createContext(null),cI=b.createContext({outlet:null,matches:[],isDataRoute:!1}),f_=b.createContext(null);function tw(){return b.useContext(lI)!=null}function h_(){return tw()||mn(!1),b.useContext(lI).location}function N9(e,t){return j9(e,t)}function j9(e,t,r,n){tw()||mn(!1);let{navigator:i}=b.useContext(g_),{matches:o}=b.useContext(cI),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=h_(),d;if(t){var g;let I=typeof t=="string"?aI(t):t;c==="/"||(g=I.pathname)!=null&&g.startsWith(c)||mn(!1),d=I}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let I=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let v=l9(e,{pathname:m}),p=G9(v&&v.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:ec([c,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?c:ec([c,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),o,r,n);return t&&p?b.createElement(lI.Provider,{value:{location:hp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Gs.Pop}},p):p}function T9(){let e=Z9(),t=w9(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:i},r):null,null)}const E9=b.createElement(T9,null);class R9 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(cI.Provider,{value:this.props.routeContext},b.createElement(f_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O9(e){let{routeContext:t,match:r,children:n}=e,i=b.useContext(k9);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(cI.Provider,{value:t},n)}function G9(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=s.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);d>=0||mn(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let g=s[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=d),g.route.id){let{loaderData:f,errors:m}=r,v=g.route.loader&&f[g.route.id]===void 0&&(!m||m[g.route.id]===void 0);if(g.route.lazy||v){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,g,f)=>{let m,v=!1,p=null,I=null;r&&(m=a&&g.route.id?a[g.route.id]:void 0,p=g.route.errorElement||E9,c&&(u<0&&f===0?(H9("route-fallback"),v=!0,I=null):u===f&&(v=!0,I=g.route.hydrateFallbackElement||null)));let h=t.concat(s.slice(0,f+1)),y=()=>{let C;return m?C=p:v?C=I:g.route.Component?C=b.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=d,b.createElement(O9,{match:g,routeContext:{outlet:d,matches:h,isDataRoute:r!=null},children:C})};return r&&(g.route.ErrorBoundary||g.route.errorElement||f===0)?b.createElement(R9,{location:r.location,revalidation:r.revalidation,component:p,error:m,children:y(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):y()},null)}var p_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(p_||{});function P9(e){let t=b.useContext(B9);return t||mn(!1),t}function _9(e){let t=b.useContext(cI);return t||mn(!1),t}function M9(e){let t=_9(),r=t.matches[t.matches.length-1];return r.route.id||mn(!1),r.route.id}function Z9(){var e;let t=b.useContext(f_),r=P9(p_.UseRouteError),n=M9();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}const aB={};function H9(e,t,r){aB[e]||(aB[e]=!0)}function L9(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ps(e){mn(!1)}function W9(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Gs.Pop,navigator:o,static:s=!1,future:a}=e;tw()&&mn(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:o,static:s,future:hp({v7_relativeSplatPath:!1},a)}),[c,a,o,s]);typeof n=="string"&&(n=aI(n));let{pathname:d="/",search:g="",hash:f="",state:m=null,key:v="default"}=n,p=b.useMemo(()=>{let I=u_(d,c);return I==null?null:{location:{pathname:I,search:g,hash:f,state:m,key:v},navigationType:i}},[c,d,g,f,m,v,i]);return p==null?null:b.createElement(g_.Provider,{value:u},b.createElement(lI.Provider,{children:r,value:p}))}function D9(e){let{children:t,location:r}=e;return N9(T0(t),r)}new Promise(()=>{});function T0(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(n,i)=>{if(!b.isValidElement(n))return;let o=[...t,i];if(n.type===b.Fragment){r.push.apply(r,T0(n.props.children,o));return}n.type!==ps&&mn(!1),!n.props.index||!n.props.children||mn(!1);let s={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=T0(n.props.children,o)),r.push(s)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const $9="6";try{window.__reactRouterVersion=$9}catch{}const X9="startTransition",lB=jm[X9];function F9(e){let{basename:t,children:r,future:n,window:i}=e,o=b.useRef();o.current==null&&(o.current=o9({window:i,v5Compat:!0}));let s=o.current,[a,c]=b.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=b.useCallback(g=>{u&&lB?lB(()=>c(g)):c(g)},[c,u]);return b.useLayoutEffect(()=>s.listen(d),[s,d]),b.useEffect(()=>L9(n),[n]),b.createElement(W9,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:s,future:n})}var cB;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(cB||(cB={}));var uB;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uB||(uB={}));const m_=b.createContext(void 0),K9={bg:"220 13% 11%",widget:"222 16% 16%",accent:"217 29% 16%",text:"210 40% 98%",muted:"210 13% 69%",positive:"152 77% 43%",negative:"356 77% 57%",border:"220 21% 23%"},V9={bg:"210 28% 98%",widget:"0 0% 100%",accent:"210 28% 96%",text:"222 44% 14%",muted:"220 15% 35%",positive:"152 77% 43%",negative:"356 77% 57%",border:"210 28% 90%"},z9=({children:e})=>{const[t,r]=b.useState(()=>{const c=localStorage.getItem("theme");return console.log(" Theme Provider: Loading saved theme:",c),c||"dark"}),[n,i]=b.useState(()=>{const c=localStorage.getItem("themeVariant");return console.log(" Theme Provider: Loading saved variant:",c),c||(t==="dark"?"dark":"light")}),o=c=>{console.log(" Applying theme colors:",c);const u=document.documentElement;Object.entries(c).forEach(([d,g])=>{const f=`--terminal-${d}`;console.log(` Setting ${f}: ${g}`),u.style.setProperty(f,g)}),u.style.setProperty("--terminal-bg",c.bg),u.style.setProperty("--terminal-widget",c.widget),u.style.setProperty("--terminal-accent",c.accent),u.style.setProperty("--terminal-text",c.text),u.style.setProperty("--terminal-muted",c.muted),u.style.setProperty("--terminal-positive",c.positive),u.style.setProperty("--terminal-negative",c.negative),u.style.setProperty("--terminal-border",c.border),setTimeout(()=>{const d=getComputedStyle(u);console.log(" Verification - Applied CSS variables:"),Object.keys(c).forEach(g=>{const f=`--terminal-${g}`,m=d.getPropertyValue(f).trim();console.log(` ${f}: ${m}`)})},100)};b.useEffect(()=>{console.log(" Theme effect triggered - theme:",t),t==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light")),localStorage.setItem("theme",t),o(t==="dark"?K9:V9);const u=t==="dark"?"dark":"light";i(u),localStorage.setItem("themeVariant",u)},[t]);const s=()=>{const c=t==="dark"?"light":"dark";console.log(" Toggling theme from",t,"to",c),r(c)},a=(c,u)=>{console.log(" Setting theme variant:",c,"with colors:",u),i(c),o(u),localStorage.setItem("themeVariant",c),localStorage.setItem(`themeColors_${c}`,JSON.stringify(u)),console.log(" Saved variant and colors to localStorage")};return l.jsx(m_.Provider,{value:{theme:t,themeVariant:n,toggleTheme:s,setThemeVariant:a},children:e})},rw=()=>{const e=b.useContext(m_);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e},dB=e=>{let t;const r=new Set,n=(u,d)=>{const g=typeof u=="function"?u(t):u;if(!Object.is(g,t)){const f=t;t=d??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(m=>m(t,f))}},i=()=>t,a={setState:n,getState:i,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=t=e(n,i,a);return a},Y9=e=>e?dB(e):dB,U9=e=>e;function J9(e,t=U9){const r=H.useSyncExternalStore(e.subscribe,H.useCallback(()=>t(e.getState()),[e,t]),H.useCallback(()=>t(e.getInitialState()),[e,t]));return H.useDebugValue(r),r}const gB=e=>{const t=Y9(e),r=n=>J9(t,n);return Object.assign(r,t),r},ui=e=>e?gB(e):gB;var I_=Symbol.for("immer-nothing"),fB=Symbol.for("immer-draftable"),gt=Symbol.for("immer-state");function qn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Dd=Object.getPrototypeOf;function Sc(e){return!!e&&!!e[gt]}function Uo(e){var t;return e?y_(e)||Array.isArray(e)||!!e[fB]||!!((t=e.constructor)!=null&&t[fB])||zg(e)||dI(e):!1}var Q9=Object.prototype.constructor.toString(),hB=new WeakMap;function y_(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=hB.get(r);return n===void 0&&(n=Function.toString.call(r),hB.set(r,n)),n===Q9}function $d(e,t,r=!0){uI(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function uI(e){const t=e[gt];return t?t.type_:Array.isArray(e)?1:zg(e)?2:dI(e)?3:0}function E0(e,t){return uI(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function C_(e,t,r){const n=uI(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function q9(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function zg(e){return e instanceof Map}function dI(e){return e instanceof Set}function fr(e){return e.copy_||e.base_}function R0(e,t){if(zg(e))return new Map(e);if(dI(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=y_(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[gt];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const s=i[o],a=n[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Dd(e),n)}else{const n=Dd(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function nw(e,t=!1){return gI(e)||Sc(e)||!Uo(e)||(uI(e)>1&&Object.defineProperties(e,{set:Zf,add:Zf,clear:Zf,delete:Zf}),Object.freeze(e),t&&Object.values(e).forEach(r=>nw(r,!0))),e}function eY(){qn(2)}var Zf={value:eY};function gI(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var O0={};function el(e){const t=O0[e];return t||qn(0,e),t}function tY(e,t){O0[e]||(O0[e]=t)}var Xd;function pp(){return Xd}function rY(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pB(e,t){t&&(el("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function G0(e){P0(e),e.drafts_.forEach(nY),e.drafts_=null}function P0(e){e===Xd&&(Xd=e.parent_)}function mB(e){return Xd=rY(Xd,e)}function nY(e){const t=e[gt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function IB(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[gt].modified_&&(G0(t),qn(4)),Uo(e)&&(e=mp(t,e),t.parent_||Ip(t,e)),t.patches_&&el("Patches").generateReplacementPatches_(r[gt].base_,e,t.patches_,t.inversePatches_)):e=mp(t,r,[]),G0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==I_?e:void 0}function mp(e,t,r){if(gI(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[gt];if(!i)return $d(t,(o,s)=>yB(e,i,t,o,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Ip(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let s=o,a=!1;i.type_===3&&(s=new Set(o),o.clear(),a=!0),$d(s,(c,u)=>yB(e,i,o,c,u,r,a),n),Ip(e,o,!1),r&&e.patches_&&el("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function yB(e,t,r,n,i,o,s){if(i==null||typeof i!="object"&&!s)return;const a=gI(i);if(!(a&&!s)){if(Sc(i)){const c=o&&t&&t.type_!==3&&!E0(t.assigned_,n)?o.concat(n):void 0,u=mp(e,i,c);if(C_(r,n,u),Sc(u))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Uo(i)&&!a){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&a)return;mp(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(zg(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Ip(e,i)}}}function Ip(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nw(t,r)}function iY(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:pp(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=iw;r&&(i=[n],o=Fd);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return n.draft_=a,n.revoke_=s,a}var iw={get(e,t){if(t===gt)return e;const r=fr(e);if(!E0(r,t))return oY(e,r,t);const n=r[t];return e.finalized_||!Uo(n)?n:n===oC(e.base_,t)?(sC(e),e.copy_[t]=Kd(n,e)):n},has(e,t){return t in fr(e)},ownKeys(e){return Reflect.ownKeys(fr(e))},set(e,t,r){const n=v_(fr(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=oC(fr(e),t),o=i==null?void 0:i[gt];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(q9(r,i)&&(r!==void 0||E0(e.base_,t)))return!0;sC(e),So(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return oC(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,sC(e),So(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=fr(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){qn(11)},getPrototypeOf(e){return Dd(e.base_)},setPrototypeOf(){qn(12)}},Fd={};$d(iw,(e,t)=>{Fd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Fd.deleteProperty=function(e,t){return Fd.set.call(this,e,t,void 0)};Fd.set=function(e,t,r){return iw.set.call(this,e[0],t,r,e[0])};function oC(e,t){const r=e[gt];return(r?fr(r):e)[t]}function oY(e,t,r){var i;const n=v_(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function v_(e,t){if(!(t in e))return;let r=Dd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Dd(r)}}function So(e){e.modified_||(e.modified_=!0,e.parent_&&So(e.parent_))}function sC(e){e.copy_||(e.copy_=R0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var sY=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const s=this;return function(c=o,...u){return s.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&qn(6),n!==void 0&&typeof n!="function"&&qn(7);let i;if(Uo(t)){const o=mB(this),s=Kd(t,void 0);let a=!0;try{i=r(s),a=!1}finally{a?G0(o):P0(o)}return pB(o,n),IB(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===I_&&(i=void 0),this.autoFreeze_&&nw(i,!0),n){const o=[],s=[];el("Patches").generateReplacementPatches_(t,i,o,s),n(o,s)}return i}else qn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,c=>t(c,...a));let n,i;return[this.produce(t,r,(s,a)=>{n=s,i=a}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Uo(e)||qn(8),Sc(e)&&(e=aY(e));const t=mB(this),r=Kd(e,void 0);return r[gt].isManual_=!0,P0(t),r}finishDraft(e,t){const r=e&&e[gt];(!r||!r.isManual_)&&qn(9);const{scope_:n}=r;return pB(n,t),IB(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=el("Patches").applyPatches_;return Sc(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Kd(e,t){const r=zg(e)?el("MapSet").proxyMap_(e,t):dI(e)?el("MapSet").proxySet_(e,t):iY(e,t);return(t?t.scope_:pp()).drafts_.push(r),r}function aY(e){return Sc(e)||qn(10,e),b_(e)}function b_(e){if(!Uo(e)||gI(e))return e;const t=e[gt];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=R0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=R0(e,!0);return $d(r,(i,o)=>{C_(r,i,b_(o))},n),t&&(t.finalized_=!1),r}function lY(){class e extends Map{constructor(c,u){super(),this[gt]={type_:2,parent_:u,scope_:u?u.scope_:pp(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:c,draft_:this,isManual_:!1,revoked_:!1}}get size(){return fr(this[gt]).size}has(c){return fr(this[gt]).has(c)}set(c,u){const d=this[gt];return s(d),(!fr(d).has(c)||fr(d).get(c)!==u)&&(r(d),So(d),d.assigned_.set(c,!0),d.copy_.set(c,u),d.assigned_.set(c,!0)),this}delete(c){if(!this.has(c))return!1;const u=this[gt];return s(u),r(u),So(u),u.base_.has(c)?u.assigned_.set(c,!1):u.assigned_.delete(c),u.copy_.delete(c),!0}clear(){const c=this[gt];s(c),fr(c).size&&(r(c),So(c),c.assigned_=new Map,$d(c.base_,u=>{c.assigned_.set(u,!1)}),c.copy_.clear())}forEach(c,u){const d=this[gt];fr(d).forEach((g,f,m)=>{c.call(u,this.get(f),f,this)})}get(c){const u=this[gt];s(u);const d=fr(u).get(c);if(u.finalized_||!Uo(d)||d!==u.base_.get(c))return d;const g=Kd(d,u);return r(u),u.copy_.set(c,g),g}keys(){return fr(this[gt]).keys()}values(){const c=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=c.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const c=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=c.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(a,c){return new e(a,c)}function r(a){a.copy_||(a.assigned_=new Map,a.copy_=new Map(a.base_))}class n extends Set{constructor(c,u){super(),this[gt]={type_:3,parent_:u,scope_:u?u.scope_:pp(),modified_:!1,finalized_:!1,copy_:void 0,base_:c,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return fr(this[gt]).size}has(c){const u=this[gt];return s(u),u.copy_?!!(u.copy_.has(c)||u.drafts_.has(c)&&u.copy_.has(u.drafts_.get(c))):u.base_.has(c)}add(c){const u=this[gt];return s(u),this.has(c)||(o(u),So(u),u.copy_.add(c)),this}delete(c){if(!this.has(c))return!1;const u=this[gt];return s(u),o(u),So(u),u.copy_.delete(c)||(u.drafts_.has(c)?u.copy_.delete(u.drafts_.get(c)):!1)}clear(){const c=this[gt];s(c),fr(c).size&&(o(c),So(c),c.copy_.clear())}values(){const c=this[gt];return s(c),o(c),c.copy_.values()}entries(){const c=this[gt];return s(c),o(c),c.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(c,u){const d=this.values();let g=d.next();for(;!g.done;)c.call(u,g.value,g.value,this),g=d.next()}}function i(a,c){return new n(a,c)}function o(a){a.copy_||(a.copy_=new Set,a.base_.forEach(c=>{if(Uo(c)){const u=Kd(c,a);a.drafts_.set(c,u),a.copy_.add(u)}else a.copy_.add(c)}))}function s(a){a.revoked_&&qn(3,JSON.stringify(fr(a)))}tY("MapSet",{proxyMap_:t,proxySet_:i})}var cY=new sY,uY=cY.produce;const dY=e=>(t,r,n)=>(n.setState=(i,o,...s)=>{const a=typeof i=="function"?uY(i):i;return t(a,o,...s)},e(n.setState,r,n)),Yg=dY,gY=e=>(t,r,n)=>{const i=n.subscribe;return n.subscribe=(s,a,c)=>{let u=s;if(a){const d=(c==null?void 0:c.equalityFn)||Object.is;let g=s(n.getState());u=f=>{const m=s(f);if(!d(g,m)){const v=g;a(g=m,v)}},c!=null&&c.fireImmediately&&a(g,g)}return i(u)},e(t,r,n)},fY=gY;function hY(e,t){let r;try{r=e()}catch{return}return{getItem:i=>{var o;const s=c=>c===null?null:JSON.parse(c,void 0),a=(o=r.getItem(i))!=null?o:null;return a instanceof Promise?a.then(s):s(a)},setItem:(i,o)=>r.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>r.removeItem(i)}}const _0=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return _0(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return _0(n)(r)}}}},pY=(e,t)=>(r,n,i)=>{let o={storage:hY(()=>localStorage),partialize:I=>I,version:0,merge:(I,h)=>({...h,...I}),...t},s=!1,a=0;const c=new Set,u=new Set;let d=o.storage;if(!d)return e((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...I)},n,i);const g=()=>{const I=o.partialize({...n()});return d.setItem(o.name,{state:I,version:o.version})},f=i.setState;i.setState=(I,h)=>(f(I,h),g());const m=e((...I)=>(r(...I),g()),n,i);i.getInitialState=()=>m;let v;const p=()=>{var I,h;if(!d)return;const y=++a;s=!1,c.forEach(x=>{var A;return x((A=n())!=null?A:m)});const C=((h=o.onRehydrateStorage)==null?void 0:h.call(o,(I=n())!=null?I:m))||void 0;return _0(d.getItem.bind(d))(o.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==o.version){if(o.migrate){const A=o.migrate(x.state,x.version);return A instanceof Promise?A.then(w=>[!0,w]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var A;if(y!==a)return;const[w,S]=x;if(v=o.merge(S,(A=n())!=null?A:m),r(v,!0),w)return g()}).then(()=>{y===a&&(C==null||C(v,void 0),v=n(),s=!0,u.forEach(x=>x(v)))}).catch(x=>{y===a&&(C==null||C(void 0,x))})};return i.persist={setOptions:I=>{o={...o,...I},I.storage&&(d=I.storage)},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:I=>(c.add(I),()=>{c.delete(I)}),onFinishHydration:I=>(u.add(I),()=>{u.delete(I)})},o.skipHydration||p(),v||m},cl=pY;var at;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},e.getValidEnumValues=i=>{const o=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),s={};for(const a of o)s[a]=i[a];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},e.find=(i,o)=>{for(const s of i)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}e.joinValues=n,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(at||(at={}));var CB;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(CB||(CB={}));const Ce=at.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cs=e=>{switch(typeof e){case"undefined":return Ce.undefined;case"string":return Ce.string;case"number":return Number.isNaN(e)?Ce.nan:Ce.number;case"boolean":return Ce.boolean;case"function":return Ce.function;case"bigint":return Ce.bigint;case"symbol":return Ce.symbol;case"object":return Array.isArray(e)?Ce.array:e===null?Ce.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ce.promise:typeof Map<"u"&&e instanceof Map?Ce.map:typeof Set<"u"&&e instanceof Set?Ce.set:typeof Date<"u"&&e instanceof Date?Ce.date:Ce.object;default:return Ce.unknown}},oe=at.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Jo extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(o){return o.message},n={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let a=n,c=0;for(;c<s.path.length;){const u=s.path[c];c===s.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(s))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return i(this),n}static assert(t){if(!(t instanceof Jo))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,at.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)if(i.path.length>0){const o=i.path[0];r[o]=r[o]||[],r[o].push(t(i))}else n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Jo.create=e=>new Jo(e);const M0=(e,t)=>{let r;switch(e.code){case oe.invalid_type:e.received===Ce.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case oe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,at.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:r=`Unrecognized key(s) in object: ${at.joinValues(e.keys,", ")}`;break;case oe.invalid_union:r="Invalid input";break;case oe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${at.joinValues(e.options)}`;break;case oe.invalid_enum_value:r=`Invalid enum value. Expected ${at.joinValues(e.options)}, received '${e.received}'`;break;case oe.invalid_arguments:r="Invalid function arguments";break;case oe.invalid_return_type:r="Invalid function return type";break;case oe.invalid_date:r="Invalid date";break;case oe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:at.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case oe.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case oe.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case oe.custom:r="Invalid input";break;case oe.invalid_intersection_types:r="Intersection results could not be merged";break;case oe.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case oe.not_finite:r="Number must be finite";break;default:r=t.defaultError,at.assertNever(e)}return{message:r}};let mY=M0;function IY(){return mY}const yY=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}};function fe(e,t){const r=IY(),n=yY({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===M0?void 0:M0].filter(i=>!!i)});e.common.issues.push(n)}class Jr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return _e;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const o=await i.key,s=await i.value;n.push({key:o,value:s})}return Jr.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return _e;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:t.value,value:n}}}const _e=Object.freeze({status:"aborted"}),Yu=e=>({status:"dirty",value:e}),di=e=>({status:"valid",value:e}),vB=e=>e.status==="aborted",bB=e=>e.status==="dirty",kc=e=>e.status==="valid",yp=e=>typeof Promise<"u"&&e instanceof Promise;var Ae;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ae||(Ae={}));class fo{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xB=(e,t)=>{if(kc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Jo(e.common.issues);return this._error=r,this._error}}};function $e(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(s,a)=>{const{message:c}=e;return s.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??n??a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:i}}class et{get description(){return this._def.description}_getType(t){return Cs(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Cs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Jr,ctx:{common:t.parent.common,data:t.data,parsedType:Cs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(yp(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Cs(t)},i=this._parseSync({data:t,path:n.path,parent:n});return xB(n,i)}"~validate"(t){var n,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Cs(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:r});return kc(o)?{value:o.value}:{issues:r.common.issues}}catch(o){(i=(n=o==null?void 0:o.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(o=>kc(o)?{value:o.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Cs(t)},i=this._parse({data:t,path:n.path,parent:n}),o=await(yp(i)?i:Promise.resolve(i));return xB(n,o)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{const s=t(i),a=()=>o.addIssue({code:oe.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(c=>c?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new jc({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Xs.create(this,this._def)}nullable(){return Tc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return so.create(this)}promise(){return Ap.create(this,this._def)}or(t){return vp.create([this,t],this._def)}and(t){return bp.create(this,t,this._def)}transform(t){return new jc({...$e(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new W0({...$e(this._def),innerType:this,defaultValue:r,typeName:Oe.ZodDefault})}brand(){return new WY({typeName:Oe.ZodBranded,type:this,...$e(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new D0({...$e(this._def),innerType:this,catchValue:r,typeName:Oe.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return ow.create(this,t)}readonly(){return $0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CY=/^c[^\s-]{8,}$/i,vY=/^[0-9a-z]+$/,bY=/^[0-9A-HJKMNP-TV-Z]{26}$/i,xY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AY=/^[a-z0-9_-]{21}$/i,wY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,SY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,kY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,BY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let aC;const NY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,TY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,EY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,OY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,x_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",GY=new RegExp(`^${x_}$`);function A_(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function PY(e){return new RegExp(`^${A_(e)}$`)}function _Y(e){let t=`${x_}T${A_(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function MY(e,t){return!!((t==="v4"||!t)&&NY.test(e)||(t==="v6"||!t)&&TY.test(e))}function ZY(e,t){if(!wY.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function HY(e,t){return!!((t==="v4"||!t)&&jY.test(e)||(t==="v6"||!t)&&EY.test(e))}class Ro extends et{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ce.string){const o=this._getOrReturnCtx(t);return fe(o,{code:oe.invalid_type,expected:Ce.string,received:o.parsedType}),_e}const n=new Jr;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){const s=t.data.length>o.value,a=t.data.length<o.value;(s||a)&&(i=this._getOrReturnCtx(t,i),s?fe(i,{code:oe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&fe(i,{code:oe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")kY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"email",code:oe.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")aC||(aC=new RegExp(BY,"u")),aC.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"emoji",code:oe.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")xY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"uuid",code:oe.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")AY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"nanoid",code:oe.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")CY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"cuid",code:oe.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")vY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"cuid2",code:oe.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")bY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"ulid",code:oe.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),fe(i,{validation:"url",code:oe.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"regex",code:oe.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?_Y(o).test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?GY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?PY(o).test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?SY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"duration",code:oe.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?MY(t.data,o.version)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"ip",code:oe.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?ZY(t.data,o.alg)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"jwt",code:oe.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?HY(t.data,o.version)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"cidr",code:oe.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?RY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"base64",code:oe.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?OY.test(t.data)||(i=this._getOrReturnCtx(t,i),fe(i,{validation:"base64url",code:oe.invalid_string,message:o.message}),n.dirty()):at.assertNever(o);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:oe.invalid_string,...Ae.errToObj(n)})}_addCheck(t){return new Ro({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ae.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ae.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ae.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ae.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ae.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ae.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ae.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ae.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ae.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ae.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ae.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ae.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ae.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Ae.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ae.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ae.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ae.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ae.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ae.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ae.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ae.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ae.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ae.errToObj(r)})}nonempty(t){return this.min(1,Ae.errToObj(t))}trim(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Ro.create=e=>new Ro({checks:[],typeName:Oe.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...$e(e)});function LY(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return o%s/10**i}class Bc extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ce.number){const o=this._getOrReturnCtx(t);return fe(o,{code:oe.invalid_type,expected:Ce.number,received:o.parsedType}),_e}let n;const i=new Jr;for(const o of this._def.checks)o.kind==="int"?at.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),fe(n,{code:oe.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:oe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:oe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?LY(t.data,o.value)!==0&&(n=this._getOrReturnCtx(t,n),fe(n,{code:oe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),fe(n,{code:oe.not_finite,message:o.message}),i.dirty()):at.assertNever(o);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ae.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ae.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ae.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ae.toString(r))}setLimit(t,r,n,i){return new Bc({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ae.toString(i)}]})}_addCheck(t){return new Bc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ae.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ae.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ae.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&at.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Bc.create=e=>new Bc({checks:[],typeName:Oe.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...$e(e)});class Vd extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ce.bigint)return this._getInvalidInput(t);let n;const i=new Jr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:oe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:oe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),fe(n,{code:oe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):at.assertNever(o);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return fe(r,{code:oe.invalid_type,expected:Ce.bigint,received:r.parsedType}),_e}gte(t,r){return this.setLimit("min",t,!0,Ae.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ae.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ae.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ae.toString(r))}setLimit(t,r,n,i){return new Vd({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ae.toString(i)}]})}_addCheck(t){return new Vd({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ae.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Vd.create=e=>new Vd({checks:[],typeName:Oe.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...$e(e)});class Z0 extends et{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ce.boolean){const n=this._getOrReturnCtx(t);return fe(n,{code:oe.invalid_type,expected:Ce.boolean,received:n.parsedType}),_e}return di(t.data)}}Z0.create=e=>new Z0({typeName:Oe.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...$e(e)});class Cp extends et{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ce.date){const o=this._getOrReturnCtx(t);return fe(o,{code:oe.invalid_type,expected:Ce.date,received:o.parsedType}),_e}if(Number.isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return fe(o,{code:oe.invalid_date}),_e}const n=new Jr;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),fe(i,{code:oe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):at.assertNever(o);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Cp({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ae.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ae.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Cp.create=e=>new Cp({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Oe.ZodDate,...$e(e)});class AB extends et{_parse(t){if(this._getType(t)!==Ce.symbol){const n=this._getOrReturnCtx(t);return fe(n,{code:oe.invalid_type,expected:Ce.symbol,received:n.parsedType}),_e}return di(t.data)}}AB.create=e=>new AB({typeName:Oe.ZodSymbol,...$e(e)});class wB extends et{_parse(t){if(this._getType(t)!==Ce.undefined){const n=this._getOrReturnCtx(t);return fe(n,{code:oe.invalid_type,expected:Ce.undefined,received:n.parsedType}),_e}return di(t.data)}}wB.create=e=>new wB({typeName:Oe.ZodUndefined,...$e(e)});class SB extends et{_parse(t){if(this._getType(t)!==Ce.null){const n=this._getOrReturnCtx(t);return fe(n,{code:oe.invalid_type,expected:Ce.null,received:n.parsedType}),_e}return di(t.data)}}SB.create=e=>new SB({typeName:Oe.ZodNull,...$e(e)});class H0 extends et{constructor(){super(...arguments),this._any=!0}_parse(t){return di(t.data)}}H0.create=e=>new H0({typeName:Oe.ZodAny,...$e(e)});class kB extends et{constructor(){super(...arguments),this._unknown=!0}_parse(t){return di(t.data)}}kB.create=e=>new kB({typeName:Oe.ZodUnknown,...$e(e)});class qs extends et{_parse(t){const r=this._getOrReturnCtx(t);return fe(r,{code:oe.invalid_type,expected:Ce.never,received:r.parsedType}),_e}}qs.create=e=>new qs({typeName:Oe.ZodNever,...$e(e)});class BB extends et{_parse(t){if(this._getType(t)!==Ce.undefined){const n=this._getOrReturnCtx(t);return fe(n,{code:oe.invalid_type,expected:Ce.void,received:n.parsedType}),_e}return di(t.data)}}BB.create=e=>new BB({typeName:Oe.ZodVoid,...$e(e)});class so extends et{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==Ce.array)return fe(r,{code:oe.invalid_type,expected:Ce.array,received:r.parsedType}),_e;if(i.exactLength!==null){const s=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(s||a)&&(fe(r,{code:s?oe.too_big:oe.too_small,minimum:a?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(fe(r,{code:oe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(fe(r,{code:oe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,a)=>i.type._parseAsync(new fo(r,s,r.path,a)))).then(s=>Jr.mergeArray(n,s));const o=[...r.data].map((s,a)=>i.type._parseSync(new fo(r,s,r.path,a)));return Jr.mergeArray(n,o)}get element(){return this._def.type}min(t,r){return new so({...this._def,minLength:{value:t,message:Ae.toString(r)}})}max(t,r){return new so({...this._def,maxLength:{value:t,message:Ae.toString(r)}})}length(t,r){return new so({...this._def,exactLength:{value:t,message:Ae.toString(r)}})}nonempty(t){return this.min(1,t)}}so.create=(e,t)=>new so({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...$e(t)});function wl(e){if(e instanceof tr){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Xs.create(wl(n))}return new tr({...e._def,shape:()=>t})}else return e instanceof so?new so({...e._def,type:wl(e.element)}):e instanceof Xs?Xs.create(wl(e.unwrap())):e instanceof Tc?Tc.create(wl(e.unwrap())):e instanceof tl?tl.create(e.items.map(t=>wl(t))):e}class tr extends et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=at.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Ce.object){const u=this._getOrReturnCtx(t);return fe(u,{code:oe.invalid_type,expected:Ce.object,received:u.parsedType}),_e}const{status:n,ctx:i}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof qs&&this._def.unknownKeys==="strip"))for(const u in i.data)s.includes(u)||a.push(u);const c=[];for(const u of s){const d=o[u],g=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new fo(i,g,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof qs){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of a)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")a.length>0&&(fe(i,{code:oe.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of a){const g=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new fo(i,g,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const g=await d.key,f=await d.value;u.push({key:g,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>Jr.mergeObjectSync(n,u)):Jr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Ae.errToObj,new tr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var o,s;const i=((s=(o=this._def).errorMap)==null?void 0:s.call(o,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Ae.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new tr({...this._def,unknownKeys:"strip"})}passthrough(){return new tr({...this._def,unknownKeys:"passthrough"})}extend(t){return new tr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new tr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Oe.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new tr({...this._def,catchall:t})}pick(t){const r={};for(const n of at.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new tr({...this._def,shape:()=>r})}omit(t){const r={};for(const n of at.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new tr({...this._def,shape:()=>r})}deepPartial(){return wl(this)}partial(t){const r={};for(const n of at.objectKeys(this.shape)){const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}return new tr({...this._def,shape:()=>r})}required(t){const r={};for(const n of at.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Xs;)o=o._def.innerType;r[n]=o}return new tr({...this._def,shape:()=>r})}keyof(){return w_(at.objectKeys(this.shape))}}tr.create=(e,t)=>new tr({shape:()=>e,unknownKeys:"strip",catchall:qs.create(),typeName:Oe.ZodObject,...$e(t)});tr.strictCreate=(e,t)=>new tr({shape:()=>e,unknownKeys:"strict",catchall:qs.create(),typeName:Oe.ZodObject,...$e(t)});tr.lazycreate=(e,t)=>new tr({shape:e,unknownKeys:"strip",catchall:qs.create(),typeName:Oe.ZodObject,...$e(t)});class vp extends et{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(a=>new Jo(a.ctx.common.issues));return fe(r,{code:oe.invalid_union,unionErrors:s}),_e}if(r.common.async)return Promise.all(n.map(async o=>{const s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(c=>new Jo(c));return fe(r,{code:oe.invalid_union,unionErrors:a}),_e}}get options(){return this._def.options}}vp.create=(e,t)=>new vp({options:e,typeName:Oe.ZodUnion,...$e(t)});function L0(e,t){const r=Cs(e),n=Cs(t);if(e===t)return{valid:!0,data:e};if(r===Ce.object&&n===Ce.object){const i=at.objectKeys(t),o=at.objectKeys(e).filter(a=>i.indexOf(a)!==-1),s={...e,...t};for(const a of o){const c=L0(e[a],t[a]);if(!c.valid)return{valid:!1};s[a]=c.data}return{valid:!0,data:s}}else if(r===Ce.array&&n===Ce.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<e.length;o++){const s=e[o],a=t[o],c=L0(s,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===Ce.date&&n===Ce.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class bp extends et{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(o,s)=>{if(vB(o)||vB(s))return _e;const a=L0(o.value,s.value);return a.valid?((bB(o)||bB(s))&&r.dirty(),{status:r.value,value:a.data}):(fe(n,{code:oe.invalid_intersection_types}),_e)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}bp.create=(e,t,r)=>new bp({left:e,right:t,typeName:Oe.ZodIntersection,...$e(r)});class tl extends et{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ce.array)return fe(n,{code:oe.invalid_type,expected:Ce.array,received:n.parsedType}),_e;if(n.data.length<this._def.items.length)return fe(n,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e;!this._def.rest&&n.data.length>this._def.items.length&&(fe(n,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const o=[...n.data].map((s,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new fo(n,s,n.path,a)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Jr.mergeArray(r,s)):Jr.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new tl({...this._def,rest:t})}}tl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new tl({items:e,typeName:Oe.ZodTuple,rest:null,...$e(t)})};class xp extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ce.object)return fe(n,{code:oe.invalid_type,expected:Ce.object,received:n.parsedType}),_e;const i=[],o=this._def.keyType,s=this._def.valueType;for(const a in n.data)i.push({key:o._parse(new fo(n,a,n.path,a)),value:s._parse(new fo(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Jr.mergeObjectAsync(r,i):Jr.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof et?new xp({keyType:t,valueType:r,typeName:Oe.ZodRecord,...$e(n)}):new xp({keyType:Ro.create(),valueType:t,typeName:Oe.ZodRecord,...$e(r)})}}class NB extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ce.map)return fe(n,{code:oe.invalid_type,expected:Ce.map,received:n.parsedType}),_e;const i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([a,c],u)=>({key:i._parse(new fo(n,a,n.path,[u,"key"])),value:o._parse(new fo(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of s){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return _e;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of s){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return _e;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}}}}NB.create=(e,t,r)=>new NB({valueType:t,keyType:e,typeName:Oe.ZodMap,...$e(r)});class zd extends et{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ce.set)return fe(n,{code:oe.invalid_type,expected:Ce.set,received:n.parsedType}),_e;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(fe(n,{code:oe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(fe(n,{code:oe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const o=this._def.valueType;function s(c){const u=new Set;for(const d of c){if(d.status==="aborted")return _e;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>o._parse(new fo(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>s(c)):s(a)}min(t,r){return new zd({...this._def,minSize:{value:t,message:Ae.toString(r)}})}max(t,r){return new zd({...this._def,maxSize:{value:t,message:Ae.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}zd.create=(e,t)=>new zd({valueType:e,minSize:null,maxSize:null,typeName:Oe.ZodSet,...$e(t)});class jB extends et{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}jB.create=(e,t)=>new jB({getter:e,typeName:Oe.ZodLazy,...$e(t)});class TB extends et{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return fe(r,{received:r.data,code:oe.invalid_literal,expected:this._def.value}),_e}return{status:"valid",value:t.data}}get value(){return this._def.value}}TB.create=(e,t)=>new TB({value:e,typeName:Oe.ZodLiteral,...$e(t)});function w_(e,t){return new Nc({values:e,typeName:Oe.ZodEnum,...$e(t)})}class Nc extends et{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return fe(r,{expected:at.joinValues(n),received:r.parsedType,code:oe.invalid_type}),_e}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return fe(r,{received:r.data,code:oe.invalid_enum_value,options:n}),_e}return di(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Nc.create(t,{...this._def,...r})}exclude(t,r=this._def){return Nc.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Nc.create=w_;class EB extends et{_parse(t){const r=at.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Ce.string&&n.parsedType!==Ce.number){const i=at.objectValues(r);return fe(n,{expected:at.joinValues(i),received:n.parsedType,code:oe.invalid_type}),_e}if(this._cache||(this._cache=new Set(at.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=at.objectValues(r);return fe(n,{received:n.data,code:oe.invalid_enum_value,options:i}),_e}return di(t.data)}get enum(){return this._def.values}}EB.create=(e,t)=>new EB({values:e,typeName:Oe.ZodNativeEnum,...$e(t)});class Ap extends et{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ce.promise&&r.common.async===!1)return fe(r,{code:oe.invalid_type,expected:Ce.promise,received:r.parsedType}),_e;const n=r.parsedType===Ce.promise?r.data:Promise.resolve(r.data);return di(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ap.create=(e,t)=>new Ap({type:e,typeName:Oe.ZodPromise,...$e(t)});class jc extends et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:s=>{fe(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async a=>{if(r.value==="aborted")return _e;const c=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return c.status==="aborted"?_e:c.status==="dirty"||r.value==="dirty"?Yu(c.value):c});{if(r.value==="aborted")return _e;const a=this._def.schema._parseSync({data:s,path:n.path,parent:n});return a.status==="aborted"?_e:a.status==="dirty"||r.value==="dirty"?Yu(a.value):a}}if(i.type==="refinement"){const s=a=>{const c=i.refinement(a,o);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?_e:(a.status==="dirty"&&r.dirty(),s(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?_e:(a.status==="dirty"&&r.dirty(),s(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!kc(s))return _e;const a=i.transform(s.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>kc(s)?Promise.resolve(i.transform(s.value,o)).then(a=>({status:r.value,value:a})):_e);at.assertNever(i)}}jc.create=(e,t,r)=>new jc({schema:e,typeName:Oe.ZodEffects,effect:t,...$e(r)});jc.createWithPreprocess=(e,t,r)=>new jc({schema:t,effect:{type:"preprocess",transform:e},typeName:Oe.ZodEffects,...$e(r)});class Xs extends et{_parse(t){return this._getType(t)===Ce.undefined?di(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Xs.create=(e,t)=>new Xs({innerType:e,typeName:Oe.ZodOptional,...$e(t)});class Tc extends et{_parse(t){return this._getType(t)===Ce.null?di(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Tc.create=(e,t)=>new Tc({innerType:e,typeName:Oe.ZodNullable,...$e(t)});class W0 extends et{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Ce.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}W0.create=(e,t)=>new W0({innerType:e,typeName:Oe.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...$e(t)});class D0 extends et{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yp(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Jo(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Jo(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}D0.create=(e,t)=>new D0({innerType:e,typeName:Oe.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...$e(t)});class RB extends et{_parse(t){if(this._getType(t)!==Ce.nan){const n=this._getOrReturnCtx(t);return fe(n,{code:oe.invalid_type,expected:Ce.nan,received:n.parsedType}),_e}return{status:"valid",value:t.data}}}RB.create=e=>new RB({typeName:Oe.ZodNaN,...$e(e)});class WY extends et{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ow extends et{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?_e:o.status==="dirty"?(r.dirty(),Yu(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?_e:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new ow({in:t,out:r,typeName:Oe.ZodPipeline})}}class $0 extends et{_parse(t){const r=this._def.innerType._parse(t),n=i=>(kc(i)&&(i.value=Object.freeze(i.value)),i);return yp(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}$0.create=(e,t)=>new $0({innerType:e,typeName:Oe.ZodReadonly,...$e(t)});var Oe;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Oe||(Oe={}));const St=Ro.create,As=Bc.create,tc=Z0.create,DY=H0.create;qs.create;const fI=so.create,Qo=tr.create;vp.create;bp.create;tl.create;const $Y=xp.create,XY=Nc.create;Ap.create;Xs.create;Tc.create;const OB=Qo({x:As(),y:As(),width:As(),height:As(),zIndex:As().optional().default(1)}),FY=$Y(DY()).optional(),KY=Qo({id:St(),type:XY(["chart","portfolio","orderForm","transactionHistory","custom","orderbook","trades","deals","tradesV2","dataProviderSettings","dataProviderDemo","dataProviderSetup","dataProviderDebug","notificationTest","debugUserData","debugCCXTCache","debugBingX","exchanges","markets","pairs","userBalances","userTradingData"]),title:St(),defaultTitle:St(),userTitle:St().optional(),position:OB,config:FY,groupId:St().optional(),showGroupSelector:tc().optional().default(!0),isVisible:tc().default(!0),isMinimized:tc().default(!1),preCollapsePosition:OB.optional()}),VY=Qo({gridSize:Qo({width:As().default(1920),height:As().default(1080)}),snapToGrid:tc().default(!0),gridStep:As().default(10)}),zY=Qo({id:St(),title:St(),description:St().optional(),widgets:fI(KY),layout:VY,createdAt:St(),updatedAt:St(),isDefault:tc().default(!1)}),YY=Qo({dashboards:fI(zY),activeDashboardId:St().optional()});function Bo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function bn(){return new Date().toISOString()}function UY(){const e=bn();return{id:Bo(),title:"Main Dashboard",description:"Default trading dashboard",widgets:[{id:Bo(),type:"portfolio",title:"Balance",defaultTitle:"Balance",userTitle:void 0,position:{x:20,y:80,width:800,height:350,zIndex:1},config:{},isVisible:!0,isMinimized:!1},{id:Bo(),type:"orderForm",title:"Place Order",defaultTitle:"Place Order",userTitle:void 0,position:{x:840,y:80,width:350,height:550,zIndex:2},config:{},isVisible:!0,isMinimized:!1},{id:Bo(),type:"chart",title:"Chart",defaultTitle:"Chart",userTitle:void 0,position:{x:20,y:450,width:650,height:330,zIndex:3},config:{},isVisible:!0,isMinimized:!1},{id:Bo(),type:"transactionHistory",title:"Transaction History",defaultTitle:"Transaction History",userTitle:void 0,position:{x:690,y:450,width:400,height:330,zIndex:4},config:{},isVisible:!0,isMinimized:!1}],layout:{gridSize:{width:1920,height:1080},snapToGrid:!0,gridStep:10},createdAt:e,updatedAt:e,isDefault:!0}}const Mt=ui()(cl(Yg((e,t)=>({dashboards:[],activeDashboardId:void 0,addDashboard:r=>{const n=Bo(),i=bn();return e(o=>{const s={...r,id:n,createdAt:i,updatedAt:i};o.dashboards.push(s),o.activeDashboardId=n}),n},removeDashboard:r=>{e(n=>{var o;const i=n.dashboards.findIndex(s=>s.id===r);i!==-1&&(n.dashboards.splice(i,1),n.activeDashboardId===r&&(n.activeDashboardId=(o=n.dashboards[0])==null?void 0:o.id))})},updateDashboard:(r,n)=>{e(i=>{const o=i.dashboards.find(s=>s.id===r);o&&Object.assign(o,n,{updatedAt:bn()})})},setActiveDashboard:r=>{e(n=>{const i=n.dashboards.find(o=>o.id===r);i?(console.log("DashboardStore: Setting active dashboard",{from:n.activeDashboardId,to:r,title:i.title,widgetsCount:i.widgets.length}),n.activeDashboardId=r):console.warn("DashboardStore: Dashboard not found",r)})},duplicateDashboard:r=>{const n=Bo(),i=bn();return e(o=>{const s=o.dashboards.find(c=>c.id===r);if(!s)return;const a={...s,id:n,title:`${s.title} (Copy)`,isDefault:!1,createdAt:i,updatedAt:i,widgets:s.widgets.map(c=>({...c,id:Bo()}))};o.dashboards.push(a),o.activeDashboardId=n}),n},addWidget:(r,n)=>{const i=Bo();return e(o=>{const s=o.dashboards.find(u=>u.id===r);if(!s)return;let a=n.position.zIndex;(!a||a<=0)&&(a=(s.widgets.length>0?Math.max(...s.widgets.map(d=>d.position.zIndex||1)):1)+1);const c={...n,id:i,position:{...n.position,zIndex:a}};s.widgets.push(c),s.updatedAt=bn()}),i},removeWidget:(r,n)=>{e(i=>{const o=i.dashboards.find(c=>c.id===r);if(!o)return;const s=o.widgets.find(c=>c.id===n),a=o.widgets.findIndex(c=>c.id===n);a!==-1&&(o.widgets.splice(a,1),o.updatedAt=bn(),(s==null?void 0:s.type)==="chart"&&console.log(` Dashboard: Removed chart widget ${n}, cleanup handled by component`))})},updateWidget:(r,n,i)=>{e(o=>{const s=o.dashboards.find(c=>c.id===r);if(!s)return;const a=s.widgets.find(c=>c.id===n);a&&(Object.assign(a,i),s.updatedAt=bn())})},moveWidget:(r,n,i,o)=>{e(s=>{const a=s.dashboards.find(u=>u.id===r);if(!a)return;const c=a.widgets.find(u=>u.id===n);c&&(c.position.x=i,c.position.y=o,a.updatedAt=bn())})},resizeWidget:(r,n,i,o)=>{e(s=>{const a=s.dashboards.find(u=>u.id===r);if(!a)return;const c=a.widgets.find(u=>u.id===n);c&&(c.position.width=i,c.position.height=o,a.updatedAt=bn())})},bringWidgetToFront:(r,n)=>{e(i=>{const o=i.dashboards.find(c=>c.id===r);if(!o)return;const s=o.widgets.find(c=>c.id===n);if(!s)return;const a=Math.max(...o.widgets.map(c=>c.position.zIndex||1));s.position.zIndex=a+1,o.updatedAt=bn()})},toggleWidgetVisibility:(r,n)=>{e(i=>{const o=i.dashboards.find(a=>a.id===r);if(!o)return;const s=o.widgets.find(a=>a.id===n);s&&(s.isVisible=!s.isVisible,o.updatedAt=bn())})},toggleWidgetMinimized:(r,n)=>{e(i=>{const o=i.dashboards.find(a=>a.id===r);if(!o)return;const s=o.widgets.find(a=>a.id===n);if(s){if(s.isMinimized)s.preCollapsePosition&&(s.position={...s.preCollapsePosition},s.preCollapsePosition=void 0);else{s.preCollapsePosition={...s.position};const c=o.widgets.filter(I=>I.id!==n&&I.isMinimized).length,u=window.innerWidth,d=10,g=200,f=40,m=c*(g+d);let v=Math.max(d,(u-m)/2+c*(g+d)),p=window.innerHeight-f-d;s.position.x=v,s.position.y=p,s.position.width=g,s.position.height=f}s.isMinimized=!s.isMinimized,o.updatedAt=bn()}})},updateWidgetTitle:(r,n,i)=>{e(o=>{const s=o.dashboards.find(c=>c.id===r);if(!s)return;const a=s.widgets.find(c=>c.id===n);a&&(a.userTitle=i.trim()===""?void 0:i.trim(),s.updatedAt=bn())})},getActiveDashboard:()=>{const r=t();return r.dashboards.find(n=>n.id===r.activeDashboardId)},getDashboardById:r=>t().dashboards.find(i=>i.id===r),getWidgetById:(r,n)=>{const o=t().dashboards.find(s=>s.id===r);return o==null?void 0:o.widgets.find(s=>s.id===n)},initializeWithDefault:()=>{e(r=>{if(r.dashboards.length===0){const n=UY();console.log("DashboardStore: Creating default dashboard",{id:n.id,title:n.title,widgetsCount:n.widgets.length}),r.dashboards.push(n),r.activeDashboardId=n.id}})}})),{name:"dashboard-store",partialize:e=>({dashboards:e.dashboards,activeDashboardId:e.activeDashboardId}),merge:(e,t)=>{try{const r=YY.parse(e);return{...t,...r}}catch{return t}},onRehydrateStorage:()=>e=>{e&&e.initializeWithDefault()}})),wr=[];for(let e=0;e<256;++e)wr.push((e+256).toString(16).slice(1));function JY(e,t=0){return(wr[e[t+0]]+wr[e[t+1]]+wr[e[t+2]]+wr[e[t+3]]+"-"+wr[e[t+4]]+wr[e[t+5]]+"-"+wr[e[t+6]]+wr[e[t+7]]+"-"+wr[e[t+8]]+wr[e[t+9]]+"-"+wr[e[t+10]]+wr[e[t+11]]+wr[e[t+12]]+wr[e[t+13]]+wr[e[t+14]]+wr[e[t+15]]).toLowerCase()}let lC;const QY=new Uint8Array(16);function qY(){if(!lC){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");lC=crypto.getRandomValues.bind(crypto)}return lC(QY)}const e4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),GB={randomUUID:e4};function t4(e,t,r){var i;if(GB.randomUUID&&!e)return GB.randomUUID();e=e||{};const n=e.random??((i=e.rng)==null?void 0:i.call(e))??qY();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,JY(n)}const zr=ui()(cl((e,t)=>({groups:[],selectedGroupId:void 0,createGroup:r=>{const n={...r,id:t4(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(i=>({groups:[...i.groups,n]})),n},updateGroup:(r,n)=>{e(i=>({groups:i.groups.map(o=>o.id===r?{...o,...n,updatedAt:new Date().toISOString()}:o)}))},deleteGroup:r=>{const n=t().getTransparentGroup();e(i=>({groups:i.groups.filter(o=>o.id!==r),selectedGroupId:i.selectedGroupId===r?n==null?void 0:n.id:i.selectedGroupId}))},selectGroup:r=>{e({selectedGroupId:r})},getGroupById:r=>t().groups.find(n=>n.id===r),getTransparentGroup:()=>t().groups.find(r=>r.color==="transparent"),setTradingPair:(r,n)=>{e(i=>({groups:i.groups.map(o=>o.id===r?{...o,tradingPair:n,updatedAt:new Date().toISOString()}:o)}))},setAccount:(r,n)=>{e(i=>({groups:i.groups.map(o=>o.id===r?{...o,account:n,updatedAt:new Date().toISOString()}:o)}))},setExchange:(r,n)=>{e(i=>({groups:i.groups.map(o=>o.id===r?{...o,exchange:n,updatedAt:new Date().toISOString()}:o)}))},setMarket:(r,n)=>{e(i=>({groups:i.groups.map(o=>o.id===r?{...o,market:n,updatedAt:new Date().toISOString()}:o)}))},resetGroup:r=>{e(n=>({groups:n.groups.map(i=>i.id===r?{...i,account:void 0,exchange:void 0,market:void 0,tradingPair:void 0,updatedAt:new Date().toISOString()}:i)}))},initializeDefaultGroups:()=>{const{groups:r}=t();if(r.length===0){[{name:"Transparent",color:"transparent",account:"suenot@gmail.com",exchange:"binance",market:"spot",tradingPair:"BTC/USDT"},{name:"Cyan",color:"#00BCD4"},{name:"Red",color:"#F44336"},{name:"Purple",color:"#9C27B0"},{name:"Blue",color:"#2196F3"},{name:"Green",color:"#4CAF50"},{name:"Orange",color:"#FF9800"},{name:"Pink",color:"#E91E63"}].forEach(o=>{t().createGroup(o)});const i=t().getTransparentGroup();i&&(e({selectedGroupId:i.id}),console.log(" [GroupStore] Initialized transparent group as selected:",{id:i.id,account:i.account,exchange:i.exchange,market:i.market,tradingPair:i.tradingPair}))}}}),{name:"group-store",version:2})),r4=Object.freeze(Object.defineProperty({__proto__:null,useGroupStore:zr},Symbol.toStringTag,{value:"Module"})),n4=({selectedGroupId:e,onGroupSelect:t,className:r=""})=>{const[n,i]=b.useState(!1),[o,s]=b.useState(null),{groups:a,getGroupById:c,getTransparentGroup:u,initializeDefaultGroups:d,resetGroup:g}=zr();H.useEffect(()=>{d()},[d]);const f=e?c(e):void 0,m=C=>{t(C),i(!1)},v=(C,x)=>{C.stopPropagation(),g(x)},p=C=>{C.stopPropagation();const x=C.currentTarget.getBoundingClientRect();s({x:x.left,y:x.bottom+window.scrollY}),i(!n)},I=f&&f.color!=="transparent",h=C=>({transparent:"Transparent","#00BCD4":"Cyan","#F44336":"Red","#9C27B0":"Purple","#2196F3":"Blue","#4CAF50":"Green","#FF9800":"Orange","#E91E63":"Pink"})[C]||"Unknown",y=!f||(f==null?void 0:f.color)==="transparent";return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`relative ${r}`,children:l.jsx("button",{onClick:p,className:`w-3 h-3 rounded-full transition-colors flex items-center justify-center relative ${y?"border border-terminal-muted hover:border-terminal-text":"border hover:border-terminal-accent"}`,style:{backgroundColor:(f==null?void 0:f.color)==="transparent"?"transparent":f?f.color:"transparent",borderColor:y?void 0:f?f.color:"hsl(var(--terminal-border))"},title:I?`Group: ${f.name} (click to change)`:"Select group color",children:y&&l.jsx(Us,{size:6,className:"text-terminal-muted"})})}),n&&o&&Li.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>i(!1)}),l.jsx("div",{className:"fixed w-[500px] bg-terminal-widget border border-terminal-border rounded-md shadow-lg z-[9999]",style:{left:o.x,top:o.y+4},children:l.jsx("div",{className:"p-3",children:l.jsx("div",{className:"max-h-72 overflow-y-auto",children:a.map(C=>l.jsxs("div",{className:`group w-full flex items-start px-3 py-3 text-sm rounded hover:bg-terminal-accent/20 cursor-pointer relative ${e===C.id?"bg-terminal-accent/30":""}`,onClick:()=>m(C.id),children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-3 flex-shrink-0 border mt-0.5",style:{backgroundColor:C.color==="transparent"?"transparent":C.color,borderColor:C.color==="transparent"?"hsl(var(--terminal-border))":C.color}}),l.jsx("div",{className:"text-left flex-1",children:C.account||C.exchange||C.market||C.tradingPair?l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mr-2 flex-shrink-0",title:"Configured"}),l.jsxs("span",{className:"text-terminal-text font-medium",children:[h(C.color)," - Configured"]})]}),l.jsxs("div",{className:"text-xs text-terminal-muted pl-3.5",children:[C.account&&l.jsx("span",{className:"mr-2",children:C.account}),C.exchange&&l.jsxs("span",{className:"mr-2",children:[" ",C.exchange]}),C.market&&l.jsxs("span",{className:"mr-2",children:[" ",C.market]}),C.tradingPair&&l.jsxs("span",{children:[" ",C.tradingPair]})]})]}):l.jsx("span",{className:"text-terminal-muted",children:h(C.color)})}),(C.account||C.exchange||C.market||C.tradingPair)&&l.jsx("button",{onClick:x=>v(x,C.id),className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-terminal-accent/30 transition-opacity flex-shrink-0",title:"Reset group settings",children:l.jsx(Cr,{size:12,className:"text-terminal-muted hover:text-terminal-text"})})]},C.id))})})})]}),document.body)]})};function Il(e,t,r){let n=r.initialDeps??[],i,o=!0;function s(){var a,c,u;let d;r.key&&((a=r.debug)!=null&&a.call(r))&&(d=Date.now());const g=e();if(!(g.length!==n.length||g.some((v,p)=>n[p]!==v)))return i;n=g;let m;if(r.key&&((c=r.debug)!=null&&c.call(r))&&(m=Date.now()),i=t(...g),r.key&&((u=r.debug)!=null&&u.call(r))){const v=Math.round((Date.now()-d)*100)/100,p=Math.round((Date.now()-m)*100)/100,I=p/16,h=(y,C)=>{for(y=String(y);y.length<C;)y=" "+y;return y};console.info(`%c ${h(p,5)} /${h(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*I,120))}deg 100% 31%);`,r==null?void 0:r.key)}return r!=null&&r.onChange&&!(o&&r.skipInitialOnChange)&&r.onChange(i),o=!1,i}return s.updateDeps=a=>{n=a},s}function PB(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const i4=(e,t)=>Math.abs(e-t)<1.01,o4=(e,t,r)=>{let n;return function(...i){e.clearTimeout(n),n=e.setTimeout(()=>t.apply(this,i),r)}},_B=e=>{const{offsetWidth:t,offsetHeight:r}=e;return{width:t,height:r}},s4=e=>e,a4=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let i=t;i<=r;i++)n.push(i);return n},l4=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;const i=s=>{const{width:a,height:c}=s;t({width:Math.round(a),height:Math.round(c)})};if(i(_B(r)),!n.ResizeObserver)return()=>{};const o=new n.ResizeObserver(s=>{const a=()=>{const c=s[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(_B(r))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return o.observe(r,{box:"border-box"}),()=>{o.unobserve(r)}},MB={passive:!0},ZB=typeof window>"u"?!0:"onscrollend"in window,c4=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;let i=0;const o=e.options.useScrollendEvent&&ZB?()=>{}:o4(n,()=>{t(i,!1)},e.options.isScrollingResetDelay),s=d=>()=>{const{horizontal:g,isRtl:f}=e.options;i=g?r.scrollLeft*(f&&-1||1):r.scrollTop,o(),t(i,d)},a=s(!0),c=s(!1);r.addEventListener("scroll",a,MB);const u=e.options.useScrollendEvent&&ZB;return u&&r.addEventListener("scrollend",c,MB),()=>{r.removeEventListener("scroll",a),u&&r.removeEventListener("scrollend",c)}},u4=(e,t,r)=>{if(t!=null&&t.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[r.options.horizontal?"inlineSize":"blockSize"])}return e[r.options.horizontal?"offsetWidth":"offsetHeight"]},d4=(e,{adjustments:t=0,behavior:r},n)=>{var i,o;const s=e+t;(o=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||o.call(i,{[n.options.horizontal?"left":"top"]:s,behavior:r})};class g4{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let r=null;const n=()=>r||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:r=new this.targetWindow.ResizeObserver(i=>{i.forEach(o=>{const s=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),r=null},observe:i=>{var o;return(o=n())==null?void 0:o.observe(i,{box:"border-box"})},unobserve:i=>{var o;return(o=n())==null?void 0:o.unobserve(i)}}})(),this.range=null,this.setOptions=r=>{Object.entries(r).forEach(([n,i])=>{typeof i>"u"&&delete r[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:s4,rangeExtractor:a4,onChange:()=>{},measureElement:u4,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...r}},this.notify=r=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,r)},this.maybeNotify=Il(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),r=>{this.notify(r)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(r=>r()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var r;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((r=this.scrollElement)==null?void 0:r.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=o,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(r,n)=>{const i=new Map,o=new Map;for(let s=n-1;s>=0;s--){const a=r[s];if(i.has(a.lane))continue;const c=o.get(a.lane);if(c==null||a.end>c.end?o.set(a.lane,a):a.end<c.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((s,a)=>s.end===a.end?s.index-a.index:s.end-a.end)[0]:void 0},this.getMeasurementOptions=Il(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(r,n,i,o,s,a)=>(this.prevLanes!==void 0&&this.prevLanes!==a&&(this.lanesChangedFlag=!0),this.prevLanes=a,this.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:n,scrollMargin:i,getItemKey:o,enabled:s,lanes:a}),{key:!1}),this.getMeasurements=Il(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:r,paddingStart:n,scrollMargin:i,getItemKey:o,enabled:s,lanes:a},c)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>r)for(const f of this.laneAssignments.keys())f>=r&&this.laneAssignments.delete(f);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const u=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===r&&(this.lanesSettling=!1);const d=this.measurementsCache.slice(0,u),g=new Array(a).fill(void 0);for(let f=0;f<u;f++){const m=d[f];m&&(g[m.lane]=f)}for(let f=u;f<r;f++){const m=o(f),v=this.laneAssignments.get(f);let p,I;if(v!==void 0&&this.options.lanes>1){p=v;const x=g[p],A=x!==void 0?d[x]:void 0;I=A?A.end+this.options.gap:n+i}else{const x=this.options.lanes===1?d[f-1]:this.getFurthestMeasurement(d,f);I=x?x.end+this.options.gap:n+i,p=x?x.lane:f%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(f,p)}const h=c.get(m),y=typeof h=="number"?h:this.options.estimateSize(f),C=I+y;d[f]={index:f,start:I,size:y,end:C,key:m,lane:p},g[p]=f}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Il(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(r,n,i,o)=>this.range=r.length>0&&n>0?f4({measurements:r,outerSize:n,scrollOffset:i,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Il(()=>{let r=null,n=null;const i=this.calculateRange();return i&&(r=i.startIndex,n=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,r,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,r,n]},(r,n,i,o,s)=>o===null||s===null?[]:r({startIndex:o,endIndex:s,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=r=>{const n=this.options.indexAttribute,i=r.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(r,n)=>{const i=this.indexFromElement(r),o=this.measurementsCache[i];if(!o)return;const s=o.key,a=this.elementsCache.get(s);a!==r&&(a&&this.observer.unobserve(a),this.observer.observe(r),this.elementsCache.set(s,r)),r.isConnected&&this.resizeItem(i,this.options.measureElement(r,n,this))},this.resizeItem=(r,n)=>{const i=this.measurementsCache[r];if(!i)return;const o=this.itemSizeCache.get(i.key)??i.size,s=n-o;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=r=>{if(!r){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(r,void 0)},this.getVirtualItems=Il(()=>[this.getVirtualIndexes(),this.getMeasurements()],(r,n)=>{const i=[];for(let o=0,s=r.length;o<s;o++){const a=r[o],c=n[a];i.push(c)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=r=>{const n=this.getMeasurements();if(n.length!==0)return PB(n[S_(0,n.length-1,i=>PB(n[i]).start,r)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const r=this.scrollElement.document.documentElement;return this.options.horizontal?r.scrollWidth-this.scrollElement.innerWidth:r.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(r,n,i=0)=>{if(!this.scrollElement)return 0;const o=this.getSize(),s=this.getScrollOffset();n==="auto"&&(n=r>=s+o?"end":"start"),n==="center"?r+=(i-o)/2:n==="end"&&(r-=o);const a=this.getMaxScrollOffset();return Math.max(Math.min(a,r),0)},this.getOffsetForIndex=(r,n="auto")=>{r=Math.max(0,Math.min(r,this.options.count-1));const i=this.measurementsCache[r];if(!i)return;const o=this.getSize(),s=this.getScrollOffset();if(n==="auto")if(i.end>=s+o-this.options.scrollPaddingEnd)n="end";else if(i.start<=s+this.options.scrollPaddingStart)n="start";else return[s,n];if(n==="end"&&r===this.options.count-1)return[this.getMaxScrollOffset(),n];const a=n==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,n,i.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(r,{align:n="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(r,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(r,{align:n="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r=Math.max(0,Math.min(r,this.options.count-1)),this.currentScrollToIndex=r;let o=0;const s=10,a=u=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(r,u);if(!d){console.warn("Failed to get offset for index:",r);return}const[g,f]=d;this._scrollToOffset(g,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const m=()=>{if(this.currentScrollToIndex!==r)return;const v=this.getScrollOffset(),p=this.getOffsetForIndex(r,f);if(!p){console.warn("Failed to get offset for index:",r);return}i4(p[0],v)||c(f)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(m):m()})},c=u=>{this.targetWindow&&this.currentScrollToIndex===r&&(o++,o<s?this.targetWindow.requestAnimationFrame(()=>a(u)):console.warn(`Failed to scroll to index ${r} after ${s} attempts.`))};a(n)},this.scrollBy=(r,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+r,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var r;const n=this.getMeasurements();let i;if(n.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((r=n[n.length-1])==null?void 0:r.end)??0;else{const o=Array(this.options.lanes).fill(null);let s=n.length-1;for(;s>=0&&o.some(a=>a===null);){const a=n[s];o[a.lane]===null&&(o[a.lane]=a.end),s--}i=Math.max(...o.filter(a=>a!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(r,{adjustments:n,behavior:i})=>{this.options.scrollToFn(r,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const S_=(e,t,r,n)=>{for(;e<=t;){const i=(e+t)/2|0,o=r(i);if(o<n)e=i+1;else if(o>n)t=i-1;else return i}return e>0?e-1:0};function f4({measurements:e,outerSize:t,scrollOffset:r,lanes:n}){const i=e.length-1,o=c=>e[c].start;if(e.length<=n)return{startIndex:0,endIndex:i};let s=S_(0,i,o,r),a=s;if(n===1)for(;a<i&&e[a].end<r+t;)a++;else if(n>1){const c=Array(n).fill(0);for(;a<i&&c.some(d=>d<r+t);){const d=e[a];c[d.lane]=d.end,a++}const u=Array(n).fill(r+t);for(;s>=0&&u.some(d=>d>=r);){const d=e[s];u[d.lane]=d.start,s--}s=Math.max(0,s-s%n),a=Math.min(i,a+(n-1-a%n))}return{startIndex:s,endIndex:a}}const HB=typeof document<"u"?b.useLayoutEffect:b.useEffect;function h4({useFlushSync:e=!0,...t}){const r=b.useReducer(()=>({}),{})[1],n={...t,onChange:(o,s)=>{var a;e&&s?Li.flushSync(r):r(),(a=t.onChange)==null||a.call(t,o,s)}},[i]=b.useState(()=>new g4(n));return i.setOptions(n),HB(()=>i._didMount(),[]),HB(()=>i._willUpdate()),i}function Hi(e){return h4({observeElementRect:l4,observeElementOffset:c4,scrollToFn:d4,...e})}const sw="AES-GCM",p4=256,m4=16,wp=12,k_=1e5;function I4(){return crypto.getRandomValues(new Uint8Array(m4))}function y4(){return crypto.getRandomValues(new Uint8Array(wp))}async function LB(e,t){const n=new TextEncoder().encode(e),i=await crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits","deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:k_,hash:"SHA-256"},i,{name:sw,length:p4},!1,["encrypt","decrypt"])}async function WB(e,t){const n=new TextEncoder().encode(e),i=await crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]),o=await crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:k_,hash:"SHA-256"},i,256);return aw(o)}async function C4(e,t){const n=new TextEncoder().encode(e),i=y4(),o=await crypto.subtle.encrypt({name:sw,iv:i},t,n),s=new Uint8Array(i.length+o.byteLength);return s.set(i,0),s.set(new Uint8Array(o),i.length),aw(s.buffer)}async function v4(e,t){const r=B_(e),n=new Uint8Array(r),i=n.slice(0,wp),o=n.slice(wp),s=await crypto.subtle.decrypt({name:sw,iv:i},t,o);return new TextDecoder().decode(s)}function aw(e){const t=new Uint8Array(e);let r="";for(let n=0;n<t.byteLength;n++)r+=String.fromCharCode(t[n]);return btoa(r)}function B_(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}function cC(e){if(!e)return!1;try{return atob(e).length>wp}catch{return!1}}let ea=null;const X0="encryption-salt",DB="encryption-hash";async function $B(e){const t=localStorage.getItem(X0),r=localStorage.getItem(DB);if(t&&r){const n=new Uint8Array(B_(t));return await WB(e,n)!==r?!1:(ea=await LB(e,n),!0)}else{const n=I4(),i=await WB(e,n);return localStorage.setItem(X0,aw(n.buffer)),localStorage.setItem(DB,i),ea=await LB(e,n),!0}}function wa(){return ea!==null}function XB(){return localStorage.getItem(X0)!==null}async function uC(e){if(!ea)throw new Error("Encryption not initialized. Please set up master password first.");return C4(e,ea)}async function dC(e){if(!ea)throw new Error("Encryption not initialized. Please unlock with master password first.");return v4(e,ea)}function b4(){ea=null}const N_=Qo({id:St(),exchange:St(),key:St().optional(),privateKey:St().optional(),password:St().optional(),uid:St().optional(),email:St(),avatarUrl:St().url().optional(),notes:St().optional(),isEncrypted:tc().optional()}),j_=Qo({id:St(),email:St(),avatarUrl:St().url().optional(),notes:St().optional(),name:St().optional(),accounts:fI(N_)}),T_=Qo({users:fI(j_),activeUserId:St().optional()});function FB(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}async function gC(e){if(!wa())return e;const t={...e};return e.key&&!e.isEncrypted&&(t.key=await uC(e.key)),e.privateKey&&!e.isEncrypted&&(t.privateKey=await uC(e.privateKey)),e.password&&!e.isEncrypted&&(t.password=await uC(e.password)),t.isEncrypted=!0,t}async function x4(e){if(!wa()||!e.isEncrypted)return e;const t={...e};try{e.key&&cC(e.key)&&(t.key=await dC(e.key)),e.privateKey&&cC(e.privateKey)&&(t.privateKey=await dC(e.privateKey)),e.password&&cC(e.password)&&(t.password=await dC(e.password)),t.isEncrypted=!1}catch(r){return console.error("Failed to decrypt account:",r),e}return t}const ct=ui()(cl(Yg((e,t)=>({users:[],activeUserId:void 0,isLocked:!0,needsMasterPassword:!XB(),addUser:({email:r,avatarUrl:n,notes:i,name:o})=>{e(s=>{if(s.users.some(u=>u.email===r))return;const a=FB(),c={id:a,email:r,avatarUrl:n,notes:i,name:o,accounts:[]};s.users.push(c),s.activeUserId=a})},removeUser:r=>{e(n=>{var i;n.users=n.users.filter(o=>o.id!==r),n.activeUserId===r&&(n.activeUserId=(i=n.users[0])==null?void 0:i.id)})},setActiveUser:r=>{e(n=>{n.users.some(i=>i.id===r)&&(n.activeUserId=r)})},updateUser:(r,n)=>{e(i=>{const o=i.users.find(s=>s.id===r);if(o){if(n.email&&n.email!==o.email&&i.users.some(s=>s.email===n.email))return;n.email&&(o.email=n.email),n.avatarUrl!==void 0&&(o.avatarUrl=n.avatarUrl),n.notes!==void 0&&(o.notes=n.notes),n.name!==void 0&&(o.name=n.name)}})},addAccount:(r,n)=>{const i={...n,id:FB()};wa()?gC(i).then(o=>{e(s=>{const a=s.users.find(c=>c.id===r);a&&a.accounts.push(o)})}):e(o=>{const s=o.users.find(a=>a.id===r);s&&s.accounts.push(i)})},removeAccount:(r,n)=>{e(i=>{const o=i.users.find(s=>s.id===r);o&&(o.accounts=o.accounts.filter(s=>s.id!==n))})},updateAccount:(r,n)=>{wa()?gC(n).then(i=>{e(o=>{const s=o.users.find(a=>a.id===r);if(s){const a=s.accounts.findIndex(c=>c.id===n.id);a!==-1&&(s.accounts[a]=i)}})}):e(i=>{const o=i.users.find(s=>s.id===r);if(o){const s=o.accounts.findIndex(a=>a.id===n.id);s!==-1&&(o.accounts[s]=n)}})},unlockStore:async r=>{const n=await $B(r);return n&&e(i=>{i.isLocked=!1,i.needsMasterPassword=!1}),n},lockStore:()=>{b4(),e(r=>{r.isLocked=!0})},setupMasterPassword:async r=>{const n=await $B(r);return n&&(e(i=>{i.isLocked=!1,i.needsMasterPassword=!1}),await t().encryptAllAccounts()),n},getDecryptedAccount:async(r,n)=>{const o=t().users.find(a=>a.id===r);if(!o)return null;const s=o.accounts.find(a=>a.id===n);return s?s.isEncrypted&&wa()?x4(s):s:null},encryptAllAccounts:async()=>{if(!wa())return;const r=t(),n=await Promise.all(r.users.map(async i=>({...i,accounts:await Promise.all(i.accounts.map(o=>gC(o)))})));e(i=>{i.users=n})},migrateUnencryptedData:async()=>{if(!wa())return;const r=t();let n=!1;for(const i of r.users){for(const o of i.accounts)if(!o.isEncrypted&&(o.key||o.privateKey||o.password)){n=!0;break}if(n)break}n&&await t().encryptAllAccounts()}})),{name:"user-store",partialize:e=>({users:e.users,activeUserId:e.activeUserId}),merge:(e,t)=>{try{const r=T_.parse(e);return{...t,...r,isLocked:!0,needsMasterPassword:!XB()}}catch{return t}}})),Sl=Object.freeze(Object.defineProperty({__proto__:null,ExchangeAccountSchema:N_,UserSchema:j_,UserStoreStateSchema:T_,useUserStore:ct},Symbol.toStringTag,{value:"Module"})),Hf=(e,t,r)=>{if(!r)throw new Error("CCXT library not available");const n=r[e];if(!n)throw new Error(`Exchange ${e} not found in CCXT`);let i;try{const s=ct.getState();i=s.users.find(a=>a.id===s.activeUserId)}catch(s){console.warn("Failed to get user store:",s),i=void 0}let o={};if(t.type==="ccxt-browser"){const s=t.config;if(o={sandbox:s.sandbox||!1,options:s.options||{}},i){const a=E_(i,e);if(a&&a.key&&a.privateKey){const c=R_(a);o.apiKey=c.apiKey,o.secret=c.secret,c.password&&(o.password=c.password),c.uid&&(o.uid=c.uid)}}}else if(t.type==="ccxt-server"){const s=t.config;o={serverUrl:s.serverUrl,timeout:s.timeout||3e4,sandbox:s.sandbox||!1}}return new n(o)},E_=(e,t)=>e.accounts.find(r=>r.exchange===t),R_=e=>({exchange:e.exchange,apiKey:e.key,secret:e.privateKey,password:e.password,uid:e.uid,email:e.email}),A4=(e,t)=>e.exchanges.includes("*")?!0:e.exchanges.includes(t),w4=(e,t)=>e.filter(r=>A4(r,t)),O_=(e,t)=>{const r=w4(e,t);if(r.length===0)return null;const n=r.sort((i,o)=>{const s=!i.exchanges.includes("*"),a=!o.exchanges.includes("*");return s&&!a?-1:!s&&a?1:i.priority-o.priority});return n.find(i=>i.status==="connected")||n[0]},S4=(e,t,r)=>{const n=[];for(const i of t){const o=O_(e,i);if(o){const s=r?E_(r,i):void 0;n.push({exchange:i,provider:o,account:s?R_(s):void 0})}}return n},k4=e=>e.length===0?10:Math.max(...e.map(r=>r.priority))+10,B4=(e,t,r)=>{const n=t.includes("*")?"all":t.join("-"),i=Date.now().toString(36);return`${r?r.toLowerCase().replace(/\s+/g,"-"):e}-${n}-${i}`},KB=e=>{const t=[];if(e.id||t.push("Provider ID is required"),e.name||t.push("Provider name is required"),(!e.exchanges||e.exchanges.length===0)&&t.push("Provider must support at least one exchange"),e.type==="ccxt-server"){const r=e.config;r.serverUrl||t.push("Server URL is required for CCXT Server provider");try{new URL(r.serverUrl)}catch{t.push("Server URL must be a valid URL")}}return{isValid:t.length===0,errors:t}},Oi=()=>window.ccxt?window.ccxt:(console.error("CCXT not loaded! Check CDN script tag connection"),null),G_=()=>{const e=Oi();return e&&e.pro?e.pro:(console.error(" CCXT Pro not available. Make sure you are using the full CCXT version with WebSocket support"),null)};class N4{constructor(){Ii(this,"logs",[]);Ii(this,"MAX_LOGS",500);Ii(this,"subscribers",[])}addLog(t){const r={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),...t};this.logs.unshift(r),this.logs.length>this.MAX_LOGS&&(this.logs=this.logs.slice(0,this.MAX_LOGS)),this.notifySubscribers()}getLogs(){return[...this.logs]}getFilteredLogs(t){return this.logs.filter(r=>!(t.exchange&&r.exchange!==t.exchange||t.accountId&&r.accountId!==t.accountId||t.method&&r.method!==t.method||t.status&&r.status!==t.status||t.hasError!==void 0&&!!r.error!==t.hasError||t.since&&r.timestamp<t.since))}clearLogs(){this.logs=[],this.notifySubscribers()}subscribe(t){return this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);r>-1&&this.subscribers.splice(r,1)}}getStats(){const r=Date.now()-5*60*1e3,n=this.logs.filter(c=>c.timestamp>r),i=this.logs.filter(c=>c.responseTime!==void 0),o={},s={},a={};return this.logs.forEach(c=>{o[c.method]=(o[c.method]||0)+1,c.exchange&&(s[c.exchange]=(s[c.exchange]||0)+1),c.status&&(a[c.status]=(a[c.status]||0)+1)}),{totalRequests:this.logs.length,successRequests:this.logs.filter(c=>c.status&&c.status>=200&&c.status<400).length,errorRequests:this.logs.filter(c=>c.error||c.status&&c.status>=400).length,averageResponseTime:i.length>0?Math.round(i.reduce((c,u)=>c+(u.responseTime||0),0)/i.length):0,requestsByMethod:o,requestsByExchange:s,requestsByStatus:a,recentRequests:n.length}}notifySubscribers(){this.subscribers.forEach(t=>{try{t([...this.logs])}catch(r){console.error("Error in request logger subscriber:",r)}})}}const No=new N4;function P_(e,t,r){if(!e||!e.fetch)return e;const n=e.fetch;return e.fetch=function(i,o="GET",s={},a=void 0){const c=Date.now(),u={method:o.toUpperCase(),url:i,headers:s,body:a,exchange:t,accountId:r,operation:"CCXT Request"};return n.call(this,i,o,s,a).then(d=>{const g=Date.now()-c;return No.addLog({...u,status:d.status||200,statusText:d.statusText||"OK",responseTime:g,responseData:typeof d=="object"?"[Object]":String(d).substring(0,100)+"..."}),d}).catch(d=>{const g=Date.now()-c;throw No.addLog({...u,error:d.message||String(d),responseTime:g}),d})},e}setInterval(()=>{const e=No.getLogs(),t=Date.now()-60*60*1e3,r=e.filter(n=>n.timestamp>t);r.length!==e.length&&console.log(` [RequestLogger] Cleaned ${e.length-r.length} old request logs`)},10*60*1e3);const j4=Object.freeze(Object.defineProperty({__proto__:null,requestLogger:No,wrapExchangeWithLogger:P_},Symbol.toStringTag,{value:"Module"})),fC=(e,t,r,n,i,o,s)=>({providerId:e,userId:t,accountId:r,exchangeId:n,marketType:i,ccxtType:o,...s}),it=class it{constructor(t){Ii(this,"provider");this.provider=t}static createInstanceKey(t){return`${t.providerId}:${t.userId}:${t.accountId}:${t.exchangeId}:${t.marketType}:${t.ccxtType}`}static createMarketsCacheKey(t,r,n){return`${t}:${r?"sandbox":"live"}:${n}`}static isInstanceValid(t){return Date.now()-t.lastAccess<it.CACHE_TTL}static isMarketsValid(t){const r=it.marketsCache[t];return r?Date.now()-r.timestamp<it.MARKETS_CACHE_TTL:!1}static async loadMarketsWithCache(t,r,n,i){const o=it.createMarketsCacheKey(r,n,i);if(it.isMarketsValid(o)){console.log(` [CCXTBrowser] Using cached markets for ${o}`),t.markets=it.marketsCache[o].markets;return}console.log(` [CCXTBrowser] Loading fresh markets for ${o}`),await t.loadMarkets(),it.marketsCache[o]={markets:t.markets,timestamp:Date.now()},console.log(` [CCXTBrowser] Cached markets for ${o}`)}static async getCCXTInstance(t){const r=it.createInstanceKey(t),n=it.instancesCache.get(r);if(n&&it.isInstanceValid(n))return n.lastAccess=Date.now(),console.log(` [CCXTBrowser] Using cached instance: ${r}`),n.instance;console.log(` [CCXTBrowser] Creating new instance: ${r}`);let i,o;if(t.ccxtType==="pro"){if(i=G_(),!i)throw new Error("CCXT Pro not available");o=i[t.exchangeId]}else{if(i=Oi(),!i)throw new Error("CCXT not available");o=i[t.exchangeId]}if(!o)throw new Error(`Exchange ${t.exchangeId} not found in CCXT${t.ccxtType==="pro"?" Pro":""}`);let s=t.marketType;t.exchangeId==="bybit"&&(s={spot:"spot",futures:"linear",swap:"linear",margin:"spot",options:"option"}[t.marketType]||t.marketType,console.log(` [CCXTBrowser] Bybit mapping: ${t.marketType} -> ${s}`));const a={sandbox:t.sandbox||!1,apiKey:t.apiKey,secret:t.secret,password:t.password,enableRateLimit:!0,defaultType:s};console.log(` [CCXTBrowser] Creating ${t.exchangeId} ${t.ccxtType} instance:`,{providerId:t.providerId,userId:t.userId,accountId:t.accountId,sandbox:a.sandbox,apiKey:a.apiKey?"SET":"NOT_SET",secret:a.secret?"SET":"NOT_SET",defaultType:a.defaultType,marketType:t.marketType,ccxtType:t.ccxtType});const c=new o(a),u=P_(c,t.exchangeId,`${t.userId}:${t.accountId}`);await it.loadMarketsWithCache(u,t.exchangeId,t.sandbox||!1,t.marketType);const d={instance:u,config:{...t},lastAccess:Date.now(),marketsLoaded:!0};return it.instancesCache.set(r,d),console.log(` [CCXTBrowser] Cached new instance: ${r}, total cache size: ${it.instancesCache.size}`),u}async getTradingInstance(t,r,n,i,o,s){const a=fC(this.provider.id,t,r,n,i,o,s);return it.getCCXTInstance(a)}async getMetadataInstance(t,r="spot",n=!1){const i=fC(this.provider.id,"metadata","public",t,r,"regular",{sandbox:n});return it.getCCXTInstance(i)}async getWebSocketInstance(t,r="spot",n=!1){const i=fC(this.provider.id,"websocket","public",t,r,"pro",{sandbox:n});return it.getCCXTInstance(i)}async getSymbolsForExchange(t,r,n){try{const i=await this.getMetadataInstance(t,n||"spot");if(!i.markets)return console.warn(`Markets not loaded for ${t}`),[];const s=Object.keys(i.markets).filter(c=>{var d;const u=i.markets[c];if(!u||u.active===!1)return!1;if(n){const g=n.toLowerCase(),f=(d=u.type)==null?void 0:d.toLowerCase();return g==="spot"?f==="spot":g==="margin"?f==="spot"||f==="margin":g==="futures"||g==="future"?f==="future"||f==="futures"||c.includes(":")&&/:.*\d{6}/.test(c)&&!c.includes("-C")&&!c.includes("-P"):g==="swap"||g==="perpetual"?f==="swap"||f==="perpetual"||!f&&(c.includes(":")&&!/:.*\d{6}/.test(c)||!c.includes(":")&&!c.includes("-C")&&!c.includes("-P")):g==="options"||g==="option"?f==="option"||f==="options"||c.includes("-C")||c.includes("-P"):f===g}return!0}).sort((c,u)=>c.includes("BTC")?-1:u.includes("BTC")?1:c.includes("ETH")?-1:u.includes("ETH")?1:c.localeCompare(u)),a=r&&r>0?s.slice(0,r):s;return console.log(` [CCXTBrowser] Retrieved ${a.length} symbols for ${t}${n?` (${n} market)`:""}`),a}catch(i){return console.error(` [CCXTBrowser] Error getting symbols for exchange: ${t}`,i),[]}}async getMarketsForExchange(t){try{const r=Oi();if(!r)throw new Error("CCXT not available");const n=r[t];if(!n)throw new Error(`Exchange ${t} not found in CCXT`);const o=new n().has||{};console.log(` [CCXTBrowser] Analyzing ${t} static capabilities`);const s=[];return o.spot===!0&&(s.push("spot"),console.log(` [CCXTBrowser] ${t} supports spot trading`)),o.margin===!0&&(s.push("margin"),console.log(` [CCXTBrowser] ${t} supports margin trading`)),o.swap===!0&&(s.push("swap"),console.log(` [CCXTBrowser] ${t} supports swap trading`)),o.future===!0&&(s.push("futures"),console.log(` [CCXTBrowser] ${t} supports futures trading`)),o.option===!0&&(s.push("options"),console.log(` [CCXTBrowser] ${t} supports options trading`)),!s.includes("futures")&&(o.fetchFuturesBalance||o.fetchDerivativesMarkets||o.fetchPositions||o.fetchPosition)&&(s.push("futures"),console.log(` [CCXTBrowser] ${t} supports futures (detected via API methods)`)),!s.includes("margin")&&(o.fetchMarginBalance||o.fetchBorrowRate||o.fetchBorrowRates)&&(s.push("margin"),console.log(` [CCXTBrowser] ${t} supports margin (detected via API methods)`)),console.log(` [CCXTBrowser] Final markets for ${t}:`,{total:s.length,markets:s}),s}catch(r){return console.error(` [CCXTBrowser] Error getting markets for exchange: ${t}`,r),[]}}static invalidateCache(t,r,n,i){const o=[];it.instancesCache.forEach((s,a)=>{const c=a.split(":"),[u,d,g,f]=c;t&&u!==t||r&&d!==r||n&&g!==n||i&&f!==i||o.push(a)}),o.forEach(s=>it.instancesCache.delete(s)),o.length>0&&console.log(` [CCXTBrowser] Invalidated ${o.length} instances`)}static clearCache(){it.instancesCache.clear(),it.marketsCache={},console.log(" [CCXTBrowser] Cleared entire cache")}static getCacheStats(){const t=Array.from(it.instancesCache.entries()).map(([r,n])=>{const[i,o,s,a,c,u]=r.split(":");return{key:r,providerId:i,userId:o,accountId:s,exchangeId:a,marketType:c,ccxtType:u,lastAccess:n.lastAccess,age:Date.now()-n.lastAccess,marketsLoaded:n.marketsLoaded}});return{totalInstances:it.instancesCache.size,totalMarketsCache:Object.keys(it.marketsCache).length,instances:t}}static cleanup(){const t=[];it.instancesCache.forEach((r,n)=>{it.isInstanceValid(r)||t.push(n)}),t.forEach(r=>it.instancesCache.delete(r)),t.length>0&&console.log(` [CCXTBrowser] Cleaned up ${t.length} expired instances`)}};Ii(it,"instancesCache",new Map),Ii(it,"marketsCache",{}),Ii(it,"CACHE_TTL",24*60*60*1e3),Ii(it,"MARKETS_CACHE_TTL",60*60*1e3);let Gi=it;const Yd=e=>new Gi(e);setInterval(()=>{Gi.cleanup()},10*60*1e3);const F0=Object.freeze(Object.defineProperty({__proto__:null,CCXTBrowserProviderImpl:Gi,createCCXTBrowserProvider:Yd},Symbol.toStringTag,{value:"Module"})),T4=(e,t)=>({addProvider:r=>{e(n=>{const i=KB(r);if(!i.isValid){console.error(" Invalid provider config:",i.errors);return}n.providers[r.id]=r,n.activeProviderId||(n.activeProviderId=r.id),console.log(` Provider added: ${r.id}`,r)})},removeProvider:r=>{e(n=>{if(Object.keys(n.activeSubscriptions).forEach(i=>{n.activeSubscriptions[i].providerId===r&&(t().stopDataFetching(i),delete n.activeSubscriptions[i])}),delete n.providers[r],n.activeProviderId===r){const i=Object.keys(n.providers);n.activeProviderId=i.length>0?i[0]:null}console.log(` Provider removed: ${r}`)})},setActiveProvider:r=>{e(n=>{n.providers[r]&&(n.activeProviderId=r,console.log(` Active provider set to: ${r}`))})},enableProvider:r=>{e(n=>{n.providers[r]&&(n.providers[r].status="connected",console.log(` Enabled provider ${r}`))})},disableProvider:r=>{e(n=>{n.providers[r]&&(n.providers[r].status="disconnected",console.log(` Disabled provider ${r}`))})},toggleProvider:r=>{e(n=>{n.providers[r]&&(n.providers[r].status=n.providers[r].status==="connected"?"disconnected":"connected",console.log(` Toggled provider ${r}`))})},isProviderEnabled:r=>{var n;return((n=t().providers[r])==null?void 0:n.status)==="connected"},getEnabledProviders:()=>Object.values(t().providers).filter(n=>n.status==="connected"),createProvider:(r,n,i,o={})=>{const s=Object.values(t().providers),a=k4(s),u={id:B4(r,i,n),name:n,type:r,exchanges:i,priority:a,status:"connected"};let d;if(r==="ccxt-browser")d={...u,type:"ccxt-browser",config:{sandbox:o.sandbox||!1,options:o.options||{}}};else if(r==="ccxt-server")d={...u,type:"ccxt-server",config:{serverUrl:o.serverUrl||"",token:o.token||"",timeout:o.timeout||3e4,sandbox:o.sandbox||!1}};else if(r==="marketmaker.cc")d={...u,type:"marketmaker.cc",config:{apiUrl:o.apiUrl||"",timeout:o.timeout||3e4,authentication:o.authentication||{}}};else if(r==="custom-server-with-adapter")d={...u,type:"custom-server-with-adapter",config:{serverUrl:o.serverUrl||"",timeout:o.timeout||3e4,jsonSchema:o.jsonSchema||{},authentication:o.authentication||{}}};else throw new Error(`Unsupported provider type: ${r}`);return t().addProvider(d),console.log(" Created new provider:",d),d},getProviderForExchange:r=>{const i=Object.values(t().providers).filter(o=>o.status==="connected");return O_(i,r)},getProviderExchangeMappings:r=>{const i=Object.values(t().providers).filter(a=>a.status==="connected"),o=ct.getState(),s=o.users.find(a=>a.id===o.activeUserId)||null;return S4(i,r,s)},updateProvider:(r,n)=>{e(i=>{const o=i.providers[r];if(!o){console.error(` Provider ${r} not found for update`);return}n.name!==void 0&&(o.name=n.name),n.exchanges!==void 0&&(o.exchanges=n.exchanges),n.priority!==void 0&&(o.priority=n.priority),n.config!==void 0&&(o.config={...o.config,...n.config});const s=KB(o);if(!s.isValid){console.error(" Invalid provider config after update:",s.errors);return}console.log(` Provider updated: ${r}`,o)})},updateProviderPriority:(r,n)=>{e(i=>{i.providers[r]&&(i.providers[r].priority=n,console.log(` Updated provider ${r} priority to ${n}`))})},getSymbolsForExchange:async(r,n,i)=>{const o=t().getProviderForExchange(r);if(!o)return console.warn(` No suitable provider found for exchange: ${r}`),[];try{switch(o.type){case"ccxt-browser":return await Yd(o).getSymbolsForExchange(r,n,i);case"ccxt-server":return console.log(` Getting symbols for ${r} from CCXT Server provider ${o.id}`),["BTC/USDT","ETH/USDT","BNB/USDT"];case"marketmaker.cc":return console.log(` Getting symbols for ${r} from MarketMaker.cc provider ${o.id}`),["BTC/USDT","ETH/USDT"];case"custom-server-with-adapter":return console.log(` Getting symbols for ${r} from Custom Server with Adapter provider ${o.id}`),["BTC/USDT","ETH/USDT"];case"custom":return console.log(` Getting symbols for ${r} from custom provider ${o.id}`),[];default:return console.error(` Unknown provider type: ${o.type}`),[]}}catch(s){return console.error(` Error getting symbols for exchange: ${r}`,s),[]}},getMarketsForExchange:async r=>{const n=t().getProviderForExchange(r);if(!n)return console.warn(` No suitable provider found for exchange: ${r}`),["spot"];try{switch(n.type){case"ccxt-browser":return await Yd(n).getMarketsForExchange(r);case"ccxt-server":return console.log(` Getting markets for ${r} from CCXT Server provider ${n.id}`),["spot","futures","margin"];case"marketmaker.cc":return console.log(` Getting markets for ${r} from MarketMaker.cc provider ${n.id}`),["spot","futures"];case"custom-server-with-adapter":return console.log(` Getting markets for ${r} from Custom Server with Adapter provider ${n.id}`),["spot"];case"custom":return console.log(` Getting markets for ${r} from custom provider ${n.id}`),["spot"];default:return console.error(` Unknown provider type: ${n.type}`),["spot"]}}catch(i){return console.error(` Error getting markets for exchange: ${r}`,i),["spot"]}},getAllSupportedExchanges:()=>{const n=Object.values(t().providers).filter(o=>o.status==="connected"),i=new Set;return n.forEach(o=>{o.exchanges.includes("*")?["binance","bybit","okx","kucoin","coinbase","bitget","kraken","huobi","gate","mexc","probit","whitebit","bingx","phemex","deribit","ftx"].forEach(s=>{i.add(s)}):o.exchanges.forEach(s=>{i.add(s)})}),console.log(` [getAllSupportedExchanges] Found ${i.size} exchanges from ${n.length} providers:`,Array.from(i).sort()),Array.from(i).sort()},getTimeframesForExchange:r=>{const n=["1m","5m","15m","30m","1h","4h","1d"];console.log(` [getTimeframesForExchange] Starting for exchange: ${r}`);try{const i=t().getProviderForExchange(r);if(console.log(` [getTimeframesForExchange] Found provider for ${r}:`,i),i&&(i.type==="ccxt-browser"||i.type==="ccxt-server")){console.log(` [getTimeframesForExchange] Trying to get timeframes from provider ${i.id}`);const s=VB(r,i);if(console.log(" [getTimeframesForExchange] Got timeframes from CCXT:",s),s.length>0)return console.log(` Got ${s.length} timeframes for ${r} from provider ${i.id}:`,s),s}const o=Object.values(t().providers).find(s=>s.type==="ccxt-browser"&&s.exchanges.includes("*"));if(console.log(" [getTimeframesForExchange] Found browser provider:",o),o){console.log(" [getTimeframesForExchange] Trying browser provider fallback");const s=VB(r,o);if(console.log(" [getTimeframesForExchange] Got timeframes from browser fallback:",s),s.length>0)return console.log(` Got ${s.length} timeframes for ${r} from browser fallback:`,s),s}return console.warn(` [getTimeframesForExchange] Using default timeframes for ${r}:`,n),n}catch(i){return console.error(` [getTimeframesForExchange] Error getting timeframes for ${r}:`,i),n}}});function VB(e,t){console.log(` [getTimeframesFromCCXT] Starting for ${e} with provider ${t.id}`);try{const r=Oi();if(console.log(" [getTimeframesFromCCXT] CCXT available:",!!r),!r)return console.warn(` [getTimeframesFromCCXT] CCXT not available for ${e}`),[];console.log(" [getTimeframesFromCCXT] Available exchanges in CCXT:",Object.keys(r).filter(c=>typeof r[c]=="function").slice(0,10));const n=r[e];if(console.log(` [getTimeframesFromCCXT] ExchangeClass for ${e}:`,!!n),!n)return console.warn(` [getTimeframesFromCCXT] Exchange ${e} not found in CCXT`),[];console.log(` [getTimeframesFromCCXT] Creating temporary instance for ${e}`);const i=new n;if(console.log(" [getTimeframesFromCCXT] Instance created, checking timeframes:",!!i.timeframes),console.log(" [getTimeframesFromCCXT] Raw timeframes object:",i.timeframes),!i.timeframes)return console.warn(` [getTimeframesFromCCXT] Exchange ${e} does not support OHLCV/timeframes`),[];const o=i.timeframes,s=[],a={"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w","1M":"1M"};return console.log(" [getTimeframesFromCCXT] Processing timeframes:",Object.keys(o)),Object.keys(o).forEach(c=>{const u=a[c];console.log(` [getTimeframesFromCCXT] Mapping ${c} -> ${u}`),u&&s.push(u)}),console.log(" [getTimeframesFromCCXT] Final supported timeframes:",s),s}catch(r){return console.error(` [getTimeframesFromCCXT] Error getting timeframes from CCXT for ${e}:`,r),[]}}const E4=(e,t)=>({subscribe:async(r,n,i,o,s,a="spot",c)=>{const u=t().getSubscriptionKey(n,i,o,s,a),d=t().dataFetchSettings.method;try{let g=!1,f=!1;return e(m=>{m.activeSubscriptions[u]?(m.activeSubscriptions[u].subscriberCount++,console.log(` Subscriber ${r} added to existing subscription: ${u} (count: ${m.activeSubscriptions[u].subscriberCount})`),m.activeSubscriptions[u].method!==d&&(console.log(` Subscription ${u} method outdated (${m.activeSubscriptions[u].method} -> ${d})`),m.activeSubscriptions[u].method=d,f=!0)):(m.activeSubscriptions[u]={key:{exchange:n,symbol:i,dataType:o,timeframe:s,market:a},subscriberCount:1,method:d,isFallback:!1,isActive:!1,lastUpdate:0,config:c},g=!0,console.log(` New subscription created: ${u} for subscriber ${r} (method: ${d}, config:`,c,")"))}),f?(console.log(` Restarting subscription ${u} due to method change`),t().stopDataFetching(u),await new Promise(m=>setTimeout(m,100)),await t().startDataFetching(u)):g&&await t().startDataFetching(u),{success:!0}}catch(g){return console.error(` Failed to create subscription ${u}:`,g),{success:!1,error:g instanceof Error?g.message:"Unknown error"}}},unsubscribe:(r,n,i,o,s,a="spot")=>{const c=t().getSubscriptionKey(n,i,o,s,a);e(u=>{u.activeSubscriptions[c]&&(u.activeSubscriptions[c].subscriberCount--,console.log(` Subscriber ${r} removed from subscription: ${c} (count: ${u.activeSubscriptions[c].subscriberCount})`),u.activeSubscriptions[c].subscriberCount<=0&&(t().stopDataFetching(c),delete u.activeSubscriptions[c],console.log(` Subscription removed: ${c}`)))})},forceCloseSubscription:r=>{console.log(` Force closing subscription: ${r}`),t().stopDataFetching(r),e(n=>{n.activeSubscriptions[r]&&(console.log(` Force removed subscription: ${r} (had ${n.activeSubscriptions[r].subscriberCount} subscribers)`),delete n.activeSubscriptions[r])})}}),R4="modulepreload",O4=function(e){return"/"+e},zB={},$t=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=O4(c),c in zB)return;zB[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":R4,u||(g.as="script"),g.crossOrigin="",g.href=c,a&&g.setAttribute("nonce",a),document.head.appendChild(g),u)return new Promise((f,m)=>{g.addEventListener("load",f),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},YB={binance:{ohlcv:1e3,trades:1e3,rateLimit:100},binanceus:{ohlcv:1e3,trades:1e3,rateLimit:100},okx:{ohlcv:100,trades:100,rateLimit:200},myokx:{ohlcv:100,trades:100,rateLimit:200},kraken:{ohlcv:720,trades:1e3,rateLimit:3100},kucoin:{ohlcv:1500,trades:1e3,rateLimit:200},bybit:{ohlcv:1e3,trades:1e3,rateLimit:100},gateio:{ohlcv:1e3,trades:1e3,rateLimit:200},htx:{ohlcv:1e3,trades:2e3,rateLimit:100},huobi:{ohlcv:1e3,trades:2e3,rateLimit:100},bitfinex:{ohlcv:1e4,trades:1e4,rateLimit:1500},coinbase:{ohlcv:300,trades:1e3,rateLimit:1e3},coinbaseadvanced:{ohlcv:300,trades:1e3,rateLimit:1e3},hyperliquid:{ohlcv:5e3,trades:1e3,rateLimit:200},phemex:{ohlcv:1e3,trades:1e3,rateLimit:100},bingx:{ohlcv:1e3,trades:1e3,rateLimit:100},mexc:{ohlcv:1e3,trades:1e3,rateLimit:50},bitvavo:{ohlcv:1440,trades:1e3,rateLimit:200},default:{ohlcv:500,trades:500,rateLimit:1e3}};function lw(e){const t=e.toLowerCase();return YB[t]||YB.default}function Sp(e){return lw(e).ohlcv}function K0(e){return lw(e).trades}function rc(e,t,r){const n=lw(e),i=r==="ohlcv"?n.ohlcv:n.trades;t>i?console.warn(` [${e}] Requested ${r} limit (${t}) exceeds maximum (${i}). Using maximum.`):console.log(` [${e}] Using ${r} limit: ${t}/${i}`)}const Lf=async(e,t,r="spot",n=!1)=>{if(e.type==="ccxt-browser"){const{createCCXTBrowserProvider:i}=await $t(async()=>{const{createCCXTBrowserProvider:s}=await Promise.resolve().then(()=>F0);return{createCCXTBrowserProvider:s}},void 0);return await i(e).getMetadataInstance(t,r,n)}else if(e.type==="ccxt-server"){const{createCCXTServerProvider:i}=await $t(async()=>{const{createCCXTServerProvider:s}=await import("./ccxtServerProvider-D6aZ74M2.js");return{createCCXTServerProvider:s}},[]);return await i(e).getMetadataInstance(t,r,n)}else throw new Error(`Unsupported provider type: ${e.type}`)},G4=(e,t)=>({setDataFetchMethod:async r=>{const n=t().dataFetchSettings.method;if(e(i=>{i.dataFetchSettings.method=r}),console.log(` Data fetch method changed from ${n} to ${r}`),n!==r){const i=Object.keys(t().activeSubscriptions).filter(o=>t().activeSubscriptions[o].isActive);console.log(` Restarting ${i.length} active subscriptions with new method: ${r}`),i.forEach(o=>{console.log(` Stopping subscription ${o} for method change`),t().stopDataFetching(o)}),e(o=>{i.forEach(s=>{o.activeSubscriptions[s]&&(o.activeSubscriptions[s].method=r,console.log(` Updated method for subscription ${s} to ${r}`))})}),await new Promise(o=>setTimeout(o,100));for(const o of i)t().activeSubscriptions[o]&&(console.log(` Restarting subscription ${o} with method ${r}`),await t().startDataFetching(o));console.log(` All subscriptions restarted with method: ${r}`)}},setRestInterval:(r,n)=>{e(i=>{const o=i.dataFetchSettings.restIntervals[r];i.dataFetchSettings.restIntervals[r]=n,console.log(` REST interval for ${r} changed from ${o}ms to ${n}ms`),Object.keys(i.activeSubscriptions).forEach(s=>{const a=i.activeSubscriptions[s];a.key.dataType===r&&a.method==="rest"&&a.isActive&&(t().stopDataFetching(s),t().startDataFetching(s))})})},getCandles:(r,n,i="1m",o="spot")=>{var a,c,u;return((u=(c=(a=t().marketData.candles[r])==null?void 0:a[o])==null?void 0:c[n])==null?void 0:u[i])||[]},getTrades:(r,n,i="spot")=>{var s,a;return((a=(s=t().marketData.trades[r])==null?void 0:s[i])==null?void 0:a[n])||[]},getOrderBook:(r,n,i="spot")=>{var a,c,u,d,g;const o=t(),s=((c=(a=o.marketData.orderbook[r])==null?void 0:a[i])==null?void 0:c[n])||null;return console.log(` [OrderBook] Requesting data for ${r}:${i}:${n}:`,{exchange:r,market:i,symbol:n,hasExchange:!!o.marketData.orderbook[r],hasMarket:!!((u=o.marketData.orderbook[r])!=null&&u[i]),hasSymbol:!!((g=(d=o.marketData.orderbook[r])==null?void 0:d[i])!=null&&g[n]),result:s,allExchanges:Object.keys(o.marketData.orderbook),fullOrderbookData:o.marketData.orderbook}),s},getBalance:(r,n)=>{var a,c;const i=t(),o=n||"trading",s=((a=i.marketData.balance[r])==null?void 0:a[o])||null;return console.log(` [Balance] Requesting data for account ${r}:${o}:`,{accountId:r,walletType:o,hasAccount:!!i.marketData.balance[r],hasWalletType:!!((c=i.marketData.balance[r])!=null&&c[o]),result:s,allAccounts:Object.keys(i.marketData.balance)}),s},getTicker:(r,n,i="spot",o=6e5)=>{var d,g;const a=(g=(d=t().marketData.ticker[r])==null?void 0:d[i])==null?void 0:g[n];if(!a)return console.log(` [Ticker] No ticker data for ${r}:${i}:${n}`),null;const u=Date.now()-a.lastUpdate;return u>o?(console.log(` [Ticker] Data is too old for ${r}:${i}:${n}, age: ${u}ms, maxAge: ${o}ms`),null):(console.log(` [Ticker] Returning cached data for ${r}:${i}:${n}, age: ${u}ms`),{symbol:a.symbol,timestamp:a.timestamp,bid:a.bid,ask:a.ask,last:a.last,close:a.close,midPrice:a.midPrice})},getTickerWithRefresh:async(r,n,i="spot",o=!1)=>{if(!o){const a=t().getTicker(r,n,i,6e5);if(a)return console.log(` [TickerWithRefresh] Using cached data for ${r}:${i}:${n}`),a}try{return console.log(` [TickerWithRefresh] Fetching fresh data for ${r}:${i}:${n}, forceRefresh: ${o}`),await t().initializeTickerData(r,n,i)}catch(a){console.error(` [TickerWithRefresh] Failed to fetch ticker for ${r}:${i}:${n}:`,a);const c=t().getTicker(r,n,i,1/0);return c?(console.log(" [TickerWithRefresh] Returning expired cached data due to fetch error"),c):null}},updateCandles:(r,n,i,o="1m",s="spot")=>{let a="new_candles",c={};e(u=>{var f;u.marketData.candles[r]||(u.marketData.candles[r]={}),u.marketData.candles[r][s]||(u.marketData.candles[r][s]={}),u.marketData.candles[r][s][n]||(u.marketData.candles[r][s][n]={});const d=u.marketData.candles[r][s][n][o]||[];if(d.length===0)u.marketData.candles[r][s][n][o]=i,a="initial_load",c={totalCandles:i.length,newCandles:i},console.log(` [updateCandles] Initial snapshot loaded: ${i.length} candles for ${r}:${s}:${n}:${o}`);else{const m=new Map;d.forEach(y=>{m.set(y.timestamp,y)});const v=((f=d[d.length-1])==null?void 0:f.timestamp)||0,p=i.filter(y=>y.timestamp>v).length,I=i.some(y=>y.timestamp===v);i.forEach(y=>{m.set(y.timestamp,y)});const h=Array.from(m.values()).sort((y,C)=>y.timestamp-C.timestamp);u.marketData.candles[r][s][n][o]=h,p>0?(a="new_candles",c={newCandlesCount:p,newCandles:i.filter(y=>y.timestamp>v),totalCandles:h.length}):I&&(a="update_last_candle",c={lastCandle:i.find(y=>y.timestamp===v),totalCandles:h.length}),console.log(` [updateCandles] WebSocket update: ${i.length} new/updated candles, total: ${h.length} for ${r}:${s}:${n}:${o}, event: ${a}`)}const g=t().getSubscriptionKey(r,n,"candles",o,s);u.activeSubscriptions[g]&&(u.activeSubscriptions[g].lastUpdate=Date.now())}),t().emitChartUpdateEvent({type:a,exchange:r,symbol:n,timeframe:o,market:s,data:c,timestamp:Date.now()})},updateTrades:(r,n,i,o="spot")=>{e(s=>{s.marketData.trades[r]||(s.marketData.trades[r]={}),s.marketData.trades[r][o]||(s.marketData.trades[r][o]={});const c=[...s.marketData.trades[r][o][n]||[],...i];s.marketData.trades[r][o][n]=c.slice(-1e3);const u=t().getSubscriptionKey(r,n,"trades",void 0,o);s.activeSubscriptions[u]&&(s.activeSubscriptions[u].lastUpdate=Date.now())})},updateOrderBook:(r,n,i,o="spot")=>{var s,a;console.log(` [OrderBook] Saving data for ${r}:${o}:${n}:`,{exchange:r,market:o,symbol:n,orderbook:i,hasBids:((s=i==null?void 0:i.bids)==null?void 0:s.length)||0,hasAsks:((a=i==null?void 0:i.asks)==null?void 0:a.length)||0,timestamp:i==null?void 0:i.timestamp}),e(c=>{c.marketData.orderbook[r]||(c.marketData.orderbook[r]={}),c.marketData.orderbook[r][o]||(c.marketData.orderbook[r][o]={}),c.marketData.orderbook[r][o][n]=i,console.log(" [OrderBook] Data saved to state:",{exchange:r,market:o,symbol:n,savedSuccessfully:!!c.marketData.orderbook[r][o][n],allExchanges:Object.keys(c.marketData.orderbook)});const u=t().getSubscriptionKey(r,n,"orderbook",void 0,o);c.activeSubscriptions[u]&&(c.activeSubscriptions[u].lastUpdate=Date.now())})},updateBalance:(r,n,i)=>{var s;const o=i||"trading";console.log(` [Balance] Saving data for account ${r}:${o}:`,{accountId:r,walletType:o,balance:n,balancesCount:((s=n.balances)==null?void 0:s.length)||0,timestamp:n.timestamp}),e(a=>{a.marketData.balance[r]||(a.marketData.balance[r]={}),a.marketData.balance[r][o]=n,console.log(" [Balance] Data saved to state:",{accountId:r,walletType:o,savedSuccessfully:!!a.marketData.balance[r][o],allAccounts:Object.keys(a.marketData.balance)});const c=t().getSubscriptionKey("",r,"balance",void 0,o);a.activeSubscriptions[c]&&(a.activeSubscriptions[c].lastUpdate=Date.now())})},updateTicker:(r,n,i,o="spot")=>{console.log(` [Ticker] Saving data for ${r}:${o}:${n}:`,{exchange:r,market:o,symbol:n,ticker:i,bid:i.bid,ask:i.ask,midPrice:i.midPrice,timestamp:i.timestamp}),e(s=>{s.marketData.ticker[r]||(s.marketData.ticker[r]={}),s.marketData.ticker[r][o]||(s.marketData.ticker[r][o]={}),s.marketData.ticker[r][o][n]={...i,lastUpdate:Date.now()},console.log(" [Ticker] Data saved to state:",{exchange:r,market:o,symbol:n,savedSuccessfully:!!s.marketData.ticker[r][o][n],allExchanges:Object.keys(s.marketData.ticker)});const a=t().getSubscriptionKey(r,n,"ticker",void 0,o);s.activeSubscriptions[a]&&(s.activeSubscriptions[a].lastUpdate=Date.now())})},getSubscriptionKey:(r,n,i,o,s="spot")=>{let a=`${r}:${s}:${n}:${i}`;return i==="candles"&&o&&(a+=`:${o}`),a},getActiveSubscriptionsList:()=>Object.values(t().activeSubscriptions),initializeChartData:async(r,n,i,o)=>{console.log(` [initializeChartData] Loading initial OHLCV data for ${r}:${o}:${n}:${i}`);try{const s=t().getProviderForExchange(r);if(!s||s.type!=="ccxt-browser"&&s.type!=="ccxt-server")throw new Error(`No suitable CCXT provider found for exchange: ${r}`);const a=await Lf(s,r,o,!1);console.log(` [initializeChartData] Using ${s.id} provider for ${r}:${o}`);const c=Sp(r);rc(r,c,"ohlcv");const u=await a.fetchOHLCV(n,i,void 0,c);if(!u||u.length===0)throw new Error("No data received from exchange");const d=u.map(g=>({timestamp:g[0],open:g[1],high:g[2],low:g[3],close:g[4],volume:g[5]}));return console.log(` [initializeChartData] Loaded ${d.length} candles for ${r}:${o}:${n}:${i}`),d}catch(s){throw console.error(" [initializeChartData] Failed to load data:",s),s}},initializeTradesData:async(r,n,i,o=500,s=!0)=>{console.log(` [initializeTradesData] Loading initial trades for ${r}:${i}:${n} (limit: ${o}, aggregated: ${s})`);try{const a=t().getProviderForExchange(r);if(!a||a.type!=="ccxt-browser"&&a.type!=="ccxt-server")throw new Error(`No suitable CCXT provider found for exchange: ${r}`);const c=await Lf(a,r,i,!1);console.log(` [initializeTradesData] Using ${a.id} provider for ${r}:${i}`);const u=s?r==="binance"?"publicGetAggTrades":"fetchTrades":"publicGetTrades";console.log(` [initializeTradesData] Using method: ${u} for ${r}`);const d=Math.min(o,K0(r));rc(r,d,"trades");const g=await c.fetchTrades(n,void 0,d,{fetchTradesMethod:u});return!g||g.length===0?(console.warn(` [initializeTradesData] No trades received for ${r}:${n}`),[]):(console.log(` [initializeTradesData] Loaded ${g.length} trades for ${r}:${i}:${n} (method: ${u})`),t().updateTrades(r,n,g,i),console.log(` [initializeTradesData] Trades saved to store for ${r}:${i}:${n}`),g)}catch(a){throw console.error(" [initializeTradesData] Failed to load trades:",a),a}},initializeOrderBookData:async(r,n,i)=>{console.log(` [OrderBook] Loading initial orderbook for ${r}:${i}:${n}`);try{const o=Oi();if(!o)throw new Error("CCXT not available");const s=o[r];if(!s)throw new Error(`Exchange ${r} not found in CCXT`);let a=i;r==="bybit"&&(a={spot:"spot",futures:"linear",swap:"linear",margin:"spot",options:"option"}[i]||i,console.log(` [initializeOrderBookData] Bybit mapping: ${i} -> ${a}`));const c=new s({sandbox:!1,enableRateLimit:!0,defaultType:a}),{wrapExchangeWithLogger:u}=await $t(async()=>{const{wrapExchangeWithLogger:f}=await Promise.resolve().then(()=>j4);return{wrapExchangeWithLogger:f}},void 0),d=u(c,r,"public-orderbook");await d.loadMarkets();const g=await d.fetchOrderBook(n);if(!g)throw new Error("No orderbook data received from exchange");if(!g.bids||!g.asks||!Array.isArray(g.bids)||!Array.isArray(g.asks))throw new Error("Invalid orderbook data format received");return console.log(` [OrderBook] Loaded orderbook for ${r}:${i}:${n} (bids: ${g.bids.length}, asks: ${g.asks.length})`),t().updateOrderBook(r,n,g,i),console.log(` [OrderBook] OrderBook saved to store for ${r}:${i}:${n}`),g}catch(o){throw console.error(" [OrderBook] Failed to load orderbook:",o),o}},initializeBalanceData:async(r,n)=>{var c,u;const{useUserStore:i}=await $t(async()=>{const{useUserStore:d}=await Promise.resolve().then(()=>Sl);return{useUserStore:d}},void 0),o=i.getState();let s=null;for(const d of o.users)if(s=d.accounts.find(g=>g.id===r),s)break;if(!s)throw new Error(`Account with ID ${r} not found`);const a=s.exchange;console.log(` [Balance] Loading initial balance for account ${r} (${a}:${n})`);try{const{ccxtAccountManager:d}=await $t(async()=>{const{ccxtAccountManager:I}=await import("./ccxtAccountManager-DkinqREl.js");return{ccxtAccountManager:I}},[]),g={accountId:r,exchange:a,apiKey:s.key,secret:s.privateKey,password:s.password||void 0,sandbox:s.sandbox||!1,marketType:n},f=await d.getRegularInstance(g);n==="futures"?(f.options=f.options||{},f.options.defaultType="future"):n==="margin"?(f.options=f.options||{},f.options.defaultType="margin"):n==="spot"&&(f.options=f.options||{},f.options.defaultType="spot"),console.log(` [Balance Init] Fetching ${n} balance for account ${r} (${a}) with defaultType: ${(c=f.options)==null?void 0:c.defaultType}`);let m=await f.fetchBalance();if((u=f.has)!=null&&u.fetchFundingBalance)try{const I=await f.fetchFundingBalance();console.log(` [Balance Init] Also got funding balance for account ${r} (${a}):`,{fundingCurrencies:Object.keys(I).filter(h=>h!=="info"&&h!=="datetime"&&h!=="timestamp").length}),I&&typeof I=="object"&&Object.entries(I).forEach(([h,y])=>{h!=="info"&&h!=="datetime"&&h!=="timestamp"&&y&&typeof y=="object"&&(m[h]?m[h].funding=y:m[h]={free:0,used:0,total:0,funding:y})})}catch(I){console.warn(` [Balance Init] Could not fetch funding balance for account ${r} (${a}):`,I.message)}if(!m)throw new Error("No balance data received from exchange");const v=Object.entries(m).filter(([I,h])=>I!=="info"&&I!=="datetime"&&I!=="timestamp"&&h&&typeof h=="object"&&(h.total>0||h.free>0||h.used>0)).map(([I,h])=>({currency:I,free:h.free||0,used:h.used||0,total:h.total||0})),p={timestamp:m.timestamp||Date.now(),balances:v,info:m.info};return console.log(` [Balance] Loaded balance for account ${r} (${a}:${n}) (currencies: ${v.length})`),t().updateBalance(r,p,n),console.log(` [Balance] Balance saved to store for account ${r} (${a}:${n})`),p}catch(d){throw console.error(` [Balance] Failed to load balance for account ${r}:`,d),d}},initializeTickerData:async(r,n,i)=>{console.log(` [Ticker] Loading ticker for ${r}:${i}:${n}`);try{const o=t().getProviderForExchange(r);if(!o||o.type!=="ccxt-browser"&&o.type!=="ccxt-server")throw new Error(`No suitable CCXT provider found for exchange: ${r}`);const s=await Lf(o,r,i,!1);console.log(` [initializeTickerData] Using ${o.id} provider for ${r}:${i}`);const a=await s.fetchTicker(n);if(!a)throw new Error("No ticker data received from exchange");const c={symbol:a.symbol,timestamp:a.timestamp||Date.now(),bid:a.bid||0,ask:a.ask||0,last:a.last,close:a.close,midPrice:a.bid&&a.ask?(a.bid+a.ask)/2:void 0};return console.log(` [Ticker] Loaded ticker for ${r}:${i}:${n}:`,{bid:c.bid,ask:c.ask,midPrice:c.midPrice,last:c.last}),t().updateTicker(r,n,c,i),console.log(` [Ticker] Ticker saved to store for ${r}:${i}:${n}`),c}catch(o){throw console.error(` [Ticker] Failed to load ticker for ${r}:${i}:${n}:`,o),o}},loadHistoricalCandles:async(r,n,i,o,s)=>{console.log(` [loadHistoricalCandles] Loading historical data before ${new Date(s).toISOString()} for ${r}:${o}:${n}:${i}`);try{const a=t().getProviderForExchange(r);if(!a||a.type!=="ccxt-browser"&&a.type!=="ccxt-server")throw new Error(`No suitable CCXT provider found for exchange: ${r}`);const c=await Lf(a,r,o,!1);console.log(` [loadHistoricalCandles] Using ${a.id} provider for ${r}:${o}`),c.markets||console.warn(` [loadHistoricalCandles] Markets not loaded for ${r}`);const u=Sp(r);rc(r,u,"ohlcv");const g=(p=>{const I=p.slice(-1),h=parseInt(p.slice(0,-1))||1;switch(I){case"m":return h*60*1e3;case"h":return h*60*60*1e3;case"d":return h*24*60*60*1e3;default:return 60*1e3}})(i),f=s-u*g;console.log(` [loadHistoricalCandles] CCXT fetchOHLCV parameters: symbol=${n}, timeframe=${i}, since=${new Date(f).toISOString()}, limit=${u}`);const m=await c.fetchOHLCV(n,i,f,u);if(!m||m.length===0)return console.warn(` [loadHistoricalCandles] No historical data received for ${r}:${o}:${n}:${i} before ${new Date(s).toISOString()}`),[];const v=m.filter(p=>p[0]<s).map(p=>({timestamp:p[0],open:p[1],high:p[2],low:p[3],close:p[4],volume:p[5]})).sort((p,I)=>p.timestamp-I.timestamp);return console.log(` [loadHistoricalCandles] Loaded ${v.length} historical candles (filtered from ${m.length}, limit=${u}) for ${r}:${o}:${n}:${i} before ${new Date(s).toISOString()}`),v.length>0&&console.log(` [loadHistoricalCandles] Historical data range: ${new Date(v[0].timestamp).toISOString()}  ${new Date(v[v.length-1].timestamp).toISOString()}`),v}catch(a){throw console.error(" [loadHistoricalCandles] Failed to load historical data:",a),a}},fetchMyTrades:async(r,n,i,o)=>{var d,g,f;console.log(` [fetchMyTrades] Starting fetchMyTrades for accountId: ${r}, symbol: ${n}`);const{useUserStore:s}=await $t(async()=>{const{useUserStore:m}=await Promise.resolve().then(()=>Sl);return{useUserStore:m}},void 0),{users:a}=s.getState(),c=a.find(m=>m.accounts.some(v=>v.id===r)),u=c==null?void 0:c.accounts.find(m=>m.id===r);if(!u||!u.key||!u.privateKey){const m=`Account ${r} not found or missing API keys`;throw console.error(` [fetchMyTrades] ${m}`),new Error(m)}console.log(` [fetchMyTrades] Loading trades for account ${r} (${u.exchange})`);try{const{ccxtAccountManager:m}=await $t(async()=>{const{ccxtAccountManager:A}=await import("./ccxtAccountManager-DkinqREl.js");return{ccxtAccountManager:A}},[]),v={accountId:u.id,exchange:u.exchange,apiKey:u.key,secret:u.privateKey,password:u.password,sandbox:!1},p=await m.getRegularInstance(v,"spot"),I=p.fetch;if(p.fetch=function(A,w="GET",S={},k=void 0){return console.log(" [fetchMyTrades] HTTP Request:",{url:A,method:w,headers:Object.keys(S),bodyLength:k?k.length:0,timestamp:new Date().toISOString()}),I.call(this,A,w,S,k).then(R=>(console.log(" [fetchMyTrades] HTTP Response:",{url:A,status:(R==null?void 0:R.status)||"unknown",responseLength:typeof R=="string"?R.length:"unknown",timestamp:new Date().toISOString()}),R)).catch(R=>{throw console.error(" [fetchMyTrades] HTTP Error:",{url:A,error:R.message,timestamp:new Date().toISOString()}),R})},await p.loadMarkets(),console.log(` [fetchMyTrades] Checking fetchMyTrades capability for ${u.exchange}: ${p.has.fetchMyTrades}`),console.log(" [fetchMyTrades] Exchange URLs:",{api:(d=p.urls)==null?void 0:d.api,test:(g=p.urls)==null?void 0:g.test,www:(f=p.urls)==null?void 0:f.www}),console.log(" [fetchMyTrades] Exchange options:",{apiKey:u.key?`${u.key.substring(0,8)}...`:"none",secret:u.privateKey?`${u.privateKey.substring(0,8)}...`:"none",sandbox:p.sandbox,enableRateLimit:p.enableRateLimit}),!p.has.fetchMyTrades)return console.warn(` [fetchMyTrades] Exchange ${u.exchange} does not support fetchMyTrades`),[];const h=await t().getMarketsForExchange(u.exchange);console.log(` [fetchMyTrades] Supported markets for ${u.exchange}:`,h);let y=[];const C=async A=>{let w=[];const S=A||"default";if(console.log(` [fetchMyTrades] Fetching trades for market: ${S}`),A&&u.exchange==="bybit"){const R={spot:"spot",futures:"linear",swap:"linear",margin:"spot",options:"option"}[A];R&&(p.options=p.options||{},p.options.defaultType=R,console.log(` [fetchMyTrades] Set Bybit category to: ${R} for market: ${A}`))}try{console.log(` [fetchMyTrades] Calling exchangeInstance.fetchMyTrades for ${S} with params:`,{symbol:n,since:i,limit:o}),w=await p.fetchMyTrades(n,i,o),console.log(` [fetchMyTrades] Fetched ${w.length} trades for ${S}`)}catch(k){if(console.warn(` [fetchMyTrades] Failed to fetch trades for ${S} with symbol=${n}, error:`,k.message),!n&&u.exchange==="bybit"){console.log(` [fetchMyTrades] Trying to fetch trades for popular symbols on ${u.exchange} (${S})`);const R=["BTC/USDT","ETH/USDT","BNB/USDT","SOL/USDT","XRP/USDT"];for(const j of R)try{const _=await p.fetchMyTrades(j,i,Math.min(o||100,20));w.push(..._),console.log(` [fetchMyTrades] Fetched ${_.length} trades for ${j} in ${S}`)}catch(_){console.warn(` [fetchMyTrades] Failed to fetch trades for ${j} in ${S}:`,_.message)}}}return w};if(h.length>0)for(const A of h)try{const w=await C(A);y.push(...w),console.log(` [fetchMyTrades] Added ${w.length} trades from ${A} market`)}catch(w){console.warn(` [fetchMyTrades] Failed to fetch trades for ${A} market:`,w.message)}else{console.log(" [fetchMyTrades] No specific markets found, using default approach");const A=await C();y.push(...A)}const x=y.filter((A,w,S)=>w===S.findIndex(k=>k.id===A.id)).sort((A,w)=>w.timestamp-A.timestamp);return console.log(` [fetchMyTrades] Total unique trades loaded: ${x.length} for account ${r} across ${h.length} markets`),x.map(A=>({id:A.id,timestamp:A.timestamp,symbol:A.symbol,side:A.side,amount:A.amount,price:A.price,cost:A.cost,fee:A.fee,info:A.info}))}catch(m){throw console.error(` [fetchMyTrades] Failed to load trades for account ${r}:`,m),console.error(" [fetchMyTrades] Error details:",{message:m instanceof Error?m.message:"Unknown error",stack:m instanceof Error?m.stack:void 0,accountId:r,exchange:u.exchange}),m}},fetchOrders:async(r,n,i,o)=>{console.log(" [fetchOrders] ============ STARTING FETCH ORDERS ============"),console.log(` [fetchOrders] Starting fetchOrders for accountId: ${r}, symbol: ${n}`);const{useUserStore:s}=await $t(async()=>{const{useUserStore:d}=await Promise.resolve().then(()=>Sl);return{useUserStore:d}},void 0),{users:a}=s.getState(),c=a.find(d=>d.accounts.some(g=>g.id===r)),u=c==null?void 0:c.accounts.find(d=>d.id===r);if(!u||!u.key||!u.privateKey){const d=`Account ${r} not found or missing API keys`;throw console.error(` [fetchOrders] ${d}`),new Error(d)}console.log(` [fetchOrders] Loading orders for account ${r} (${u.exchange})`),console.log(" [fetchOrders] Account details:",{id:u.id,exchange:u.exchange,hasKey:!!u.key,hasSecret:!!u.privateKey});try{const d=Oi();if(!d)throw new Error("CCXT not available");if(!d[u.exchange])throw new Error(`Exchange ${u.exchange} not found in CCXT`);const f=await t().getMarketsForExchange(u.exchange);console.log(` [fetchOrders] Supported markets for ${u.exchange}:`,f),console.log(` [fetchOrders] Market count: ${f.length}`);let m=[];const v=async I=>{var w;let h=[];const y=I||"default";console.log(` [fetchOrders] Fetching orders for market: ${y}`);const C={accountId:u.id,exchange:u.exchange,apiKey:u.key,secret:u.privateKey,password:u.password,sandbox:!1},{ccxtAccountManager:x}=await $t(async()=>{const{ccxtAccountManager:S}=await import("./ccxtAccountManager-DkinqREl.js");return{ccxtAccountManager:S}},[]),A=await x.getRegularInstance(C,I||"spot");if(console.log(` [fetchOrders] Exchange capabilities for ${u.exchange} (${y}):`),console.log(` [fetchOrders] has.fetchOrders: ${A.has.fetchOrders}`),console.log(` [fetchOrders] has.fetchOpenOrders: ${A.has.fetchOpenOrders}`),console.log(` [fetchOrders] has.fetchClosedOrders: ${A.has.fetchClosedOrders}`),console.log(` [fetchOrders] has.fetchCanceledOrders: ${A.has.fetchCanceledOrders}`),console.log(` [fetchOrders] defaultType: ${(w=A.options)==null?void 0:w.defaultType}`),A.has.fetchOrders)try{console.log(` [fetchOrders] Trying fetchOrders for ${u.exchange} (${y})`);const S=await A.fetchOrders(n,i,o);h=S,console.log(` [fetchOrders] fetchOrders successful for ${y}: ${S.length} orders`)}catch(S){if(console.warn(` [fetchOrders] fetchOrders failed for ${u.exchange} (${y}):`,S.message),A.has.fetchOpenOrders||A.has.fetchClosedOrders){if(console.log(` [fetchOrders] Using fallback methods for ${u.exchange} (${y})`),A.has.fetchOpenOrders)try{const k=await A.fetchOpenOrders(n);h.push(...k),console.log(` [fetchOrders] Fetched ${k.length} open orders for ${y}`)}catch(k){console.warn(` [fetchOrders] Failed to fetch open orders for ${y}:`,k.message)}if(A.has.fetchClosedOrders)try{const k=await A.fetchClosedOrders(n,i,o);h.push(...k),console.log(` [fetchOrders] Fetched ${k.length} closed orders for ${y}`)}catch(k){console.warn(` [fetchOrders] Failed to fetch closed orders for ${y}:`,k.message)}if(A.has.fetchCanceledOrders)try{const k=await A.fetchCanceledOrders(n,i,o);h.push(...k),console.log(` [fetchOrders] Fetched ${k.length} canceled orders for ${y}`)}catch(k){console.warn(` [fetchOrders] Failed to fetch canceled orders for ${y}:`,k.message)}}}else if(A.has.fetchOpenOrders||A.has.fetchClosedOrders){if(console.log(` [fetchOrders] Using alternative methods for ${u.exchange} (${y})`),A.has.fetchOpenOrders)try{const S=await A.fetchOpenOrders(n);h.push(...S),console.log(` [fetchOrders] Fetched ${S.length} open orders for ${y}`)}catch(S){console.warn(` [fetchOrders] Failed to fetch open orders for ${y}:`,S.message)}if(A.has.fetchClosedOrders)try{const S=await A.fetchClosedOrders(n,i,o);h.push(...S),console.log(` [fetchOrders] Fetched ${S.length} closed orders for ${y}`)}catch(S){console.warn(` [fetchOrders] Failed to fetch closed orders for ${y}:`,S.message)}}return h};if(f.length>0)for(const I of f)try{const h=await v(I);m.push(...h),console.log(` [fetchOrders] Added ${h.length} orders from ${I} market`)}catch(h){console.warn(` [fetchOrders] Failed to fetch orders for ${I} market:`,h.message)}else{console.log(" [fetchOrders] No specific markets found, using default approach");const I=await v();m.push(...I)}const p=m.filter((I,h,y)=>h===y.findIndex(C=>C.id===I.id)).sort((I,h)=>h.timestamp-I.timestamp);return console.log(` [fetchOrders] Total unique orders loaded: ${p.length} for account ${r} across ${f.length} markets`),p.slice(0,5).forEach((I,h)=>{console.log(` [fetchOrders] Order ${h+1}:`,{id:I.id,symbol:I.symbol,type:I.type,side:I.side,amount:I.amount,price:I.price,status:I.status,timestamp:I.timestamp,datetime:I.datetime,filled:I.filled,remaining:I.remaining,average:I.average,fee:I.fee})}),p}catch(d){throw console.error(` [fetchOrders] Failed to load orders for account ${r}:`,d),console.error(" [fetchOrders] Error details:",{message:d instanceof Error?d.message:"Unknown error",stack:d instanceof Error?d.stack:void 0,accountId:r,exchange:u.exchange}),d}},fetchOpenOrders:async(r,n)=>{var c;console.log(` [fetchOpenOrders] Starting fetchOpenOrders for accountId: ${r}, symbol: ${n}`);const{useUserStore:i}=await $t(async()=>{const{useUserStore:u}=await Promise.resolve().then(()=>Sl);return{useUserStore:u}},void 0),{users:o}=i.getState(),s=o.find(u=>u.accounts.some(d=>d.id===r)),a=s==null?void 0:s.accounts.find(u=>u.id===r);if(!a||!a.key||!a.privateKey){const u=`Account ${r} not found or missing API keys`;throw console.error(` [fetchOpenOrders] ${u}`),new Error(u)}console.log(` [fetchOpenOrders] Loading open orders for account ${r} (${a.exchange})`);try{const{ccxtAccountManager:u}=await $t(async()=>{const{ccxtAccountManager:m}=await import("./ccxtAccountManager-DkinqREl.js");return{ccxtAccountManager:m}},[]),d={accountId:a.id,exchange:a.exchange,apiKey:a.key,secret:a.privateKey,password:a.password,sandbox:!1};let g=[];if(a.exchange==="bybit"){const m=["linear","spot"];for(const v of m)try{console.log(` [fetchOpenOrders] Trying Bybit category: ${v}`);const p=await u.getRegularInstance(d,v==="linear"?"futures":"spot");if(v==="spot"&&(console.log(" [fetchOpenOrders] Bybit SPOT instance details:"),console.log("  - defaultType:",p.defaultType),console.log("  - options.defaultType:",(c=p.options)==null?void 0:c.defaultType),console.log("  - has.fetchOpenOrders:",p.has.fetchOpenOrders),console.log("  - Current markets loaded:",!!p.markets),console.log("  - Instance class:",p.constructor.name)),!p.has.fetchOpenOrders){console.warn(` [fetchOpenOrders] Bybit ${v} does not support fetchOpenOrders`);continue}console.log(` [fetchOpenOrders] About to call fetchOpenOrders for ${v} with symbol: ${n}`),console.log(" [fetchOpenOrders] Instance before call:",{defaultType:p.defaultType,options:p.options,verbose:p.verbose});const I=p.verbose;p.verbose=!0;const h=await p.fetchOpenOrders(n);p.verbose=I,console.log(` [fetchOpenOrders] Fetched ${h.length} orders from Bybit ${v}`),g.push(...h)}catch(p){console.warn(` [fetchOpenOrders] Failed to fetch from Bybit ${v}:`,p.message),console.error(` [fetchOpenOrders] Full error for ${v}:`,p);continue}}else{const m=["spot","futures"];for(const v of m)try{console.log(` [fetchOpenOrders] Trying ${a.exchange} category: ${v}`);const p=await u.getRegularInstance(d,v);if(!p.has.fetchOpenOrders){console.warn(` [fetchOpenOrders] ${a.exchange} ${v} does not support fetchOpenOrders`);continue}const I=await p.fetchOpenOrders(n);console.log(` [fetchOpenOrders] Fetched ${I.length} orders from ${a.exchange} ${v}`),g.push(...I)}catch(p){console.warn(` [fetchOpenOrders] Failed to fetch from ${a.exchange} ${v}:`,p.message);continue}}const f=g.filter((m,v,p)=>v===p.findIndex(I=>I.id===m.id)).sort((m,v)=>v.timestamp-m.timestamp);return console.log(` [fetchOpenOrders] Total unique orders loaded: ${f.length} for account ${r} using optimized strategy`),f}catch(u){throw console.error(` [fetchOpenOrders] Failed to load open orders for account ${r}:`,u),console.error(" [fetchOpenOrders] Error details:",{message:u instanceof Error?u.message:"Unknown error",stack:u instanceof Error?u.stack:void 0,accountId:r,exchange:a.exchange}),u}},fetchPositions:async(r,n)=>{const{useUserStore:i}=await $t(async()=>{const{useUserStore:c}=await Promise.resolve().then(()=>Sl);return{useUserStore:c}},void 0),{users:o}=i.getState(),s=o.find(c=>c.accounts.some(u=>u.id===r)),a=s==null?void 0:s.accounts.find(c=>c.id===r);if(!a||!a.key||!a.privateKey)throw new Error(`Account ${r} not found or missing API keys`);console.log(` [fetchPositions] Loading positions for account ${r} (${a.exchange})`);try{const c=await t().getMarketsForExchange(a.exchange);console.log(` [fetchPositions] Supported markets for ${a.exchange}:`,c);const u=c.filter(p=>p==="futures"||p==="swap");let d=[];const{ccxtAccountManager:g}=await $t(async()=>{const{ccxtAccountManager:p}=await import("./ccxtAccountManager-DkinqREl.js");return{ccxtAccountManager:p}},[]),f={accountId:a.id,exchange:a.exchange,apiKey:a.key,secret:a.privateKey,password:a.password,sandbox:!1},m=async p=>{console.log(` [fetchPositions] Fetching positions for market: ${p}`);try{const I=await g.getRegularInstance(f,p);if(console.log(` [fetchPositions] Exchange instance created for ${p}, checking capabilities...`),!I.has.fetchPositions)return console.warn(` [fetchPositions] Exchange ${a.exchange} does not support fetchPositions for ${p}`),[];console.log(` [fetchPositions] Calling exchangeInstance.fetchPositions for ${p} with symbols:`,n);const h=await I.fetchPositions(n);return console.log(` [fetchPositions] Fetched ${h.length} positions for ${p}`),h}catch(I){return console.warn(` [fetchPositions] Failed to fetch positions for ${p}, error:`,I.message),[]}};if(u.length>0)for(const p of u)try{const I=await m(p);d.push(...I),console.log(` [fetchPositions] Added ${I.length} positions from ${p} market`)}catch(I){console.warn(` [fetchPositions] Failed to fetch positions for ${p} market:`,I.message)}else{console.log(" [fetchPositions] No position markets found, trying futures as default");const p=await m("futures");d.push(...p)}const v=d.filter((p,I,h)=>I===h.findIndex(y=>y.symbol===p.symbol&&y.side===p.side));return console.log(` [fetchPositions] Total unique positions loaded: ${v.length} for account ${r} across ${u.length} markets`),v}catch(c){throw console.error(` [fetchPositions] Failed to load positions for account ${r}:`,c),c}}}),P4=(e,t)=>({startDataFetching:async r=>{const n=t().activeSubscriptions[r];if(!n||n.isActive)return;const{exchange:i,symbol:o,dataType:s,timeframe:a,market:c}=n.key;let u=null;if(n.providerId?u=t().providers[n.providerId]:(u=t().getProviderForExchange(i),u&&e(d=>{d.activeSubscriptions[r]&&(d.activeSubscriptions[r].providerId=u.id)})),!u){console.error(` No suitable provider found for exchange ${i} (subscription ${r})`);return}console.log(` Starting data fetching for ${r} using ${n.method} method`),e(d=>{d.activeSubscriptions[r].isActive=!0});try{n.method==="websocket"?await t().startWebSocketFetching(i,o,s,u,a,c):await t().startRestFetching(i,o,s,u,a,c)}catch(d){console.error(` Failed to start data fetching for ${r}:`,d),e(g=>{g.activeSubscriptions[r].isActive=!1})}},stopDataFetching:r=>{const n=t().activeSubscriptions[r];!n||!n.isActive||(console.log(` Stopping data fetching for ${r}`),n.wsConnection&&(n.wsConnection.close(),console.log(` WebSocket connection closed for ${r}`)),n.intervalId&&(clearInterval(n.intervalId),console.log(` REST interval cleared for ${r}`)),e(i=>{i.activeSubscriptions[r].isActive=!1,delete i.activeSubscriptions[r].intervalId,delete i.activeSubscriptions[r].wsConnection}))},startWebSocketFetching:async(r,n,i,o,s="1m",a="spot")=>{var u,d,g;if(o.type!=="ccxt-browser"&&o.type!=="ccxt-server"){console.warn(` WebSocket not supported for provider type ${o.type}`);return}const c=G_();if(!c){console.warn(" CCXT Pro unavailable, switching to REST"),await t().startRestFetching(r,n,i,o,s,a);return}try{let f;if(o.type==="ccxt-browser"){const{createCCXTBrowserProvider:h}=await $t(async()=>{const{createCCXTBrowserProvider:C}=await Promise.resolve().then(()=>F0);return{createCCXTBrowserProvider:C}},void 0);f=await h(o).getWebSocketInstance(r,a,!1)}else if(o.type==="ccxt-server"){const{createCCXTServerProvider:h}=await $t(async()=>{const{createCCXTServerProvider:C}=await import("./ccxtServerProvider-D6aZ74M2.js");return{createCCXTServerProvider:C}},[]);f=await h(o).getWebSocketInstance(r,a,!1)}else f=Hf(r,o,c);const m=t().getSubscriptionKey(r,n,i,s,a);console.log(` Starting CCXT Pro WebSocket stream: ${r} ${n} ${i}`),console.log(` CCXT Pro ${r} available methods:`,Object.keys(f.has||{}));let v,p;switch(i){case"candles":v="watchOHLCV",p=!!((u=f.has)!=null&&u[v]);break;case"trades":v="watchTrades",p=!!((d=f.has)!=null&&d[v]);break;case"orderbook":const h=t().selectOptimalOrderBookMethod(r,f);v=h.selectedMethod,p=h.selectedMethod!=="fetchOrderBook",console.log(` Optimal method selected for ${r} orderbook:`,{method:h.selectedMethod,reason:h.reason,isOptimal:h.isOptimal}),e(y=>{y.activeSubscriptions[m]&&(y.activeSubscriptions[m].ccxtMethod=h.selectedMethod)});break;case"balance":v="watchBalance",p=!!((g=f.has)!=null&&g[v]);break;default:throw new Error(`Unsupported data type: ${i}`)}if(console.log(` CCXT Pro ${r} ${v} support:`,p),!p){console.warn(` CCXT Pro ${r} does not support ${v}, falling back to REST`),e(h=>{h.activeSubscriptions[m]&&(h.activeSubscriptions[m].method="rest",h.activeSubscriptions[m].isFallback=!0)}),await t().startRestFetching(r,n,i,o,s,a);return}if(i==="candles")try{console.log(` Loading historical candles for ${r} ${n} ${s} before WebSocket`);const h=Oi();if(h){const y=Hf(r,o,h),C=Sp(r);rc(r,C,"ohlcv");const x=await y.fetchOHLCV(n,s,void 0,C);if(x&&x.length>0){const A=x.map(w=>({timestamp:w[0],open:w[1],high:w[2],low:w[3],close:w[4],volume:w[5]}));t().updateCandles(r,n,A,s,a),console.log(` Loaded ${A.length} historical candles`)}}}catch(h){console.warn(" Failed to load historical candles:",h)}(async()=>{var h,y,C,x,A,w;for(console.log(` Starting CCXT Pro WebSocket loop for ${r} ${n} ${i}`);;)try{const S=t().activeSubscriptions[m];if(!(S!=null&&S.isActive)){console.log(` WebSocket loop stopped for ${m} - subscription inactive`);break}switch(i){case"candles":const k=await f.watchOHLCV(n,s);if(k&&k.length>0){const E=k.map(M=>({timestamp:M[0],open:M[1],high:M[2],low:M[3],close:M[4],volume:M[5]}));t().updateCandles(r,n,E,s,a)}break;case"trades":const R=t().activeSubscriptions[m],j=((h=R==null?void 0:R.config)==null?void 0:h.isAggregated)??!0;console.log(` [WebSocket] Watching trades for ${r} ${n} (aggregated preference: ${j})`);const _=await f.watchTrades(n);_&&_.length>0&&t().updateTrades(r,n,_,a);break;case"orderbook":const O=t().activeSubscriptions[m],P=(O==null?void 0:O.ccxtMethod)||"watchOrderBook";let N;switch(P){case"watchOrderBookForSymbols":const E=await f.watchOrderBookForSymbols([n]);N=E[n],console.log(` [OrderBook] (watchOrderBookForSymbols) received for ${r} ${n}`),console.log(" [OrderBook] DEBUG multiOrderbook keys:",Object.keys(E||{})),console.log(` [OrderBook] DEBUG orderbook for ${n}:`,N?"exists":"null/undefined");break;case"watchOrderBook":default:N=await f.watchOrderBook(n),console.log(` [OrderBook] (watchOrderBook) received for ${r} ${n}`),console.log(" [OrderBook] DEBUG orderbook:",N?"exists":"null/undefined");break}console.log(" [OrderBook] DEBUG Final orderbook check:",{hasOrderbook:!!N,hasBids:((y=N==null?void 0:N.bids)==null?void 0:y.length)||0,hasAsks:((C=N==null?void 0:N.asks)==null?void 0:C.length)||0,timestamp:N==null?void 0:N.timestamp}),N?(console.log(" [OrderBook] Data sample:",{method:P,bids:(x=N.bids)==null?void 0:x.slice(0,3),asks:(A=N.asks)==null?void 0:A.slice(0,3),timestamp:N.timestamp}),console.log(` [OrderBook] DEBUG Calling updateOrderBook for ${r}:${a}:${n}`),t().updateOrderBook(r,n,N,a)):console.warn(" [OrderBook] DEBUG OrderBook is null/undefined, not calling updateOrderBook");break;case"balance":a==="futures"?(f.options=f.options||{},f.options.defaultType="future"):a==="spot"&&(f.options=f.options||{},f.options.defaultType="spot"),console.log(` [Balance WS] Watching ${a} balance for ${r} with defaultType: ${(w=f.options)==null?void 0:w.defaultType}`);const B=await f.watchBalance();if(B){const E=Object.entries(B).filter(([G,T])=>G!=="info"&&G!=="datetime"&&G!=="timestamp"&&T&&typeof T=="object"&&(T.total>0||T.free>0||T.used>0)).map(([G,T])=>({currency:G,free:T.free||0,used:T.used||0,total:T.total||0})),M={timestamp:B.timestamp||Date.now(),balances:E,info:B.info};console.log(` [Balance WS] Received balance update for ${r} (${a}):`,{currencies:E.length,totalBalance:E.reduce((G,T)=>G+T.total,0)}),t().updateBalance(r,M,a)}break}}catch(S){console.error(` CCXT Pro WebSocket error for ${m}:`,S),console.log(" Switching to REST fallback due to WebSocket error"),e(k=>{k.activeSubscriptions[m]&&(k.activeSubscriptions[m].method="rest",k.activeSubscriptions[m].isFallback=!0)}),await t().startRestFetching(r,n,i,o,s,a);break}})().catch(h=>{console.error(` Failed to start CCXT Pro WebSocket for ${m}:`,h)})}catch(f){throw console.error(` Failed to start WebSocket for ${r} ${n} ${i}:`,f),f}},startRestFetching:async(r,n,i,o,s="1m",a="spot")=>{if(o.type!=="ccxt-browser"&&o.type!=="ccxt-server"){console.warn(` REST not supported for provider type ${o.type}`);return}const c=Oi();if(c)try{let u;if(o.type==="ccxt-browser"){const{createCCXTBrowserProvider:v}=await $t(async()=>{const{createCCXTBrowserProvider:I}=await Promise.resolve().then(()=>F0);return{createCCXTBrowserProvider:I}},void 0);u=await v(o).getMetadataInstance(r,a,!1)}else if(o.type==="ccxt-server"){const{createCCXTServerProvider:v}=await $t(async()=>{const{createCCXTServerProvider:I}=await import("./ccxtServerProvider-D6aZ74M2.js");return{createCCXTServerProvider:I}},[]);u=await v(o).getMetadataInstance(r,a,!1)}else u=Hf(r,o,c);const d=t().getSubscriptionKey(r,n,i,s,a),g=t().dataFetchSettings.restIntervals[i];console.log(` Starting REST polling: ${r} ${n} ${i} every ${g}ms`);const f=async()=>{var v,p,I,h,y,C;try{const x=t().activeSubscriptions[d];if(!(x!=null&&x.isActive))return;switch(i){case"candles":const A=Sp(r);rc(r,A,"ohlcv");const w=await u.fetchOHLCV(n,s,void 0,A);if(w&&w.length>0){const M=w.map(G=>({timestamp:G[0],open:G[1],high:G[2],low:G[3],close:G[4],volume:G[5]}));t().updateCandles(r,n,M,s,a)}break;case"trades":const S=t().activeSubscriptions[d],k=((v=S==null?void 0:S.config)==null?void 0:v.isAggregated)??!0,R=(p=S==null?void 0:S.config)==null?void 0:p.tradesLimit,j=R?Math.min(R,K0(r)):K0(r);rc(r,j,"trades");const _=k?r==="binance"?"publicGetAggTrades":void 0:"publicGetTrades";console.log(` [REST] Using method: ${_||"default"} for ${r} trades (aggregated: ${k})`);const O=await u.fetchTrades(n,void 0,j,_?{fetchTradesMethod:_}:{});O&&O.length>0&&t().updateTrades(r,n,O,a);break;case"orderbook":const P=await u.fetchOrderBook(n);P&&(console.log(` [OrderBook] Received via REST for ${r} ${n}:`,{bids:(I=P.bids)==null?void 0:I.slice(0,3),asks:(h=P.asks)==null?void 0:h.slice(0,3),timestamp:P.timestamp}),t().updateOrderBook(r,n,P,a));break;case"balance":let N=a;N==="futures"?(u.options=u.options||{},u.options.defaultType="future"):N==="margin"?(u.options=u.options||{},u.options.defaultType="margin"):N==="spot"&&(u.options=u.options||{},u.options.defaultType="spot"),console.log(` [Balance] Fetching ${N} wallet balance for ${r} with defaultType: ${(y=u.options)==null?void 0:y.defaultType}`);let B={};N==="funding"&&(r.toLowerCase()==="bybit"?B={type:"funding"}:r.toLowerCase()==="binance"?B={type:"funding"}:r.toLowerCase()==="okx"?B={type:"funding"}:B={type:"funding"});let E;try{if(N==="funding")if(r.toLowerCase()==="bybit")try{const M=await u.privateGetV5AssetBalanceAllBalance();console.log(" [Balance] Got Bybit funding balance:",M),E={info:M},(C=M==null?void 0:M.result)!=null&&C.list&&M.result.list.forEach(G=>{G.accountType==="FUNDING"&&G.coin&&G.coin.forEach(T=>{if(T.walletBalance&&parseFloat(T.walletBalance)>0){const L=T.coin;E[L]={free:parseFloat(T.walletBalance||"0"),used:0,total:parseFloat(T.walletBalance||"0")}}})})}catch(M){console.warn(" [Balance] Bybit funding balance failed, trying generic:",M.message),E=await u.fetchBalance(B)}else E=await u.fetchBalance(B);else E=await u.fetchBalance()}catch(M){console.warn(` [Balance] Failed to fetch ${N} balance for ${r}:`,M.message),E=await u.fetchBalance()}if(E){const M=Object.entries(E).filter(([T,L])=>T!=="info"&&T!=="datetime"&&T!=="timestamp"&&L&&typeof L=="object"&&(L.total>0||L.free>0||L.used>0)).map(([T,L])=>({currency:T,free:L.free||0,used:L.used||0,total:L.total||0})),G={timestamp:E.timestamp||Date.now(),balances:M,info:E.info};console.log(` [Balance] Received ${N} wallet via REST for ${r}:`,{currencies:M.length,totalBalance:M.reduce((T,L)=>T+L.total,0)}),t().updateBalance(r,G,N)}break}}catch(x){console.error(` REST fetch error for ${d}:`,x)}};await f();const m=setInterval(f,g);e(v=>{v.activeSubscriptions[d]&&(v.activeSubscriptions[d].intervalId=m)})}catch(u){throw console.error(` Failed to start REST polling for ${r} ${n} ${i}:`,u),u}},fetchBalance:async(r,n="trading")=>{var c,u,d,g;const{useUserStore:i}=await $t(async()=>{const{useUserStore:f}=await Promise.resolve().then(()=>Sl);return{useUserStore:f}},void 0),o=i.getState();let s=null;for(const f of o.users)if(s=f.accounts.find(m=>m.id===r),s)break;if(!s){console.error(` [Balance] Account with ID ${r} not found`);return}const a=s.exchange;console.log(` [Balance] Fetching balance for account ${r} (${a}:${n})`);try{const f=t().getProviderForExchange(a);if(!f){console.error(` [Balance] No provider found for exchange ${a}`);return}if(f.type!=="ccxt-browser"&&f.type!=="ccxt-server"){console.error(` [Balance] Provider type ${f.type} not supported for balance fetching`);return}const m=Oi();if(!m){console.error(" [Balance] CCXT not available");return}const v=Hf(a,f,m);n==="futures"?(v.options=v.options||{},v.options.defaultType="future"):n==="margin"?(v.options=v.options||{},v.options.defaultType="margin"):n==="spot"&&(v.options=v.options||{},v.options.defaultType="spot"),console.log(` [Balance] Fetching ${n} balance for account ${r} (${a}) with defaultType: ${(c=v.options)==null?void 0:c.defaultType}`);let p=await v.fetchBalance();if(n==="funding")if(a==="bybit"&&((u=v.has)!=null&&u.fetchBalance))try{const y=await v.fetchBalance({type:"funding"});y&&(p=y,console.log(` [Balance] Got Bybit funding balance for account ${r}:`,{currencies:Object.keys(y).filter(C=>C!=="info"&&C!=="datetime"&&C!=="timestamp").length}))}catch(y){if(console.warn(` [Balance] Bybit funding balance failed for account ${r}, trying fetchFundingBalance:`,y.message),(d=v.has)!=null&&d.fetchFundingBalance)try{p=await v.fetchFundingBalance()}catch(C){console.error(` [Balance] Both funding methods failed for account ${r}:`,C.message);return}}else if((g=v.has)!=null&&g.fetchFundingBalance)try{p=await v.fetchFundingBalance()}catch(y){console.warn(` [Balance] fetchFundingBalance failed for account ${r} (${a}):`,y.message);return}else{console.warn(` [Balance] Funding balance not supported for account ${r} (${a})`);return}if(!p){console.warn(` [Balance] No balance data received for account ${r} (${a}:${n})`);return}const I=Object.entries(p).filter(([y,C])=>y!=="info"&&y!=="datetime"&&y!=="timestamp"&&C&&typeof C=="object"&&(C.total>0||C.free>0||C.used>0)).map(([y,C])=>({currency:y,free:C.free||0,used:C.used||0,total:C.total||0})),h={timestamp:p.timestamp||Date.now(),balances:I,info:p.info};console.log(` [Balance] Fetched balance for account ${r} (${a}:${n}) (currencies: ${I.length})`),t().updateBalance(r,h,n)}catch(f){console.error(` [Balance] Error fetching balance for account ${r}:`,f)}}}),_4=(e,t)=>({selectOptimalOrderBookMethod:(r,n)=>{var o,s,a;console.log(` Analyzing ${r} capabilities to select optimal orderbook method...`);const i={watchOrderBookForSymbols:!!((o=n.has)!=null&&o.watchOrderBookForSymbols),watchOrderBook:!!((s=n.has)!=null&&s.watchOrderBook),fetchOrderBook:!!((a=n.has)!=null&&a.fetchOrderBook)};return console.log(` ${r} capabilities:`,i),i.watchOrderBookForSymbols?{selectedMethod:"watchOrderBookForSymbols",reason:"Optimal choice: supports diff updates for multiple pairs",capabilities:i,isOptimal:!0}:i.watchOrderBook?{selectedMethod:"watchOrderBook",reason:"Standard WebSocket: full orderbook snapshots",capabilities:i,isOptimal:!0}:{selectedMethod:"fetchOrderBook",reason:"Fallback: REST requests, WebSocket methods not supported",capabilities:i,isOptimal:!1}},cleanup:()=>{const r=t().activeSubscriptions;Object.keys(r).forEach(n=>{t().stopDataFetching(n)}),e(n=>{n.activeSubscriptions={},n.restCycles={},n.marketData={candles:{},trades:{},orderbook:{}}}),console.log(" Data provider store cleaned up")}}),M4=(e,t)=>({addChartUpdateListener:(r,n,i,o,s)=>{const a=t().getSubscriptionKey(r,n,"candles",i,o);e(c=>{c.chartUpdateListeners[a]||(c.chartUpdateListeners[a]=[]),c.chartUpdateListeners[a].includes(s)||(c.chartUpdateListeners[a].push(s),console.log(` [EventSystem] Added chart listener for ${a}, total listeners: ${c.chartUpdateListeners[a].length}`))})},removeChartUpdateListener:(r,n,i,o,s)=>{const a=t().getSubscriptionKey(r,n,"candles",i,o);e(c=>{if(c.chartUpdateListeners[a]){const u=c.chartUpdateListeners[a].indexOf(s);u>-1&&(c.chartUpdateListeners[a].splice(u,1),console.log(` [EventSystem] Removed chart listener for ${a}, remaining listeners: ${c.chartUpdateListeners[a].length}`),c.chartUpdateListeners[a].length===0&&delete c.chartUpdateListeners[a])}})},emitChartUpdateEvent:r=>{const n=t().getSubscriptionKey(r.exchange,r.symbol,"candles",r.timeframe,r.market),i=t().chartUpdateListeners[n]||[];i.length>0&&(console.log(` [EventSystem] Emitting ${r.type} event for ${n} to ${i.length} listeners:`,{event:r.type,subscriptionKey:n,listenerCount:i.length,data:r.data}),setTimeout(()=>{i.forEach(o=>{try{o(r)}catch(s){console.error(" [EventSystem] Error in chart update listener:",s)}})},0))}});lY();const ut=ui()(cl(fY(Yg((e,t,r)=>{const n={id:"universal-browser",type:"ccxt-browser",name:"Universal Browser Provider",status:"connected",exchanges:["*"],priority:100,config:{sandbox:!1}};return{...{providers:{[n.id]:n},activeProviderId:n.id,dataFetchSettings:{method:"websocket",restIntervals:{trades:1e3,candles:5e3,orderbook:500,balance:3e4,ticker:6e5}},activeSubscriptions:{},restCycles:{},marketData:{candles:{},trades:{},orderbook:{},balance:{},ticker:{}},chartUpdateListeners:{},loading:!1,error:null},...T4(e,t),...E4(e,t),...G4(e,t),...P4(e,t),..._4(e,t),...M4(e,t)}})),{name:"data-provider-store",partialize:e=>({providers:e.providers,activeProviderId:e.activeProviderId,dataFetchSettings:e.dataFetchSettings}),onRehydrateStorage:()=>e=>{if(e){const t={id:"universal-browser",type:"ccxt-browser",name:"Universal Browser Provider",status:"connected",exchanges:["*"],priority:100,config:{sandbox:!1}};e.providers["universal-browser"]||(e.providers["universal-browser"]=t),e.activeProviderId||(e.activeProviderId="universal-browser"),console.log(" Data Provider Store: Rehydrated from localStorage",{providers:Object.keys(e.providers),activeProviderId:e.activeProviderId})}}})),Z4=({selectedGroupId:e,className:t=""})=>{const[r,n]=b.useState(!1),[i,o]=b.useState(null),[s,a]=b.useState(null),[c,u]=b.useState(""),[d,g]=b.useState(0),[f,m]=b.useState({}),v=b.useRef(null),{getGroupById:p,setTradingPair:I,setAccount:h,setExchange:y,setMarket:C}=zr(),{users:x,activeUserId:A}=ct(),{getSymbolsForExchange:w,getMarketsForExchange:S}=ut(),k=x.find(E=>E.id===A),R=e?p(e):void 0;b.useEffect(()=>{if(!k)return;(async()=>{const M={};for(const G of k.accounts)if(!M[G.exchange])try{const[T,L]=await Promise.all([w(G.exchange,void 0,"spot"),S(G.exchange)]);M[G.exchange]={symbols:T,markets:L}}catch(T){console.error(`Failed to load data for ${G.exchange}:`,T),M[G.exchange]={symbols:["BTC/USDT","ETH/USDT"],markets:["spot"]}}m(M)})()},[k,w,S]);const j=b.useMemo(()=>{if(!k)return[];const E=[];return k.accounts.forEach(M=>{const G=f[M.exchange];if(!G)return;const{symbols:T,markets:L}=G;L.forEach(W=>{T.forEach(X=>{const V={account:M.email,exchange:M.exchange,market:W,pair:X};E.push(V)})})}),E},[k,f]),{filteredInstruments:_,totalFound:O}=b.useMemo(()=>{let E=j;if(c.trim()){const G=c.toLowerCase().trim().split(/\s+/).filter(T=>T.length>0);G.length>0&&(E=j.filter(T=>G.every(L=>T.account.toLowerCase().includes(L)||T.exchange.toLowerCase().includes(L)||T.market.toLowerCase().includes(L)||T.pair.toLowerCase().includes(L))))}let M=E;return i&&E.some(T=>T.account===i.account&&T.exchange===i.exchange&&T.market===i.market&&T.pair===i.pair)&&(M=[i,...E.filter(T=>!(T.account===i.account&&T.exchange===i.exchange&&T.market===i.market&&T.pair===i.pair))]),{filteredInstruments:M.slice(0,200),totalFound:E.length}},[j,c,i]);H.useEffect(()=>{if(R&&R.account&&R.exchange&&R.market&&R.tradingPair){const E={account:R.account,exchange:R.exchange,market:R.market,pair:R.tradingPair};o(M=>!M||M.account!==E.account||M.exchange!==E.exchange||M.market!==E.market||M.pair!==E.pair?E:M)}else o(null)},[R]);const P=E=>{o(E),R&&(E?(R.account!==E.account||R.exchange!==E.exchange||R.market!==E.market||R.tradingPair!==E.pair)&&(h(R.id,E.account),y(R.id,E.exchange),C(R.id,E.market),I(R.id,E.pair)):(h(R.id,""),y(R.id,""),C(R.id,""),I(R.id,"")))},N=E=>{const M=E.currentTarget.getBoundingClientRect();a({x:M.left,y:M.bottom+window.scrollY}),n(!r),u(""),g(0),r||setTimeout(()=>{var G;(G=v.current)==null||G.focus()},100)},B=E=>{P(E),n(!1),u(""),g(0)};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`flex items-center ${t}`,children:l.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-1 py-1 rounded-sm hover:bg-terminal-widget/50 transition-colors flex-shrink-0",title:"Search trading instrument",children:[l.jsx(Ja,{size:14,className:"text-terminal-muted hover:text-terminal-text transition-colors flex-shrink-0"}),i&&l.jsx("span",{className:"text-xs font-medium text-terminal-text truncate",children:i.pair})]})}),r&&s&&Li.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>n(!1)}),l.jsx("div",{className:"fixed w-[500px] bg-terminal-widget border border-terminal-border rounded-md shadow-lg z-[9999]",style:{left:s.x,top:s.y+4},children:l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"relative mb-3",children:[l.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-terminal-muted"}),l.jsx("input",{ref:v,type:"text",value:c,onChange:E=>{u(E.target.value),g(0)},placeholder:"Search account | exchange | market | pair...",className:"w-full pl-10 pr-10 py-2 bg-terminal-bg border border-terminal-border rounded text-sm focus:outline-none focus:border-terminal-accent"}),c&&l.jsx("button",{onClick:()=>{var E;u(""),g(0),(E=v.current)==null||E.focus()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded hover:bg-terminal-accent/20 transition-colors",children:l.jsx(Cr,{size:12,className:"text-terminal-muted hover:text-terminal-text"})})]}),l.jsx(H4,{instruments:_,totalFound:O,highlightedIndex:d,onSelect:B,selectedInstrument:i}),!R&&l.jsx("div",{className:"mt-3 pt-3 border-t border-terminal-border text-xs text-terminal-muted",children:" Select a group color first to save instrument settings"})]})})]}),document.body)]})},H4=({instruments:e,totalFound:t,highlightedIndex:r,onSelect:n,selectedInstrument:i})=>{const o=b.useRef(null),s=Hi({count:e.length,getScrollElement:()=>o.current,estimateSize:()=>80,overscan:5});return e.length===0?l.jsx("div",{className:"py-4 text-sm text-terminal-muted text-center",children:"No instruments found"}):l.jsxs("div",{className:"max-h-80 overflow-hidden",children:[l.jsx("div",{ref:o,className:"h-72 overflow-auto",style:{contain:"strict"},children:l.jsx("div",{style:{height:s.getTotalSize(),width:"100%",position:"relative"},children:s.getVirtualItems().map(a=>{const c=e[a.index],u=a.index===r,d=i&&c.account===i.account&&c.exchange===i.exchange&&c.market===i.market&&c.pair===i.pair;return l.jsx("div",{"data-index":a.index,ref:s.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${a.start}px)`},children:l.jsx("div",{onClick:()=>n(c),className:`px-3 py-3 cursor-pointer border-b border-terminal-border/50 last:border-b-0 ${d?"bg-terminal-accent/30 border-l-2 border-l-green-400 pl-2":u?"bg-terminal-accent/20":"hover:bg-terminal-accent/10"}`,children:l.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[d&&l.jsxs("div",{className:"flex items-center justify-between text-xs text-green-400 font-medium mb-1",children:[l.jsx("span",{children:" Current Selection"}),l.jsx("button",{onClick:g=>{g.stopPropagation(),n(null)},className:"p-1 rounded-sm hover:bg-terminal-widget/50 text-terminal-muted hover:text-terminal-negative transition-colors ml-2",title:"Clear selection",children:l.jsx(Cr,{size:14})})]}),l.jsxs("div",{className:"text-terminal-text font-medium",children:[l.jsx("span",{className:"text-terminal-muted",children:"Account:"})," ",c.account]}),l.jsxs("div",{className:"text-terminal-text",children:[l.jsx("span",{className:"text-terminal-muted",children:"Exchange:"})," ",c.exchange]}),l.jsxs("div",{className:"text-terminal-text",children:[l.jsx("span",{className:"text-terminal-muted",children:"Market:"})," ",c.market]}),l.jsxs("div",{className:"text-terminal-text",children:[l.jsx("span",{className:"text-terminal-muted",children:"Pair:"})," ",c.pair]})]})})},a.key)})})}),l.jsx("div",{className:"px-3 py-2 border-t border-terminal-border/50 bg-terminal-bg/50",children:l.jsxs("div",{className:"text-xs text-terminal-muted text-center",children:["Showing ",l.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:e.length})," of ",l.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:t})," instruments"]})})]})},__=ui(e=>({isOpen:!1,widgetId:null,widgetType:null,widgetTitle:null,groupId:null,openDrawer:(t,r,n,i)=>e({isOpen:!0,widgetId:t,widgetType:r,widgetTitle:n,groupId:i||null}),closeDrawer:()=>e({isOpen:!1,widgetId:null,widgetType:null,widgetTitle:null,groupId:null})})),Wn=8,Wf=0,L4=({id:e,title:t,defaultTitle:r,userTitle:n,children:i,position:o,size:s,zIndex:a,isActive:c,groupId:u,widgetType:d,showGroupSelector:g=!0,headerActions:f,onRemove:m})=>{var Ar;const v=b.useRef(null),p=b.useRef(null),[I,h]=b.useState(!1),[y,C]=b.useState(!1),[x,A]=b.useState(!1),[w,S]=b.useState(null),[k,R]=b.useState({x:0,y:0}),[j,_]=b.useState(null),[O,P]=b.useState(null),[N,B]=b.useState(!1),[E,M]=b.useState(""),[G,T]=b.useState(o),[L,W]=b.useState(s),X=Mt(Y=>Y.moveWidget),V=Mt(Y=>Y.resizeWidget),z=Mt(Y=>Y.bringWidgetToFront),ee=Mt(Y=>Y.updateWidgetTitle),D=Mt(Y=>Y.updateWidget),F=Mt(Y=>Y.toggleWidgetMinimized),Z=Mt(Y=>Y.activeDashboardId),$=Mt(Y=>Y.dashboards),J=zr(Y=>Y.getGroupById),U=__(Y=>Y.openDrawer),K=$.find(Y=>Y.id===Z),re=(K==null?void 0:K.widgets.filter(Y=>Y.id!==e))||[];K!=null&&K.widgets.filter(Y=>Y.id!==e&&Y.isMinimized);const ce=((Ar=K==null?void 0:K.widgets.find(Y=>Y.id===e))==null?void 0:Ar.isMinimized)||!1;H.useEffect(()=>{T(o)},[o.x,o.y]),H.useEffect(()=>{W(s)},[s.width,s.height]);const Me=Y=>{Y.preventDefault(),Y.stopPropagation(),B(!0),M(n||r)},Ee=Y=>{M(Y.target.value)},Ke=()=>{Z&&ee(Z,e,E),B(!1)},Nt=Y=>{Y.key==="Enter"?Ke():Y.key==="Escape"&&(B(!1),M(n||r))},te=()=>{Ke()},he=Y=>{Z&&D(Z,e,{groupId:Y})};H.useEffect(()=>{N&&p.current&&(p.current.focus(),p.current.select())},[N]);const Ze=b.useCallback(()=>{I?(O&&(T(O.position),W(O.size),Z&&(X(Z,e,O.position.x,O.position.y),V(Z,e,O.size.width,O.size.height))),P(null),h(!1)):(P({position:G,size:L}),h(!0))},[I,O,G,L,Z,X,V,e]),se=b.useCallback(()=>{Z&&!I&&z(Z,e)},[Z,e,z,I]),ae=b.useCallback((Y,Se,Be,ke)=>{let be=Y,Je=Se;const Lt=window.innerWidth,ve=window.innerHeight;return Math.abs(Y)<Wn&&(be=0),Math.abs(Y+Be-Lt)<Wn&&(be=Lt-Be),Math.abs(Se-Wf)<Wn&&(Je=Wf),Math.abs(Se+ke-ve)<Wn&&(Je=ve-ke),re.forEach(Ge=>{const xe=Ge.position;Math.abs(Y-xe.x)<Wn&&(be=xe.x),Math.abs(Y-(xe.x+xe.width))<Wn&&(be=xe.x+xe.width),Math.abs(Y+Be-xe.x)<Wn&&(be=xe.x-Be),Math.abs(Y+Be-(xe.x+xe.width))<Wn&&(be=xe.x+xe.width-Be),Math.abs(Se-xe.y)<Wn&&(Je=xe.y),Math.abs(Se-(xe.y+xe.height))<Wn&&(Je=xe.y+xe.height),Math.abs(Se+ke-xe.y)<Wn&&(Je=xe.y-ke),Math.abs(Se+ke-(xe.y+xe.height))<Wn&&(Je=xe.y+xe.height-ke)}),{x:be,y:Je}},[re]),He=b.useCallback(Y=>{if(y){let Se=Y.clientX-k.x,Be=Y.clientY-k.y;Se=Math.max(0,Math.min(Se,window.innerWidth-L.width)),Be=Math.max(Wf,Math.min(Be,window.innerHeight-L.height));const ke=ae(Se,Be,L.width,L.height);T({x:ke.x,y:ke.y})}},[y,k.x,k.y,L.width,L.height,ae]),Ue=b.useCallback(()=>{y&&Z&&(console.log("WidgetSimple: Drag end",{widgetId:e,dashboardId:Z,newPosition:G}),X(Z,e,G.x,G.y)),C(!1)},[y,Z,X,e,G]),vt=b.useCallback(Y=>{if(x&&j&&w){const Se=Y.clientX-j.mousePos.x,Be=Y.clientY-j.mousePos.y;let ke={...j.position},be={...j.size};switch(w){case"n":ke.y=Math.min(j.position.y+Be,j.position.y+j.size.height-150),be.height=Math.max(150,j.size.height-Be);break;case"s":be.height=Math.max(150,j.size.height+Be);break;case"e":be.width=Math.max(250,j.size.width+Se);break;case"w":ke.x=Math.min(j.position.x+Se,j.position.x+j.size.width-250),be.width=Math.max(250,j.size.width-Se);break;case"ne":ke.y=Math.min(j.position.y+Be,j.position.y+j.size.height-150),be.height=Math.max(150,j.size.height-Be),be.width=Math.max(250,j.size.width+Se);break;case"nw":ke.x=Math.min(j.position.x+Se,j.position.x+j.size.width-250),ke.y=Math.min(j.position.y+Be,j.position.y+j.size.height-150),be.width=Math.max(250,j.size.width-Se),be.height=Math.max(150,j.size.height-Be);break;case"se":be.width=Math.max(250,j.size.width+Se),be.height=Math.max(150,j.size.height+Be);break;case"sw":ke.x=Math.min(j.position.x+Se,j.position.x+j.size.width-250),be.width=Math.max(250,j.size.width-Se),be.height=Math.max(150,j.size.height+Be);break}ke.x=Math.max(0,Math.min(ke.x,window.innerWidth-be.width)),ke.y=Math.max(Wf,Math.min(ke.y,window.innerHeight-be.height));const Je=ae(ke.x,ke.y,be.width,be.height);ke.x=Je.x,ke.y=Je.y,T(ke),W(be)}},[x,j,w,ae]),jt=b.useCallback(()=>{x&&Z&&(console.log("WidgetSimple: Resize end",{widgetId:e,dashboardId:Z,newPosition:G,newSize:L}),X(Z,e,G.x,G.y),V(Z,e,L.width,L.height)),A(!1),S(null),_(null)},[x,Z,X,V,e,G,L]),Lr=Y=>{Z&&z(Z,e),R({x:Y.clientX-G.x,y:Y.clientY-G.y}),C(!0),console.log("WidgetSimple: Drag start",{widgetId:e,dashboardId:Z,clickPos:{x:Y.clientX,y:Y.clientY},widgetPos:G,offset:{x:Y.clientX-G.x,y:Y.clientY-G.y}})},bt=(Y,Se)=>{Y.preventDefault(),Y.stopPropagation(),Z&&z(Z,e),A(!0),S(Se),_({position:G,size:L,mousePos:{x:Y.clientX,y:Y.clientY}}),console.log("WidgetSimple: Resize start",{widgetId:e,dashboardId:Z,direction:Se,startPosition:G,startSize:L})};H.useEffect(()=>{if(y)return document.addEventListener("mousemove",He),document.addEventListener("mouseup",Ue),()=>{document.removeEventListener("mousemove",He),document.removeEventListener("mouseup",Ue)}},[y,He,Ue]),H.useEffect(()=>{if(x)return document.addEventListener("mousemove",vt),document.addEventListener("mouseup",jt),()=>{document.removeEventListener("mousemove",vt),document.removeEventListener("mouseup",jt)}},[x,vt,jt]);const rn=b.useCallback(()=>{Z&&F(Z,e)},[Z,e,F]),Wr=b.useCallback(Y=>{Y.preventDefault(),Y.stopPropagation(),d&&U(e,d,n||r,u)},[e,d,n,r,u,U]),br=d&&["chart","orderbook","orderBook","portfolio","trades","orderForm","userBalances","userTradingData"].includes(d),Jt=u?J(u):void 0,xt=Jt&&Jt.account&&Jt.exchange&&Jt.market&&Jt.tradingPair,xr=!Jt||(Jt==null?void 0:Jt.color)==="transparent";return l.jsxs("div",{ref:v,className:de("widget-container animate-fade-in border border-terminal-border",c&&"ring-1 ring-blue-500",I&&"border-0",ce&&"!h-10 overflow-hidden"),style:{left:I?0:`${G.x}px`,top:I?0:`${G.y}px`,width:I?"100vw":`${L.width}px`,height:I?"100vh":`${L.height}px`,zIndex:I?10001:ce?1e4:a,position:I?"fixed":"absolute"},onClick:se,children:[l.jsxs("div",{className:de("widget-header h-10 px-3 py-2 flex items-center justify-between",xr?"bg-transparent":"bg-terminal-accent/60",!I&&!ce&&"cursor-move"),onMouseDown:!I&&!ce?Lr:void 0,children:[l.jsxs("div",{className:"flex items-center flex-1 min-w-0 space-x-2",children:[!ce&&g&&l.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[l.jsx(n4,{selectedGroupId:u,onGroupSelect:he,className:"flex-shrink-0"}),l.jsx(Z4,{selectedGroupId:u,className:"flex-shrink-0"})]}),!xt&&l.jsx("div",{className:"flex-1 min-w-0",children:N?l.jsx("input",{ref:p,type:"text",value:E,onChange:Ee,onKeyDown:Nt,onBlur:te,className:"text-xs font-medium bg-transparent border-none outline-none text-terminal-text w-full min-w-0",style:{margin:0,padding:0}}):l.jsx("h3",{className:"text-xs font-medium truncate text-terminal-text cursor-pointer",onDoubleClick:Me,title:"Double click to edit",children:n||r})})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[!ce&&f,!ce&&br&&l.jsx("button",{className:"p-1 rounded-sm hover:bg-terminal-widget/50 transition-colors",onClick:Wr,title:"Widget Settings",children:l.jsx(Vo,{size:14,className:"text-terminal-muted hover:text-terminal-text transition-colors"})}),l.jsx("button",{className:"p-1 rounded-sm hover:bg-terminal-widget/50 transition-colors",onClick:rn,title:ce?"Expand widget":"Collapse widget",children:l.jsx(cF,{size:14,className:"text-terminal-muted hover:text-terminal-text transition-colors"})}),!ce&&l.jsx("button",{className:"p-1 rounded-sm hover:bg-terminal-widget/50 transition-colors",onClick:Ze,children:I?l.jsx(lF,{size:14,className:"text-terminal-muted hover:text-terminal-text transition-colors"}):l.jsx(aF,{size:14,className:"text-terminal-muted hover:text-terminal-text transition-colors"})}),l.jsx("button",{className:"p-1 rounded-sm hover:bg-terminal-widget/50 text-terminal-muted hover:text-terminal-negative transition-colors",onClick:m,children:l.jsx(Cr,{size:14})})]})]}),!ce&&l.jsx("div",{className:de("h-[calc(100%-40px)] overflow-auto bg-terminal-bg",d==="chart"||d==="trades"?"":"p-3"),children:i}),!I&&!ce&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 cursor-nw-resize opacity-0 hover:opacity-50 transition-opacity bg-terminal-muted/30",onMouseDown:Y=>bt(Y,"nw")}),l.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 cursor-ne-resize opacity-0 hover:opacity-50 transition-opacity bg-terminal-muted/30",onMouseDown:Y=>bt(Y,"ne")}),l.jsx("div",{className:"absolute bottom-0 left-0 w-3 h-3 cursor-sw-resize opacity-0 hover:opacity-50 transition-opacity bg-terminal-muted/30",onMouseDown:Y=>bt(Y,"sw")}),l.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 cursor-se-resize opacity-0 hover:opacity-50 transition-opacity bg-terminal-muted/30",onMouseDown:Y=>bt(Y,"se")}),l.jsx("div",{className:"absolute top-0 left-3 right-3 h-1 cursor-n-resize opacity-0 hover:opacity-50 transition-opacity bg-terminal-muted/20",onMouseDown:Y=>bt(Y,"n")}),l.jsx("div",{className:"absolute bottom-0 left-3 right-3 h-1 cursor-s-resize opacity-0 hover:opacity-50 transition-opacity bg-terminal-muted/20",onMouseDown:Y=>bt(Y,"s")}),l.jsx("div",{className:"absolute top-3 bottom-3 left-0 w-1 cursor-w-resize opacity-0 hover:opacity-50 transition-opacity bg-terminal-muted/20",onMouseDown:Y=>bt(Y,"w")}),l.jsx("div",{className:"absolute top-3 bottom-3 right-0 w-1 cursor-e-resize opacity-0 hover:opacity-50 transition-opacity bg-terminal-muted/20",onMouseDown:Y=>bt(Y,"e")})]})]})},W4=({position:e,onClose:t})=>{const r=Mt(j=>j.addWidget),n=Mt(j=>j.activeDashboardId),i=Mt(j=>j.getActiveDashboard),{getTransparentGroup:o}=zr(),s=b.useRef(null),[a,c]=b.useState(!1),[u,d]=b.useState({x:0,y:0,placement:"right"}),[g,f]=b.useState({x:e.x,y:e.y}),m=b.useRef(null),v=b.useRef(null),p=b.useRef(null);H.useEffect(()=>{console.log("WidgetMenu: Active dashboard changed",{activeDashboardId:n})},[n]);const I=b.useCallback(()=>{const P={x:Math.min(e.x,window.innerWidth-300-20),y:Math.min(e.y,window.innerHeight-500)};if(f(P),a&&v.current&&s.current){const N=v.current.getBoundingClientRect(),B=s.current.getBoundingClientRect();let E=P.x+300,M=N.top-B.top+P.y,G="right";E+280>window.innerWidth-20&&(E=P.x-280,G="left",E<20&&(E=P.x,M=P.y+B.height,G="bottom",M+400>window.innerHeight-20&&(M=P.y-400,G="top",M<20&&(M=20,E=Math.min(E,window.innerWidth-280-20),G="right")))),(G==="right"||G==="left")&&(M=Math.max(20,Math.min(M,window.innerHeight-400-20))),d({x:E,y:M,placement:G})}},[e,a]);b.useEffect(()=>{I()},[I]),b.useEffect(()=>{const j=()=>{I()};return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[I]),b.useEffect(()=>{if(a){const j=setTimeout(()=>{I()},0);return()=>clearTimeout(j)}},[a,I]),b.useEffect(()=>{const j=_=>{s.current&&!s.current.contains(_.target)&&m.current&&!m.current.contains(_.target)&&t()};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[t]);const h=j=>{var D;if(!n)return;const _=window.innerWidth,O=window.innerHeight,N={chart:{width:650,height:330},orderForm:{width:350,height:550},orderbook:{width:500,height:650},trades:{width:600,height:550},deals:{width:900,height:600},dataProviderSettings:{width:500,height:450},dataProviderDemo:{width:700,height:400},dataProviderSetup:{width:500,height:400},dataProviderDebug:{width:700,height:500},notificationTest:{width:400,height:500},debugUserData:{width:600,height:400},debugCCXTCache:{width:700,height:500},debugBingX:{width:700,height:600},exchanges:{width:600,height:500},markets:{width:500,height:450},pairs:{width:650,height:550},userBalances:{width:700,height:600},userTradingData:{width:800,height:650}}[j];let B=Math.max(20,Math.floor((_-N.width)/2)),E=Math.max(80,Math.floor((O-N.height)/2));const M=i(),T=(((D=M==null?void 0:M.widgets)==null?void 0:D.length)>0?Math.max(...M.widgets.map(F=>F.position.zIndex||1)):1)+1,L={chart:"Chart",orderForm:"Place Order",orderbook:"Order Book",trades:"Trades",deals:"Deals",dataProviderSettings:"Data Provider Settings",dataProviderDemo:"Data Provider Demo",dataProviderSetup:"Data Provider Setup",dataProviderDebug:"Data Provider Debug",notificationTest:"Notification Test",debugUserData:"Debug User Data",debugCCXTCache:"Debug CCXT Cache",debugBingX:"Debug BingX",exchanges:"Exchanges Diagnostic",markets:"Markets Diagnostic",pairs:"Pairs Diagnostic",userBalances:"User Balances",userTradingData:"User Trading Data"},X=["markets","exchanges","pairs","dataProviderDebug","dataProviderDemo","dataProviderSetup","debugUserData","debugCCXTCache","debugBingX","notificationTest","deals","dataProviderSettings","userBalances","userTradingData"].includes(j),V=["chart","orderForm","orderbook","trades"],z=o(),ee=V.includes(j)&&z?z.id:void 0;r(n,{type:j,title:L[j],defaultTitle:L[j],userTitle:void 0,position:{x:B,y:E,width:N.width,height:N.height,zIndex:T},config:{},groupId:ee,showGroupSelector:!X,isVisible:!0,isMinimized:!1}),t()},y=b.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null),c(!0)},[]),C=b.useCallback(()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{c(!1),p.current=null},300)},[]),x=b.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null),c(!0)},[]),A=b.useCallback(()=>{c(!1)},[]);b.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const w=[{type:"chart",label:"Chart",icon:l.jsx(U5,{size:16})},{type:"orderbook",label:"Order Book (not ready)",icon:l.jsx(Y5,{size:16})},{type:"trades",label:"Trades",icon:l.jsx(Pd,{size:16})}],S=[{type:"userBalances",label:"User Balances",icon:l.jsx(Os,{size:16})},{type:"userTradingData",label:"User Trading Data (not ready)",icon:l.jsx(_d,{size:16})},{type:"deals",label:"Deals (not ready)",icon:l.jsx(iF,{size:16})},{type:"orderForm",label:"Place Order (not ready)",icon:l.jsx(nF,{size:16})}],k=[{type:"exchanges",label:"Exchanges Diagnostic",icon:l.jsx(ZA,{size:16})},{type:"markets",label:"Markets Diagnostic",icon:l.jsx(I0,{size:16})},{type:"pairs",label:"Pairs Diagnostic",icon:l.jsx(mr,{size:16})},{type:"debugUserData",label:"Debug User Data",icon:l.jsx(Md,{size:16})},{type:"debugCCXTCache",label:"Debug CCXT Cache",icon:l.jsx(Eo,{size:16})},{type:"debugBingX",label:"Debug BingX",icon:l.jsx(Gf,{size:16})},{type:"notificationTest",label:"Notification Test",icon:l.jsx(ip,{size:16})},{type:"dataProviderSettings",label:"Data Provider Settings",icon:l.jsx(Vo,{size:16})},{type:"dataProviderDemo",label:"Data Provider Demo",icon:l.jsx(Gf,{size:16})},{type:"dataProviderSetup",label:"Data Provider Setup",icon:l.jsx(Vo,{size:16})},{type:"dataProviderDebug",label:"Data Provider Debug",icon:l.jsx(Gf,{size:16})}],R=j=>l.jsxs("button",{className:`group flex items-center w-full space-x-3 px-3 py-2 rounded-md transition-all duration-200 text-left text-sm ${j.disabled?"text-terminal-muted/50 cursor-not-allowed opacity-50":"text-terminal-text hover:text-terminal-text hover:bg-terminal-accent/60 active:bg-terminal-accent/80 hover:shadow-sm"}`,onClick:()=>!j.disabled&&h(j.type),disabled:j.disabled,children:[l.jsx("span",{className:`transition-colors duration-200 ${j.disabled?"text-terminal-muted/50":"text-terminal-muted group-hover:text-terminal-text"}`,children:j.icon}),l.jsx("span",{className:"transition-colors duration-200",children:j.label})]},j.type);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:s,className:"widget-menu absolute rounded-lg shadow-lg overflow-hidden z-[10002] border border-terminal-border bg-terminal-widget/95 backdrop-blur-md text-terminal-text",style:{left:g.x,top:g.y,width:"300px"},children:[l.jsx("div",{className:"px-3 py-2 border-b border-terminal-border/50",children:l.jsx("h3",{className:"text-sm font-medium",children:"Add Widget"})}),l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"px-3 py-1 text-xs font-medium text-terminal-muted/70 uppercase tracking-wide",children:"Public Data"}),l.jsx("div",{className:"space-y-1",children:w.map(R)})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"px-3 py-1 text-xs font-medium text-terminal-muted/70 uppercase tracking-wide",children:"Private Data"}),l.jsx("div",{className:"space-y-1",children:S.map(R)})]}),l.jsx("div",{children:l.jsxs("button",{ref:v,className:"group flex items-center justify-between w-full px-3 py-2 rounded-md text-terminal-text hover:text-terminal-text hover:bg-terminal-accent/60 active:bg-terminal-accent/80 hover:shadow-sm transition-all duration-200 text-left text-sm",onMouseEnter:y,onMouseLeave:C,children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-terminal-muted group-hover:text-terminal-text transition-colors duration-200",children:l.jsx(Gf,{size:16})}),l.jsx("span",{className:"transition-colors duration-200",children:"Diagnostics"})]}),l.jsx(m0,{size:14,className:`text-terminal-muted group-hover:text-terminal-text transition-all duration-200 ${u.placement==="left"?"rotate-180":""}`})]})})]}),l.jsx("div",{className:"p-2 border-t border-terminal-border/50 text-xs text-terminal-muted px-3",children:"Select a widget to add to the workspace"})]}),a&&l.jsxs("div",{ref:m,className:"widget-menu absolute rounded-lg shadow-lg overflow-hidden z-[10003] border border-terminal-border bg-terminal-widget/95 backdrop-blur-md text-terminal-text",style:{left:u.x,top:u.y,width:"280px",maxHeight:"400px",overflowY:"auto"},onMouseEnter:x,onMouseLeave:A,children:[l.jsx("div",{className:"px-3 py-2 border-b border-terminal-border/50",children:l.jsx("h3",{className:"text-sm font-medium",children:"Diagnostics"})}),l.jsx("div",{className:"p-2 space-y-1",children:k.map(R)})]})]})};function D4(){return`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const lu=ui()(cl(Yg((e,t)=>({notifications:[],unreadCount:0,isHistoryOpen:!1,addNotification:r=>{const n={...r,id:D4(),timestamp:Date.now(),read:!1};e(o=>{o.notifications.unshift(n),o.unreadCount+=1,o.notifications.length>100&&(o.notifications=o.notifications.slice(0,100))});const i=n.id;switch(n.type){case"success":ml.success(n.title,{id:i,description:n.message,duration:n.persistent?1/0:4e3});break;case"error":ml.error(n.title,{id:i,description:n.message,duration:n.persistent?1/0:6e3});break;case"warning":ml.warning(n.title,{id:i,description:n.message,duration:n.persistent?1/0:5e3});break;case"info":ml.info(n.title,{id:i,description:n.message,duration:n.persistent?1/0:4e3});break}console.log(` [Notification] ${n.type.toUpperCase()}: ${n.title}`,n.message)},markAsRead:r=>{e(n=>{const i=n.notifications.find(o=>o.id===r);i&&!i.read&&(i.read=!0,n.unreadCount=Math.max(0,n.unreadCount-1))})},markAllAsRead:()=>{e(r=>{r.notifications.forEach(n=>n.read=!0),r.unreadCount=0})},removeNotification:r=>{e(n=>{const i=n.notifications.findIndex(o=>o.id===r);i!==-1&&(n.notifications[i].read||(n.unreadCount=Math.max(0,n.unreadCount-1)),n.notifications.splice(i,1))}),ml.dismiss(r)},clearAll:()=>{e(r=>{r.notifications=[],r.unreadCount=0}),ml.dismiss()},toggleHistory:()=>{e(r=>{r.isHistoryOpen=!r.isHistoryOpen})},setHistoryOpen:r=>{e(n=>{n.isHistoryOpen=r})},showSuccess:(r,n,i=!1)=>{t().addNotification({type:"success",title:r,message:n,persistent:i})},showError:(r,n,i=!1)=>{t().addNotification({type:"error",title:r,message:n,persistent:i})},showWarning:(r,n,i=!1)=>{t().addNotification({type:"warning",title:r,message:n,persistent:i})},showInfo:(r,n,i=!1)=>{t().addNotification({type:"info",title:r,message:n,persistent:i})}})),{name:"notification-store",partialize:e=>({notifications:e.notifications,unreadCount:e.unreadCount})}));function $4(e,t=[]){let r=[];function n(o,s){const a=b.createContext(s);a.displayName=o+"Context";const c=r.length;r=[...r,s];const u=g=>{var h;const{scope:f,children:m,...v}=g,p=((h=f==null?void 0:f[e])==null?void 0:h[c])||a,I=b.useMemo(()=>v,Object.values(v));return l.jsx(p.Provider,{value:I,children:m})};u.displayName=o+"Provider";function d(g,f){var p;const m=((p=f==null?void 0:f[e])==null?void 0:p[c])||a,v=b.useContext(m);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[u,d]}const i=()=>{const o=r.map(s=>b.createContext(s));return function(a){const c=(a==null?void 0:a[e])||o;return b.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return i.scopeName=e,[n,X4(i,...t)]}function X4(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=n.reduce((a,{useScope:c,scopeName:u})=>{const g=c(o)[`__scope${u}`];return{...a,...g}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var F4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ug=F4.reduce((e,t)=>{const r=qP(`Primitive.${t}`),n=b.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),M_={exports:{}},Z_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec=b;function K4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var V4=typeof Object.is=="function"?Object.is:K4,z4=Ec.useState,Y4=Ec.useEffect,U4=Ec.useLayoutEffect,J4=Ec.useDebugValue;function Q4(e,t){var r=t(),n=z4({inst:{value:r,getSnapshot:t}}),i=n[0].inst,o=n[1];return U4(function(){i.value=r,i.getSnapshot=t,hC(i)&&o({inst:i})},[e,r,t]),Y4(function(){return hC(i)&&o({inst:i}),e(function(){hC(i)&&o({inst:i})})},[e]),J4(r),r}function hC(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!V4(e,r)}catch{return!0}}function q4(e,t){return t()}var eU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?q4:Q4;Z_.useSyncExternalStore=Ec.useSyncExternalStore!==void 0?Ec.useSyncExternalStore:eU;M_.exports=Z_;var tU=M_.exports;function rU(){return tU.useSyncExternalStore(nU,()=>!0,()=>!1)}function nU(){return()=>{}}var cw="Avatar",[iU]=$4(cw),[oU,H_]=iU(cw),L_=b.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[i,o]=b.useState("idle");return l.jsx(oU,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:l.jsx(Ug.span,{...n,ref:t})})});L_.displayName=cw;var W_="AvatarImage",D_=b.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...o}=e,s=H_(W_,r),a=sU(n,o),c=nr(u=>{i(u),s.onImageLoadingStatusChange(u)});return er(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?l.jsx(Ug.img,{...o,ref:t,src:n}):null});D_.displayName=W_;var $_="AvatarFallback",X_=b.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...i}=e,o=H_($_,r),[s,a]=b.useState(n===void 0);return b.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>a(!0),n);return()=>window.clearTimeout(c)}},[n]),s&&o.imageLoadingStatus!=="loaded"?l.jsx(Ug.span,{...i,ref:t}):null});X_.displayName=$_;function UB(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function sU(e,{referrerPolicy:t,crossOrigin:r}){const n=rU(),i=b.useRef(null),o=n?(i.current||(i.current=new window.Image),i.current):null,[s,a]=b.useState(()=>UB(o,e));return er(()=>{a(UB(o,e))},[o,e]),er(()=>{const c=g=>()=>{a(g)};if(!o)return;const u=c("loaded"),d=c("error");return o.addEventListener("load",u),o.addEventListener("error",d),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",u),o.removeEventListener("error",d)}},[o,r,t]),s}var F_=L_,K_=D_,V_=X_;const uw=b.forwardRef(({className:e,...t},r)=>l.jsx(F_,{ref:r,className:de("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));uw.displayName=F_.displayName;const dw=b.forwardRef(({className:e,...t},r)=>l.jsx(K_,{ref:r,className:de("aspect-square h-full w-full",e),...t}));dw.displayName=K_.displayName;const gw=b.forwardRef(({className:e,...t},r)=>l.jsx(V_,{ref:r,className:de("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));gw.displayName=V_.displayName;const aU=Xg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ot({className:e,variant:t,...r}){return l.jsx("div",{className:de(aU({variant:t}),e),...r})}const V0=()=>[{id:"binance",name:"Binance",has:{}},{id:"bybit",name:"Bybit",has:{}},{id:"okx",name:"OKX",has:{}},{id:"kucoin",name:"KuCoin",has:{}},{id:"coinbase",name:"Coinbase Pro",has:{}},{id:"huobi",name:"Huobi",has:{}},{id:"kraken",name:"Kraken",has:{}},{id:"bitfinex",name:"Bitfinex",has:{}},{id:"gateio",name:"Gate.io",has:{}},{id:"mexc",name:"MEXC",has:{}},{id:"bitget",name:"Bitget",has:{}}],lU=()=>new Promise(e=>{try{const t=[];if(!(window!=null&&window.ccxt)){console.warn(" CCXT not loaded via CDN, using fallback list"),e(V0());return}let r=[];Array.isArray(window.ccxt.exchanges)?(r=window.ccxt.exchanges,console.log(" window.ccxt.exchanges is array")):window.ccxt.exchanges&&typeof window.ccxt.exchanges=="object"?(r=Object.keys(window.ccxt.exchanges),console.log(" window.ccxt.exchanges is object, using keys")):(r=Object.keys(window.ccxt).filter(i=>typeof window.ccxt[i]=="function"&&i!=="Exchange"&&i!=="version"&&i!=="default"&&!i.startsWith("_")&&i.length>2),console.log(" Using fallback: scanning ccxt object keys")),console.log(` Found ${r.length} exchange classes in CCXT:`,r);for(const i of r)try{const o=window.ccxt[i];if(o&&typeof o=="function"){const s=new o;t.push({id:i,name:s.name||i,has:s.has})}}catch{t.push({id:i,name:i.charAt(0).toUpperCase()+i.slice(1),has:{}})}const n=t.sort((i,o)=>i.name.localeCompare(o.name));console.log(` Successfully loaded ${n.length} exchanges from CCXT`),e(n)}catch(t){console.error(" Safe error handling for CCXT exchanges loading:",t),e(V0())}}),z_=()=>{const[e,t]=b.useState([]),[r,n]=b.useState(!0),[i,o]=b.useState(null);return b.useEffect(()=>{(async()=>{n(!0),o(null);try{const a=await lU();t(a),console.log(` useExchangesList: Successfully loaded ${a.length} exchanges`)}catch(a){console.error(" useExchangesList: Error loading exchanges:",a),o(a instanceof Error?a.message:"Failed to load exchanges"),t(V0())}finally{n(!1)}})()},[]),{exchanges:e,loading:r,error:i,getExchangeById:s=>e.find(a=>a.id===s),getSelectOptions:()=>e.map(s=>({value:s.id,label:s.name}))}};var pC="focusScope.autoFocusOnMount",mC="focusScope.autoFocusOnUnmount",JB={bubbles:!1,cancelable:!0},cU="FocusScope",fw=b.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,c]=b.useState(null),u=nr(i),d=nr(o),g=b.useRef(null),f=Ye(t,p=>c(p)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(n){let p=function(C){if(m.paused||!a)return;const x=C.target;a.contains(x)?g.current=x:ms(g.current,{select:!0})},I=function(C){if(m.paused||!a)return;const x=C.relatedTarget;x!==null&&(a.contains(x)||ms(g.current,{select:!0}))},h=function(C){if(document.activeElement===document.body)for(const A of C)A.removedNodes.length>0&&ms(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",I);const y=new MutationObserver(h);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",I),y.disconnect()}}},[n,a,m.paused]),b.useEffect(()=>{if(a){qB.add(m);const p=document.activeElement;if(!a.contains(p)){const h=new CustomEvent(pC,JB);a.addEventListener(pC,u),a.dispatchEvent(h),h.defaultPrevented||(uU(pU(Y_(a)),{select:!0}),document.activeElement===p&&ms(a))}return()=>{a.removeEventListener(pC,u),setTimeout(()=>{const h=new CustomEvent(mC,JB);a.addEventListener(mC,d),a.dispatchEvent(h),h.defaultPrevented||ms(p??document.body,{select:!0}),a.removeEventListener(mC,d),qB.remove(m)},0)}}},[a,u,d,m]);const v=b.useCallback(p=>{if(!r&&!n||m.paused)return;const I=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,h=document.activeElement;if(I&&h){const y=p.currentTarget,[C,x]=dU(y);C&&x?!p.shiftKey&&h===x?(p.preventDefault(),r&&ms(C,{select:!0})):p.shiftKey&&h===C&&(p.preventDefault(),r&&ms(x,{select:!0})):h===y&&p.preventDefault()}},[r,n,m.paused]);return l.jsx(Te.div,{tabIndex:-1,...s,ref:f,onKeyDown:v})});fw.displayName=cU;function uU(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ms(n,{select:t}),document.activeElement!==r)return}function dU(e){const t=Y_(e),r=QB(t,e),n=QB(t.reverse(),e);return[r,n]}function Y_(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function QB(e,t){for(const r of e)if(!gU(r,{upTo:t}))return r}function gU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function fU(e){return e instanceof HTMLInputElement&&"select"in e}function ms(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&fU(e)&&t&&e.select()}}var qB=hU();function hU(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=eN(e,t),e.unshift(t)},remove(t){var r;e=eN(e,t),(r=e[0])==null||r.resume()}}}function eN(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function pU(e){return e.filter(t=>t.tagName!=="A")}var IC=0;function U_(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??tN()),document.body.insertAdjacentElement("beforeend",e[1]??tN()),IC++,()=>{IC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),IC--}},[])}function tN(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Qi=function(){return Qi=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Qi.apply(this,arguments)};function J_(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function mU(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var Nh="right-scroll-bar-position",jh="width-before-scroll-bar",IU="with-scroll-bars-hidden",yU="--removed-body-scroll-bar-size";function yC(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function CU(e,t){var r=b.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var vU=typeof window<"u"?b.useLayoutEffect:b.useEffect,rN=new WeakMap;function bU(e,t){var r=CU(null,function(n){return e.forEach(function(i){return yC(i,n)})});return vU(function(){var n=rN.get(r);if(n){var i=new Set(n),o=new Set(e),s=r.current;i.forEach(function(a){o.has(a)||yC(a,null)}),o.forEach(function(a){i.has(a)||yC(a,s)})}rN.set(r,e)},[e]),r}function xU(e){return e}function AU(e,t){t===void 0&&(t=xU);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var s=t(o,n);return r.push(s),function(){r=r.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(n=!0;r.length;){var s=r;r=[],s.forEach(o)}r={push:function(a){return o(a)},filter:function(){return r}}},assignMedium:function(o){n=!0;var s=[];if(r.length){var a=r;r=[],a.forEach(o),s=r}var c=function(){var d=s;s=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),r}}}};return i}function wU(e){e===void 0&&(e={});var t=AU(null);return t.options=Qi({async:!0,ssr:!1},e),t}var Q_=function(e){var t=e.sideCar,r=J_(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return b.createElement(n,Qi({},r))};Q_.isSideCarExport=!0;function SU(e,t){return e.useMedium(t),Q_}var q_=wU(),CC=function(){},hI=b.forwardRef(function(e,t){var r=b.useRef(null),n=b.useState({onScrollCapture:CC,onWheelCapture:CC,onTouchMoveCapture:CC}),i=n[0],o=n[1],s=e.forwardProps,a=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,g=e.shards,f=e.sideCar,m=e.noRelative,v=e.noIsolation,p=e.inert,I=e.allowPinchZoom,h=e.as,y=h===void 0?"div":h,C=e.gapMode,x=J_(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=f,w=bU([r,t]),S=Qi(Qi({},x),i);return b.createElement(b.Fragment,null,d&&b.createElement(A,{sideCar:q_,removeScrollBar:u,shards:g,noRelative:m,noIsolation:v,inert:p,setCallbacks:o,allowPinchZoom:!!I,lockRef:r,gapMode:C}),s?b.cloneElement(b.Children.only(a),Qi(Qi({},S),{ref:w})):b.createElement(y,Qi({},S,{className:c,ref:w}),a))});hI.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hI.classNames={fullWidth:jh,zeroRight:Nh};var kU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function BU(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kU();return t&&e.setAttribute("nonce",t),e}function NU(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function jU(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var TU=function(){var e=0,t=null;return{add:function(r){e==0&&(t=BU())&&(NU(t,r),jU(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},EU=function(){var e=TU();return function(t,r){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},eM=function(){var e=EU(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},RU={left:0,top:0,right:0,gap:0},vC=function(e){return parseInt(e||"",10)||0},OU=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[vC(r),vC(n),vC(i)]},GU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return RU;var t=OU(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},PU=eM(),nc="data-scroll-locked",_U=function(e,t,r,n){var i=e.left,o=e.top,s=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(IU,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(nc,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Nh,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(jh,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Nh," .").concat(Nh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(jh," .").concat(jh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(nc,`] {
    `).concat(yU,": ").concat(a,`px;
  }
`)},nN=function(){var e=parseInt(document.body.getAttribute(nc)||"0",10);return isFinite(e)?e:0},MU=function(){b.useEffect(function(){return document.body.setAttribute(nc,(nN()+1).toString()),function(){var e=nN()-1;e<=0?document.body.removeAttribute(nc):document.body.setAttribute(nc,e.toString())}},[])},ZU=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;MU();var o=b.useMemo(function(){return GU(i)},[i]);return b.createElement(PU,{styles:_U(o,!t,i,r?"":"!important")})},z0=!1;if(typeof window<"u")try{var Df=Object.defineProperty({},"passive",{get:function(){return z0=!0,!0}});window.addEventListener("test",Df,Df),window.removeEventListener("test",Df,Df)}catch{z0=!1}var yl=z0?{passive:!1}:!1,HU=function(e){return e.tagName==="TEXTAREA"},tM=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!HU(e)&&r[t]==="visible")},LU=function(e){return tM(e,"overflowY")},WU=function(e){return tM(e,"overflowX")},iN=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=rM(e,n);if(i){var o=nM(e,n),s=o[1],a=o[2];if(s>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},DU=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},$U=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},rM=function(e,t){return e==="v"?LU(t):WU(t)},nM=function(e,t){return e==="v"?DU(t):$U(t)},XU=function(e,t){return e==="h"&&t==="rtl"?-1:1},FU=function(e,t,r,n,i){var o=XU(e,window.getComputedStyle(t).direction),s=o*n,a=r.target,c=t.contains(a),u=!1,d=s>0,g=0,f=0;do{if(!a)break;var m=nM(e,a),v=m[0],p=m[1],I=m[2],h=p-I-o*v;(v||h)&&rM(e,a)&&(g+=h,f+=v);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(d&&Math.abs(g)<1||!d&&Math.abs(f)<1)&&(u=!0),u},$f=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},oN=function(e){return[e.deltaX,e.deltaY]},sN=function(e){return e&&"current"in e?e.current:e},KU=function(e,t){return e[0]===t[0]&&e[1]===t[1]},VU=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},zU=0,Cl=[];function YU(e){var t=b.useRef([]),r=b.useRef([0,0]),n=b.useRef(),i=b.useState(zU++)[0],o=b.useState(eM)[0],s=b.useRef(e);b.useEffect(function(){s.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=mU([e.lockRef.current],(e.shards||[]).map(sN),!0).filter(Boolean);return p.forEach(function(I){return I.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=b.useCallback(function(p,I){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!s.current.allowPinchZoom;var h=$f(p),y=r.current,C="deltaX"in p?p.deltaX:y[0]-h[0],x="deltaY"in p?p.deltaY:y[1]-h[1],A,w=p.target,S=Math.abs(C)>Math.abs(x)?"h":"v";if("touches"in p&&S==="h"&&w.type==="range")return!1;var k=window.getSelection(),R=k&&k.anchorNode,j=R?R===w||R.contains(w):!1;if(j)return!1;var _=iN(S,w);if(!_)return!0;if(_?A=S:(A=S==="v"?"h":"v",_=iN(S,w)),!_)return!1;if(!n.current&&"changedTouches"in p&&(C||x)&&(n.current=A),!A)return!0;var O=n.current||A;return FU(O,I,p,O==="h"?C:x)},[]),c=b.useCallback(function(p){var I=p;if(!(!Cl.length||Cl[Cl.length-1]!==o)){var h="deltaY"in I?oN(I):$f(I),y=t.current.filter(function(A){return A.name===I.type&&(A.target===I.target||I.target===A.shadowParent)&&KU(A.delta,h)})[0];if(y&&y.should){I.cancelable&&I.preventDefault();return}if(!y){var C=(s.current.shards||[]).map(sN).filter(Boolean).filter(function(A){return A.contains(I.target)}),x=C.length>0?a(I,C[0]):!s.current.noIsolation;x&&I.cancelable&&I.preventDefault()}}},[]),u=b.useCallback(function(p,I,h,y){var C={name:p,delta:I,target:h,should:y,shadowParent:UU(h)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(x){return x!==C})},1)},[]),d=b.useCallback(function(p){r.current=$f(p),n.current=void 0},[]),g=b.useCallback(function(p){u(p.type,oN(p),p.target,a(p,e.lockRef.current))},[]),f=b.useCallback(function(p){u(p.type,$f(p),p.target,a(p,e.lockRef.current))},[]);b.useEffect(function(){return Cl.push(o),e.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:f}),document.addEventListener("wheel",c,yl),document.addEventListener("touchmove",c,yl),document.addEventListener("touchstart",d,yl),function(){Cl=Cl.filter(function(p){return p!==o}),document.removeEventListener("wheel",c,yl),document.removeEventListener("touchmove",c,yl),document.removeEventListener("touchstart",d,yl)}},[]);var m=e.removeScrollBar,v=e.inert;return b.createElement(b.Fragment,null,v?b.createElement(o,{styles:VU(i)}):null,m?b.createElement(ZU,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function UU(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const JU=SU(q_,YU);var hw=b.forwardRef(function(e,t){return b.createElement(hI,Qi({},e,{ref:t,sideCar:JU}))});hw.classNames=hI.classNames;var QU=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},vl=new WeakMap,Xf=new WeakMap,Ff={},bC=0,iM=function(e){return e&&(e.host||iM(e.parentNode))},qU=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=iM(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},e7=function(e,t,r,n){var i=qU(t,Array.isArray(e)?e:[e]);Ff[r]||(Ff[r]=new WeakMap);var o=Ff[r],s=[],a=new Set,c=new Set(i),u=function(g){!g||a.has(g)||(a.add(g),u(g.parentNode))};i.forEach(u);var d=function(g){!g||c.has(g)||Array.prototype.forEach.call(g.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(n),v=m!==null&&m!=="false",p=(vl.get(f)||0)+1,I=(o.get(f)||0)+1;vl.set(f,p),o.set(f,I),s.push(f),p===1&&v&&Xf.set(f,!0),I===1&&f.setAttribute(r,"true"),v||f.setAttribute(n,"true")}catch(h){console.error("aria-hidden: cannot operate on ",f,h)}})};return d(t),a.clear(),bC++,function(){s.forEach(function(g){var f=vl.get(g)-1,m=o.get(g)-1;vl.set(g,f),o.set(g,m),f||(Xf.has(g)||g.removeAttribute(n),Xf.delete(g)),m||g.removeAttribute(r)}),bC--,bC||(vl=new WeakMap,vl=new WeakMap,Xf=new WeakMap,Ff={})}},oM=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=QU(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),e7(n,i,r,"aria-hidden")):function(){return null}},pI="Dialog",[sM]=Wi(pI),[t7,Di]=sM(pI),aM=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,a=b.useRef(null),c=b.useRef(null),[u,d]=Ys({prop:n,defaultProp:i??!1,onChange:o,caller:pI});return l.jsx(t7,{scope:t,triggerRef:a,contentRef:c,contentId:$s(),titleId:$s(),descriptionId:$s(),open:u,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(g=>!g),[d]),modal:s,children:r})};aM.displayName=pI;var lM="DialogTrigger",r7=b.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Di(lM,r),o=Ye(t,i.triggerRef);return l.jsx(Te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Iw(i.open),...n,ref:o,onClick:we(e.onClick,i.onOpenToggle)})});r7.displayName=lM;var pw="DialogPortal",[n7,cM]=sM(pw,{forceMount:void 0}),uM=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,o=Di(pw,t);return l.jsx(n7,{scope:t,forceMount:r,children:b.Children.map(n,s=>l.jsx(ci,{present:r||o.open,children:l.jsx(Fm,{asChild:!0,container:i,children:s})}))})};uM.displayName=pw;var kp="DialogOverlay",dM=b.forwardRef((e,t)=>{const r=cM(kp,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=Di(kp,e.__scopeDialog);return o.modal?l.jsx(ci,{present:n||o.open,children:l.jsx(o7,{...i,ref:t})}):null});dM.displayName=kp;var i7=Gd("DialogOverlay.RemoveScroll"),o7=b.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Di(kp,r);return l.jsx(hw,{as:i7,allowPinchZoom:!0,shards:[i.contentRef],children:l.jsx(Te.div,{"data-state":Iw(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),rl="DialogContent",gM=b.forwardRef((e,t)=>{const r=cM(rl,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=Di(rl,e.__scopeDialog);return l.jsx(ci,{present:n||o.open,children:o.modal?l.jsx(s7,{...i,ref:t}):l.jsx(a7,{...i,ref:t})})});gM.displayName=rl;var s7=b.forwardRef((e,t)=>{const r=Di(rl,e.__scopeDialog),n=b.useRef(null),i=Ye(t,r.contentRef,n);return b.useEffect(()=>{const o=n.current;if(o)return oM(o)},[]),l.jsx(fM,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=r.triggerRef.current)==null||s.focus()}),onPointerDownOutside:we(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:we(e.onFocusOutside,o=>o.preventDefault())})}),a7=b.forwardRef((e,t)=>{const r=Di(rl,e.__scopeDialog),n=b.useRef(!1),i=b.useRef(!1);return l.jsx(fM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=e.onCloseAutoFocus)==null||s.call(e,o),o.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),o.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),fM=b.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=e,a=Di(rl,r),c=b.useRef(null),u=Ye(t,c);return U_(),l.jsxs(l.Fragment,{children:[l.jsx(fw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o,children:l.jsx(Dg,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Iw(a.open),...s,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(l7,{titleId:a.titleId}),l.jsx(u7,{contentRef:c,descriptionId:a.descriptionId})]})]})}),mw="DialogTitle",hM=b.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Di(mw,r);return l.jsx(Te.h2,{id:i.titleId,...n,ref:t})});hM.displayName=mw;var pM="DialogDescription",mM=b.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Di(pM,r);return l.jsx(Te.p,{id:i.descriptionId,...n,ref:t})});mM.displayName=pM;var IM="DialogClose",yM=b.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Di(IM,r);return l.jsx(Te.button,{type:"button",...n,ref:t,onClick:we(e.onClick,()=>i.onOpenChange(!1))})});yM.displayName=IM;function Iw(e){return e?"open":"closed"}var CM="DialogTitleWarning",[WBe,vM]=QX(CM,{contentName:rl,titleName:mw,docsSlug:"dialog"}),l7=({titleId:e})=>{const t=vM(CM),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return b.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},c7="DialogDescriptionWarning",u7=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vM(c7).contentName}}.`;return b.useEffect(()=>{var o;const i=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},yw=aM,Cw=uM,Jg=dM,Qg=gM,qg=hM,ef=mM,mI=yM;const Bp=yw,aN=mI,d7=Cw,bM=b.forwardRef(({className:e,...t},r)=>l.jsx(Jg,{className:de("fixed inset-0 z-[10001] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));bM.displayName=Jg.displayName;const g7=Xg("fixed z-[10002] gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ud=b.forwardRef(({side:e="right",className:t,children:r,...n},i)=>l.jsxs(d7,{children:[l.jsx(bM,{}),l.jsxs(Qg,{ref:i,className:de(g7({side:e}),t),...n,children:[r,l.jsxs(mI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[l.jsx(Cr,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ud.displayName=Qg.displayName;const Jd=({className:e,...t})=>l.jsx("div",{className:de("flex flex-col space-y-2 text-center sm:text-left",e),...t});Jd.displayName="SheetHeader";const Y0=({className:e,...t})=>l.jsx("div",{className:de("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Y0.displayName="SheetFooter";const Qd=b.forwardRef(({className:e,...t},r)=>l.jsx(qg,{ref:r,className:de("text-lg font-semibold text-foreground",e),...t}));Qd.displayName=qg.displayName;const U0=b.forwardRef(({className:e,...t},r)=>l.jsx(ef,{ref:r,className:de("text-sm text-muted-foreground",e),...t}));U0.displayName=ef.displayName;const Pe=b.forwardRef(({className:e,type:t,...r},n)=>l.jsx("input",{type:t,className:de("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Pe.displayName="Input";const J0=({value:e,onValueChange:t,options:r,placeholder:n="Select option...",searchPlaceholder:i="Search options...",loading:o=!1,className:s,disabled:a=!1,optionLabels:c={}})=>{const[u,d]=b.useState(!1),[g,f]=b.useState(""),m=b.useRef(null),v=b.useRef(null),p=b.useRef(null),I=b.useMemo(()=>{if(!g.trim())return r;const A=g.toLowerCase();return r.filter(w=>{const S=c[w]||w;return w.toLowerCase().includes(A)||S.toLowerCase().includes(A)})},[r,g,c]),h=I.length>100,y=Hi({count:I.length,getScrollElement:()=>v.current,estimateSize:()=>32,enabled:h});b.useEffect(()=>{const A=w=>{m.current&&!m.current.contains(w.target)&&(d(!1),f(""))};if(u)return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[u]),b.useEffect(()=>{u&&p.current&&p.current.focus()},[u]);const C=A=>{t(A),d(!1),f("")},x=()=>{a||o||(d(!u),u||f(""))};return l.jsxs("div",{ref:m,className:de("relative",s),children:[l.jsxs("button",{type:"button",onClick:x,disabled:a||o,className:de("flex h-8 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",u&&"ring-2 ring-ring ring-offset-2"),children:[l.jsx("span",{className:de("truncate",!e&&"text-muted-foreground"),children:e?c[e]||e:n}),l.jsxs("div",{className:"flex items-center gap-1",children:[o&&l.jsx(Um,{className:"h-4 w-4 animate-spin"}),l.jsx(Vr,{className:de("h-4 w-4 transition-transform",u&&"rotate-180")})]})]}),u&&l.jsxs("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 bg-popover border border-border rounded-md shadow-lg",children:[l.jsx("div",{className:"p-2 border-b border-border",children:l.jsxs("div",{className:"relative",children:[l.jsx(Ja,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx("input",{ref:p,type:"text",value:g,onChange:A=>f(A.target.value),placeholder:i,className:"w-full pl-8 pr-3 py-1.5 text-sm bg-background border border-input rounded focus:outline-none focus:ring-1 focus:ring-ring"})]})}),l.jsx("div",{ref:v,className:"max-h-60 overflow-auto",style:{height:h?"240px":"auto",maxHeight:"240px"},children:I.length===0?l.jsx("div",{className:"p-3 text-sm text-muted-foreground text-center",children:g?"Nothing found":"No options available"}):h?l.jsx("div",{style:{height:y.getTotalSize(),width:"100%",position:"relative"},children:y.getVirtualItems().map(A=>{const w=I[A.index],S=w===e;return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:A.size,transform:`translateY(${A.start}px)`},children:l.jsx("button",{type:"button",onClick:()=>C(w),className:de("w-full px-3 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground","focus:bg-accent focus:text-accent-foreground focus:outline-none",S&&"bg-accent text-accent-foreground font-medium"),children:c[w]||w})},A.key)})}):I.map(A=>{const w=A===e;return l.jsx("button",{type:"button",onClick:()=>C(A),className:de("w-full px-3 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground","focus:bg-accent focus:text-accent-foreground focus:outline-none",w&&"bg-accent text-accent-foreground font-medium"),children:c[A]||A},A)})}),I.length>0&&l.jsx("div",{className:"px-3 py-1.5 border-t border-border text-xs text-muted-foreground",children:g?`Found: ${I.length} of ${r.length}`:`Total: ${r.length} options`})]})]})},f7=({open:e,onOpenChange:t})=>{const r=ct(m=>m.users),n=ct(m=>m.activeUserId);ct(m=>m.addUser),ct(m=>m.removeUser);const i=ct(m=>m.setActiveUser),[o,s]=b.useState(!1),[a,c]=b.useState(null),[u,d]=b.useState(null),[g,f]=b.useState(null);return r.length===0?l.jsxs(Bp,{open:e,onOpenChange:t,children:[l.jsxs(Ud,{side:"right",className:"w-[400px] bg-terminal-widget border-l border-terminal-border flex flex-col",children:[l.jsxs(Jd,{children:[l.jsx(Qd,{children:"Users"}),l.jsx(U0,{children:"Manage users and accounts"})]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[l.jsx("div",{className:"rounded-full bg-terminal-accent/40 w-20 h-20 flex items-center justify-center",children:l.jsxs("svg",{width:"48",height:"48",fill:"none",stroke:"#A0AEC0",strokeWidth:"2",viewBox:"0 0 24 24",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),l.jsx("div",{className:"text-lg font-semibold",children:"No users"}),l.jsx("div",{className:"text-terminal-muted text-center",children:"Start by adding users to manage their exchange accounts"}),l.jsxs(ie,{onClick:()=>s(!0),className:"w-full max-w-xs",variant:"outline",children:[l.jsx(Us,{className:"mr-2",size:16})," Add first user"]})]}),l.jsx(Y0,{children:l.jsx(aN,{asChild:!0,children:l.jsx(ie,{variant:"outline",children:"Cancel"})})})]}),o&&l.jsx(xC,{onClose:()=>s(!1)})]}):l.jsxs(Bp,{open:e,onOpenChange:t,children:[l.jsxs(Ud,{side:"right",className:"w-[400px] bg-terminal-widget border-l border-terminal-border flex flex-col",children:[l.jsxs(Jd,{children:[l.jsx(Qd,{children:"Users"}),l.jsx(U0,{children:"Manage users and accounts"})]}),l.jsxs("div",{className:"flex flex-col gap-4 px-4 py-2 flex-1 overflow-auto",children:[l.jsx("div",{className:"flex flex-col gap-2",children:r.map(m=>l.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg border border-terminal-border/50 ${m.id===n?"bg-terminal-accent/30":""}`,children:[l.jsx(uw,{className:"w-10 h-10",children:m.avatarUrl?l.jsx(dw,{src:m.avatarUrl,alt:m.email}):l.jsx(gw,{children:m.email.slice(0,2).toUpperCase()})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:m.email}),l.jsxs("div",{className:"text-xs text-terminal-muted truncate",children:[m.accounts.length," account(s)"]})]}),l.jsx(ie,{size:"icon",variant:m.id===n?"default":"outline",onClick:()=>i(m.id),title:"Make active",children:m.id===n?l.jsx(Ym,{size:16}):l.jsx("span",{className:"w-4 h-4 rounded-full border border-terminal-border"})}),l.jsx(ie,{size:"icon",variant:"outline",onClick:()=>c(m.id),title:"Edit",children:l.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 11l6 6M3 21h6l11.293-11.293a1 1 0 0 0 0-1.414l-3.586-3.586a1 1 0 0 0-1.414 0L3 15v6z"})})})]},m.id))}),l.jsxs(ie,{onClick:()=>s(!0),className:"w-full",variant:"outline",children:[l.jsx(Us,{className:"mr-2",size:16})," Add user"]}),n&&l.jsx(h7,{user:r.find(m=>m.id===n),onEditAccount:m=>d({userId:n,account:m}),onAddAccount:()=>f(n)})]}),l.jsx(Y0,{children:l.jsx(aN,{asChild:!0,children:l.jsx(ie,{variant:"outline",children:"Cancel"})})})]}),o&&l.jsx(xC,{onClose:()=>s(!1)}),a&&l.jsx(xC,{user:r.find(m=>m.id===a),onClose:()=>c(null)}),u&&l.jsx(lN,{userId:u.userId,account:u.account,onClose:()=>d(null)}),g&&l.jsx(lN,{userId:g,onClose:()=>f(null)})]})},h7=({user:e,onEditAccount:t,onAddAccount:r})=>l.jsxs("div",{className:"mt-4",children:[l.jsx("div",{className:"font-semibold mb-2",children:"Accounts"}),e.accounts.length===0&&l.jsx("div",{className:"text-sm text-terminal-muted mb-2",children:"No accounts"}),e.accounts.map(n=>l.jsxs("div",{className:"flex items-center gap-2 p-1 rounded border border-terminal-border/30 bg-terminal-accent/10 mb-1",children:[l.jsx("span",{className:"text-xs font-mono px-1 py-0.5 rounded bg-terminal-widget/80 border border-terminal-border/30",children:n.exchange}),l.jsx("span",{className:"truncate text-xs",children:n.email}),l.jsx(ie,{size:"icon",variant:"outline",onClick:()=>t(n),title:"Edit account",children:l.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 11l6 6M3 21h6l11.293-11.293a1 1 0 0 0 0-1.414l-3.586-3.586a1 1 0 0 0-1.414 0L3 15v6z"})})})]},n.id)),l.jsxs(ie,{onClick:r,className:"w-full mt-2",variant:"outline",children:[l.jsx(Us,{className:"mr-2",size:16})," Add account"]})]}),xC=({user:e,onClose:t})=>{const r=ct(A=>A.addUser),n=ct(A=>A.updateUser),i=ct(A=>A.removeUser),o=ct(A=>A.users),[s,a]=b.useState((e==null?void 0:e.email)||""),[c,u]=b.useState((e==null?void 0:e.name)||""),[d,g]=b.useState((e==null?void 0:e.avatarUrl)||""),[f,m]=b.useState((e==null?void 0:e.notes)||""),[v,p]=b.useState(""),[I,h]=b.useState(!1);function y(A){return/^\S+@\S+\.\S+$/.test(A)}const C=()=>{if(!s.trim()){p("Email is required");return}if(!y(s.trim())){p("Enter a valid email");return}if(!e&&o.some(A=>A.email===s.trim())){p("A user with this email already exists");return}e?n(e.id,{email:s.trim(),name:c.trim(),avatarUrl:d.trim()||void 0,notes:f.trim()}):r({email:s.trim(),name:c.trim(),avatarUrl:d.trim()||void 0,notes:f.trim()}),t()},x=()=>{if(!I){h(!0);return}e&&i(e.id),t()};return l.jsx(Bp,{open:!0,onOpenChange:t,children:l.jsxs(Ud,{side:"right",className:"w-[400px] bg-terminal-widget border-l border-terminal-border flex flex-col",children:[l.jsx(Jd,{children:l.jsx(Qd,{children:e?"Edit user":"Add user"})}),l.jsxs("form",{className:"flex flex-col gap-3 mt-3 flex-1",onSubmit:A=>{A.preventDefault(),C()},children:[l.jsx(Pe,{type:"email",placeholder:"Email *",value:s,onChange:A=>a(A.target.value),className:"w-full"}),l.jsx(Pe,{placeholder:"Name (optional)",value:c,onChange:A=>u(A.target.value),className:"w-full"}),l.jsx(Pe,{placeholder:"Avatar URL (optional)",value:d,onChange:A=>g(A.target.value),className:"w-full"}),l.jsx("textarea",{placeholder:"Notes (optional)",value:f,onChange:A=>m(A.target.value),className:"w-full min-h-[60px] border rounded px-2 py-1"}),v&&l.jsx("div",{className:"text-red-500 text-xs",children:v}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(ie,{type:"submit",className:"flex-1",children:e?"Save":"Add"}),l.jsx(ie,{type:"button",className:"flex-1",variant:"outline",onClick:t,children:"Cancel"})]}),e&&l.jsx("div",{className:"mt-8 border-t pt-4",children:l.jsx(ie,{type:"button",variant:"destructive",className:"w-full",onClick:x,children:I?"Are you sure you want to delete?":"Delete user"})})]})]})})},lN=({userId:e,account:t,onClose:r})=>{const n=ct(P=>P.addAccount),i=ct(P=>P.updateAccount),o=ct(P=>P.removeAccount),{exchanges:s,loading:a}=z_(),[c,u]=b.useState((t==null?void 0:t.exchange)||""),[d,g]=b.useState((t==null?void 0:t.email)||""),[f,m]=b.useState((t==null?void 0:t.key)||""),[v,p]=b.useState((t==null?void 0:t.privateKey)||""),[I,h]=b.useState((t==null?void 0:t.password)||""),[y,C]=b.useState((t==null?void 0:t.avatarUrl)||""),[x,A]=b.useState((t==null?void 0:t.notes)||""),[w,S]=b.useState(""),[k,R]=b.useState(!1);function j(P){return/^\S+@\S+\.\S+$/.test(P)}const _=()=>{if(!c||!d){S("Exchange and email are required");return}if(!j(d)){S("Enter a valid email");return}t?i(e,{...t,exchange:c,email:d,key:f.trim()||void 0,privateKey:v.trim()||void 0,password:I.trim()||void 0,avatarUrl:y||void 0,notes:x}):n(e,{exchange:c,email:d,key:f.trim()||void 0,privateKey:v.trim()||void 0,password:I.trim()||void 0,avatarUrl:y||void 0,notes:x}),r()},O=()=>{if(t){if(!k){R(!0);return}o(e,t.id),r()}};return l.jsx(Bp,{open:!0,onOpenChange:r,children:l.jsxs(Ud,{side:"right",className:"w-[400px] bg-terminal-widget border-l border-terminal-border flex flex-col",children:[l.jsx(Jd,{children:l.jsx(Qd,{children:t?"Edit account":"Add account"})}),l.jsxs("form",{className:"flex flex-col gap-3 mt-3 flex-1",onSubmit:P=>{P.preventDefault(),_()},children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-medium",children:"Exchange *"}),l.jsx(J0,{value:c,onValueChange:u,options:s.map(P=>P.id),optionLabels:s.reduce((P,N)=>({...P,[N.id]:N.name}),{}),placeholder:a?"Loading exchanges...":"Select exchange",searchPlaceholder:"Search exchanges (e.g., binance, bybit, okx)...",loading:a,disabled:a,className:"w-full"}),a&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(Um,{className:"h-3 w-3 animate-spin"}),"Loading exchanges from CCXT..."]})]}),l.jsx(Pe,{type:"email",placeholder:"Email *",value:d,onChange:P=>g(P.target.value),className:"w-full"}),l.jsx(Pe,{placeholder:"API Key (optional)",value:f,onChange:P=>m(P.target.value),className:"w-full"}),l.jsx(Pe,{placeholder:"Secret (optional)",value:v,onChange:P=>p(P.target.value),className:"w-full"}),l.jsx(Pe,{placeholder:"Password/Passphrase (optional, required for some exchanges like BitGet)",value:I,onChange:P=>h(P.target.value),className:"w-full"}),l.jsx(Pe,{placeholder:"Avatar URL (optional)",value:y,onChange:P=>C(P.target.value),className:"w-full"}),l.jsx("textarea",{placeholder:"Notes (optional)",value:x,onChange:P=>A(P.target.value),className:"w-full min-h-[60px] border rounded px-2 py-1"}),w&&l.jsx("div",{className:"text-red-500 text-xs",children:w}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(ie,{type:"submit",className:"flex-1",children:t?"Save":"Add"}),l.jsx(ie,{type:"button",className:"flex-1",variant:"outline",onClick:r,children:"Cancel"})]}),t&&l.jsx("div",{className:"mt-8 border-t pt-4",children:l.jsx(ie,{type:"button",variant:"destructive",className:"w-full",onClick:O,children:k?"Are you sure you want to delete?":"Delete account"})})]})]})})};function p7(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const xM=H.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),tf=()=>{const e=H.useContext(xM);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};p7(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const m7=24,I7=typeof window<"u"?b.useLayoutEffect:b.useEffect;function cN(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function y7(){return vw(/^Mac/)}function C7(){return vw(/^iPhone/)}function uN(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function v7(){return vw(/^iPad/)||y7()&&navigator.maxTouchPoints>1}function AM(){return C7()||v7()}function vw(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const AC=typeof document<"u"&&window.visualViewport;function dN(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function wM(e){for(dN(e)&&(e=e.parentElement);e&&!dN(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const b7=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Kf=0,wC;function x7(e={}){let{isDisabled:t}=e;I7(()=>{if(!t)return Kf++,Kf===1&&AM()&&(wC=A7()),()=>{Kf--,Kf===0&&(wC==null||wC())}},[t])}function A7(){let e,t=0,r=g=>{e=wM(g.target),!(e===document.documentElement&&e===document.body)&&(t=g.changedTouches[0].pageY)},n=g=>{if(!e||e===document.documentElement||e===document.body){g.preventDefault();return}let f=g.changedTouches[0].pageY,m=e.scrollTop,v=e.scrollHeight-e.clientHeight;v!==0&&((m<=0&&f>t||m>=v&&f<t)&&g.preventDefault(),t=f)},i=g=>{let f=g.target;Q0(f)&&f!==document.activeElement&&(g.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},o=g=>{let f=g.target;Q0(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",AC&&(AC.height<window.innerHeight?requestAnimationFrame(()=>{gN(f)}):AC.addEventListener("resize",()=>gN(f),{once:!0}))}))},s=()=>{window.scrollTo(0,0)},a=window.pageXOffset,c=window.pageYOffset,u=cN(w7(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=cN(Ou(document,"touchstart",r,{passive:!1,capture:!0}),Ou(document,"touchmove",n,{passive:!1,capture:!0}),Ou(document,"touchend",i,{passive:!1,capture:!0}),Ou(document,"focus",o,!0),Ou(window,"scroll",s));return()=>{u(),d(),window.scrollTo(a,c)}}function w7(e,t,r){let n=e.style[t];return e.style[t]=r,()=>{e.style[t]=n}}function Ou(e,t,r,n){return e.addEventListener(t,r,n),()=>{e.removeEventListener(t,r,n)}}function gN(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let r=wM(e);if(r!==document.documentElement&&r!==document.body&&r!==e){let n=r.getBoundingClientRect().top,i=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const s=r.getBoundingClientRect().bottom+m7;o>s&&(r.scrollTop+=i-n)}e=r.parentElement}}function Q0(e){return e instanceof HTMLInputElement&&!b7.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function S7(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function k7(...e){return t=>e.forEach(r=>S7(r,t))}function SM(...e){return b.useCallback(k7(...e),e)}const kM=new WeakMap;function sr(e,t,r=!1){if(!e||!(e instanceof HTMLElement))return;let n={};Object.entries(t).forEach(([i,o])=>{if(i.startsWith("--")){e.style.setProperty(i,o);return}n[i]=e.style[i],e.style[i]=o}),!r&&kM.set(e,n)}function B7(e,t){if(!e||!(e instanceof HTMLElement))return;let r=kM.get(e);r&&(e.style[t]=r[t])}const ar=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Vf(e,t){if(!e)return null;const r=window.getComputedStyle(e),n=r.transform||r.webkitTransform||r.mozTransform;let i=n.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[ar(t)?13:12]):(i=n.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[ar(t)?5:4]):null)}function N7(e){return 8*(Math.log(e+1)-2)}function SC(e,t){if(!e)return()=>{};const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}function j7(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}const Dt={DURATION:.5,EASE:[.32,.72,0,1]},BM=.4,T7=.25,E7=100,NM=8,pa=16,q0=26,kC="vaul-dragging";function jM(e){const t=H.useRef(e);return H.useEffect(()=>{t.current=e}),H.useMemo(()=>(...r)=>t.current==null?void 0:t.current.call(t,...r),[])}function R7({defaultProp:e,onChange:t}){const r=H.useState(e),[n]=r,i=H.useRef(n),o=jM(t);return H.useEffect(()=>{i.current!==n&&(o(n),i.current=n)},[n,i,o]),r}function TM({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,i]=R7({defaultProp:t,onChange:r}),o=e!==void 0,s=o?e:n,a=jM(r),c=H.useCallback(u=>{if(o){const g=typeof u=="function"?u(e):u;g!==e&&a(g)}else i(u)},[o,e,i,a]);return[s,c]}function O7({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:r,drawerRef:n,overlayRef:i,fadeFromIndex:o,onSnapPointChange:s,direction:a="bottom",container:c,snapToSequentialPoint:u}){const[d,g]=TM({prop:e,defaultProp:r==null?void 0:r[0],onChange:t}),[f,m]=H.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);H.useEffect(()=>{function S(){m({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const v=H.useMemo(()=>d===(r==null?void 0:r[r.length-1])||null,[r,d]),p=H.useMemo(()=>r==null?void 0:r.findIndex(S=>S===d),[r,d]),I=r&&r.length>0&&(o||o===0)&&!Number.isNaN(o)&&r[o]===d||!r,h=H.useMemo(()=>{const S=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var k;return(k=r==null?void 0:r.map(R=>{const j=typeof R=="string";let _=0;if(j&&(_=parseInt(R,10)),ar(a)){const P=j?_:f?R*S.height:0;return f?a==="bottom"?S.height-P:-S.height+P:P}const O=j?_:f?R*S.width:0;return f?a==="right"?S.width-O:-S.width+O:O}))!=null?k:[]},[r,f,c]),y=H.useMemo(()=>p!==null?h==null?void 0:h[p]:null,[h,p]),C=H.useCallback(S=>{var k;const R=(k=h==null?void 0:h.findIndex(j=>j===S))!=null?k:null;s(R),sr(n.current,{transition:`transform ${Dt.DURATION}s cubic-bezier(${Dt.EASE.join(",")})`,transform:ar(a)?`translate3d(0, ${S}px, 0)`:`translate3d(${S}px, 0, 0)`}),h&&R!==h.length-1&&R!==o&&R<o?sr(i.current,{transition:`opacity ${Dt.DURATION}s cubic-bezier(${Dt.EASE.join(",")})`,opacity:"0"}):sr(i.current,{transition:`opacity ${Dt.DURATION}s cubic-bezier(${Dt.EASE.join(",")})`,opacity:"1"}),g(r==null?void 0:r[Math.max(R,0)])},[n.current,r,h,o,i,g]);H.useEffect(()=>{if(d||e){var S;const k=(S=r==null?void 0:r.findIndex(R=>R===e||R===d))!=null?S:-1;h&&k!==-1&&typeof h[k]=="number"&&C(h[k])}},[d,e,r,h,C]);function x({draggedDistance:S,closeDrawer:k,velocity:R,dismissible:j}){if(o===void 0)return;const _=a==="bottom"||a==="right"?(y??0)-S:(y??0)+S,O=p===o-1,P=p===0,N=S>0;if(O&&sr(i.current,{transition:`opacity ${Dt.DURATION}s cubic-bezier(${Dt.EASE.join(",")})`}),!u&&R>2&&!N){j?k():C(h[0]);return}if(!u&&R>2&&N&&h&&r){C(h[r.length-1]);return}const B=h==null?void 0:h.reduce((M,G)=>typeof M!="number"||typeof G!="number"?M:Math.abs(G-_)<Math.abs(M-_)?G:M),E=ar(a)?window.innerHeight:window.innerWidth;if(R>BM&&Math.abs(S)<E*.4){const M=N?1:-1;if(M>0&&v){C(h[r.length-1]);return}if(P&&M<0&&j&&k(),p===null)return;C(h[p+M]);return}C(B)}function A({draggedDistance:S}){if(y===null)return;const k=a==="bottom"||a==="right"?y-S:y+S;(a==="bottom"||a==="right")&&k<h[h.length-1]||(a==="top"||a==="left")&&k>h[h.length-1]||sr(n.current,{transform:ar(a)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`})}function w(S,k){if(!r||typeof p!="number"||!h||o===void 0)return null;const R=p===o-1;if(p>=o&&k)return 0;if(R&&!k)return 1;if(!I&&!R)return null;const _=R?p+1:p-1,O=R?h[_]-h[_-1]:h[_+1]-h[_],P=S/Math.abs(O);return R?1-P:P}return{isLastSnapPoint:v,activeSnapPoint:d,shouldFade:I,getPercentageDragged:w,setActiveSnapPoint:g,activeSnapPointIndex:p,onRelease:x,onDrag:A,snapPointsOffset:h}}const G7=()=>()=>{};function P7(){const{direction:e,isOpen:t,shouldScaleBackground:r,setBackgroundColorOnScale:n,noBodyStyles:i}=tf(),o=H.useRef(null),s=b.useMemo(()=>document.body.style.backgroundColor,[]);function a(){return(window.innerWidth-q0)/window.innerWidth}H.useEffect(()=>{if(t&&r){o.current&&clearTimeout(o.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;j7(n&&!i?SC(document.body,{background:"black"}):G7,SC(c,{transformOrigin:ar(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Dt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Dt.EASE.join(",")})`}));const u=SC(c,{borderRadius:`${NM}px`,overflow:"hidden",...ar(e)?{transform:`scale(${a()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${a()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),o.current=window.setTimeout(()=>{s?document.body.style.background=s:document.body.style.removeProperty("background")},Dt.DURATION*1e3)}}},[t,r,s])}let Gu=null;function _7({isOpen:e,modal:t,nested:r,hasBeenOpened:n,preventScrollRestoration:i,noBodyStyles:o}){const[s,a]=H.useState(()=>typeof window<"u"?window.location.href:""),c=H.useRef(0),u=H.useCallback(()=>{if(uN()&&Gu===null&&e&&!o){Gu={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:g,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-g}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const m=f-window.innerHeight;m&&c.current>=f&&(document.body.style.top=`${-(c.current+m)}px`)}),300)}},[e]),d=H.useCallback(()=>{if(uN()&&Gu!==null&&!o){const g=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Gu),window.requestAnimationFrame(()=>{if(i&&s!==window.location.href){a(window.location.href);return}window.scrollTo(f,g)}),Gu=null}},[s]);return H.useEffect(()=>{function g(){c.current=window.scrollY}return g(),window.addEventListener("scroll",g),()=>{window.removeEventListener("scroll",g)}},[]),H.useEffect(()=>{r||!n||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{d()},500)):d())},[e,n,s,t,r,u,d]),{restorePositionSetting:d}}function M7({open:e,onOpenChange:t,children:r,onDrag:n,onRelease:i,snapPoints:o,shouldScaleBackground:s=!1,setBackgroundColorOnScale:a=!0,closeThreshold:c=T7,scrollLockTimeout:u=E7,dismissible:d=!0,handleOnly:g=!1,fadeFromIndex:f=o&&o.length-1,activeSnapPoint:m,setActiveSnapPoint:v,fixed:p,modal:I=!0,onClose:h,nested:y,noBodyStyles:C,direction:x="bottom",defaultOpen:A=!1,disablePreventScroll:w=!0,snapToSequentialPoint:S=!1,preventScrollRestoration:k=!1,repositionInputs:R=!0,onAnimationEnd:j,container:_,autoFocus:O=!1}){var P,N;const[B=!1,E]=TM({defaultProp:A,prop:e,onChange:Y=>{t==null||t(Y),!Y&&!y&&vt(),setTimeout(()=>{j==null||j(Y)},Dt.DURATION*1e3),Y&&!I&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),Y||(document.body.style.pointerEvents="auto")}}),[M,G]=H.useState(!1),[T,L]=H.useState(!1),[W,X]=H.useState(!1),V=H.useRef(null),z=H.useRef(null),ee=H.useRef(null),D=H.useRef(null),F=H.useRef(null),Z=H.useRef(!1),$=H.useRef(null),J=H.useRef(0),U=H.useRef(!1),K=H.useRef(0),re=H.useRef(null),ce=H.useRef(((P=re.current)==null?void 0:P.getBoundingClientRect().height)||0),Me=H.useRef(((N=re.current)==null?void 0:N.getBoundingClientRect().width)||0),Ee=H.useRef(0),Ke=H.useCallback(Y=>{o&&Y===se.length-1&&(z.current=new Date)},[]),{activeSnapPoint:Nt,activeSnapPointIndex:te,setActiveSnapPoint:he,onRelease:Ze,snapPointsOffset:se,onDrag:ae,shouldFade:He,getPercentageDragged:Ue}=O7({snapPoints:o,activeSnapPointProp:m,setActiveSnapPointProp:v,drawerRef:re,fadeFromIndex:f,overlayRef:V,onSnapPointChange:Ke,direction:x,container:_,snapToSequentialPoint:S});x7({isDisabled:!B||T||!I||W||!M||!R||!w});const{restorePositionSetting:vt}=_7({isOpen:B,modal:I,nested:y,hasBeenOpened:M,preventScrollRestoration:k,noBodyStyles:C});function jt(){return(window.innerWidth-q0)/window.innerWidth}function Lr(Y){var Se,Be;!d&&!o||re.current&&!re.current.contains(Y.target)||(ce.current=((Se=re.current)==null?void 0:Se.getBoundingClientRect().height)||0,Me.current=((Be=re.current)==null?void 0:Be.getBoundingClientRect().width)||0,L(!0),ee.current=new Date,AM()&&window.addEventListener("touchend",()=>Z.current=!1,{once:!0}),Y.target.setPointerCapture(Y.pointerId),J.current=ar(x)?Y.pageY:Y.pageX)}function bt(Y,Se){var Be,ke;let be=Y;const Je=(Be=window.getSelection())==null?void 0:Be.toString(),Lt=re.current?Vf(re.current,x):null,ve=new Date;if(be.hasAttribute("data-vaul-no-drag")||be.closest("[data-vaul-no-drag]"))return!1;if(x==="right"||x==="left")return!0;if(z.current&&ve.getTime()-z.current.getTime()<500)return!1;if(Lt!==null&&(x==="bottom"?Lt>0:Lt<0))return!0;if(Je&&Je.length>0)return!1;if(ve.getTime()-((ke=F.current)==null?void 0:ke.getTime())<u&&Lt===0||Se)return F.current=ve,!1;for(;be;){if(be.scrollHeight>be.clientHeight){if(be.scrollTop!==0)return F.current=new Date,!1;if(be.getAttribute("role")==="dialog")return!0}be=be.parentNode}return!0}function rn(Y){if(re.current&&T){const Se=x==="bottom"||x==="right"?1:-1,Be=(J.current-(ar(x)?Y.pageY:Y.pageX))*Se,ke=Be>0,be=o&&!d&&!ke;if(be&&te===0)return;const Je=Math.abs(Be),Lt=document.querySelector("[data-vaul-drawer-wrapper]"),ve=x==="bottom"||x==="top"?ce.current:Me.current;let Ge=Je/ve;const xe=Ue(Je,ke);if(xe!==null&&(Ge=xe),be&&Ge>=1||!Z.current&&!bt(Y.target,ke))return;if(re.current.classList.add(kC),Z.current=!0,sr(re.current,{transition:"none"}),sr(V.current,{transition:"none"}),o&&ae({draggedDistance:Be}),ke&&!o){const Tt=N7(Be),Or=Math.min(Tt*-1,0)*Se;sr(re.current,{transform:ar(x)?`translate3d(0, ${Or}px, 0)`:`translate3d(${Or}px, 0, 0)`});return}const Wt=1-Ge;if((He||f&&te===f-1)&&(n==null||n(Y,Ge),sr(V.current,{opacity:`${Wt}`,transition:"none"},!0)),Lt&&V.current&&s){const Tt=Math.min(jt()+Ge*(1-jt()),1),Or=8-Ge*8,vn=Math.max(0,14-Ge*14);sr(Lt,{borderRadius:`${Or}px`,transform:ar(x)?`scale(${Tt}) translate3d(0, ${vn}px, 0)`:`scale(${Tt}) translate3d(${vn}px, 0, 0)`,transition:"none"},!0)}if(!o){const Tt=Je*Se;sr(re.current,{transform:ar(x)?`translate3d(0, ${Tt}px, 0)`:`translate3d(${Tt}px, 0, 0)`})}}}H.useEffect(()=>{var Y;function Se(){if(!re.current||!R)return;const Be=document.activeElement;if(Q0(Be)||U.current){var ke;const be=((ke=window.visualViewport)==null?void 0:ke.height)||0,Je=window.innerHeight;let Lt=Je-be;const ve=re.current.getBoundingClientRect().height||0,Ge=ve>Je*.8;Ee.current||(Ee.current=ve);const xe=re.current.getBoundingClientRect().top;if(Math.abs(K.current-Lt)>60&&(U.current=!U.current),o&&o.length>0&&se&&te){const Wt=se[te]||0;Lt+=Wt}if(K.current=Lt,ve>be||U.current){const Wt=re.current.getBoundingClientRect().height;let Tt=Wt;Wt>be&&(Tt=be-(Ge?xe:q0)),p?re.current.style.height=`${Wt-Math.max(Lt,0)}px`:re.current.style.height=`${Math.max(Tt,be-xe)}px`}else re.current.style.height=`${Ee.current}px`;o&&o.length>0&&!U.current?re.current.style.bottom="0px":re.current.style.bottom=`${Math.max(Lt,0)}px`}}return(Y=window.visualViewport)==null||Y.addEventListener("resize",Se),()=>{var Be;return(Be=window.visualViewport)==null?void 0:Be.removeEventListener("resize",Se)}},[te,o,se]);function Wr(Y){Jt(),h==null||h(),Y||E(!1),setTimeout(()=>{o&&he(o[0])},Dt.DURATION*1e3)}function br(){if(!re.current)return;const Y=document.querySelector("[data-vaul-drawer-wrapper]"),Se=Vf(re.current,x);sr(re.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Dt.DURATION}s cubic-bezier(${Dt.EASE.join(",")})`}),sr(V.current,{transition:`opacity ${Dt.DURATION}s cubic-bezier(${Dt.EASE.join(",")})`,opacity:"1"}),s&&Se&&Se>0&&B&&sr(Y,{borderRadius:`${NM}px`,overflow:"hidden",...ar(x)?{transform:`scale(${jt()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${jt()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Dt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Dt.EASE.join(",")})`},!0)}function Jt(){!T||!re.current||(re.current.classList.remove(kC),Z.current=!1,L(!1),D.current=new Date)}function Rr(Y){if(!T||!re.current)return;re.current.classList.remove(kC),Z.current=!1,L(!1),D.current=new Date;const Se=Vf(re.current,x);if(!bt(Y.target,!1)||!Se||Number.isNaN(Se)||ee.current===null)return;const Be=D.current.getTime()-ee.current.getTime(),ke=J.current-(ar(x)?Y.pageY:Y.pageX),be=Math.abs(ke)/Be;if(be>.05&&(X(!0),setTimeout(()=>{X(!1)},200)),o){Ze({draggedDistance:ke*(x==="bottom"||x==="right"?1:-1),closeDrawer:Wr,velocity:be,dismissible:d}),i==null||i(Y,!0);return}if(x==="bottom"||x==="right"?ke>0:ke<0){br(),i==null||i(Y,!0);return}if(be>BM){Wr(),i==null||i(Y,!1);return}var Je;const Lt=Math.min((Je=re.current.getBoundingClientRect().height)!=null?Je:0,window.innerHeight);var ve;const Ge=Math.min((ve=re.current.getBoundingClientRect().width)!=null?ve:0,window.innerWidth),xe=x==="left"||x==="right";if(Math.abs(Se)>=(xe?Ge:Lt)*c){Wr(),i==null||i(Y,!1);return}i==null||i(Y,!0),br()}H.useEffect(()=>(B&&(sr(document.documentElement,{scrollBehavior:"auto"}),z.current=new Date),()=>{B7(document.documentElement,"scrollBehavior")}),[B]);function xt(Y){const Se=Y?(window.innerWidth-pa)/window.innerWidth:1,Be=Y?-pa:0;$.current&&window.clearTimeout($.current),sr(re.current,{transition:`transform ${Dt.DURATION}s cubic-bezier(${Dt.EASE.join(",")})`,transform:`scale(${Se}) translate3d(0, ${Be}px, 0)`}),!Y&&re.current&&($.current=setTimeout(()=>{const ke=Vf(re.current,x);sr(re.current,{transition:"none",transform:ar(x)?`translate3d(0, ${ke}px, 0)`:`translate3d(${ke}px, 0, 0)`})},500))}function xr(Y,Se){if(Se<0)return;const Be=(window.innerWidth-pa)/window.innerWidth,ke=Be+Se*(1-Be),be=-pa+Se*pa;sr(re.current,{transform:ar(x)?`scale(${ke}) translate3d(0, ${be}px, 0)`:`scale(${ke}) translate3d(${be}px, 0, 0)`,transition:"none"})}function Ar(Y,Se){const Be=ar(x)?window.innerHeight:window.innerWidth,ke=Se?(Be-pa)/Be:1,be=Se?-pa:0;Se&&sr(re.current,{transition:`transform ${Dt.DURATION}s cubic-bezier(${Dt.EASE.join(",")})`,transform:ar(x)?`scale(${ke}) translate3d(0, ${be}px, 0)`:`scale(${ke}) translate3d(${be}px, 0, 0)`})}return H.createElement(yw,{defaultOpen:A,onOpenChange:Y=>{!d&&!Y||(Y?G(!0):Wr(!0),E(Y))},open:B},H.createElement(xM.Provider,{value:{activeSnapPoint:Nt,snapPoints:o,setActiveSnapPoint:he,drawerRef:re,overlayRef:V,onOpenChange:t,onPress:Lr,onRelease:Rr,onDrag:rn,dismissible:d,handleOnly:g,isOpen:B,isDragging:T,shouldFade:He,closeDrawer:Wr,onNestedDrag:xr,onNestedOpenChange:xt,onNestedRelease:Ar,keyboardIsOpen:U,modal:I,snapPointsOffset:se,direction:x,shouldScaleBackground:s,setBackgroundColorOnScale:a,noBodyStyles:C,container:_,autoFocus:O}},r))}const EM=H.forwardRef(function({...e},t){const{overlayRef:r,snapPoints:n,onRelease:i,shouldFade:o,isOpen:s,modal:a}=tf(),c=SM(t,r),u=n&&n.length>0;return a?H.createElement(Jg,{onMouseUp:i,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":s&&u?"true":"false","data-vaul-snap-points-overlay":s&&o?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});EM.displayName="Drawer.Overlay";const RM=H.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:r,...n},i){const{drawerRef:o,onPress:s,onRelease:a,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,modal:g,isOpen:f,direction:m,snapPoints:v,container:p,handleOnly:I,autoFocus:h}=tf(),[y,C]=H.useState(!1),x=SM(i,o),A=H.useRef(null),w=H.useRef(null),S=H.useRef(!1),k=v&&v.length>0;P7();const R=(_,O,P=0)=>{if(S.current)return!0;const N=Math.abs(_.y),B=Math.abs(_.x),E=B>N,M=["bottom","right"].includes(O)?1:-1;if(O==="left"||O==="right"){if(!(_.x*M<0)&&B>=0&&B<=P)return E}else if(!(_.y*M<0)&&N>=0&&N<=P)return!E;return S.current=!0,!0};H.useEffect(()=>{k&&window.requestAnimationFrame(()=>{C(!0)})},[]);function j(_){A.current=null,S.current=!1,a(_)}return H.createElement(Qg,{"data-vaul-drawer-direction":m,"data-vaul-drawer":"","data-vaul-delayed-snap-points":y?"true":"false","data-vaul-snap-points":f&&k?"true":"false","data-vaul-custom-container":p?"true":"false",...n,ref:x,style:d&&d.length>0?{"--snap-point-height":`${d[0]}px`,...t}:t,onPointerDown:_=>{I||(n.onPointerDown==null||n.onPointerDown.call(n,_),A.current={x:_.pageX,y:_.pageY},s(_))},onOpenAutoFocus:_=>{r==null||r(_),h||_.preventDefault()},onPointerDownOutside:_=>{if(e==null||e(_),!g||_.defaultPrevented){_.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:_=>{if(!g){_.preventDefault();return}},onPointerMove:_=>{if(w.current=_,I||(n.onPointerMove==null||n.onPointerMove.call(n,_),!A.current))return;const O=_.pageY-A.current.y,P=_.pageX-A.current.x,N=_.pointerType==="touch"?10:2;R({x:P,y:O},m,N)?c(_):(Math.abs(P)>N||Math.abs(O)>N)&&(A.current=null)},onPointerUp:_=>{n.onPointerUp==null||n.onPointerUp.call(n,_),A.current=null,S.current=!1,a(_)},onPointerOut:_=>{n.onPointerOut==null||n.onPointerOut.call(n,_),j(w.current)},onContextMenu:_=>{n.onContextMenu==null||n.onContextMenu.call(n,_),j(w.current)}})});RM.displayName="Drawer.Content";const Z7=250,H7=120,L7=H.forwardRef(function({preventCycle:e=!1,children:t,...r},n){const{closeDrawer:i,isDragging:o,snapPoints:s,activeSnapPoint:a,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:g,onPress:f,onDrag:m}=tf(),v=H.useRef(null),p=H.useRef(!1);function I(){if(p.current){C();return}window.setTimeout(()=>{h()},H7)}function h(){if(o||e||p.current){C();return}if(C(),(!s||s.length===0)&&u){i();return}if(a===s[s.length-1]&&u){i();return}const A=s.findIndex(S=>S===a);if(A===-1)return;const w=s[A+1];c(w)}function y(){v.current=window.setTimeout(()=>{p.current=!0},Z7)}function C(){window.clearTimeout(v.current),p.current=!1}return H.createElement("div",{onClick:I,onPointerCancel:C,onPointerDown:x=>{d&&f(x),y()},onPointerMove:x=>{d&&m(x)},ref:n,"data-vaul-drawer-visible":g?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},H.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});L7.displayName="Drawer.Handle";function W7(e){const t=tf(),{container:r=t.container,...n}=e;return H.createElement(Cw,{container:r,...n})}const mo={Root:M7,Content:RM,Overlay:EM,Portal:W7,Close:mI,Title:qg,Description:ef},OM=({shouldScaleBackground:e=!0,...t})=>l.jsx(mo.Root,{shouldScaleBackground:e,...t});OM.displayName="Drawer";const D7=mo.Portal,$7=mo.Close,GM=b.forwardRef(({className:e,...t},r)=>l.jsx(mo.Overlay,{ref:r,className:de("fixed inset-0 z-[3000] bg-black/80",e),...t}));GM.displayName=mo.Overlay.displayName;const PM=b.forwardRef(({className:e,children:t,...r},n)=>l.jsxs(D7,{children:[l.jsx(GM,{}),l.jsxs(mo.Content,{ref:n,className:de("fixed inset-x-0 bottom-0 z-[3001] mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...r,children:[l.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));PM.displayName="DrawerContent";const _M=({className:e,...t})=>l.jsx("div",{className:de("grid gap-1.5 p-4 text-center sm:text-left",e),...t});_M.displayName="DrawerHeader";const MM=b.forwardRef(({className:e,...t},r)=>l.jsx(mo.Title,{ref:r,className:de("text-lg font-semibold leading-none tracking-tight",e),...t}));MM.displayName=mo.Title.displayName;const ZM=b.forwardRef(({className:e,...t},r)=>l.jsx(mo.Description,{ref:r,className:de("text-sm text-muted-foreground",e),...t}));ZM.displayName=mo.Description.displayName;var X7=b.createContext(void 0);function II(e){const t=b.useContext(X7);return e||t||"ltr"}function eb(e,[t,r]){return Math.min(r,Math.max(t,e))}function F7(e,t){return b.useReducer((r,n)=>t[r][n]??r,e)}var bw="ScrollArea",[HM]=Wi(bw),[K7,gi]=HM(bw),LM=b.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:o=600,...s}=e,[a,c]=b.useState(null),[u,d]=b.useState(null),[g,f]=b.useState(null),[m,v]=b.useState(null),[p,I]=b.useState(null),[h,y]=b.useState(0),[C,x]=b.useState(0),[A,w]=b.useState(!1),[S,k]=b.useState(!1),R=Ye(t,_=>c(_)),j=II(i);return l.jsx(K7,{scope:r,type:n,dir:j,scrollHideDelay:o,scrollArea:a,viewport:u,onViewportChange:d,content:g,onContentChange:f,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:w,scrollbarY:p,onScrollbarYChange:I,scrollbarYEnabled:S,onScrollbarYEnabledChange:k,onCornerWidthChange:y,onCornerHeightChange:x,children:l.jsx(Te.div,{dir:j,...s,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":h+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});LM.displayName=bw;var WM="ScrollAreaViewport",DM=b.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:i,...o}=e,s=gi(WM,r),a=b.useRef(null),c=Ye(t,a,s.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),l.jsx(Te.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:l.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});DM.displayName=WM;var Io="ScrollAreaScrollbar",xw=b.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=gi(Io,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:s}=i,a=e.orientation==="horizontal";return b.useEffect(()=>(a?o(!0):s(!0),()=>{a?o(!1):s(!1)}),[a,o,s]),i.type==="hover"?l.jsx(V7,{...n,ref:t,forceMount:r}):i.type==="scroll"?l.jsx(z7,{...n,ref:t,forceMount:r}):i.type==="auto"?l.jsx($M,{...n,ref:t,forceMount:r}):i.type==="always"?l.jsx(Aw,{...n,ref:t}):null});xw.displayName=Io;var V7=b.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=gi(Io,e.__scopeScrollArea),[o,s]=b.useState(!1);return b.useEffect(()=>{const a=i.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),s(!0)},d=()=>{c=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),l.jsx(ci,{present:r||o,children:l.jsx($M,{"data-state":o?"visible":"hidden",...n,ref:t})})}),z7=b.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=gi(Io,e.__scopeScrollArea),o=e.orientation==="horizontal",s=CI(()=>c("SCROLL_END"),100),[a,c]=F7("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,i.scrollHideDelay,c]),b.useEffect(()=>{const u=i.viewport,d=o?"scrollLeft":"scrollTop";if(u){let g=u[d];const f=()=>{const m=u[d];g!==m&&(c("SCROLL"),s()),g=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,o,c,s]),l.jsx(ci,{present:r||a!=="hidden",children:l.jsx(Aw,{"data-state":a==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:we(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:we(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),$M=b.forwardRef((e,t)=>{const r=gi(Io,e.__scopeScrollArea),{forceMount:n,...i}=e,[o,s]=b.useState(!1),a=e.orientation==="horizontal",c=CI(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;s(a?u:d)}},10);return Rc(r.viewport,c),Rc(r.content,c),l.jsx(ci,{present:n||o,children:l.jsx(Aw,{"data-state":o?"visible":"hidden",...i,ref:t})})}),Aw=b.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,i=gi(Io,e.__scopeScrollArea),o=b.useRef(null),s=b.useRef(0),[a,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=zM(a.viewport,a.content),d={...n,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>o.current=f,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:f=>s.current=f};function g(f,m){return eJ(f,s.current,a,m)}return r==="horizontal"?l.jsx(Y7,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const f=i.viewport.scrollLeft,m=fN(f,a,i.dir);o.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=g(f,i.dir))}}):r==="vertical"?l.jsx(U7,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const f=i.viewport.scrollTop,m=fN(f,a);o.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=g(f))}}):null}),Y7=b.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,o=gi(Io,e.__scopeScrollArea),[s,a]=b.useState(),c=b.useRef(null),u=Ye(t,c,o.onScrollbarXChange);return b.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(FM,{"data-orientation":"horizontal",...i,ref:u,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yI(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,g)=>{if(o.viewport){const f=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),UM(f,g)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&s&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:jp(s.paddingLeft),paddingEnd:jp(s.paddingRight)}})}})}),U7=b.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,o=gi(Io,e.__scopeScrollArea),[s,a]=b.useState(),c=b.useRef(null),u=Ye(t,c,o.onScrollbarYChange);return b.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(FM,{"data-orientation":"vertical",...i,ref:u,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yI(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,g)=>{if(o.viewport){const f=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),UM(f,g)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&s&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:jp(s.paddingTop),paddingEnd:jp(s.paddingBottom)}})}})}),[J7,XM]=HM(Io),FM=b.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:o,onThumbPointerUp:s,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:g,...f}=e,m=gi(Io,r),[v,p]=b.useState(null),I=Ye(t,R=>p(R)),h=b.useRef(null),y=b.useRef(""),C=m.viewport,x=n.content-n.viewport,A=nr(d),w=nr(c),S=CI(g,10);function k(R){if(h.current){const j=R.clientX-h.current.left,_=R.clientY-h.current.top;u({x:j,y:_})}}return b.useEffect(()=>{const R=j=>{const _=j.target;(v==null?void 0:v.contains(_))&&A(j,x)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[C,v,x,A]),b.useEffect(w,[n,w]),Rc(v,S),Rc(m.content,S),l.jsx(J7,{scope:r,scrollbar:v,hasThumb:i,onThumbChange:nr(o),onThumbPointerUp:nr(s),onThumbPositionChange:w,onThumbPointerDown:nr(a),children:l.jsx(Te.div,{...f,ref:I,style:{position:"absolute",...f.style},onPointerDown:we(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),h.current=v.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),k(R))}),onPointerMove:we(e.onPointerMove,k),onPointerUp:we(e.onPointerUp,R=>{const j=R.target;j.hasPointerCapture(R.pointerId)&&j.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),h.current=null})})})}),Np="ScrollAreaThumb",KM=b.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=XM(Np,e.__scopeScrollArea);return l.jsx(ci,{present:r||i.hasThumb,children:l.jsx(Q7,{ref:t,...n})})}),Q7=b.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...i}=e,o=gi(Np,r),s=XM(Np,r),{onThumbPositionChange:a}=s,c=Ye(t,g=>s.onThumbChange(g)),u=b.useRef(void 0),d=CI(()=>{u.current&&(u.current(),u.current=void 0)},100);return b.useEffect(()=>{const g=o.viewport;if(g){const f=()=>{if(d(),!u.current){const m=tJ(g,a);u.current=m,a()}};return a(),g.addEventListener("scroll",f),()=>g.removeEventListener("scroll",f)}},[o.viewport,d,a]),l.jsx(Te.div,{"data-state":s.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:we(e.onPointerDownCapture,g=>{const m=g.target.getBoundingClientRect(),v=g.clientX-m.left,p=g.clientY-m.top;s.onThumbPointerDown({x:v,y:p})}),onPointerUp:we(e.onPointerUp,s.onThumbPointerUp)})});KM.displayName=Np;var ww="ScrollAreaCorner",VM=b.forwardRef((e,t)=>{const r=gi(ww,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?l.jsx(q7,{...e,ref:t}):null});VM.displayName=ww;var q7=b.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,i=gi(ww,r),[o,s]=b.useState(0),[a,c]=b.useState(0),u=!!(o&&a);return Rc(i.scrollbarX,()=>{var g;const d=((g=i.scrollbarX)==null?void 0:g.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),Rc(i.scrollbarY,()=>{var g;const d=((g=i.scrollbarY)==null?void 0:g.offsetWidth)||0;i.onCornerWidthChange(d),s(d)}),u?l.jsx(Te.div,{...n,ref:t,style:{width:o,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function jp(e){return e?parseInt(e,10):0}function zM(e,t){const r=e/t;return isNaN(r)?0:r}function yI(e){const t=zM(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function eJ(e,t,r,n="ltr"){const i=yI(r),o=i/2,s=t||o,a=i-s,c=r.scrollbar.paddingStart+s,u=r.scrollbar.size-r.scrollbar.paddingEnd-a,d=r.content-r.viewport,g=n==="ltr"?[0,d]:[d*-1,0];return YM([c,u],g)(e)}function fN(e,t,r="ltr"){const n=yI(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,s=t.content-t.viewport,a=o-n,c=r==="ltr"?[0,s]:[s*-1,0],u=eb(e,c);return YM([0,s],[0,a])(u)}function YM(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function UM(e,t){return e>0&&e<t}var tJ=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){const o={left:e.scrollLeft,top:e.scrollTop},s=r.left!==o.left,a=r.top!==o.top;(s||a)&&t(),r=o,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function CI(e,t){const r=nr(e),n=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(n.current),[]),b.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Rc(e,t){const r=nr(t);er(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}var JM=LM,rJ=DM,nJ=VM;const QM=b.forwardRef(({className:e,children:t,...r},n)=>l.jsxs(JM,{ref:n,className:de("relative overflow-hidden",e),...r,children:[l.jsx(rJ,{className:"h-full w-full rounded-[inherit]",children:t}),l.jsx(qM,{}),l.jsx(nJ,{})]}));QM.displayName=JM.displayName;const qM=b.forwardRef(({className:e,orientation:t="vertical",...r},n)=>l.jsx(xw,{ref:n,orientation:t,className:de("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:l.jsx(KM,{className:"relative flex-1 rounded-full bg-border"})}));qM.displayName=xw.displayName;var iJ="Separator",hN="horizontal",oJ=["horizontal","vertical"],eZ=b.forwardRef((e,t)=>{const{decorative:r,orientation:n=hN,...i}=e,o=sJ(n)?n:hN,a=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return l.jsx(Ug.div,{"data-orientation":o,...a,...i,ref:t})});eZ.displayName=iJ;function sJ(e){return oJ.includes(e)}var tZ=eZ;const Ir=b.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},i)=>l.jsx(tZ,{ref:i,decorative:r,orientation:t,className:de("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Ir.displayName=tZ.displayName;const zf=e=>e===0?"0":e>=1e9?(e/1e9).toFixed(2)+"B":e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?(e/1e3).toFixed(2)+"K":e>=1?e.toFixed(2):e.toFixed(6),aJ=e=>{if(!e)return"Never";const t=new Date(e),r=new Date,n=r.getTime()-t.getTime();return n<6e4?`${Math.floor(n/1e3)}s ago`:n<36e5?`${Math.floor(n/6e4)}m ago`:n<864e5?`${Math.floor(n/36e5)}h ago`:t.toDateString()===r.toDateString()?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})},lJ={success:Fg,error:Jl,warning:Qa,info:HA},cJ={success:"text-green-600 dark:text-green-400",error:"text-red-600 dark:text-red-400",warning:"text-orange-600 dark:text-orange-400",info:"text-blue-600 dark:text-blue-400"},uJ={success:"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-200",error:"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-200",warning:"bg-orange-100 text-orange-800 dark:bg-orange-950 dark:text-orange-200",info:"bg-blue-100 text-blue-800 dark:bg-blue-950 dark:text-blue-200"},dJ=({notification:e,onMarkAsRead:t,onRemove:r})=>{const n=lJ[e.type];return l.jsx("div",{className:`p-4 border-l-4 ${e.read?"bg-muted/30 border-l-muted":"bg-background border-l-primary"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`flex-shrink-0 mt-0.5 ${cJ[e.type]}`,children:l.jsx(n,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h4",{className:`font-medium text-sm ${e.read?"text-muted-foreground":"text-foreground"}`,children:e.title}),l.jsx(Ot,{variant:"secondary",className:`text-xs ${uJ[e.type]}`,children:e.type}),!e.read&&l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"})]}),e.message&&l.jsx("p",{className:`text-sm ${e.read,"text-muted-foreground"}`,children:e.message}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:aJ(e.timestamp)})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[!e.read&&l.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>t(e.id),className:"h-8 w-8 p-0",title:"Mark as read",children:l.jsx(_A,{className:"h-4 w-4"})}),l.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>r(e.id),className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",title:"Delete notification",children:l.jsx(Cr,{className:"h-4 w-4"})})]})]})})]})})},gJ=({open:e,onOpenChange:t})=>{const{notifications:r,unreadCount:n,markAsRead:i,markAllAsRead:o,removeNotification:s,clearAll:a}=lu(),c=H.useMemo(()=>{const u={};return r.forEach(d=>{const g=new Date(d.timestamp),f=new Date,m=new Date(f);m.setDate(m.getDate()-1);let v;g.toDateString()===f.toDateString()?v="Today":g.toDateString()===m.toDateString()?v="Yesterday":v=g.toLocaleDateString("en-US",{day:"2-digit",month:"long"}),u[v]||(u[v]=[]),u[v].push(d)}),u},[r]);return l.jsx(OM,{open:e,onOpenChange:t,children:l.jsxs(PM,{className:"max-w-md ml-auto h-full",children:[l.jsxs(_M,{className:"border-b",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ip,{className:"h-5 w-5"}),l.jsx(MM,{children:"Notifications"}),n>0&&l.jsx(Ot,{variant:"destructive",className:"ml-2",children:n})]}),l.jsx($7,{asChild:!0,children:l.jsx(ie,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:l.jsx(Cr,{className:"h-4 w-4"})})})]}),l.jsx(ZM,{children:"History of all notifications"})]}),l.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:r.length===0?l.jsx("div",{className:"flex-1 flex items-center justify-center p-8 text-center",children:l.jsxs("div",{children:[l.jsx(ip,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No notifications"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"All notifications will appear here"})]})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-4 border-b bg-muted/20",children:l.jsxs("div",{className:"flex gap-2",children:[n>0&&l.jsxs(ie,{variant:"outline",size:"sm",onClick:o,className:"flex-1",children:[l.jsx(_A,{className:"h-4 w-4 mr-2"}),"Mark all read"]}),l.jsxs(ie,{variant:"outline",size:"sm",onClick:a,className:"flex-1",children:[l.jsx(Zo,{className:"h-4 w-4 mr-2"}),"Clear all"]})]})}),l.jsx(QM,{className:"flex-1",children:l.jsx("div",{className:"space-y-1",children:Object.entries(c).map(([u,d])=>l.jsxs("div",{children:[l.jsx("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm px-4 py-2 border-b",children:l.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:u})}),d.map((g,f)=>l.jsxs("div",{children:[l.jsx(dJ,{notification:g,onMarkAsRead:i,onRemove:s}),f<d.length-1&&l.jsx(Ir,{className:"ml-12"})]},g.id))]},u))})})]})})]})})},fJ=({width:e=200,height:t=200,className:r="",showBackground:n=!1})=>{const[i,o]=b.useState("initial"),[s,a]=b.useState(!1),[c,u]=b.useState(0),[d,g]=b.useState(null),f="top.imaiqt.com",m=80;b.useEffect(()=>{if(d&&(clearInterval(d),g(null)),!s){u(0);return}let w=0;const S=setInterval(()=>{w++,u(w),w>=f.length&&(clearInterval(S),g(null))},m);return g(S),()=>{clearInterval(S),g(null)}},[s,f.length,m]);const v=()=>{(i==="initial"||i==="finishing")&&(o("docking"),a(!0),setTimeout(()=>{o("rotating")},600))},p=()=>{(i==="rotating"||i==="docking")&&(o("finishing"),a(!1),setTimeout(()=>{o("initial")},600))},I=()=>{let w="",S="";switch(i){case"initial":w="translate(0, 0)";break;case"docking":w="translate(20px, 0)",S="transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55)";break;case"rotating":w="translate(20px, 0)";break;case"finishing":w="translate(0, 0)",S="transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55)";break}return{transform:w,transition:S}},h=()=>{let w="",S="";switch(i){case"initial":w="translate(0, 0)";break;case"docking":w="translate(-20px, 0)",S="transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55)";break;case"rotating":w="translate(-20px, 0)";break;case"finishing":w="translate(0, 0)",S="transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55)";break}return{transform:w,transition:S}},y=()=>{let w="",S="rotate(0deg)",k="";switch(i){case"rotating":w="spin 4s linear infinite";break;case"finishing":S="rotate(0deg)",k="transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55)";break}return{animation:w,transform:S,transition:k}},C=I(),x=h(),A=y();return l.jsxs("div",{className:`${r} cursor-pointer relative`,onMouseEnter:v,onMouseLeave:p,children:[l.jsxs("svg",{width:e,height:t,viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0",children:[l.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
          `}),i!=="initial"&&l.jsx("circle",{cx:"100",cy:"100",r:"100",className:"fill-white dark:fill-gray-700"}),l.jsxs("g",{id:"compass",style:{transformOrigin:"center",transform:A.transform,transition:A.transition,animation:A.animation},children:[l.jsx("polygon",{id:"pink-triangle",points:"65,125 95,75 35,75",fill:"#ff9aab",style:{transformOrigin:"65px 105px",transform:C.transform,transition:C.transition}}),l.jsx("polygon",{id:"green-triangle",points:"135,75 105,125 165,125",fill:"#98ffa0",style:{transformOrigin:"135px 105px",transform:x.transform,transition:x.transition}})]})]}),l.jsx("div",{className:`absolute left-full top-1/2 transform -translate-y-1/2 ml-3 font-semibold text-lg whitespace-nowrap transition-all duration-300 px-2 py-1 rounded shadow-lg border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600 ${s?"opacity-100 translate-x-0":"opacity-0 translate-x-[-20px] pointer-events-none"}`,style:{fontFamily:"'JetBrains Mono', 'Courier New', monospace",letterSpacing:"0.5px",zIndex:1e3},children:f.split("").map((w,S)=>l.jsx("span",{className:`inline-block transition-all duration-200 ${S<c?"transform scale-100":"opacity-0 transform scale-75"}`,style:{color:w==="."?"#ff9aab":"inherit"},children:w},S))})]})},hJ=()=>{const[e,t]=b.useState(!1),[r,n]=b.useState(!1),{theme:i,toggleTheme:o}=rw(),[s,a]=b.useState(!1),[c,u]=b.useState(null),[d,g]=b.useState(""),f=Mt(E=>E.dashboards),m=Mt(E=>E.activeDashboardId),v=Mt(E=>E.setActiveDashboard),p=Mt(E=>E.addDashboard),I=Mt(E=>E.removeDashboard),h=Mt(E=>E.updateDashboard),y=Mt(E=>E.initializeWithDefault);b.useEffect(()=>{y()},[y]),b.useEffect(()=>{m&&(window.location.hash=`#dashboard/${m}`)},[m]),b.useEffect(()=>{const E=()=>{const G=window.location.hash.match(/^#dashboard\/(.+)$/);if(G&&G[1]&&G[1]!==m){const T=G[1];f.find(W=>W.id===T)&&v(T)}};return window.addEventListener("hashchange",E),E(),()=>{window.removeEventListener("hashchange",E)}},[m,f,v]);const C=ct(E=>E.activeUserId),A=ct(E=>E.users).find(E=>E.id===C),{unreadCount:w,setHistoryOpen:S}=lu(),k=E=>{E.altKey?a(!0):o()},R=()=>{n(!0),S(!0)},j=()=>{const E=p({title:"Dashboard",description:"New dashboard",widgets:[],layout:{gridSize:{width:1920,height:1080},snapToGrid:!0,gridStep:10},isDefault:!1});console.log("TabNavigation: Created new dashboard",E)},_=(E,M)=>{M.stopPropagation(),f.length>1&&I(E)},O=(E,M)=>{M.stopPropagation(),u(E.id),g(E.title)},P=()=>{c&&d.trim()&&h(c,{title:d.trim()}),u(null),g("")},N=()=>{u(null),g("")},B=E=>{E.key==="Enter"?(E.preventDefault(),P()):E.key==="Escape"&&(E.preventDefault(),N())};return l.jsxs("div",{className:"flex flex-col h-auto bg-terminal-bg border-b border-terminal-border mb-0 pb-0",children:[l.jsxs("div",{className:"flex justify-between h-12 px-2",children:[l.jsxs("div",{className:"flex h-full",children:[l.jsx("div",{className:"flex-shrink-0 flex items-center px-2",children:l.jsx(fJ,{width:32,height:32,className:"transition-opacity hover:opacity-80"})}),l.jsxs("div",{className:"flex overflow-x-auto hide-scrollbar h-full",children:[f.map(E=>l.jsxs("div",{className:`flex items-center px-4 h-full cursor-pointer whitespace-nowrap ${m===E.id?"text-terminal-text border-b-2":"text-terminal-muted hover:bg-terminal-accent/10"}`,style:m===E.id?{borderBottomColor:"hsl(349.8deg 92.59% 78.82%)"}:{},onClick:()=>{c!==E.id&&(console.log("TabNavigation: Switching to dashboard",E.id,E.title),v(E.id))},children:[c===E.id?l.jsx("input",{type:"text",value:d,onChange:M=>g(M.target.value),onBlur:P,onKeyDown:B,className:"text-sm bg-transparent border-none outline-none w-full min-w-[80px] max-w-[200px]",autoFocus:!0,onClick:M=>M.stopPropagation()}):l.jsx("span",{className:"text-sm select-none",onDoubleClick:M=>O(E,M),children:E.title}),f.length>1&&c!==E.id&&l.jsx("button",{className:"ml-2 p-1 rounded-sm hover:bg-terminal-widget/50 text-terminal-muted hover:text-terminal-negative transition-colors",onClick:M=>_(E.id,M),children:l.jsx(Cr,{size:14})})]},E.id)),l.jsx("button",{className:"flex items-center justify-center w-10 h-full text-terminal-muted hover:bg-terminal-accent/20",onClick:j,children:l.jsx(Us,{size:18})})]})]}),l.jsxs("div",{className:"flex items-center space-x-3 h-full",children:[l.jsxs("button",{className:"p-2 rounded-full hover:bg-terminal-accent/50 transition-colors relative",onClick:R,title:"Notifications",children:[l.jsx(ip,{size:18,className:"text-terminal-muted"}),w>0&&l.jsx(Ot,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 text-xs p-0 flex items-center justify-center rounded-full",children:w>99?"99+":w})]}),l.jsx("button",{className:"p-2 rounded-full hover:bg-terminal-accent/50 transition-colors",onClick:k,title:"Click - toggle theme, Option+Click - theme settings",children:i==="dark"?l.jsx(mF,{size:18,className:"text-terminal-muted"}):l.jsx(uF,{size:18,className:"text-terminal-muted"})}),l.jsx("button",{className:"p-2 rounded-full hover:bg-terminal-accent/50 transition-colors",onClick:()=>t(!0),children:A?l.jsx(uw,{className:"w-7 h-7",children:A.avatarUrl?l.jsx(dw,{src:A.avatarUrl,alt:A.email}):l.jsx(gw,{children:A.email.slice(0,2).toUpperCase()})}):l.jsx(Tn,{size:18,className:"text-terminal-muted"})})]})]}),l.jsx(f7,{open:e,onOpenChange:t}),l.jsx(gJ,{open:r,onOpenChange:E=>{n(E),S(E)}})]})};var pJ=Object.defineProperty,mJ=(e,t,r)=>t in e?pJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Sa=(e,t,r)=>(mJ(e,typeof t!="symbol"?t+"":t,r),r);function Tr(){}const rZ=e=>e;function nZ(e){return e()}function pN(){return Object.create(null)}function oa(e){e.forEach(nZ)}function Sw(e){return typeof e=="function"}function yn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function IJ(e){return Object.keys(e).length===0}const iZ=typeof window<"u";let yJ=iZ?()=>window.performance.now():()=>Date.now(),kw=iZ?e=>requestAnimationFrame(e):Tr;const ic=new Set;function oZ(e){ic.forEach(t=>{t.c(e)||(ic.delete(t),t.f())}),ic.size!==0&&kw(oZ)}function CJ(e){let t;return ic.size===0&&kw(oZ),{promise:new Promise(r=>{ic.add(t={c:e,f:r})}),abort(){ic.delete(t)}}}function qt(e,t){e.appendChild(t)}function rf(e,t,r){const n=Bw(e);if(!n.getElementById(t)){const i=It("style");i.id=t,i.textContent=r,sZ(n,i)}}function Bw(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function vJ(e){const t=It("style");return t.textContent="/* empty */",sZ(Bw(e),t),t.sheet}function sZ(e,t){return qt(e.head||e,t),t.sheet}function tt(e,t,r){e.insertBefore(t,r||null)}function ze(e){e.parentNode&&e.parentNode.removeChild(e)}function cu(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function It(e){return document.createElement(e)}function bJ(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function uu(e){return document.createTextNode(e)}function Sn(){return uu(" ")}function fi(){return uu("")}function Oo(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function aZ(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function me(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function xJ(e){return Array.from(e.childNodes)}function Nw(e,t){t=""+t,e.data!==t&&(e.data=t)}function AJ(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}class jw{constructor(t=!1){Sa(this,"is_svg",!1),Sa(this,"e"),Sa(this,"n"),Sa(this,"t"),Sa(this,"a"),this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,r,n=null){this.e||(this.is_svg?this.e=bJ(r.nodeName):this.e=It(r.nodeType===11?"TEMPLATE":r.nodeName),this.t=r.tagName!=="TEMPLATE"?r:r.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let r=0;r<this.n.length;r+=1)tt(this.t,this.n[r],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(ze)}}const Tp=new Map;let Ep=0;function wJ(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}function SJ(e,t){const r={stylesheet:vJ(t),rules:{}};return Tp.set(e,r),r}function mN(e,t,r,n,i,o,s,a=0){const c=16.666/n;let u=`{
`;for(let I=0;I<=1;I+=c){const h=t+(r-t)*o(I);u+=I*100+`%{${s(h,1-h)}}
`}const d=u+`100% {${s(r,1-r)}}
}`,g=`__svelte_${wJ(d)}_${a}`,f=Bw(e),{stylesheet:m,rules:v}=Tp.get(f)||SJ(f,e);v[g]||(v[g]=!0,m.insertRule(`@keyframes ${g} ${d}`,m.cssRules.length));const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${g} ${n}ms linear ${i}ms 1 both`,Ep+=1,g}function kJ(e,t){const r=(e.style.animation||"").split(", "),n=r.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=r.length-n.length;i&&(e.style.animation=n.join(", "),Ep-=i,Ep||BJ())}function BJ(){kw(()=>{Ep||(Tp.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&ze(t)}),Tp.clear())})}let qd;function dd(e){qd=e}function lZ(){if(!qd)throw new Error("Function called outside component initialization");return qd}function ul(e){lZ().$$.on_mount.push(e)}function sa(e){lZ().$$.on_destroy.push(e)}const kl=[],ao=[];let oc=[];const IN=[],NJ=Promise.resolve();let tb=!1;function jJ(){tb||(tb=!0,NJ.then(on))}function eg(e){oc.push(e)}const BC=new Set;let bl=0;function on(){if(bl!==0)return;const e=qd;do{try{for(;bl<kl.length;){const t=kl[bl];bl++,dd(t),TJ(t.$$)}}catch(t){throw kl.length=0,bl=0,t}for(dd(null),kl.length=0,bl=0;ao.length;)ao.pop()();for(let t=0;t<oc.length;t+=1){const r=oc[t];BC.has(r)||(BC.add(r),r())}oc.length=0}while(kl.length);for(;IN.length;)IN.pop()();tb=!1,BC.clear(),dd(e)}function TJ(e){if(e.fragment!==null){e.update(),oa(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(eg)}}function EJ(e){const t=[],r=[];oc.forEach(n=>e.indexOf(n)===-1?t.push(n):r.push(n)),r.forEach(n=>n()),oc=t}let Pu;function RJ(){return Pu||(Pu=Promise.resolve(),Pu.then(()=>{Pu=null})),Pu}function NC(e,t,r){e.dispatchEvent(AJ(`${t?"intro":"outro"}${r}`))}const Th=new Set;let Go;function Pn(){Go={r:0,c:[],p:Go}}function _n(){Go.r||oa(Go.c),Go=Go.p}function je(e,t){e&&e.i&&(Th.delete(e),e.i(t))}function We(e,t,r,n){if(e&&e.o){if(Th.has(e))return;Th.add(e),Go.c.push(()=>{Th.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}const OJ={duration:0};function yN(e,t,r,n){let o=t(e,r,{direction:"both"}),s=n?0:1,a=null,c=null,u=null,d;function g(){u&&kJ(e,u)}function f(v,p){const I=v.b-s;return p*=Math.abs(I),{a:s,b:v.b,d:I,duration:p,start:v.start,end:v.start+p,group:v.group}}function m(v){const{delay:p=0,duration:I=300,easing:h=rZ,tick:y=Tr,css:C}=o||OJ,x={start:yJ()+p,b:v};v||(x.group=Go,Go.r+=1),"inert"in e&&(v?d!==void 0&&(e.inert=d):(d=e.inert,e.inert=!0)),a||c?c=x:(C&&(g(),u=mN(e,s,v,I,p,h,C)),v&&y(0,1),a=f(x,I),eg(()=>NC(e,v,"start")),CJ(A=>{if(c&&A>c.start&&(a=f(c,I),c=null,NC(e,a.b,"start"),C&&(g(),u=mN(e,s,a.b,a.duration,0,h,o.css))),a){if(A>=a.end)y(s=a.b,1-s),NC(e,a.b,"end"),c||(a.b?g():--a.group.r||oa(a.group.c)),a=null;else if(A>=a.start){const w=A-a.start;s=a.a+a.d*h(w/a.duration),y(s,1-s)}}return!!(a||c)}))}return{run(v){Sw(o)?RJ().then(()=>{o=o({direction:v?"in":"out"}),m(v)}):m(v)},end(){g(),a=c=null}}}function ai(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function In(e){e&&e.c()}function Qr(e,t,r){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,r),eg(()=>{const o=e.$$.on_mount.map(nZ).filter(Sw);e.$$.on_destroy?e.$$.on_destroy.push(...o):oa(o),e.$$.on_mount=[]}),i.forEach(eg)}function qr(e,t){const r=e.$$;r.fragment!==null&&(EJ(r.after_update),oa(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function GJ(e,t){e.$$.dirty[0]===-1&&(kl.push(e),jJ(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Hn(e,t,r,n,i,o,s=null,a=[-1]){const c=qd;dd(e);const u=e.$$={fragment:null,ctx:[],props:o,update:Tr,not_equal:i,bound:pN(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:pN(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};s&&s(u.root);let d=!1;if(u.ctx=r?r(e,t.props||{},(g,f,...m)=>{const v=m.length?m[0]:f;return u.ctx&&i(u.ctx[g],u.ctx[g]=v)&&(!u.skip_bound&&u.bound[g]&&u.bound[g](v),d&&GJ(e,g)),f}):[],u.update(),d=!0,oa(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const g=xJ(t.target);u.fragment&&u.fragment.l(g),g.forEach(ze)}else u.fragment&&u.fragment.c();t.intro&&je(e.$$.fragment),Qr(e,t.target,t.anchor),on()}dd(c)}class Ln{constructor(){Sa(this,"$$"),Sa(this,"$$set")}$destroy(){qr(this,1),this.$destroy=Tr}$on(t,r){if(!Sw(r))return Tr;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!IJ(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const PJ="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PJ);function cZ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uZ={};function _J(e){return!!(e&&typeof e=="object"&&isFinite(e.length)&&e.length>=0&&e.length===Math.floor(e.length)&&e.length<4294967296)}function MJ(e){return!!(e&&typeof e=="object"&&typeof e.sort=="function")}uZ.isSortableArrayLike=function(e){return _J(e)&&MJ(e)};var ZJ={numcmp:function(e,t){return e-t},strcmp:function(e,t){return e<t?-1:e>t?1:0}},dZ={};function rb(e,t,r,n,i){var o=r+t>>>1,s=this.compare(e[o][this.index],n);return s?t>=r?i[n]={found:!1,index:null,prev:s<0?r:r-1,next:s<0?r+1:r}:s>0?rb.call(this,e,t,o-1,n,i):rb.call(this,e,o+1,r,n,i):i[n]={found:!0,index:o,prev:null,next:null}}function HJ(e){var t=this.data;return rb.call(this,t,0,t.length-1,e,this.valpos)}dZ.search=HJ;var LJ=uZ,CN=ZJ,WJ=dZ,DJ=aa;function aa(e,t){if(!LJ.isSortableArrayLike(e))throw new Error("Invalid data");if(!t||e.length>0&&!(t in e[0]))throw new Error("Invalid index");this.data=e,this.index=t,this.setBoundaries(),this.compare=typeof this.minv=="number"?CN.numcmp:CN.strcmp,this.search=WJ.search,this.valpos={},this.cursor=null,this.nextlow=null,this.nexthigh=null}aa.prototype.setCompare=function(e){if(typeof e!="function")throw new Error("Invalid argument");return this.compare=e,this};aa.prototype.setSearch=function(e){if(typeof e!="function")throw new Error("Invalid argument");return this.search=e,this};aa.prototype.sort=function(){var e=this,t=this.index;return this.data.sort(function(r,n){return e.compare(r[t],n[t])}),this.setBoundaries(),this};aa.prototype.setBoundaries=function(){var e=this.data,t=this.index;return this.minv=e.length&&e[0][t],this.maxv=e.length&&e[e.length-1][t],this};aa.prototype.fetch=function(e){if(this.data.length===0)return this.cursor=null,this.nextlow=null,this.nexthigh=null,this;if(this.compare(e,this.minv)===-1)return this.cursor=null,this.nextlow=null,this.nexthigh=0,this;if(this.compare(e,this.maxv)===1)return this.cursor=null,this.nextlow=this.data.length-1,this.nexthigh=null,this;var t=this.valpos,r=t[e];if(r)return r.found?(this.cursor=r.index,this.nextlow=null,this.nexthigh=null):(this.cursor=null,this.nextlow=r.prev,this.nexthigh=r.next),this;var n=this.search.call(this,e);return this.cursor=n.index,this.nextlow=n.prev,this.nexthigh=n.next,this};aa.prototype.get=function(e){e&&this.fetch(e);var t=this.cursor;return t!==null?this.data[t]:null};aa.prototype.getRange=function(e,t){if(this.compare(e,t)===1)return[];this.fetch(e);var r=this.cursor||this.nexthigh;this.fetch(t);var n=this.cursor||this.nextlow;return r===null||n===null?[]:this.data.slice(r,n+1)};const jC=cZ(DJ),Bl=1e3,Ho=Bl*60,$J=Ho*3,gZ=Ho*5,Tw=Ho*15,fZ=Ho*30,Fr=Ho*60,vN=Fr*4,bN=Fr*12,Vn=Fr*24,Rp=Vn*7,ka=Rp*4,ws=Vn*365,XJ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],FJ=[ws*10,ws*5,ws*3,ws*2,ws,ka*6,ka*4,ka*3,ka*2,ka,Vn*15,Vn*10,Vn*7,Vn*5,Vn*3,Vn*2,Vn,Fr*12,Fr*6,Fr*3,Fr*1.5,Fr,fZ,Tw,Ho*10,gZ,Ho*2,Ho],KJ=[.05,.1,.2,.25,.5,.8,1,2,5],VJ={back:"#14151c",grid:"#252732",text:"#adadad",textHL:"#dedddd",textLG:"#c4c4c4",llValue:"#818989",llBack:"#14151c77",llSelect:"#2d7b2f",scale:"#606060",cross:"#8091a0",candleUp:"#41a376",candleDw:"#de4646",wickUp:"#23a77688",wickDw:"#e5415088",volUp:"#41a37682",volDw:"#de464682",panel:"#2a2f38",tbBack:void 0,tbBorder:"#8282827d"},hZ={SBMIN:60,SBMAX:1/0,TOOLBAR:57,TB_ICON:25,TB_ITEM_M:6,TB_ICON_BRI:1,TB_ICON_HOLD:420,TB_BORDER:1,TB_B_STYLE:"dotted",TOOL_COLL:7,EXPAND:.15,CANDLEW:.7,GRIDX:100,GRIDY:47,BOTBAR:28,PANHEIGHT:22,DEFAULT_LEN:50,MINIMUM_LEN:5,MIN_ZOOM:5,MAX_ZOOM:5e3,VOLSCALE:.15,UX_OPACITY:.9,ZOOM_MODE:"tv",L_BTN_SIZE:21,L_BTN_MARGIN:"-6px 0 -6px 0",SCROLL_WHEEL:"prevent",QUANTIZE_AFTER:0,AUTO_PRE_SAMPLE:10};hZ.FONT=`11px -apple-system,BlinkMacSystemFont,
    Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,
    Fira Sans,Droid Sans,Helvetica Neue,
    sans-serif`;const zJ={"1s":Bl,"5s":Bl*5,"10s":Bl*10,"20s":Bl*20,"30s":Bl*30,"1m":Ho,"3m":$J,"5m":gZ,"15m":Tw,"30m":fZ,"1H":Fr,"2H":Fr*2,"3H":Fr*3,"4H":vN,"12H":bN,"1D":Vn,"1W":Rp,"1M":ka,"1Y":ws,"1h":Fr,"2h":Fr*2,"3h":Fr*3,"4h":vN,"12h":bN,"1d":Vn,"1w":Rp,"1y":ws},YJ=-.5,Zr={MINUTE15:Tw,HOUR:Fr,DAY:Vn,WEEK:Rp,MONTH:ka,YEAR:ws,MONTHMAP:XJ,TIMESCALES:FJ,$SCALES:KJ,ChartConfig:hZ,MAP_UNIT:zJ,COLORS:VJ,HPX:YJ},le={clamp(e,t,r){return e<=t?t:e>=r?r:e},addZero(e){return e<10&&(e="0"+e),e},dayStart(e){return new Date(e).setUTCHours(0,0,0,0)},monthStart(e){let t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),1)},yearStart(e){return Date.UTC(new Date(e).getFullYear())},getYear(e){if(e)return new Date(e).getUTCFullYear()},getMonth(e){if(e)return new Date(e).getUTCMonth()},nearestA(e,t){let r=1/0,n=null,i=-1;for(var o=0;o<t.length;o++){var s=t[o];Math.abs(s-e)<r&&(r=Math.abs(s-e),n=s,i=o)}return[i,n]},nearestTs(e,t){let r=1/0,n=null,i=-1;for(var o=0;o<t.length;o++){var s=t[o][0];Math.abs(s-e)<r&&(r=Math.abs(s-e),n=t[o],i=o)}return[i,n]},nearestTsIb(e,t,r){let n=Math.floor(e-r)+1,i=t[n]||null;return[n,i]},round(e,t=8){return parseFloat(e.toFixed(t))},strip(e){return parseFloat(parseFloat(e).toPrecision(12))},getDay(e){return e?new Date(e).getDate():null},overwrite(e,t){e.splice(0,e.length,...t)},allOverlays(e=[]){return e.map(t=>t.overlays||[]).flat()},detectTimeframe(e){let t=Math.min(e.length-1,99),r=1/0;return e.slice(0,t).forEach((n,i)=>{let o=e[i+1][0]-n[0];o===o&&o<r&&(r=o)}),r>=Zr.MONTH&&r<=Zr.DAY*30?Zr.DAY*31:r},fastFilter(e,t,r){if(!e.length)return[e,void 0];try{let n=new jC(e,"0"),i=n.getRange(t,r),o=n.valpos[t].next;return[i,o]}catch{return[e.filter(i=>i[0]>=t&&i[0]<=r),0]}},fastFilter2(e,t,r){if(!e.length)return[e,void 0];try{let n=new jC(e,"0");n.fetch(t);let i=n.cursor||n.nexthigh;n.fetch(r);let o=n.cursor||n.nextlow;return[i,o+1]}catch{let i=e.filter(a=>a[0]>=t&&a[0]<=r),o=e.indexOf(i[0]),s=e.indexOf(i[i.length-1]);return[o,s]}},fastFilterIB(e,t,r){if(!e.length)return[void 0,void 0];let n=Math.floor(t);n<0&&(n=0);let i=Math.floor(r+1);return[n,i]},fastNearest(e,t){let r=new jC(e,"0");return r.fetch(t),[r.nextlow,r.nexthigh]},now(){return new Date().getTime()},pause(e){return new Promise((t,r)=>setTimeout(t,e))},smartWheel(e){let t=Math.abs(e);return t>500?(200+Math.log(t))*Math.sign(e):e},getDeltaX(e){return e.originalEvent.deltaX/12},getDeltaY(e){return e.originalEvent.deltaY/12},applyOpacity(e,t){if(e.length===7){let r=Math.floor(t*255);r=this.clamp(r,0,255),e+=r.toString(16)}return e},parseTf(e){return typeof e=="string"?Zr.MAP_UNIT[e]:e},indexShift(e,t){if(!t.length)return 0;let r=t[0][0],n;for(var i=1;i<t.length;i++)if(t[i][0]!==r){n=t[i][0];break}for(var o=0;o<e.length;o++)if(e[o][0]===n)return o-i;return 0},measureText(e,t,r){let n=e.measureTextOrg(t);if(n.width===0){const i=document,o="nvjs-measure-text";let s=i.getElementById(o);if(!s){let a=i.getElementById(r);s=i.createElement("div"),s.id=o,s.style.position="absolute",s.style.top="-1000px",a.appendChild(s)}return e.font&&(s.style.font=e.font),s.innerText=t.replace(/ /g,"."),{width:s.offsetWidth}}else return n},uuid(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"){return e.replace(/[xy]/g,t=>{var r=Math.random()*16|0,n=t=="x"?r:r&3|8;return n.toString(16)})},uuid2(){return this.uuid("xxxxxxxxxxxx")},uuid3(){return Math.random().toString().slice(2).replace(/^0+/,"")},warn(e,t,r=0){setTimeout(()=>{e()&&console.warn(t)},r)},delayedExec(e){if(!e.script||!e.script.execInterval)return!0;let t=this.now(),r=e.script.execInterval;return!e.settings.$last_exec||t>e.settings.$last_exec+r?(e.settings.$last_exec=t,!0):!1},formatName(e){if(!e.name)return;let t=e.name;for(var r in e.settings||{}){let n=e.settings[r],i=new RegExp(`\\$${r}`,"g");t=t.replace(i,n)}return t},xMode(){return this.is_mobile?"explore":"default"},defaultPrevented(e){return e.original?e.original.defaultPrevented:e.defaultPrevented},afterAll(e,t,r){clearTimeout(e.__afterAllId__),e.__afterAllId__=setTimeout(()=>t(),r)},defaultPreSampler(e){if(!e)return[];let t=[];for(var r=1;r<e.length;r++)typeof e[r]=="number"&&t.push(e[r]);return t},getScalesBySide(e,t){return t?t.settings.scaleTemplate[e].map(n=>t.scales[n]).filter(n=>n):[]},autoScaleSideId(e,t,r){t[e].length?(!r[e]||!t[e].includes(r[e]))&&(r[e]=t[e][0]):r[e]=void 0},callsPerSecond(){window.__counter__===void 0&&(window.__counter__=0),window.__counter__++,!window.__cpsId__&&(window.__cpsId__=setTimeout(()=>{console.log(window.__counter__,"upd/sec"),window.__counter__=0,window.__cpsId__=null},1e3))},findIndexOffset(e,t){let r={},n={};for(var i=0;i<e.length;i++)r[e[i][0]]=i;for(var i=0;i<t.length;i++)n[t[i][0]]=i;let o=[];for(var s in n)if(r[s]!==void 0){let a=r[s]-n[s];if((!o.length||o[0]===a)&&o.unshift(a),o.length===3)return o.pop()}return 0},formatCash(e){if(e==null)return"x";if(typeof e!="number")return e;if(e<1e3)return e.toFixed(0);if(e>=1e3&&e<1e6)return+(e/1e3).toFixed(2)+"K";if(e>=1e6&&e<1e9)return+(e/1e6).toFixed(2)+"M";if(e>=1e9&&e<1e12)return+(e/1e9).toFixed(2)+"B";if(e>=1e12)return+(e/1e12).toFixed(2)+"T"},realTimeRange(e){return e.length?e[e.length-1][0]-e[0][0]:0},numberLR(e){var t=e!=null?e.toString():"";if(e<1e-6){var[r,n]=t.split("e-"),[i,o]=r.split(".");o||(o=""),o={length:o.length+parseInt(n)||0}}else var[i,o]=t.split(".");return[i.length,o?o.length:0]},ovDispositionHash(e){let t="";for(var r of e){t+=r.uuid;for(var n of r.overlays)n.main||(t+=n.type)}return t},makeCursorEvent(e,t,r){return e.values=t.values,e.ti=t.ti,e.time=t.time,e.ohlcCoord=()=>{let n=r.main.ohlc(t.time);return n?{x:r.main.time2x(t.ti),ys:n.map(i=>r.main.value2y(i))}:null},e},isMobile:(e=>"onorientationchange"in e&&(!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||"ontouchstart"in e||e.DocumentTouch&&document instanceof e.DocumentTouch))(typeof window<"u"?window:{})},yt={point2line(e,t,r){let{area:n,base:i}=this.tri(e,t,r);return Math.abs(this.tri_h(n,i))},point2seg(e,t,r){let{area:n,base:i}=this.tri(e,t,r),o=this.dot_prod(e,t,r)/i,s=Math.max(-o,0),a=Math.max(o-i,0),c=Math.abs(this.tri_h(n,i));return Math.max(c,s,a)},point2ray(e,t,r){let{area:n,base:i}=this.tri(e,t,r),o=this.dot_prod(e,t,r)/i,s=Math.max(-o,0),a=Math.abs(this.tri_h(n,i));return Math.max(a,s)},tri(e,t,r){let n=this.area(e,t,r),i=r[0]-t[0],o=r[1]-t[1],s=Math.sqrt(i*i+o*o);return{area:n,base:s}},area(e,t,r){return e[0]*(t[1]-r[1])+t[0]*(r[1]-e[1])+r[0]*(e[1]-t[1])},tri_h(e,t){return e/t},dot_prod(e,t,r){let n=[r[0]-t[0],r[1]-t[1]],i=[e[0]-t[0],e[1]-t[1]];return n[0]*i[0]+n[1]*i[1]},log(e){return Math.sign(e)*Math.log(Math.abs(e)+1)},exp(e){return Math.sign(e)*(Math.exp(Math.abs(e))-1)},log_mid(e,t){let r=this.log(e[0]),n=this.log(e[1]),i=t/2,o=r-i*(r-n)/t;return this.exp(o)},re_range(e,t,r){let n=this.log(e[0]),i=this.log(e[1]),o=this.log(t),s=this.log(r),a=(o-s)*(n-i)/(n-s);return this.exp(o-a)}};let UJ=class{constructor(t){this.meta=t}xSync(t,r,n,i){if(i.visible===!1)return this.hide(),this;let o=this.ti;Object.assign(this,i);let s=r.main.startx,a=r.main.pxStep;return this.yValues(r),this.locked&&!this.meta.scrollLock?(this.x=r.main.time2x(o),this):(this.x=Math.round((this.x-s)/a)*a+s,this.x=Math.floor(this.x-1)+.5,this.xValues(t,r,n))}xValues(t,r,n){(!this.locked||this.meta.scrollLock)&&(this.ti=r.main.x2ti(this.x));let i=[],o;for(var s of t.panes()){let c=[];for(var a=0;a<s.overlays.length;a++){let u=s.overlays[a];if(!r.indexBased)o=le.nearestTs(this.ti,u.dataSubset)||[];else{let d=u.indexOffset;o=le.nearestTsIb(this.ti,u.data,d)||[]}u.main&&(this.time=o[1]?o[1][0]:void 0),c.push(o[1])}i.push(c)}return this.values=i,this.quantizeTime(t,r,n),this}yValues(t){let r=this.gridId;if(!t.grids[r])return;this.scales={};let n=t.grids[r];for(var i of Object.values(n.scales)){let o=this.y2value(this.y,i);this.scales[i.scaleSpecs.id]=o}}quantizeTime(t,r,n){let i=t.chart.id,o=t.mainOv.id;if(!this.values||!this.values[i])return;let s=this.values[i][o];if(!s)return;if(Math.abs((s[0]-this.ti)/n.interval)>=.5){let c=Math.round(this.ti/n.interval);this.ti=c*n.interval}else this.ti=s[0];r.indexBased||(this.time=this.ti)}y2value(t,r){return r.scaleSpecs.log?yt.exp((t-r.B)/r.A):(t-r.B)/r.A}getValue(t,r){return this.values?(this.values[t]||[])[r]:void 0}hide(){this.visible=!1,delete this.scales,delete this.x,delete this.y,this.locked||delete this.ti}};class JJ{constructor(){this.handlers={}}emit(t,r){let n=this.handlers[t];if(n)for(var i in n)n[i](r)}emitSpec(t,r,n){let i=this.handlers[r];i&&i[t]&&i[t](n)}on(t,r){let[n,i]=t.split(":");this.handlers[i]||(this.handlers[i]={}),this.handlers[i][n]=r}off(t,r=null){if(r&&this.handlers[r]){delete this.handlers[r][t];return}for(var r in this.handlers)delete this.handlers[r][t]}}let TC={};function QJ(e){return TC[e]||(TC[e]=new JJ(e)),TC[e]}const Er={instance:QJ};class qJ{constructor(t,r){this.chart=r,this.ww=r.ww,this.ww.onevent=this.onEvent.bind(this)}setRefs(t,r){this.hub=t,this.scan=r}onEvent(t){switch(t.data.type){case"overlay-data":this.onOverlayData(t.data.data);case"engine-state":this.onEngineState(t.data.data);break}}async uploadData(){this.hub.mainOv&&await this.ww.exec("upload-data",{meta:{range:this.chart.range,tf:this.scan.tf},dss:{ohlcv:this.hub.mainOv.data}})}async updateData(){let t=this.hub.mainOv.data,r=await this.ww.exec("update-data",{ohlcv:t.slice(-2)}),n=!1;for(var i of this.hub.allOverlays())if(r[i.uuid]){let o=i.data[i.data.length-1],s=r[i.uuid];!o||s[0]>o[0]?(i.data.push(s),n=!0):s[0]===o[0]&&(i.data[i.data.length-1]=s)}n?this.chart.update("data"):this.chart.update()}async execScripts(){let t=this.hub.panes().map(r=>({id:r.id,uuid:r.uuid,scripts:r.scripts}));await this.ww.exec("exec-all-scripts",t)}async uploadAndExec(){await this.uploadData(),await this.execScripts()}replaceOverlays(t){for(var r of this.hub.panes()){r.overlays=r.overlays.filter(i=>!i.prod);let n=t.find(i=>i.uuid===r.uuid);n&&n.overlays&&r.overlays.push(...n.overlays)}this.chart.update()}updateOverlays(t){for(var r of this.hub.panes()){let i=t.find(o=>o.uuid===r.uuid);if(i&&i.overlays){let o=r.overlays.filter(s=>s.prod);for(var n=0;n<o.length;n++){let s=o[n],a=i.overlays[n];s&&a&&(s.name=a.name,s.data=a.data,s.uuid=a.uuid)}}}this.chart.update("data",{updateHash:!0})}onOverlayData(t){let r=le.ovDispositionHash(this.hub.panes()),n=le.ovDispositionHash(t);r===n?this.updateOverlays(t):this.replaceOverlays(t)}onEngineState(t){this.state=Object.assign(this.state||{},t)}}let EC={};function e8(e,t){return EC[e]||(EC[e]=new qJ(e,t)),EC[e]}const pZ={instance:e8};class t8{constructor(t,r,n){this.src=t,this.i1=Math.max(0,r-1),this.i2=Math.min(n,t.length-1),this.length=this.i2-this.i1+1}makeSubset(){return this.src.slice(this.i1,this.i2+1)}}class r8{constructor(t){let r=Er.instance(t),n=pZ.instance(t);this.events=r,this.se=n,n.hub=this,r.on("hub:set-scale-index",this.onScaleIndex.bind(this)),r.on("hub:display-overlay",this.onDisplayOv.bind(this))}init(t){var r;this.data=t,this.indexBased=(r=t.indexBased)!=null?r:!1,this.chart=null,this.offchart=null,this.mainOv=null,this.mainPaneId=null}updateRange(t){for(var r of this.data.panes)for(var n of r.overlays){let i=n.indexOffset;n.dataView=this.filter(n.data,t,i),n.dataSubset=n.dataView.makeSubset()}}calcSubset(t){var r=0;for(var n of this.data.panes||[]){n.id=r++,n.overlays=n.overlays||[],n.settings=n.settings||{};var i=0;for(var o of n.overlays)o.id=i++,o.main=!!o.main,o.data=o.data||[],o.dataView=this.filter(o.data,t,o.indexOffset),o.dataSubset=o.dataView.makeSubset(),o.settings=o.settings||{},o.props=o.props||{},o.uuid=o.uuid||le.uuid3();n.uuid=n.uuid||le.uuid3()}}async loadScripts(t=!1){for(var r of this.data.panes||[]){var n=0;r.scripts=r.scripts||[];for(var i of r.scripts)i.id=n++,i.settings=i.settings||{},i.props=i.props||{},i.uuid=i.uuid||le.uuid3()}t&&(await le.pause(0),await this.se.uploadAndExec())}detectMain(){let t=le.allOverlays(this.data.panes),r=t.find(i=>i.main)||t[0];if(!(!t.length||!r)){r.main=!0,this.chart=this.data.panes.find(i=>i.overlays.find(o=>o.main)),this.offchart=this.data.panes.filter(i=>i!==this.chart),this.mainOv=r,this.mainPaneId=this.panes().indexOf(this.chart);for(var n of t)n!==r&&(n.main=!1)}}filter(t,r,n=0){var o=(this.indexBased?le.fastFilterIB:le.fastFilter2)(t,r[0]-n,r[1]-n);return new t8(t,o[0],o[1])}panes(){return(this.data.panes||[]).filter(t=>t.uuid)}overlay(t,r){var n;return(n=this.panes()[t])==null?void 0:n.overlays[r]}ovData(t,r){var n,i;return(i=(n=this.panes()[t])==null?void 0:n.overlays[r])==null?void 0:i.data}ovDataSubset(t,r){var n,i;return(i=(n=this.panes()[t])==null?void 0:n.overlays[r])==null?void 0:i.dataSubset}allOverlays(t){let r=le.allOverlays(this.data.panes);return t?r.filter(n=>n.type===t):r}onScaleIndex(t){let r=this.panes()[t.paneId];r&&(r.settings.scaleIndex=t.index,r.settings.scaleSideIdxs=t.sideIdxs,this.events.emitSpec("chart","update-layout"))}onDisplayOv(t){let r=this.panes()[t.paneId];if(!r)return;let n=r.overlays[t.ovId];if(!n)return;n.settings.display=t.flag;let i=`${t.paneId}-${t.ovId}`;this.events.emitSpec("chart","update-layout"),this.events.emitSpec(`ll-${i}`,"update-ll")}}let RC={};function n8(e){return RC[e]||(RC[e]=new r8(e)),RC[e]}const ns={instance:n8};class i8{constructor(t){let r=Er.instance(t);this.hub=ns.instance(t),this.events=r,r.on("meta:sidebar-transform",this.onYTransform.bind(this)),r.on("meta:select-overlay",this.onOverlaySelect.bind(this)),r.on("meta:grid-mousedown",this.onGridMousedown.bind(this)),r.on("meta:scroll-lock",this.onScrollLock.bind(this)),this.storage={}}init(t){this.panes=0,this.ready=!1,this.legendFns=[],this.yTransforms=[],this.preSamplers=[],this.yRangeFns=[],this.autoPrecisions=[],this.valueTrackers=[],this.selectedOverlay=void 0,this.ohlcMap=[],this.ohlcFn=void 0,this.scrollLock=!1}exctractFrom(t){var r;let n=t.gridId(),i=t.id();var o=this.yRangeFns[n]||[];o[i]=t.yRange?{exec:t.yRange,preCalc:t.yRangePreCalc}:null;var s=this.preSamplers[n]||[];s[i]=t.preSampler;var a=this.legendFns[n]||[];a[i]={legend:t.legend,legendHtml:t.legendHtml,noLegend:(r=t.noLegend)!=null?r:!1};var c=this.valueTrackers[n]||[];c[i]=t.valueTracker,this.hub.overlay(n,i).main&&(this.ohlcFn=t.ohlc),this.yRangeFns[n]=o,this.preSamplers[n]=s,this.legendFns[n]=a,this.valueTrackers[n]=c}calcOhlcMap(){this.ohlcMap={};let t=this.hub.mainOv.data;for(var r=0;r<t.length;r++)this.ohlcMap[t[r][0]]={ref:t[r],index:r}}setAutoPrec(t,r,n){let i=this.autoPrecisions[t]||[];i[r]=n,this.autoPrecisions[t]=i}finish(){this.panes++,!(this.panes<this.hub.panes().length)&&(this.autoPrecisions=[],this.calcOhlcMap(),this.ready=!0,setTimeout(()=>{this.events.emitSpec("chart","update-layout"),this.events.emit("update-legend")}))}store(){this.storage={};let t=this.yTransforms||[];for(var r in t){let i=t[r],o=this.hub.panes()[r];if(o)for(var n in i){let s=`yts:${o.uuid}:${n}`;this.storage[s]=i[n]}}}restore(){let t=this.yTransforms;for(var r in this.storage){let[n,i,o]=r.split(":"),s=this.hub.panes().find(a=>a.uuid===i);if(s)switch(n){case"yts":t[s.id]||(t[s.id]=[]),t[s.id][o]=this.storage[r];break}}this.store()}getYtransform(t,r){return(this.yTransforms[t]||[])[r]}getAutoPrec(t,r){return(this.autoPrecisions[t]||[])[r]}getPreSampler(t,r){return(this.preSamplers[t]||[])[r]}getLegendFns(t,r){return(this.legendFns[t]||[])[r]}ohlc(t){let r=this.ohlcMap[t];if(!(!r||!this.ohlcFn))return this.ohlcFn(r.ref)}onYTransform(t){let r=this.yTransforms[t.gridId]||{},n=r[t.scaleId]||{};r[t.scaleId]=Object.assign(n,t),this.yTransforms[t.gridId]=r,t.updateLayout&&this.events.emitSpec("chart","update-layout"),this.store()}onOverlaySelect(t){this.selectedOverlay=t.index,this.events.emit("$overlay-select",{index:t.index,ov:this.hub.overlay(...t.index)})}onGridMousedown(t){this.selectedOverlay=void 0,this.events.emit("$overlay-select",{index:void 0,ov:void 0})}onScrollLock(t){this.scrollLock=t}}let OC={};function o8(e){return OC[e]||(OC[e]=new i8(e)),OC[e]}const is={instance:o8};class s8{constructor(){}init(t){this.props=t,this.hub=ns.instance(t.id)}detectInterval(){this.all=le.allOverlays(this.hub.data.panes),this.all.filter(n=>n.main).length>1&&console.warn("Two or more overlays with flagged as 'main'");let t=this.all.find(n=>n.main)||this.all[0];t=t||{},this.main=t.data||[];let r=(t.settings||{}).timeFrame;return r!==void 0?this.tf=le.parseTf(r):this.tf=le.detectTimeframe(this.main),this.interval=this.hub.data.indexBased?1:this.tf,this.ibMode=this.hub.data.indexBased,this.interval}getTimeframe(){return this.tf}defaultRange(){const t=this.props.config.DEFAULT_LEN,r=this.props.config.MINIMUM_LEN+.5,n=this.main.length-1;if(this.main.length<2)return[];if(this.main.length<=t)var i=0,o=r;else i=n-t,o=.5;return this.hub.data.indexBased?[i-this.interval*o,n+this.interval*r]:[this.main[i][0]-this.interval*o,this.main[n][0]+this.interval*r]}calcIndexOffsets(){var t,r;if(this.hub.data.indexBased)for(var n of this.all){if(n.data===this.main){n.indexOffset=(t=n.indexOffset)!=null?t:0;continue}let i=le.findIndexOffset(this.main,n.data);n.indexOffset=(r=n.indexOffset)!=null?r:i}}calcPanesHash(){let t="";for(var r of this.hub.data.panes||[]){t+=r.uuid;for(var n of r.overlays||[])t+=n.uuid}return t}panesChanged(){return this.calcPanesHash()!==this.panesHash}updatePanesHash(){this.panesHash=this.calcPanesHash()}}let GC={};function a8(e){return GC[e]||(GC[e]=new s8(e)),GC[e]}const Ew={instance:a8},PC=Zr.HPX;function mZ(e,t,r=null){var n;const i=t[1]-t[0],o=e.spacex/i,s=(e.scaleSpecs||{}).log||!1,a=(n=r?r.indexOffset:0)!=null?n:0;return Object.assign(e,{ti:(c,u)=>e.indexBased?u:c,ti2x:(c,u)=>{let d=e.indexBased?u+a:c;return Math.floor((d-t[0])*o)+PC},time2x:c=>Math.floor((c-t[0])*o)+PC,value2y:c=>(s&&(c=yt.log(c)),Math.floor(c*e.A+e.B)+PC),tMagnet:c=>{},y2value:c=>s?yt.exp((c-e.B)/e.A):(c-e.B)/e.A,x2time:c=>t[0]+c/o,x2ti:c=>t[0]+c/o,$magnet:c=>{},cMagnet:c=>{const u=e.candles||e.master_grid.candles,d=u.map(f=>f.raw[0]),g=le.nearestA(c,d)[0];return u[g]},dataMagnet:c=>{}}),e}const xN={candle(e,t,r,n){return{x:t,w:e.pxStep*n.config.CANDLEW,o:Math.floor(yt.log(r[1])*e.A+e.B),h:Math.floor(yt.log(r[2])*e.A+e.B),l:Math.floor(yt.log(r[3])*e.A+e.B),c:Math.floor(yt.log(r[4])*e.A+e.B),raw:r}},expand(e,t){let r=-t/(yt.log(e.$hi)-yt.log(e.$lo)),n=-yt.log(e.$hi)*r,i=-t*.1,o=t*1.1;e.$hi=yt.exp((i-n)/r),e.$lo=yt.exp((o-n)/r)}},l8=`
// NavyJS ~ 0.2-lite

// <ds>Area chart, like in MacOS Stocks app </ds>
// format: [<timestamp>, <value>]

[OVERLAY name=AppleArea, ctx=Canvas, version=1.0.0]

// Define new props
prop('colorUp', { type: 'color', def: '#57db64' })
prop('colorDown', { type: 'color', def: '#ff3b2f' })
prop('colorSelect', { type: 'color', def: '#49bef4' })
prop('colorSelectBack', { type: 'color', def: '#00a7f455' })
prop('colorSelectValue', { type: 'color', def: '#3b8fed' })
prop('colorBaseline', { type: 'color', def: '#555555' })
prop('lineWidth', { type: 'number', def: 1.5 })
prop('showName', { type: 'boolean', def: false })

const HPX = - 0.5
const FONT = 'bold 14' + $core.props.config.FONT.slice(2)
let direction = 1
let mode = 'display'

init() {
    setTimeout(() => {
        $events.emit('show-crosshair', false)
        $events.emit('show-sb-panel', false)
        $events.emit('show-bb-panel', false)
    })
}

destroy() {
    $events.emit('show-crosshair', true)
    $events.emit('show-sb-panel', true)
    $events.emit('show-bb-panel', true)
}

draw(ctx) {

    mode = $core.cursor.visible ? 'select' : 'display'

    const layout = $core.layout
    const data = $core.data // Full dataset
    const view = $core.view // Visible view

    drawBaseline(ctx, layout)

    const grd = ctx.createLinearGradient(0, 0, 0, layout.height)
    let color = mode === 'select' ? $props.colorSelect : (
        direction > 0 ? $props.colorUp : $props.colorDown
    )
    let cb = mode === 'select' ? $props.colorSelectBack : (color + '55')
    grd.addColorStop(0, cb)
    grd.addColorStop(1, color + '00')

    // Line
    ctx.lineWidth = $props.lineWidth
    ctx.strokeStyle = color
    ctx.lineJoin = "round"
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1])
        ctx.lineTo(x, y)
    }
    ctx.stroke()

    // Area
    ctx.fillStyle = grd
    ctx.beginPath()
    let p0 = (data[0] || [])[0]
    let pN = (data[data.length - 1] || [])[0]
    ctx.lineTo(layout.ti2x(p0, 0), layout.height)
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1])
        ctx.lineTo(x, y)
    }
    ctx.lineTo(layout.ti2x(pN, i - 1), layout.height)
    ctx.fill()

    let rightMost = $core.dataSubset.slice(-1)[0][0]
    if ($core.cursor.ti > rightMost) return

    drawVertical(ctx, layout) 

    // Draw selection circle
    drawSelectionCircle(ctx, layout);

}

// Line that starts from the leftmost price value
drawBaseline(ctx, layout) {
    let v0 = $core.dataSubset[0][1]
    let vLast = $core.dataSubset.slice(-1)[0][1]

    direction = Math.sign(vLast - v0)

    let y = layout.value2y(v0)
    ctx.save()
    ctx.strokeStyle = $props.colorBaseline
    ctx.beginPath()
    ctx.setLineDash([3])
    ctx.moveTo(0, y + HPX)
    ctx.lineTo(layout.width + HPX, y + HPX)
    ctx.stroke()
    ctx.restore()

}

// Draw vertical line with value 
drawVertical(ctx, layout) {
    if (mode === 'select' && $core.cursor.visible) {
        // Draw vertical line
        ctx.strokeStyle = $props.colorSelect
        ctx.lineWidth = 1
        ctx.beginPath()
        ctx.moveTo($core.cursor.x, 5)
        ctx.lineTo($core.cursor.x, layout.height)
        ctx.stroke()

        // Display value panel
        const selectedValue = $core.cursor.values[0][0][1]
        const valueText = selectedValue.toFixed(2)

        ctx.font = FONT
        ctx.fillStyle = $props.colorSelect
        const textWidth = ctx.measureText(valueText).width

        // Calculate position for the value panel
        const panelX = $core.cursor.x - textWidth / 2
        const panelY = 5 // Distance from the top of the canvas

        // Draw value panel background
        ctx.fillStyle = $core.colors.back
        const panelHeight = 20 // Height of the panel
        ctx.fillRect(panelX - 5, panelY, textWidth + 10, panelHeight)

        // Draw value text
        ctx.fillStyle = $props.colorSelectValue
        const textY = panelY + panelHeight - 5 // Vertical position of the text, adjusted for padding
        ctx.fillText(valueText, panelX, textY)
    }
}

// Draw a circle around the selected price point
drawSelectionCircle(ctx, layout) {
    if (mode === 'select' && $core.cursor.visible) {

        let selectedValue = $core.cursor.values[0][0][1];

        const circleRadius = 8; // Radius of the circle
        const circleStrokeWidth = 2; // Stroke width of the circle
        const circleX = $core.cursor.x;
        const circleY = layout.value2y(selectedValue);

        // Draw circle stroke (back color)
        ctx.strokeStyle = $core.colors.back;
        ctx.lineWidth = circleStrokeWidth;
        ctx.beginPath();
        ctx.arc(circleX, circleY, circleRadius + circleStrokeWidth / 2, 0, 2 * Math.PI);
        ctx.stroke();

        // Draw circle (select color)
        ctx.fillStyle = $props.colorSelect;
        ctx.beginPath();
        ctx.arc(circleX, circleY, circleRadius, 0, 2 * Math.PI);
        ctx.fill();
    }
}

// Precision sampling
preSampler(x) => [x[1]]

// Map data item to OHLC (for candle magnets etc.)
// Here we simulate a candle with 0 height
ohlc(x) => Array(4).fill(x[$props.dataIndex])

// Legend, defined as pairs [value, color]
legend(x) => $props.showName ? [] : null
`,c8=Object.freeze(Object.defineProperty({__proto__:null,default:l8},Symbol.toStringTag,{value:"Module"})),u8=`
// NavyJS ~ 0.2-lite

// <ds>Area chart</ds>, format: [<timestamp>, <value>]

[OVERLAY name=Area, ctx=Canvas, version=1.0.0]

// Define new props
prop('color', { type: 'color', def: '#31ce31' })
prop('lineWidth', { type: 'number', def: 1.25 })
prop('back1', { type: 'color', def: $props.color + '15' })
prop('back2', { type: 'color', def: $props.color + '01' })
prop('dataIndex', { type: 'integer', def: 1 })

draw(ctx) {
   
    const layout = $core.layout
    const data = $core.data // Full dataset
    const view = $core.view // Visible view
    const idx = $props.dataIndex
    const grd = ctx.createLinearGradient(0, 0, 0, layout.height)
    grd.addColorStop(0, $props.back1)
    grd.addColorStop(1, $props.back2)

    // Line
    ctx.lineWidth = $props.lineWidth
    ctx.strokeStyle = $props.color
    ctx.lineJoin = "round"
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[idx])
        ctx.lineTo(x, y)
    }
    ctx.stroke()

    // Area
    ctx.fillStyle = grd
    ctx.beginPath()
    let p0 = (data[0] || [])[0]
    let pN = (data[data.length - 1] || [])[0]
    ctx.lineTo(layout.ti2x(p0, 0), layout.height)
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[idx])
        ctx.lineTo(x, y)
    }
    ctx.lineTo(layout.ti2x(pN, i - 1), layout.height)
    ctx.fill()

}

// Precision sampling
preSampler(x) => [x[$props.dataIndex]]

// Map data item to OHLC (for candle magnets etc.)
// Here we simulate a candle with 0 height
ohlc(x) => Array(4).fill(x[$props.dataIndex])

// Legend, defined as pairs [value, color]
yRange(data) {
    let di = $props.dataIndex
    let len = data.length
    var h, l, high = -Infinity, low = Infinity
    for(var i = 0; i < len; i++) {
        let point = data[i][di]
        if (point > high) high = point
        if (point < low) low = point
    }
    return [high, low]
}

// Legend, defined as pairs [value, color]
legend(x) => [[x[$props.dataIndex], $props.color]]
`,d8=Object.freeze(Object.defineProperty({__proto__:null,default:u8},Symbol.toStringTag,{value:"Module"})),g8=`
// Navy ~ 0.2-lite

// <ds>Stacked arrow trades</ds>
// Format: [<timestamp>, [<dir>, <?label> <?big>], ...]
// <dir> :: 1 for buy -1 for sell
// <?label> :: trade label (null for no label)
// <?big> :: true/false, make an arrow big

[OVERLAY name=ArrowTrades, ctx=Canvas, version=1.0.0]

prop('buyColor', {  type: 'color', def: '#08c65e' })
prop('sellColor', {  type: 'color', def: '#e42633' })
prop('size', {  type: 'number', def: 7 })
prop('showLabels', {  type: 'boolean', def: true })
prop('markerOutline', {  type: 'boolean', def: true })
prop('outlineWidth', {  type: 'number', def: 4 })

// Draw function (called on each update)
// Library provides a lot of useful variables to make
// overlays ($core in the main collection)
draw(ctx) {
    ctx.lineWidth = $props.outlineWidth
    const layout = $core.layout
    const data = $core.data // Full dataset
    const view = $core.view // Visible view

    // Fill sell trades
    ctx.fillStyle = $props.buyColor
    ctx.beginPath()
    let lbls1 = iterTrades(ctx, view, data, layout, -1)
    ctx.fill()

    // Fill buy trades
    ctx.fillStyle = $props.sellColor
    ctx.beginPath()
    let lbls2 = iterTrades(ctx, view, data, layout, 1)
    ctx.fill()

    // Draw labels
    if ($props.showLabels) {
        ctx.fillStyle = $core.colors.textHL
        ctx.font = $core.props.config.FONT
        let all = [...lbls1, ...lbls2]
        drawLabels(ctx, view, layout, all)
    }

}

// Iter through arcs
iterTrades(ctx, view, data, layout, dir) {
    let lables = []
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let ohlc = layout.ohlc(p[0])
        if (!ohlc) continue
        let x = layout.ti2x(p[0], i)
        if (dir > 0) {
            var y = layout.value2y(ohlc[1])
        } else {
            var y = layout.value2y(ohlc[2])
        }
        for (var k = 1; k < p.length; k++) {
            if (Math.sign(p[k][0]) === dir) continue
            let size = $props.size
            if (p[k][2]) size *= 1.5
            let yk = y - dir * (15 * (k - 1) + 10)
            let align = dir < 0 ? 'right' : 'left'
            let dy = p[k][2] ? - dir * 1 : 0
            if (p[k][1]) {
                lables.push([ x + 10 * dir, yk + dy, p[k][1], align])
            }
            drawArrow(ctx, x, yk, -dir, size)
        }
    }
    return lables
}

drawArrow(ctx, x, y, dir, size) {
    ctx.moveTo(x, y)
    ctx.lineTo(x + size * dir * 0.63, y + size * dir)
    ctx.lineTo(x - size * dir * 0.63, y + size * dir)
}

// Draw simple lables
drawLabels(ctx, view, layout, lables) {
    for (var l of lables) {
        ctx.textAlign = l[3]
        let dy = l[3] === 'right' ? 7 : 0
        ctx.fillText(l[2], l[0], l[1] + dy)
    }
}

// Not affecting the y-range
yRange() => null

// Legend formatter, Array of [value, color] pairs
// x represents one data item e.g. [<time>, <value>]
legend(x) {
    let items = []
    for (var i = 1; i < x.length; i++) {
        items.push([
            x[i][1] || (x[i][0] > 0 ? 'Buy' : 'Sell'),
            x[i][0] > 0 ? $props.buyColor : $props.sellColor
        ])
    }
    return items
}
`,f8=Object.freeze(Object.defineProperty({__proto__:null,default:g8},Symbol.toStringTag,{value:"Module"})),h8=`// Navy ~ 0.2-lite

// <ds>Bands indicator, e.g. BollingerBands</ds> 
// format: [<timestamp>, <high>, <mid>, <low>]

[OVERLAY name=Band, ctx=Canvas, verion=1.0.0]

// Overlay props
prop('color', { type: 'Color', def: '#b41d70' })
prop('backColor', { type: 'Color', def: $props.color + '11' })
prop('lineWidth', { type: 'number', def: 1 })
prop('showMid', { type: 'boolean', def: true })

// Draw call
draw(ctx) {
     // Background
    const data = $core.data
    const view = $core.view
    const layout = $core.layout
    ctx.beginPath()
    ctx.fillStyle = $props.backColor
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1] || undefined)
        ctx.lineTo(x, y)
    }
    for (var i = view.i2, i1 = view.i1; i >= i1; i--) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[3] || undefined)
        ctx.lineTo(x, y)
    }
    ctx.fill()
    // Lines
    // TODO: can be faster by combining line
    // into one path with moveTo in b/w
    ctx.lineWidth = $props.lineWidth
    ctx.strokeStyle = $props.color
    // Top line
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1] || undefined)
        ctx.lineTo(x, y)
    }
    ctx.stroke()
    // Bottom line
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[3] || undefined)
        ctx.lineTo(x, y)
    }
    ctx.stroke()
    // Middle line
    if (!$props.showMid) return
    ctx.beginPath()
    for (var i = 0; i < data.length; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[2] || undefined)
        ctx.lineTo(x, y)
    }
    ctx.stroke()
}

// Legend, defined as pairs [value, color]
legend(x) => $props.showMid ? [
    [x[1], $props.color],
    [x[2], $props.color],
    [x[3], $props.color]
] : [
    [x[1], $props.color],
    [x[3], $props.color]
]
`,p8=Object.freeze(Object.defineProperty({__proto__:null,default:h8},Symbol.toStringTag,{value:"Module"})),m8=`
// NavyJS ~ 0.2-lite

// <ds>Standart japanese candles</ds>, format:
// [<timestamp>, <open>, <high>, <low>, <close>, <?volume>]

[OVERLAY name=Candles, ctx=Canvas, version=1.0.0]

// Define the props
prop('colorBodyUp', { type: 'color', def: $core.colors.candleUp })
prop('colorBodyDw', { type: 'color', def: $core.colors.candleDw })
prop('colorWickUp', { type: 'color', def: $core.colors.wickUp })
prop('colorWickDw', { type: 'color', def: $core.colors.wickDw })
prop('colorVolUp', { type: 'color', def: $core.colors.volUp })
prop('colorVolDw', { type: 'color', def: $core.colors.volDw })
prop('showVolume', { type: 'boolean', def: true })
prop('currencySymbol', { type: 'string', def: '$' })
prop('showAvgVolume', { type: 'boolean', def: true })
prop('avgVolumeSMA', { type: 'number', def: 20 })
prop('colorAvgVol', { type: 'color', def: '#1cccb777'})
prop('scaleSymbol', { type: 'string|boolean', def: false })
prop('priceLine', { type: 'boolean', def: true })
prop('showValueTracker', { type: 'boolean', def: true })


// Draw call
draw(ctx) {

    let cnv = $lib.layoutCnv($core, true, $props.showVolume)
    let bodies = cnv.upBodies.length ? cnv.upBodies : cnv.dwBodies
    if (!bodies.length) return
    let w = Math.max(bodies[0].w, 1)

    drawCvPart(ctx, $lib.candleWick, cnv.dwWicks, 1, 'colorWickDw')
    drawCvPart(ctx, $lib.candleWick, cnv.upWicks, 1, 'colorWickUp')
    drawCvPart(ctx, $lib.candleBody, cnv.dwBodies, w, 'colorBodyDw')
    drawCvPart(ctx, $lib.candleBody, cnv.upBodies, w, 'colorBodyUp')
    drawCvPart(ctx, $lib.volumeBar, cnv.dwVolbars, w, 'colorVolDw')
    drawCvPart(ctx, $lib.volumeBar, cnv.upVolbars, w, 'colorVolUp')

    if ($props.showVolume && $props.showAvgVolume) {
        $lib.avgVolume(ctx, $core, $props, cnv)
    }

}

// Draw candle part
drawCvPart(ctx, f, arr, w, color) {
    let layout = $core.layout
    ctx.lineWidth = w
    ctx.strokeStyle = $props[color]
    ctx.beginPath()
    for (var i = 0, n = arr.length; i < n; i++) {
        f(ctx, arr[i], layout)
    }
    ctx.stroke()
}

// Define y-range (by finding max High, min Low)
static yRange(data) {
    let len = data.length
    var h, l, high = -Infinity, low = Infinity
    for(var i = 0; i < len; i++) {
        let point = data[i]
        if (point[2] > high) high = point[2]
        if (point[3] < low) low = point[3]
    }
    return [high, low]
}

// Use [Open, Close] for precision detection
static preSampler(x) => [x[1], x[4]]

// Map data item to OHLC (for candle magnets etc.)
ohlc(x) => [x[1], x[2], x[3], x[4]]

// Price label + Scale symbol + price line
valueTracker(x) => {
    show: $props.showValueTracker,
    symbol: $props.scaleSymbol,
    line: $props.priceLine,
    color: $lib.candleColor($props, $core.data[$core.data.length - 1]),
    value: x[4] // close
}

// Define the OHLCV legend
legendHtml(x, prec, f) {
    let color1 = $core.colors.text
    let v = $core.cursor.getValue($core.paneId, $core.id)
    let sym = $props.currencySymbol
    let color2 = v[4] >= v[1] ?
        $props.colorBodyUp : $props.colorBodyDw
    let fc = $lib.formatCash
    return \`
    <span style="color: \${color2}">
        <span style="margin-left: 3px;"></span>
        <span style="color: \${color1}">O</span>
        <span class="nvjs-ll-value">\${f(x[1])}</span>
        <span style="color: \${color1}">H</span>
        <span class="nvjs-ll-value">\${f(x[2])}</span>
        <span style="color: \${color1}">L</span>
        <span class="nvjs-ll-value">\${f(x[3])}</span>
        <span style="color: \${color1}">C</span>
        <span class="nvjs-ll-value">\${f(x[4])}</span>
    \`
    + ($props.showVolume ? \`
        <span style="color: \${color1}">V</span>
        <span class="nvjs-ll-value">\${sym+fc(x[5])}</span>\` : \`\`)
    + \`</span>\`
    }
`,I8=Object.freeze(Object.defineProperty({__proto__:null,default:m8},Symbol.toStringTag,{value:"Module"})),y8=`
// NavyJS ~ 0.2-lite

// <ds>Colored Candles (Warning: coloring makes it slower)</ds>
// Format: [<timestamp>, <open>, <high>, <low>, <close>, <?volume>, <?color>]
// <?color> :: Candle body color

[OVERLAY name=CandlesPlus, ctx=Canvas, version=1.0.0]

// Define the props
prop('colorBodyUp', { type: 'color', def: $core.colors.candleUp })
prop('colorBodyDw', { type: 'color', def: $core.colors.candleDw })
prop('colorWickUp', { type: 'color', def: $core.colors.wickUp })
prop('colorWickDw', { type: 'color', def: $core.colors.wickDw })
prop('colorVolUp', { type: 'color', def: $core.colors.volUp })
prop('colorVolDw', { type: 'color', def: $core.colors.volDw })
prop('showVolume', { type: 'boolean', def: true })
prop('showWicks', { type: 'boolean', def: true })
prop('currencySymbol', { type: 'string', def: '$' })
prop('showAvgVolume', { type: 'boolean', def: true })
prop('avgVolumeSMA', { type: 'number', def: 20 })
prop('colorAvgVol', { type: 'color', def: '#1cccb777'})
prop('scaleSymbol', { type: 'string|boolean', def: false })
prop('priceLine', { type: 'boolean', def: true })
prop('showValueTracker', { type: 'boolean', def: true })
prop('coloringBodies', { type: 'boolean', def: true })
prop('coloringWicks', { type: 'boolean', def: false })
prop('coloringVolume', { type: 'boolean', def: false })

// Draw call
draw(ctx) {

    let cnv = $lib.layoutCnv($core, true, $props.showVolume)
    let bodies = cnv.upBodies.length ? cnv.upBodies : cnv.dwBodies
    if (!bodies.length) return
    let w = Math.max(bodies[0].w, 1)
    let sw = $props.showWicks
    let cb = $props.coloringBodies
    let cw = $props.coloringWicks
    let cv = $props.coloringVolume

    if (sw) {
        drawCvPart(ctx, $lib.candleWick, cnv.dwWicks, 1, 'colorWickDw', cw)
        drawCvPart(ctx, $lib.candleWick, cnv.upWicks, 1, 'colorWickUp', cw)
    }
    drawCvPart(ctx, $lib.candleBody, cnv.dwBodies, w, 'colorBodyDw', cb)
    drawCvPart(ctx, $lib.candleBody, cnv.upBodies, w, 'colorBodyUp', cb)
    drawCvPart(ctx, $lib.volumeBar, cnv.dwVolbars, w, 'colorVolDw', cv)
    drawCvPart(ctx, $lib.volumeBar, cnv.upVolbars, w, 'colorVolUp', cv)

    if ($props.showVolume && $props.showAvgVolume) {
        $lib.avgVolume(ctx, $core, $props, cnv)
    }

}

// Draw candle part
drawCvPart(ctx, f, arr, w, color, coloring = false) {
    let layout = $core.layout
    let prevColor = null
    ctx.lineWidth = w
    ctx.strokeStyle = $props[color]
    ctx.beginPath()
    for (var i = 0, n = arr.length; i < n; i++) {
        if (coloring) {
            var c = arr[i].src[6]
            if (c) {
                if (c !== prevColor) {
                    ctx.stroke()
                    ctx.beginPath()
                }
                ctx.strokeStyle = c
            } else if (prevColor !== $props[color]) {
                ctx.stroke()
                ctx.beginPath()
                ctx.strokeStyle = $props[color]
                prevColor = $props[color]
            }
            prevColor = c
        }
        f(ctx, arr[i], layout)
    }
    ctx.stroke()
}

// Define y-range (by finding max High, min Low)
static yRange(data) {
    let len = data.length
    var h, l, high = -Infinity, low = Infinity
    for(var i = 0; i < len; i++) {
        let point = data[i]
        if (point[2] > high) high = point[2]
        if (point[3] < low) low = point[3]
    }
    return [high, low]
}

// Use [Open, Close] for precision detection
static preSampler(x) => [x[1], x[4]]

// Map data item to OHLC (for candle magnets etc.)
ohlc(x) => [x[1], x[2], x[3], x[4]]

// Price label + Scale symbol + price line
valueTracker(x) => {
    show: $props.showValueTracker,
    symbol: $props.scaleSymbol,
    line: $props.priceLine,
    color: $lib.candleColor($props, $core.data[$core.data.length - 1]),
    value: x[4] // close
}

// Define the OHLCV legend
legendHtml(x, prec, f) {
    let color1 = $core.colors.text
    let v = $core.cursor.getValue($core.paneId, $core.id)
    let sym = $props.currencySymbol
    let color2 = v[4] >= v[1] ?
        $props.colorBodyUp : $props.colorBodyDw
    if ($props.coloringBodies && x[6]) {
        color2 = x[6]
    }
    let fc = $lib.formatCash
    return \`
    <span style="color: \${color2}">
        <span style="margin-left: 3px;"></span>
        <span style="color: \${color1}">O</span>
        <span class="nvjs-ll-value">\${f(x[1])}</span>
        <span style="color: \${color1}">H</span>
        <span class="nvjs-ll-value">\${f(x[2])}</span>
        <span style="color: \${color1}">L</span>
        <span class="nvjs-ll-value">\${f(x[3])}</span>
        <span style="color: \${color1}">C</span>
        <span class="nvjs-ll-value">\${f(x[4])}</span>
    \`
    + ($props.showVolume ? \`
        <span style="color: \${color1}">V</span>
        <span class="nvjs-ll-value">\${sym+fc(x[5])}</span>\` : \`\`)
    + \`</span>\`
    }
`,C8=Object.freeze(Object.defineProperty({__proto__:null,default:y8},Symbol.toStringTag,{value:"Module"})),v8=`// Navy ~ 0.2-lite

// <ds>Cloud</ds>, format [<timestamp>, <line1>, <line2>]
[OVERLAY name=Cloud, ctx=Canvas, verion=0.1.0]

// Overlay props
prop('color1', { type: 'color', def: '#55d7b0aa' })
prop('color2', { type: 'color', def: '#d94d64aa' })
prop('back1', { type: 'color', def: '#79ffde22' })
prop('back2', { type: 'color', def: '#ff246c22' })
prop('drawLines', { type: 'boolean', def: false })

// Draw call
// TODO: speed-up (draw segment with the same color together)
draw(ctx) {

    const layout = $core.layout
    const data = $core.data
    const view = $core.view

    ctx.lineWidth = 1

    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p1 = map(layout, data[i], i)
        let p2 = map(layout, data[i+1], i+1)

        if (!p2) continue
        if (p1.y1 !== p1.y1) continue // Fix NaN

         // Background
        ctx.beginPath()
        ctx.fillStyle =  p1.y1 < p1.y2 ? $props.back1 : $props.back2
        ctx.moveTo(p1.x, p1.y1)
        ctx.lineTo(p2.x + 0.1, p2.y1)
        ctx.lineTo(p2.x + 0.1, p2.y2)
        ctx.lineTo(p1.x, p1.y2)
        ctx.fill()
        // Lines
        if (!$props.drawLines) continue
        ctx.beginPath()
        ctx.strokeStyle = $props.color1
        ctx.moveTo(p1.x, p1.y1)
        ctx.lineTo(p2.x, p2.y1)
        ctx.stroke()
        ctx.beginPath()
        ctx.strokeStyle = $props.color2
        ctx.moveTo(p1.x, p1.y2)
        ctx.lineTo(p2.x, p2.y2)
        ctx.stroke()
    }
}

map(layout, p, i) {
    return p && {
        x:  layout.ti2x(p[0], i),
        y1: layout.value2y(p[1]),
        y2: layout.value2y(p[2])
    }
}

// Legend, defined as pairs [value, color]
legend(x) => [[x[1], $props.color1], [x[2], $props.color2]]
`,b8=Object.freeze(Object.defineProperty({__proto__:null,default:v8},Symbol.toStringTag,{value:"Module"})),x8=`// Navy ~ 0.2-lite

// <ds>Colored histogram, can be used for MACD</ds>
// Format: [<timestamp>, <hist>, <?value>, <?signal>]
// <hist> :: histogram value (e.g. MACD bars)
// <?value> :: value of the first line (e.g. MACD value)
// <?signal> :: value of the second line (e.g. MACD signal)

[OVERLAY name=Histogram, ctx=Canvas, verion=1.0.1]
// "#35a776", "#79e0b3", "#e54150", "#ea969e"
// Overlay props
prop('barWidth', { type: 'number', def: 4 })
prop('lineWidth', { type: 'number', def: 1 })
prop('colorUp', { type: 'Color', def: '#35a776' })
prop('colorDw', { type: 'Color', def: '#e54150' })
prop('colorSemiUp', { type: 'Color', def: '#79e0b3' })
prop('colorSemiDw', { type: 'Color', def: '#ea969e' })
prop('colorValue', { type: 'Color', def: '#3782f2' })
prop('colorSignal', { type: 'Color', def: '#f48709' })

// Draw call
draw(ctx) {

    const layout = $core.layout
    const view = $core.view

    let groups = splitBars(view, layout, view.src)

    ctx.lineWidth = detectBarWidth(view, layout, view.src)

    // Semi-down

    ctx.strokeStyle = $props.colorSemiDw
    drawBars(ctx, layout, groups.semiDw)

    // Semi-up
    ctx.strokeStyle = $props.colorSemiUp
    drawBars(ctx, layout, groups.semiUp)

    // Down
    ctx.strokeStyle = $props.colorDw
    drawBars(ctx, layout, groups.dw)

    // Up
    ctx.strokeStyle = $props.colorUp
    drawBars(ctx, layout, groups.up)

    // Drawing the lines
    ctx.lineWidth = $props.lineWidth
    ctx.lineJoin = "round"

    ctx.strokeStyle = $props.colorValue
    drawSpline(ctx, view, layout, 2)

    ctx.strokeStyle = $props.colorSignal
    drawSpline(ctx, view, layout, 3)

}

detectBarWidth(view, layout, data) {
    if (!data[view.i2 - 1]) return 0
    let p1 = layout.ti2x(data[view.i2 - 1][0], view.i2 - 1)
    let p2 = layout.ti2x(data[view.i2][0], view.i2)
    if ((p2 - p1) < 1) {
        return 1
    } else {
        return $props.barWidth
    }
}

splitBars(view, layout, data) {
    const off = $props.barWidth % 2 ? 0 : 0.5
    let semiDw = []
    let semiUp = []
    let dw = []
    let up = []
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let prev = data[i - 1]
        let p = data[i]
        let x = layout.ti2x(p[0], i) - off
        let y = layout.value2y(p[1]) - 0.5
        let bar = {x, y}
        if (p[1] >= 0) {
            var color = 0
            if (prev && p[1] < prev[1]) color = 1
        } else {
            var color = 2
            if (prev && p[1] > prev[1]) color = 3
        }
        switch(color) {
            case 0:
                up.push(bar)
                break
            case 1:
                semiUp.push(bar)
                break
            case 2:
                dw.push(bar)
                break
            case 3:
                semiDw.push(bar)
                break
        }
    }
    return { semiDw, semiUp, dw, up }
}

drawBars(ctx, layout, group) {
    const data = $core.data
    const base = layout.value2y(0) + 0.5
    ctx.beginPath()
    for (var bar of group) {
        ctx.moveTo(bar.x, base)
        ctx.lineTo(bar.x, bar.y)
    }
    ctx.stroke()
}

drawSpline(ctx, view, layout, idx) {
    ctx.beginPath()
    const data = view.src
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[idx])
        ctx.lineTo(x, y)
    }
    ctx.stroke()
}

// Legend, defined as pairs [value, color]
// TODO: colorize the hist point
legend(x) => [
    [x[1], $props.color],
    [x[2], $props.colorValue],
    [x[3], $props.colorSignal]
]
`,A8=Object.freeze(Object.defineProperty({__proto__:null,default:x8},Symbol.toStringTag,{value:"Module"})),w8=`// Navy ~ 0.2-lite

// <ds>Price labels that stick to candles</ds>
// Format: [<timestamp>, <LabelObject>]
// <LabelObject> {
//   text :: string, text of the label
//   dir :: direction, 1 = points up, -1 = points down
//   pin :: "open" | "high" | "low" | "close"
//   ?color :: color, text color
//   ?back :: color, background
//   ?stroke :: stroke color
//   ?offset, px, offest from the pin
// }

[OVERLAY name=PriceLabels, ctx=Canvas, verion=1.0.0]

// Overlay props
prop('color', { type: 'Color', def: $core.colors.text })
prop('back', { type: 'Color', def: $core.colors.back })
prop('stroke', { type: 'Color', def: $core.colors.scale })
prop('borderRadius', { type: 'number', def: 3 })
prop('offset', { type: 'number', def: 5 })

const PINMAP = {
    open: 0,
    high: 1,
    low: 2,
    close: 3
}

// Draw call
draw(ctx) {
    const layout = $core.layout
    const view = $core.view
    const data = $core.data

    ctx.font = $core.props.config.FONT

    let items = calcItems(ctx, layout, view, data)

    // Draw items
    ctx.lineWidth = 1
    ctx.textAlign = 'center'
    for (var item of items) {
        let off = (item.o ?? $props.offset) * item.dir
        let dy = (item.dir > 0 ? 19 : -11)
        item.y += off
        ctx.strokeStyle = item.s || $props.stroke
        ctx.fillStyle = item.b || $props.back
        ctx.beginPath()
        drawBody(ctx, item)
        ctx.stroke()
        ctx.fill()
        ctx.fillStyle = item.c || $props.color
        ctx.fillText(item.text, item.x, item.y + dy)
    }
}

calcItems(ctx, layout, view, data) {

    let items = []
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let specs = p[1]
        let ohlc = layout.ohlc(p[0])
        if (!ohlc) continue
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(ohlc[PINMAP[specs.pin]])
        let w = ctx.measureText(specs.text).width
        let h = 20
        let dir = specs.dir
        items.push({
            x, y, w, h, dir,
            c: specs.color,
            b: specs.back,
            s: specs.stroke,
            o: specs.offset,
            text: specs.text})
    }
    return items
}

drawBody(ctx, item) {
    let r = $props.borderRadius
    let hw = item.w // half width
    let d = - item.dir
    let x = item.x
    let y = item.y
    ctx.moveTo(x, y)
    ctx.lineTo(x + 5, y - 5 * d)
    ctx.lineTo(x + hw - r, y - 5 * d)
    ctx.quadraticCurveTo(x + hw, y - 5 * d, x + hw, y - (5 + r) * d)
    ctx.lineTo(x + hw, y - (5 + item.h - r) * d)
    ctx.quadraticCurveTo(x + hw, y - (5 + item.h) * d, x + hw - r, y - (5 + item.h) * d)
    ctx.lineTo(x - hw + r, y - (5 + item.h) * d)
    ctx.quadraticCurveTo(x - hw, y - (5 + item.h) * d, x - hw, y - (5 + item.h - r) * d)
    ctx.lineTo(x - hw, y - (5 + r) * d)
    ctx.quadraticCurveTo(x - hw, y - 5 * d, x - hw + r, y - 5 * d)
    ctx.lineTo(x - 5, y - 5 * d)
    ctx.lineTo(x, y)
}

// Legend, defined as pairs [value, color]
legend(x) => [[x[1].text, x[1].color || $props.color]]
`,S8=Object.freeze(Object.defineProperty({__proto__:null,default:w8},Symbol.toStringTag,{value:"Module"})),k8=`// Navy ~ 0.2-lite

// <ds>Ranging indicator, e.g. RSI</ds>
// Format: [<timestamp>, <value>]

[OVERLAY name=Range, ctx=Canvas, verion=1.0.1]

// Overlay props
prop('color', { type: 'Color', def: '#ec206e' })
prop('backColor', { type: 'Color', def: '#381e9c16' })
prop('bandColor', { type: 'Color', def: '#535559' })
prop('lineWidth', { type: 'number', def: 1 })
prop('upperBand', { type: 'number', def: 70 })
prop('lowerBand', { type: 'number', def: 30 })

// Draw call
draw(ctx) {
    const layout = $core.layout
    const upper = layout.value2y($props.upperBand)
    const lower = layout.value2y($props.lowerBand)
    const data = $core.data
    const view = $core.view
    // RSI values
    ctx.lineWidth = $props.lineWidth
    ctx.lineJoin = "round"
    ctx.strokeStyle = $props.color
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1])
        ctx.lineTo(x, y)
    }
    ctx.stroke()
    ctx.strokeStyle = $props.bandColor
    ctx.setLineDash([5]) // Will be removed after draw()
    ctx.beginPath()
    // Fill the area between the bands
    ctx.fillStyle = $props.backColor
    ctx.fillRect(0, upper, layout.width, lower - upper)
    // Upper band
    ctx.moveTo(0, upper)
    ctx.lineTo(layout.width, upper)
    // Lower band
    ctx.moveTo(0, lower)
    ctx.lineTo(layout.width, lower)
    ctx.stroke()
}

yRange(data, hi, lo) => [
    Math.max(hi, $props.upperBand),
    Math.min(lo, $props.lowerBand)
]

// Legend, defined as pairs [value, color]
legend(x) => [[x[1], $props.color]]
`,B8=Object.freeze(Object.defineProperty({__proto__:null,default:k8},Symbol.toStringTag,{value:"Module"})),N8=`// Navy ~ 0.2-lite

// <ds>Sparse data: points, squares, crosses, triangles</ds>
// Format: [<timestamp>, <value>, <?direction>]
// <value> :: Price/value
// <?direction> :: Triangle direction: 1 | -1

[OVERLAY name=Sparse, ctx=Canvas, verion=1.0.0]

// Overlay props
prop('color', { type: 'Color', def: '#898989' })
prop('size', { type: 'number', def: 3 })
prop('shape', {
    type: 'string',
    def: 'point',
    options: ['point', 'square', 'cross', 'triangle']
})

// Draw call
draw(ctx) {
    const layout = $core.layout
    const view = $core.view

    ctx.fillStyle = $props.color
    ctx.strokeStyle = $props.color

    switch($props.shape) {
        case 'point':
            drawArcs(ctx, view, layout)
        break
        case 'square':
            drawSquares(ctx, view, layout)
        break
        case 'cross':
            drawCrosses(ctx, view, layout)
        break
        case 'triangle':
            drawTriandles(ctx, view, layout)
        break
    }
}

drawArcs(ctx, view, layout) {
    const radius = $props.size
    const data = view.src
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1])
        ctx.moveTo(x+radius, y)
        ctx.arc(x, y, radius, 0, Math.PI * 2, false)
    }
    ctx.fill()
}

drawSquares(ctx, view, layout) {
    const half = $props.size
    const side = half * 2
    const data = view.src
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1])
        ctx.moveTo(x-half, y-half)
        ctx.lineTo(x+half, y-half)
        ctx.lineTo(x+half, y+half)
        ctx.lineTo(x-half, y+half)
    }
    ctx.fill()
}

drawCrosses(ctx, view, layout) {
    const half = $props.size
    const side = half * 2
    const data = view.src
    ctx.lineWidth = Math.max(half - 1, 1)
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1])
        ctx.moveTo(x-half, y)
        ctx.lineTo(x+half, y)
        ctx.moveTo(x, y-half)
        ctx.lineTo(x, y+half)
    }
    ctx.stroke()
}

drawTriandles(ctx, view, layout) {
    const half = $props.size
    const side = half * 2
    const data = view.src
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1])
        let dir = p[2] ?? 1
        ctx.moveTo(x, y)
        ctx.lineTo(x + side * dir * 0.63, y + side * dir)
        ctx.lineTo(x - side * dir * 0.63, y + side * dir)
    }
    ctx.fill()
}

static yRange(data) {
    let len = data.length
    var h, l, high = -Infinity, low = Infinity
    for(var i = 0; i < len; i++) {
        let point = data[i][1]
        if (point > high) high = point
        if (point < low) low = point
    }
    return [high, low]
}

static preSampler(x) => [x[1]]

// Legend, defined as pairs [value, color]
legend(x) => [[Math.random(), $props.color]]
`,j8=Object.freeze(Object.defineProperty({__proto__:null,default:N8},Symbol.toStringTag,{value:"Module"})),T8=`
// NavyJS ~ 0.2-lite

// <ds>Single spline</ds>
// Format: [<timestamp>, <number>]

[OVERLAY name=Spline, ctx=Canvas, version=1.1.0]

// Define new props
prop('color', { type: 'color', def: '#31ce31' })
prop('lineWidth', { type: 'number', def: 1 })
prop('dataIndex', { type: 'integer', def: 1 })


draw(ctx) {
    ctx.lineWidth = $props.lineWidth
    ctx.lineJoin = "round"
    ctx.strokeStyle = $props.color
    ctx.beginPath()
    const layout = $core.layout
    const data = $core.data // Full dataset
    const view = $core.view // Visible view
    const idx = $props.dataIndex
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[idx])
        ctx.lineTo(x, y)
    }
    ctx.stroke()
}

// Price label + Scale symbol + price line
/*valueTracker(x) => {
    show: true,
    symbol: $core.src.name,
    line: true,
    color: $props.color,
    value: x[$props.dataIndex]
}*/

preSampler(x) => [x[$props.dataIndex]]

// Map data item to OHLC (for candle magnets etc.)
// Here we simulate a candle with 0 height
ohlc(x) => Array(4).fill(x[$props.dataIndex])

yRange(data) {
    let di = $props.dataIndex
    let len = data.length
    var h, l, high = -Infinity, low = Infinity
    for(var i = 0; i < len; i++) {
        let point = data[i][di]
        if (point > high) high = point
        if (point < low) low = point
    }
    return [high, low]
}

// Legend, defined as pairs [value, color]
legend(x) => [[x[$props.dataIndex], $props.color]]
`,E8=Object.freeze(Object.defineProperty({__proto__:null,default:T8},Symbol.toStringTag,{value:"Module"})),R8=`
// NavyJS ~ 0.2-lite

// <ds>Multiple splines</ds> 
// Format: [<timestamp>, <line1>, <line2>, ...]

[OVERLAY name=Splines, ctx=Canvas, version=1.0.0]

prop('lineWidth', { type: 'number', def: 1 })
prop('widths', { type: 'Array', def: [] })
prop('colors', { type: 'Array', def: [] })
prop('skipNan', { type: 'boolean', def: false })

const COLORS = $props.colors.length ? $props.colors : [
    '#53c153', '#d1c045', '#d37734', '#d63953', '#c43cb9',
    '#6c3cc4', '#444bc9', '#44c2c9', '#44c98d'
]
draw(ctx) {

    let num = ($core.data[0] || []).length ?? 0
    for (var i = 0; i < num; i++) {
        let _i = i % COLORS.length
        ctx.strokeStyle = COLORS[_i]
        ctx.lineJoin = "round"
        ctx.lineWidth = $props.widths[i] || $props.lineWidth
        ctx.beginPath()
        drawSpline(ctx, i)
        ctx.stroke()
    }

}

drawSpline(ctx, idx) {
    const layout = $core.layout
    const data = $core.data
    const view = $core.view
    if (!this.skipNan) {
        for (var i = view.i1, n = view.i2; i <= n; i++) {
            let p = data[i]
            let x = layout.ti2x(p[0], i)
            let y = layout.value2y(p[idx + 1])
            ctx.lineTo(x, y)
        }
    } else {
        var skip = false
        for (var i = view.i1, n = view.i2; i <= n; i++) {
            let p = data[i]
            let x = layout.ti2x(p[0], i)
            let y = layout.value2y(p[idx + 1])
            if (p[idx + 1] == null || y !== y) {
                skip = true
            } else {
                if (skip) ctx.moveTo(x, y)
                ctx.lineTo(x, y)
                skip = false
            }
        }
    }
}

// Legend, defined as pairs [value, color]
legend(x) => x.slice(1) // remove time
    .map((v, i) => [ // map value => color
        v, COLORS[i % COLORS.length]
    ])
`,O8=Object.freeze(Object.defineProperty({__proto__:null,default:R8},Symbol.toStringTag,{value:"Module"})),G8=`// Navy ~ 0.2-lite

// <ds>Two bands: above and below the price (like LuxAlgo Reverse Zones)</ds>
// Format: [<timestamp>, <high1>, <mid1>, <low1>, <high2>, <mid2>, <low2>]
/*
--- <high1> ---
--- <mid1> ---
--- <low1> ---
~~~ price ~~~
--- <high2> ---
--- <mid2> ---
--- <low2> ---
*/

[OVERLAY name=SuperBands, ctx=Canvas, verion=1.0.0]

// Overlay props
prop('color1', { type: 'color', def: '#d80d3848' })
prop('color1dark', { type: 'color', def: '#d80d3824' })
prop('color2', { type: 'color', def: '#1edbbe33' })
prop('color2dark', { type: 'color', def: '#1edbbe15' })

// Draw call
draw(ctx) {
    const view = $core.view
    const layout = $core.layout

    ctx.fillStyle = $props.color1
    drawBand(ctx, layout, view, 1, 2)

    ctx.fillStyle = $props.color1dark
    drawBand(ctx, layout, view, 2, 3)

    ctx.fillStyle = $props.color2dark
    drawBand(ctx, layout, view, 4, 5)

    ctx.fillStyle = $props.color2
    drawBand(ctx, layout, view, 5, 6)

}


drawBand(ctx, layout, view, i1, i2) {
    let data = $core.view.src
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[i1] || undefined)
        ctx.lineTo(x, y)
    }
    for (var i = view.i2, i1 = view.i1; i >= i1; i--) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[i2] || undefined)
        ctx.lineTo(x, y)
    }
    ctx.fill()
}

// Legend, defined as pairs [value, color]
legend(x) => [
    [x[1], $props.color1], [x[2], $props.color1], [x[3], $props.color1],
    [x[4], $props.color2], [x[5], $props.color2], [x[6], $props.color2]
]
`,P8=Object.freeze(Object.defineProperty({__proto__:null,default:G8},Symbol.toStringTag,{value:"Module"})),_8=`
// Navy ~ 0.2-lite

// <ds>Simple trades</ds>
// Format: [<timestamp>, <dir>, <price>, <?label>]
// <dir> :: 1 for buy -1 for sell
// <price> :: trade price
// <?label> :: trade label
[OVERLAY name=Trades, ctx=Canvas, version=1.0.0]

prop('buyColor', {  type: 'color', def: '#08b2c6' })
prop('sellColor', {  type: 'color', def: '#e42633' })
prop('radius', {  type: 'number', def: 4 })
prop('showLabels', {  type: 'boolean', def: true })
prop('markerOutline', {  type: 'boolean', def: true })
prop('outlineWidth', {  type: 'number', def: 4 })

// Draw function (called on each update)
// Library provides a lot of useful variables to make
// overlays ($core in the main collection)
draw(ctx) {
    ctx.lineWidth = $props.outlineWidth
    const layout = $core.layout
    const data = $core.data // Full dataset
    const view = $core.view // Visible view

    // Outline
    if ($props.markerOutline) {
        ctx.strokeStyle = $core.colors.back
        ctx.beginPath()
        iterArcs(ctx, view, data, layout)
        ctx.stroke()
    }

    // Fill sell trades
    ctx.fillStyle = $props.buyColor
    ctx.beginPath()
    iterArcs(ctx, view, data, layout, -1)
    ctx.fill()

    // Fill buy trades
    ctx.fillStyle = $props.sellColor
    ctx.beginPath()
    iterArcs(ctx, view, data, layout, 1)
    ctx.fill()

    // Draw labels
    if ($props.showLabels) {
        ctx.fillStyle = $core.colors.textHL
        ctx.font = $core.props.config.FONT
        ctx.textAlign = 'center'
        drawLabels(ctx, view, data, layout)
    }

}

// Iter through arcs
iterArcs(ctx, view, data, layout, dir) {
    const radius = $props.radius
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        if (Math.sign(p[1]) === dir) continue
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[2])
        ctx.moveTo(x+radius, y)
        ctx.arc(x, y, radius, 0, Math.PI * 2, false)
    }
}

// Draw simple lables
drawLabels(ctx, view, data, layout) {
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[2])
        ctx.fillText(p[3], x, y - 25)
    }
}

// Sample data point with index 2
static preSampler(x) => x[2]

// Not affecting the y-range
static yRange() => null

// Legend formatter, Array of [value, color] pairs
// x represents one data item e.g. [<time>, <value>]
legend(x) {
    if (x[1] > 0) {
        return [
            ['Buy', $props.buyColor],
            [x[2], $core.colors.text],
            [x[3]]
        ]
    } else {
        return [
            ['Sell', $props.sellColor],
            [x[2], $core.colors.text],
            [x[3]]
        ]
    }
}
`,M8=Object.freeze(Object.defineProperty({__proto__:null,default:_8},Symbol.toStringTag,{value:"Module"})),Z8=`// Navy ~ 0.2-lite

// <ds>Regular volume</ds> 
// Format: [<timestamp>, <volume>, <direction>]
// <direction> :: 1 for green volume, - 1 for red volume

[OVERLAY name=Volume, ctx=Canvas, verion=1.0.0]

// Overlay props
prop('colorVolUp', { type: 'color', def: '#41a37682' })
prop('colorVolDw', { type: 'color', def: '#de464682' })
prop('barsHeight', { type: 'number', def: 0.15, step: 0.1 })
prop('currencySymbol', { type: 'string', def: '$' })
prop('showAvgVolume', { type: 'boolean', def: true })
prop('avgVolumeSMA', { type: 'number', def: 20 })
prop('colorAvgVol', { type: 'color', def: '#17e2bb99'})

// Draw call
draw(ctx) {

    let height = $core.id === 0 ? 0.8 : $props.barsHeight
    let cnv = $lib.layoutCnv($core, false, true, 1, 2, height)
    let bars = cnv.upVolbars.length ? cnv.upVolbars : cnv.dwVolbars
    if (!bars.length) return

    drawCvPart(ctx, $lib.volumeBar, cnv.dwVolbars, 'colorVolDw')
    drawCvPart(ctx, $lib.volumeBar, cnv.upVolbars, 'colorVolUp')

    if ($props.showAvgVolume) $lib.avgVolume(ctx, $core, $props, cnv, 1)
}

// Draw candle part
drawCvPart(ctx, f, arr, color) {
    let layout = $core.layout
    ctx.strokeStyle = $props[color]
    ctx.beginPath()
    for (var i = 0, n = arr.length; i < n; i++) {
        f(ctx, arr[i], layout)
    }
    ctx.stroke()
}

// Custom y-range
yRange(data, hi, lo) {
    // Remove this overlay for yRange calculation
    // if it's not the main overlay of the pane
    if ($core.id !== 0) {
        return null
    } else {
        return [hi, lo, false]
    }
}

// Legend, defined as pairs [value, color]
legend(x) {
    let v = $core.cursor.getValue($core.paneId, $core.id)
    let sym = $props.currencySymbol
    let color = v[2] > 0 ?
        $props.colorVolUp : $props.colorVolDw
    let fc = $lib.formatCash
    return [[sym + fc(x[1]), color.slice(0, 7)]]
}
`,H8=Object.freeze(Object.defineProperty({__proto__:null,default:Z8},Symbol.toStringTag,{value:"Module"})),L8=`// Navy ~ 0.2-lite

// <ds>Volume bars with delta ( = buyVol - sellVol)</ds>
// Format: [<timestamp>, <buyVol>, <sellVol>, <total>, <delta>]

[OVERLAY name=VolumeDelta, ctx=Canvas, verion=1.0.0]

// Overlay props
prop('colorVolUp', { type: 'color', def: '#41a37682' })
prop('colorVolDw', { type: 'color', def: '#de464682' })
prop('colorVolDeltaUp', { type: 'color', def: '#41a376' })
prop('colorVolDeltaDw', { type: 'color', def: '#de4646' })
prop('barsHeight', { type: 'number', def: 0.15, step: 0.1 })

// Draw call
draw(ctx) {

    let height = $core.id === 0 ? 0.8 : $props.barsHeight
    let cnv = $lib.layoutCnv($core, false, true, 1, 4, height)
    let bars = cnv.upVolbars.length ? cnv.upVolbars : cnv.dwVolbars
    if (!bars.length) return

    drawCvPart(ctx, $lib.volumeBar, cnv.dwVolbars, 'colorVolDw')
    drawCvPart(ctx, $lib.volumeBar, cnv.upVolbars, 'colorVolUp')

    let dwDelta = makeDelta(cnv.dwVolbars)
    let upDelta = makeDelta(cnv.upVolbars)

    drawCvPart(ctx, $lib.volumeBar, dwDelta, 'colorVolDeltaDw')
    drawCvPart(ctx, $lib.volumeBar, upDelta, 'colorVolDeltaUp')

}

// Draw candle part
drawCvPart(ctx, f, arr, color) {
    let layout = $core.layout
    ctx.strokeStyle = $props[color]
    ctx.beginPath()
    for (var i = 0, n = arr.length; i < n; i++) {
        f(ctx, arr[i], layout)
    }
    ctx.stroke()
}

makeDelta(bars) {
    let delta = []
    for (var bar of bars) {
        let src = bar.src
        let k = Math.abs(src[4]) / src[3]
        bar.h =  bar.h * k
        delta.push(bar)
    }
    return delta
}

// Custom y-range
yRange(data, hi, lo) {
    // Remove this overlay for yRange calculation
    // if it's not the main overlay of the pane
    if ($core.id !== 0) {
        return null
    } else {
        return [hi, lo, false]
    }
}

// Legend, defined as pairs [value, color]
legendHtml(x) {
    let v = $core.cursor.getValue($core.paneId, $core.id)
    let sym = $props.currencySymbol
    let color1 = $core.colors.text
    let color2 = v[4] > 0 ?
        $props.colorVolDeltaUp : $props.colorVolDeltaDw
    let fc = $lib.formatCash
    let sign = v[4] > 0 ? '+' : ''
    return \`
    <span style="color: \${color2}">
        <span style="margin-left: 3px;"></span>
        <span style="color: \${color1}">B</span>
        <span class="nvjs-ll-value">\${fc(x[1])}</span>
        <span style="color: \${color1}">S</span>
        <span class="nvjs-ll-value">\${fc(x[2])}</span>
        <span style="color: \${color1}"></span>
        <span class="nvjs-ll-value">\${fc(x[3])}</span>
        <span style="color: \${color1}"></span>
        <span class="nvjs-ll-value">\${sign}\${fc(x[4])}</span>
    \`
    //return [[sym + fc(x[1]), color.slice(0, 7)]]
}
`,W8=Object.freeze(Object.defineProperty({__proto__:null,default:L8},Symbol.toStringTag,{value:"Module"})),D8=`// Navy ~ 0.1-lite
// <ds>Time & value measurment tool [Shift+Click]</ds>

[OVERLAY name=RangeTool, ctx=Canvas, verion=1.0.1, author=GPT4]

let pin1 = null 
let pin2 = null 
let shift = false
let state = 'idle'

draw(ctx) {
    const layout = $core.layout 

    if (pin1 && pin2) {
        const x1 = layout.time2x(pin1.t) // time to x coordinate
        const x2 = layout.time2x(pin2.t) // time to x coordinate
        const y1 = layout.value2y(pin1.v) // value to y coordinate
        const y2 = layout.value2y(pin2.v) // value to y coordinate

         // change fill color based on percentage
        let color = percent() >= 0 ? '#3355ff' : '#ff3333';
        ctx.fillStyle = color + '33';
        ctx.fillRect(x1, y1, x2 - x1, y2 - y1)

        // draw arrows in the middle of rectangle
        let midX = (x1 + x2) / 2;
        let midY = (y1 + y2) / 2;
        $lib.drawArrow(ctx, midX, y1, midX, y2, color, Math.abs(y2 - y1) > 42); 
        $lib.drawArrow(ctx, x1, midY, x2, midY, color, Math.abs(x2 - x1) > 42);  

        // draw rounded rectangle with text
        const text1 = \`\${deltaValue().toFixed(2)} (\${percent().toFixed(2)}%)\`;
        const text2 = \`\${bars()} bars, \${timeText()}\`;
        const text = \`\${text1}\\n\${text2}\`;
        const textWidth = ctx.measureText(text).width;
        
        const padding = 10;
        const mainRectCenterX = (x1 + x2) / 2; // calculate center of the main rectangle
        const roundRectX = mainRectCenterX - textWidth / 2 - padding; // center the text rectangle relative to the main rectangle
        const roundRectWidth = textWidth + 2 * padding;
        const roundRectHeight = 50;  // adjust as needed
        const roundRectY = percent() > 0 ? Math.min(y1, y2) - roundRectHeight - padding : Math.max(y1, y2) + padding;
        const roundRectRadius = 5;   // adjust as needed
        ctx.fillStyle = color + 'cc';
        $lib.roundRect(ctx, roundRectX, roundRectY, roundRectWidth, roundRectHeight, roundRectRadius);

        // draw text
        ctx.fillStyle = '#ffffffcc' // color;
        ctx.font = $lib.rescaleFont($core.props.config.FONT, 14);
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(text1, roundRectX + roundRectWidth / 2, roundRectY + roundRectHeight / 4);
        ctx.fillText(text2, roundRectX + roundRectWidth / 2, roundRectY + 3 * roundRectHeight / 4);
      
    }
}

// Calculate the percentage of the are between pins v-values
// assuming that pin2 is above pin1 equals positive value
// and negative otherwise
percent() {
    if (pin1 && pin2) {
        let delta = pin2.v - pin1.v;
        return (delta / pin1.v) * 100;
    }
    return 0;
}

// Calculate delta time between pins t-values
// assuming that pin2 on the right of pin1 equals positive value
// and negative otherwise
deltaTime() {
    if (pin1 && pin2) {
        return pin2.t - pin1.t
    }
    return 0
}

// Calculate delta value between pins v-values
// assuming that pin2 is above pin1 equals positive value
// and negative otherwise
deltaValue() {
    if (pin1 && pin2) {
        return pin2.v - pin1.v
    }
    return 0
}

// Delta time in bars
bars() {
    let data = $core.hub.mainOv.dataSubset
    if (pin1 && pin2) {
        const layout = $core.layout
        const bars = data.filter(bar => {
            return bar[0] >= Math.min(pin1.t, pin2.t) && bar[0] <= Math.max(pin1.t, pin2.t)
        });
        let count = bars.length - 1; // reduce the count by 1
        return pin2.t < pin1.t ? -count : count; // make it negative if pin2.t < pin1.t
    }
    return 0
}

// Delta time in text format
timeText() {
    let deltaTimeMs = deltaTime();  // returns delta time in milliseconds
    let timeFrameMs = $core.props.timeFrame;  // returns current chart timeframe in milliseconds

    let negative = deltaTimeMs < 0;
    deltaTimeMs = Math.abs(deltaTimeMs);

    let minutes = Math.floor((deltaTimeMs / (1000 * 60)) % 60);
    let hours = Math.floor((deltaTimeMs / (1000 * 60 * 60)) % 24);
    let days = Math.floor(deltaTimeMs / (1000 * 60 * 60 * 24));

    let result = "";
    if (days > 0) {
        result += days + "d ";
    }
    if ((hours > 0 || days > 0) && hours !== 0) {
        result += hours + "h ";
    }
    if (minutes > 0 && timeFrameMs < 60 * 60 * 1000 && minutes !== 0) {
        result += minutes + "m";
    }

    return (negative ? '-' : '') + result.trim();
}



keydown(event) {
    if (event.key === 'Shift') {
        shift = true
    }
}

keyup(event) {
    if (event.key === 'Shift') {
        shift = false
    }
}

mousedown(event) {
    const layout = $core.layout 
    if (state === 'idle' && shift) {
        // Create the first pin 
        pin1 = {
            t: $core.cursor.time,
            v: layout.y2value(event.layerY)
        }
        pin2 = { ...pin1 }
        state = 'drawing'
    } else if (state === 'drawing') {
        state = 'finished'
    } else if (state === 'finished') {
        state = 'idle'
        pin1 = null 
        pin2 = null 
    }
    $events.emitSpec('chart', 'update-layout')
}

mousemove(event) {
    if (state === 'drawing') {
        const layout = $core.layout 
        // Create the second pin 
        pin2 = {
            t: $core.cursor.time,
            v: layout.y2value(event.layerY)
        }
    }
}

// Disable legend by returning null
legend() => null
`,$8=Object.freeze(Object.defineProperty({__proto__:null,default:D8},Symbol.toStringTag,{value:"Module"})),X8=`
// Navy ~ 0.2-lite
// <ds>Arnaud Legoux Moving Average</ds>

[INDICATOR name=ALMA, version=1.0.0]

prop('length', { type: 'integer', def: 10 })
prop('offset', { type: 'number', def: 0.9 })
prop('sigma', { type: 'number', def: 5 })
prop('color', { type: 'color', def: '#559de0' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

let $ = $props

this.specs = {
    name: \`ALMA \${$.length} \${$.offset} \${$.sigma}\`,
    props: {
        color: $props.color,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let length = $props.length
let offset = $props.offset
let sigma = $props.sigma

Spline(alma(close, length, offset, sigma), this.specs)
`,F8=Object.freeze(Object.defineProperty({__proto__:null,default:X8},Symbol.toStringTag,{value:"Module"})),K8=`
// Navy ~ 0.2-lite
// <ds>Average True Range</ds>

[INDICATOR name=ATR, version=1.0.0]

prop('length', { type: 'integer', def: 15 })
prop('color', { type: 'color', def: '#e52468' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: 'ATR ' + $props.length,
    props: {
        color: $props.color
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Spline(atr($props.length), this.specs)
`,V8=Object.freeze(Object.defineProperty({__proto__:null,default:K8},Symbol.toStringTag,{value:"Module"})),z8=`
// Navy ~ 0.2-lite
// <ds>Average True Range, percentage</ds>

[INDICATOR name=ATRp, version=1.0.0]

prop('length', { type: 'integer', def: 15 })
prop('color', { type: 'color', def: '#f44336' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: 'ATR% ' + $props.length,
    props: {
        color: $props.color
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let k = 100 / close[0]
Spline(atr($props.length)[0] * k, this.specs)
`,Y8=Object.freeze(Object.defineProperty({__proto__:null,default:z8},Symbol.toStringTag,{value:"Module"})),U8=`
// Navy ~ 0.2-lite
// <ds>Bollinger Bands</ds>

[INDICATOR name=BB, version=1.0.0]

prop('length', { type: 'integer', def: 21 })
prop('stddev', { type: 'number', def: 2 })
prop('color', { type: 'color', def: '#2cc6c9ab' })
prop('backColor', { type: 'color', def: '#2cc6c90a' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`BB \${$props.length} \${$props.stddev}\`,
    props: {
        color: $props.color,
        backColor: $props.backColor,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let length = $props.length
let stddev = $props.stddev
let [m, h, l] = bb(close, length, stddev)
Band([h[0], m[0], l[0]], this.specs)
`,J8=Object.freeze(Object.defineProperty({__proto__:null,default:U8},Symbol.toStringTag,{value:"Module"})),Q8=`
// Navy ~ 0.2-lite
// <ds>Bollinger Bands Width</ds>

[INDICATOR name=BBW, version=1.0.0]

prop('length', { type: 'integer', def: 21 })
prop('stddev', { type: 'number', def: 2 })
prop('color', { type: 'color', def: '#2cc6c9ab' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`BBW \${$props.length} \${$props.stddev}\`,
    props: {
        color: $props.color,
        backColor: $props.backColor,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let length = $props.length
let stddev = $props.stddev
Spline(bbw(close, length, stddev), this.specs)
`,q8=Object.freeze(Object.defineProperty({__proto__:null,default:Q8},Symbol.toStringTag,{value:"Module"})),e6=`
// Navy ~ 0.2-lite
// <ds>Commodity Channel Index</ds>

[INDICATOR name=CCI, version=1.0.0]

prop('length', { type: 'integer', def: 21 })
prop('upperBand', { type: 'number', def: 100 })
prop('lowerBand', { type: 'number', def: -100 })
prop('color', { type: 'color', def: '#e28a3dee' })
prop('backColor', { type: 'color', def: '#e28a3d11' })
prop('bandColor', { type: 'color', def: '#999999' })
prop('prec', { type: 'integer', def: 2 })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: 'CCI ' + $props.length,
    props: {
        color: $props.color,
        backColor: $props.backColor,
        bandColor: $props.bandColor,
        upperBand: $props.upperBand,
        lowerBand: $props.lowerBand,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Range(cci(close, $props.length), this.specs)
`,t6=Object.freeze(Object.defineProperty({__proto__:null,default:e6},Symbol.toStringTag,{value:"Module"})),r6=`
// Navy ~ 0.2-lite
// <ds>Chande Momentum Oscillator</ds>

[INDICATOR name=CMO, version=1.0.0]

prop('length', { type: 'integer', def: 10 })
prop('color', { type: 'color', def: '#559de0' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`CMO \${$props.length}\`,
    props: {
        color: $props.color
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let length = $props.length
Spline(cmo(close, length), this.specs)
`,n6=Object.freeze(Object.defineProperty({__proto__:null,default:r6},Symbol.toStringTag,{value:"Module"})),i6=`
// Navy ~ 0.2-lite
// <ds>Center of Gravity</ds>

[INDICATOR name=COG, version=1.0.0]

prop('length', { type: 'integer', def: 10 })
prop('color', { type: 'color', def: '#559de0' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`COG \${$props.length}\`,
    props: {
        color: $props.color
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let length = $props.length
Spline(cog(close, length), this.specs)
`,o6=Object.freeze(Object.defineProperty({__proto__:null,default:i6},Symbol.toStringTag,{value:"Module"})),s6=`
// Navy ~ 0.2-lite
// <ds>Directional Movement Index</ds>

[INDICATOR name=DMI, version=1.0.0]

prop('length', { type: 'integer', def: 15 })
prop('smooth', { type: 'integer', def: 15 })
prop('color1', { type: 'color', def: "#ef1360" })
prop('color2', { type: 'color', def: "#3782f2" })
prop('color3', { type: 'color', def: "#f48709" })
prop('prec', { type: 'integer', def: 2 })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`DMI \${$props.length} \${$props.smooth}\`,
    props: {
        colors: [$props.color1, $props.color2, $props.color3]
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let [adx, dp, dn] = dmi($props.length, $props.smooth)
Splines([adx[0], dp[0], dn[0]], this.specs)
`,a6=Object.freeze(Object.defineProperty({__proto__:null,default:s6},Symbol.toStringTag,{value:"Module"})),l6=`
// Navy ~ 0.2-lite
// <ds>Exponential Moving Average</ds>

[INDICATOR name=EMA, version=1.0.0]

prop('length', { type: 'integer', def: 12 })
prop('color', { type: 'color', def: '#f7890c' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`EMA \${$props.length}\`,
    props: {
        color: $props.color,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Spline(ema(close, $props.length), this.specs)
`,c6=Object.freeze(Object.defineProperty({__proto__:null,default:l6},Symbol.toStringTag,{value:"Module"})),u6=`
// Navy ~ 0.2-lite
// <ds>Hull Moving Average</ds>

[INDICATOR name=HMA, version=1.0.0]

prop('length', { type: 'integer', def: 10 })
prop('color', { type: 'color', def: '#3af475' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`HMA \${$props.length}\`,
    props: {
        color: $props.color,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Spline(hma(close, $props.length), this.specs)
`,d6=Object.freeze(Object.defineProperty({__proto__:null,default:u6},Symbol.toStringTag,{value:"Module"})),g6=`
// Navy ~ 0.2-lite
// <ds>Ichimoku Cloud</ds>

[INDICATOR name=Ichimoku, version=1.0.0]

prop('convLength', { type: 'integer', def: 9 })
prop('baseLength', { type: 'integer', def: 26 })
prop('laggingLength', { type: 'integer', def: 52 })
prop('displacement', { type: 'integer', def: 26 })
prop('cloudUpColor', { type: 'color', def: '#79ffde18' })
prop('cloudDwColor', { type: 'color', def: '#ff246c18' })
prop('convColor', { type: 'color', def: '#4eb6d8' })
prop('baseColor', { type: 'color', def: '#d626a1' })
prop('laggingColor', { type: 'color', def: '#66cc66' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = ({name, props}) => ({
    name: name,
    props: props,
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
})

[UPDATE]

let $ = $props
let donchian = (len, id) => ts(
    avg(lowest(low, len)[0], highest(high, len)[0]), id
)
let conversionLine = donchian($.convLength, 1)
let baseLine = donchian($.baseLength, 2)
let leadLine1 = ts(avg(conversionLine[0], baseLine[0]))
let leadLine2 = donchian($.laggingLength, 3)
let lagging = ts(close[0])
offset(leadLine1, $.displacement - 1)
offset(leadLine2, $.displacement - 1)
offset(lagging, -$.displacement + 1)

Cloud([leadLine1, leadLine2], this.specs({
    name: \`Cloud\`,
    props: {
        back1: $props.cloudUpColor,
        back2: $props.cloudDwColor
    }
}))

Splines([conversionLine, baseLine], this.specs({
    name: \`Base Lines \${$.convLength} \${$.baseLength}\`,
    props: {
        colors: [
            $props.convColor,
            $props.baseColor
        ]
    }
}))

Spline(lagging, this.specs({
    name: \`Lagging Span \${$.laggingLength}\`,
    props: {
        color: $props.laggingColor
    }
}))
`,f6=Object.freeze(Object.defineProperty({__proto__:null,default:g6},Symbol.toStringTag,{value:"Module"})),h6=`
// Navy ~ 0.2-lite
// <ds>Keltner Channels</ds>

[INDICATOR name=KC, version=1.0.0]

prop('length', { type: 'integer', def: 20 })
prop('mult', { type: 'number', def: 1 })
prop('trueRange', { type: 'boolean', def: true })
prop('color', { type: 'color', def: '#4c8dffab' })
prop('backColor', { type: 'color', def: '#4c8dff0a' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`KC \${$props.length} \${$props.mult}\`,
    props: {
        color: $props.color,
        backColor: $props.backColor,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let $ = $props
let [m, h, l] = kc(close, $.length, $.mult, $.trueRange)
Band([h[0], m[0], l[0]], this.specs)
`,p6=Object.freeze(Object.defineProperty({__proto__:null,default:h6},Symbol.toStringTag,{value:"Module"})),m6=`
// Navy ~ 0.2-lite
// <ds>Keltner Channels Width</ds>

[INDICATOR name=KCW, version=1.0.0]

prop('length', { type: 'integer', def: 20 })
prop('mult', { type: 'number', def: 1 })
prop('trueRange', { type: 'boolean', def: true })
prop('color', { type: 'color', def: '#4c8dffab' })
prop('backColor', { type: 'color', def: '#4c8dff0a' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`KCW \${$props.length} \${$props.mult}\`,
    props: {
        color: $props.color,
        backColor: $props.backColor,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let $ = $props
let w = kcw(close, $.length, $.mult, $.trueRange)
Spline(w, this.specs)
`,I6=Object.freeze(Object.defineProperty({__proto__:null,default:m6},Symbol.toStringTag,{value:"Module"})),y6=`
// Navy ~ 0.2-lite
// <ds>Moving Average Convergence/Divergence</ds>

[INDICATOR name=MACD, version=1.0.0]

prop('fast', { type: 'integer', def: 12 })
prop('slow', { type: 'integer', def: 26 })
prop('smooth', { type: 'integer', def: 9 })
prop('colorMacd', { type: 'color', def: '#3782f2' })
prop('colorSignal', { type: 'color', def: '#f48709' })
prop('colorUp', { type: 'Color', def: '#35a776' })
prop('colorDw', { type: 'Color', def: '#e54150' })
prop('colorSemiUp', { type: 'Color', def: '#79e0b3' })
prop('colorSemiDw', { type: 'Color', def: '#ea969e' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

let $ = $props
this.specs = {
    name: \`MACD \${$.fast} \${$.slow} \${$.smooth}\`,
    props: {
        colorValue: $.colorMacd,
        colorSignal: $.colorSignal,
        colorUp: $.colorUp,
        colorDw: $.colorDw,
        colorSemiUp: $.colorSemiUp,
        colorSemiDw: $.colorSemiDw
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let $ = $props
let [m, s, h] = macd(close, $.fast, $.slow, $.smooth)

Histogram([h[0], m[0], s[0]], this.specs)
`,C6=Object.freeze(Object.defineProperty({__proto__:null,default:y6},Symbol.toStringTag,{value:"Module"})),v6=`
// Navy ~ 0.2-lite
// <ds>Money Flow Index	</ds>

[INDICATOR name=MFI, version=1.0.0]

prop('length', { type: 'integer', def: 14 })
prop('upperBand', { type: 'number', def: 80 })
prop('lowerBand', { type: 'number', def: 20 })
prop('color', { type: 'color', def: '#85c427ee' })
prop('backColor', { type: 'color', def: '#85c42711' })
prop('bandColor', { type: 'color', def: '#999999' })
prop('prec', { type: 'integer', def: 2 })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: 'MFI ' + $props.length,
    props: {
        color: $props.color,
        backColor: $props.backColor,
        bandColor: $props.bandColor,
        upperBand: $props.upperBand,
        lowerBand: $props.lowerBand,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let hlc3 = ts((high[0] + low[0] + close[0]) / 3)
Range(mfi(hlc3, $props.length), this.specs)
`,b6=Object.freeze(Object.defineProperty({__proto__:null,default:v6},Symbol.toStringTag,{value:"Module"})),x6=`
// Navy ~ 0.2-lite
// <ds>Momentum</ds>

[INDICATOR name=MOM, version=1.0.0]

prop('length', { type: 'integer', def: 11 })
prop('color', { type: 'color', def: '#bcc427ee' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`MOM \${$props.length}\`,
    props: {
        color: $props.color
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let length = $props.length
Spline(mom(close, length), this.specs)
`,A6=Object.freeze(Object.defineProperty({__proto__:null,default:x6},Symbol.toStringTag,{value:"Module"})),w6=`
// Navy ~ 0.2-lite
// <ds>Rate of Change</ds>

[INDICATOR name=ROC, version=1.0.0]

prop('length', { type: 'integer', def: 9 })
prop('color', { type: 'color', def: '#279fc4' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`ROC \${$props.length}\`,
    props: {
        color: $props.color
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let length = $props.length
Spline(roc(close, length), this.specs)
`,S6=Object.freeze(Object.defineProperty({__proto__:null,default:w6},Symbol.toStringTag,{value:"Module"})),k6=`
// Navy ~ 0.2-lite
// <ds>Relative Strength Index</ds>

[INDICATOR name=RSI, version=1.0.0]

prop('length', { type: 'integer', def: 14 })
prop('color', { type: 'color', def: '#3399ff' })
prop('prec', { type: 'integer', def: 2 })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: 'RSI ' + $props.length,
    props: {
        color: $props.color
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Range(rsi(close, $props.length), this.specs)
`,B6=Object.freeze(Object.defineProperty({__proto__:null,default:k6},Symbol.toStringTag,{value:"Module"})),N6=`
// Navy ~ 0.2-lite
// <ds>Exponential Moving Average Ribbon</ds>

[INDICATOR name=Ribbon, version=1.0.0]

prop('start', { type: 'integer', def: 10 })
prop('number', { type: 'integer', def: 5 })
prop('step', { type: 'integer', def: 10 })
prop('colors', { type: 'array', def: ["#3aaaf4ee"] })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`EMA x \${$props.number}\`,
    props: {
        colors: $props.colors,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let $ = $props
let arr = []
for (var i = 0; i < $.number; i++) {
    let l = $.start + i * $.step
    arr.push(ema(close, l)[0])
}

Splines(arr, this.specs)
`,j6=Object.freeze(Object.defineProperty({__proto__:null,default:N6},Symbol.toStringTag,{value:"Module"})),T6=`
// Navy ~ 0.2-lite
// <ds>Parabolic SAR</ds>

[INDICATOR name=SAR, version=1.0.0]

prop('start', { type: 'number', def: 0.02 })
prop('inc', { type: 'number', def: 0.02 })
prop('max', { type: 'number', def: 0.2 })
prop('color', { type: 'color', def: '#35a9c6' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

let $ = $props
this.specs = {
    name: \`SAR \${$.start} \${$.inc} \${$.max}\`,
    props: {
        color: $props.color,
        shape: 'cross'
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let $ = $props
Sparse(sar($.start, $.inc, $.max), this.specs)
`,E6=Object.freeze(Object.defineProperty({__proto__:null,default:T6},Symbol.toStringTag,{value:"Module"})),R6=`
// Navy ~ 0.2-lite
// <ds>Simple Moving Average</ds>

[INDICATOR name=SMA, version=1.0.0]

prop('length', { type: 'integer', def: 12 })
prop('color', { type: 'color', def: '#d1385c' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`SMA \${$props.length}\`,
    props: {
        color: $props.color,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Spline(sma(close, $props.length), this.specs)
`,O6=Object.freeze(Object.defineProperty({__proto__:null,default:R6},Symbol.toStringTag,{value:"Module"})),G6=`
// Navy ~ 0.2-lite
// <ds>Symmetrically Weighted Moving Average</ds>

[INDICATOR name=SWMA, version=1.0.0]

prop('color', { type: 'color', def: '#e57440' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`SWMA\`,
    props: {
        color: $props.color,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Spline(swma(close), this.specs)
`,P6=Object.freeze(Object.defineProperty({__proto__:null,default:G6},Symbol.toStringTag,{value:"Module"})),_6=`
// Navy ~ 0.2-lite
// <ds>Stochastic</ds>, format: [<timestamp>, <kLine>, <dLine>]

[OVERLAY name=Stoch, version=1.0.0]

prop('kColor', { type: 'color', def: '#3782f2' })
prop('dColor', { type: 'color', def: '#f48709' })
prop('bandColor', { type: 'color', def: '#535559' })
prop('backColor', { type: 'color', def: '#381e9c16' })
prop('upperBand', { type: 'number', def: 80 })
prop('lowerBand', { type: 'number', def: 20 })

draw(ctx) {
    const layout = $core.layout
    const upper = layout.value2y($props.upperBand)
    const lower = layout.value2y($props.lowerBand)
    const data = $core.data
    const view = $core.view

    // K
    ctx.lineWidth = 1
    ctx.strokeStyle = $props.kColor
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[1])
        ctx.lineTo(x, y)
    }
    ctx.stroke()

    // D
    ctx.strokeStyle = $props.dColor
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.ti2x(p[0], i)
        let y = layout.value2y(p[2])
        ctx.lineTo(x, y)
    }
    ctx.stroke()

    ctx.strokeStyle = $props.bandColor
    ctx.setLineDash([5]) // Will be removed after draw()
    ctx.beginPath()
    // Fill the area between the bands
    ctx.fillStyle = $props.backColor
    ctx.fillRect(0, upper, layout.width, lower - upper)
    // Upper band
    ctx.moveTo(0, upper)
    ctx.lineTo(layout.width, upper)
    // Lower band
    ctx.moveTo(0, lower)
    ctx.lineTo(layout.width, lower)
    ctx.stroke()
}

yRange(data, hi, lo) => [
    Math.max(hi, $props.upperBand),
    Math.min(lo, $props.lowerBand)
]

// Legend, defined as pairs [value, color]
legend(x) => [[x[1], $props.kColor], [x[1], $props.dColor]]


[INDICATOR name=Stoch, version=1.0.0]

prop('paramK', { def: 14 })
prop('paramD', { def: 3 })
prop('smooth', { def: 3 })
prop('kColor', { type: 'color', def: '#3782f2' })
prop('dColor', { type: 'color', def: '#f48709' })
prop('prec', { type: 'integer', def: 2 })
prop('zIndex', { type: 'integer', def: 0 })

let $ = $props
this.specs = {
    name: \`Stoch \${$.paramK} \${$.paramD} \${$.smooth}\`,
    props: {
        kColor: $props.kColor,
        dColor: $props.dColor
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let $ = $props
let k = sma(stoch(close, high, low, $.paramK), $.smooth)
let d = sma(k, $.paramD)
Stoch([k[0], d[0]], this.specs)
`,M6=Object.freeze(Object.defineProperty({__proto__:null,default:_6},Symbol.toStringTag,{value:"Module"})),Z6=`
// Navy ~ 0.2-lite
// <ds>True Strength Index</ds>

[INDICATOR name=TSI, version=1.0.0]

prop('long', { type: 'integer', def: 25 })
prop('short', { type: 'integer', def: 13 })
prop('signal', { type: 'integer', def: 13 })
prop('color1', { type: 'color', def: '#3bb3e4' })
prop('color2', { type: 'color', def: '#f7046d' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

let $ = $props
this.specs = {
    name: \`TSI \${$.long} \${$.short} \${$.signal}\`,
    props: {
        colors: [$.color1, $.color2]
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

let $ = $props
let val = tsi(close, $.short, $.long)
let sig = ema(val, $.signal)
Splines([val[0] * 100, sig[0] * 100], this.specs)
`,H6=Object.freeze(Object.defineProperty({__proto__:null,default:Z6},Symbol.toStringTag,{value:"Module"})),L6=`
// Navy ~ 0.2-lite
// <ds>Volume Weighted Moving Average</ds>

[INDICATOR name=VWMA, version=1.0.0]

prop('length', { type: 'integer', def: 20 })
prop('color', { type: 'color', def: '#db0670' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`VWMA \${$props.length}\`,
    props: {
        color: $props.color,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Spline(vwma(close, $props.length), this.specs)
`,W6=Object.freeze(Object.defineProperty({__proto__:null,default:L6},Symbol.toStringTag,{value:"Module"})),D6=`
// Navy ~ 0.2-lite
// <ds>Williams %R</ds>

[INDICATOR name=WilliamsR, version=1.0.0]

prop('length', { type: 'integer', def: 14 })
prop('upperBand', { type: 'number', def: -20 })
prop('lowerBand', { type: 'number', def: -80 })
prop('color', { type: 'color', def: '#0980e8' })
prop('backColor', { type: 'color', def: '#9b9ba316' })
prop('bandColor', { type: 'color', def: '#535559' })
prop('prec', { type: 'integer', def: autoPrec() })
prop('zIndex', { type: 'integer', def: 0 })

this.specs = {
    name: \`%R \${$props.length}\`,
    props: {
        color: $props.color,
        backColor: $props.backColor,
        bandColor: $props.bandColor,
        upperBand: $props.upperBand,
        lowerBand: $props.lowerBand,
    },
    settings: {
        precision: $props.prec,
        zIndex: $props.zIndex
    }
}

[UPDATE]

Range(wpr($props.length), this.specs)
`,$6=Object.freeze(Object.defineProperty({__proto__:null,default:D6},Symbol.toStringTag,{value:"Module"}));var IZ={exports:{}};const X6=(e,t={})=>{const r=t.safe===!0||t.keepProtected===!0;let n=!1;const i=o=>{let s="",a,c;for(const u of o.nodes)switch(u.type){case"block":if(t.first&&n===!0){s+=i(u);break}if(t.preserveNewlines===!0){a=i(u),c=a.split(`
`),s+=`
`.repeat(c.length-1);break}if(r===!0&&u.protected===!0){s+=i(u);break}n=!0;break;case"line":if(t.first&&n===!0){s+=u.value;break}r===!0&&u.protected===!0&&(s+=u.value),n=!0;break;case"open":case"close":case"text":case"newline":default:{s+=u.value||"";break}}return s};return i(e)};var F6=X6;let yZ=class{constructor(t){this.type=t.type,t.value&&(this.value=t.value),t.match&&(this.match=t.match),this.newline=t.newline||""}get protected(){return!!this.match&&this.match[1]==="!"}},K6=class extends yZ{constructor(t){super(t),this.nodes=t.nodes||[]}push(t){this.nodes.push(t)}get protected(){return this.nodes.length>0&&this.nodes[0].protected===!0}};var V6={Node:yZ,Block:K6},CZ={};(function(e){e.ada={LINE_REGEX:/^--.*/},e.apl={LINE_REGEX:/^.*/},e.applescript={BLOCK_OPEN_REGEX:/^\(\*/,BLOCK_CLOSE_REGEX:/^\*\)/},e.csharp={LINE_REGEX:/^\/\/.*/},e.haskell={BLOCK_OPEN_REGEX:/^\{-/,BLOCK_CLOSE_REGEX:/^-\}/,LINE_REGEX:/^--.*/},e.javascript={BLOCK_OPEN_REGEX:/^\/\*\*?(!?)/,BLOCK_CLOSE_REGEX:/^\*\/(\n?)/,LINE_REGEX:/^\/\/(!?).*/},e.lua={BLOCK_OPEN_REGEX:/^--\[\[/,BLOCK_CLOSE_REGEX:/^\]\]/,LINE_REGEX:/^--.*/},e.matlab={BLOCK_OPEN_REGEX:/^%{/,BLOCK_CLOSE_REGEX:/^%}/,LINE_REGEX:/^%.*/},e.perl={LINE_REGEX:/^#.*/},e.php={...e.javascript,LINE_REGEX:/^(#|\/\/).*?(?=\?>|\n)/},e.python={BLOCK_OPEN_REGEX:/^"""/,BLOCK_CLOSE_REGEX:/^"""/,LINE_REGEX:/^#.*/},e.ruby={BLOCK_OPEN_REGEX:/^=begin/,BLOCK_CLOSE_REGEX:/^=end/,LINE_REGEX:/^#.*/},e.shebang=e.hashbang={LINE_REGEX:/^#!.*/},e.c=e.javascript,e.csharp=e.javascript,e.css=e.javascript,e.java=e.javascript,e.js=e.javascript,e.less=e.javascript,e.pascal=e.applescript,e.ocaml=e.applescript,e.sass=e.javascript,e.sql=e.ada,e.swift=e.javascript,e.ts=e.javascript,e.typscript=e.javascript})(CZ);const{Node:gs,Block:AN}=V6,z6=CZ,_C={ESCAPED_CHAR_REGEX:/^\\./,QUOTED_STRING_REGEX:/^(['"`])((?:\\\1|[^\1])*?)(\1)/,NEWLINE_REGEX:/^\r*\n/},Y6=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");const r=new AN({type:"root",nodes:[]}),n=[r],i=(t.language||"javascript").toLowerCase(),o=z6[i];if(typeof o>"u")throw new Error(`Language "${i}" is not supported by strip-comments`);const{LINE_REGEX:s,BLOCK_OPEN_REGEX:a,BLOCK_CLOSE_REGEX:c}=o;let u=r,d=e,g,f;const m=[a,c].filter(Boolean);let v=!1;m.every(C=>C.source==='^"""')&&(v=!0);const p=(C=d[0]||"")=>(d=d.slice(C.length),C),I=(C,x="text")=>{const A=C.exec(d);if(A)return p(A[0]),{type:x,value:A[0],match:A}},h=C=>{if(f&&f.type==="text"&&C.type==="text"){f.value+=C.value;return}u.push(C),C.nodes&&(n.push(C),u=C),f=C},y=()=>{if(u.type==="root")throw new SyntaxError("Unclosed block comment");n.pop(),u=n[n.length-1]};for(;d!=="";){if(g=I(_C.ESCAPED_CHAR_REGEX,"text")){h(new gs(g));continue}if(u.type!=="block"&&(!f||!/\w$/.test(f.value))&&!(v&&d.startsWith('"""'))&&(g=I(_C.QUOTED_STRING_REGEX,"text"))){h(new gs(g));continue}if(g=I(_C.NEWLINE_REGEX,"newline")){h(new gs(g));continue}if(a&&t.block&&!(v&&u.type==="block")&&(g=I(a,"open"))){h(new AN({type:"block"})),h(new gs(g));continue}if(c&&u.type==="block"&&t.block&&(g=I(c,"close"))){g.newline=g.match[1]||"",h(new gs(g)),y();continue}if(s&&u.type!=="block"&&t.line&&(g=I(s,"line"))){h(new gs(g));continue}if(g=I(/^[a-zABD-Z0-9\t ]+/,"text")){h(new gs(g));continue}h(new gs({type:"text",value:p(d[0])}))}return r};var U6=Y6;/*!
 * strip-comments <https://github.com/jonschlinkert/strip-comments>
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */const vI=F6,nf=U6,bI=IZ.exports=(e,t)=>{const r={...t,block:!0,line:!0};return vI(nf(e,r),r)};bI.block=(e,t)=>{const r={...t,block:!0};return vI(nf(e,r),r)};bI.line=(e,t)=>{const r={...t,line:!0};return vI(nf(e,r),r)};bI.first=(e,t)=>{const r={...t,block:!0,line:!0,first:!0};return vI(nf(e,r),r)};bI.parse=nf;var J6=IZ.exports;const Q6=cZ(J6);function q6(e,t){return Q6(e)}function eQ(e,t){let r=vZ(e,t);for(var n of r){let i=e.slice(0,n[0]+1);i+=e.slice(n[0]+1,n[1]).replaceAll("/*","[!C~1!]").replaceAll("//","[!C~2!]"),i+=e.slice(n[1]),e=i}return e}function tQ(e,t){return e.replaceAll("[!C~1!]","/*").replaceAll("[!C~2!]","//")}function vZ(e,t){let r={"'":0,'"':0,"`":0},n=[],i=null;for(var o=0;o<e.length;o++)for(var s in r)if(e[o]===s&&e[o-1]!=="\\"&&(r[s]++,i||(i=[o,void 0])),e[o]===s&&e[o-1]!=="\\"&&o>i[0]&&(r[s]=0,i&&Object.values(r).every(a=>!a)&&(i[1]=o,n.push(i),i=null)),r[s]<0)throw`Missing quote ${s} in ${t}`;if(i!==null)throw`Missing quote in ${t}: ${JSON.stringify(r)}`;return n}function rQ(e,t=btoa){let r=/\/([^*\/]?.+)\//g;do{var n=r.exec(e);if(n){let i=n[0].length;n[1].slice(-1)==="*"&&(i--,n[1]=n[1].slice(0,-1));let o=e.slice(0,n.index+1),s=t(n[1]);o+=s+e.slice(n.index+i-1),e=o,r.lastIndex=n.index+s.length}}while(n);return e}function bZ(e,t,r,n="{}"){let i=n[0],o=n[1],s={"'":0,'"':0,"`":0},a=0,c=null;for(var u=t;u<e.length;u++){for(var d in s)if(e[u]===d&&e[u-1]!=="\\"&&(s[d]++,c||(c=[u,void 0])),e[u]===d&&e[u-1]!=="\\"&&u>c[0]&&(s[d]=0,c&&Object.values(s).every(f=>!f)&&(c[1]=u,c=null)),s[d]<0)throw`Missing quote ${d} in ${r}`;if(s["'"]+s['"']+s["`"]===0&&(e[u]===i&&a++,e[u]===o&&a--,a===0))break}if(a!==0)throw`Missing bracket in ${r}: ${n}`;if(c!==null)throw`Missing quote in ${r}: ${JSON.stringify(s)}`;return u}function nQ(e){let t=[],r=0;for(;r<e.length;){let n=e.indexOf("static",r);if(n===-1)break;let i=e.indexOf("=>",n);if(i===-1)break;for(r=i+2;[" ","	",`
`,"\r"].includes(e[r]);)r++;let o=e[r];if(["{","[","("].includes(o)){let s;try{s=bZ(e,r,"script",o+{"{":"}","[":"]","(":")"}[o])}catch(a){console.error(a);continue}t.push(e.slice(n,s+1).trim()),r=s+1}else{let s=e.indexOf(`
`,r);t.push(e.slice(n,s!==-1?s:void 0).trim())}}return t.join(`
`)}const Uu={maskStrings:eQ,unmaskStrings:tQ,findStrings:vZ,maskRegex:rQ,decomment:q6,findClosingBracket:bZ,extractStaticBlocks:nQ},Yf=/(function[\s]+|)([$A-Z_][0-9A-Z_$\.]*)[\s]*?\(([^()]*?)\)[\s]*?{/gmi,Uf=/(function[\s]+|)([$A-Z_][0-9A-Z_$\.]*)[\s]*?\(([^()]*?)\)[\s]*?=>[\s]*?{/gmi,MC=/(function[\s]+|)([$A-Z_][0-9A-Z_$\.]*)[\s]*?\(([^()]*?)\)[\s]*?=>/gmi,wN=/static\s+var\s+([a-zA-Z0-9_]+)\s*=/g,SN=["if","for","while","switch","catch","with"];class iQ{constructor(t,r){this.tagProps=this.parseTagProps(t),this.src=r,this.flags="",this.parseBody()}parseTagProps(t){let r={},n=t.split(",");for(var i of n){let[o,s]=i.split("=");r[o.trim()]=s.trim()}return r}parseBody(){let t=Uu.decomment(this.src);t=this.prepFuncions1(t),t=this.prepFuncions2(t),t=this.prepFuncions3(t);let r=Uu.extractStaticBlocks(t);this.static=this.wrapStatic(r),t=this.renameStatic(t),this.prefab=this.wrapTheCode(t,this.flags)}prepFuncions1(t){let r="",n=0;Yf.lastIndex=0;do{var i=Yf.exec(t);if(i){i[1].trim();let o=i[2],s=i[3],a=Yf.lastIndex-1,c=Uu.findClosingBracket(t,a);if(SN.includes(o))r+=t.slice(n,c+1);else{let u=t.slice(a,c+1);r+=t.slice(n,i.index),r+=`var ${o} = (${s}) => ${u}`,this.parseFlags(o,s,u)}Yf.lastIndex=c,n=c+1}}while(i);return r+t.slice(n)}prepFuncions2(t){let r="",n=0;Uf.lastIndex=0;do{var i=Uf.exec(t);if(i){i[1].trim();let o=i[2],s=i[3],a=Uf.lastIndex-1,c=Uu.findClosingBracket(t,a);if(SN.includes(o))r+=t.slice(n,c+1);else{let u=t.slice(a,c+1);r+=t.slice(n,i.index),r+=`var ${o} = (${s}) => (${u})`,this.parseFlags(o,s,u)}Uf.lastIndex=c,n=c+1}}while(i);return r+t.slice(n)}prepFuncions3(t){let r="",n=0;MC.lastIndex=0;do{var i=MC.exec(t);if(i){i[1].trim();let o=i[2],s=i[3],a=MC.lastIndex;r+=t.slice(n,i.index),r+=`var ${o} = (${s}) => `;let c=t.slice(a).split(`
`)[0].trim();this.parseFlags(o,s,c),n=a+1}}while(i);return r+t.slice(n)}parseFlags(t,r,n){if(t==="yRange"){let i=r.trim().split(",").length>1;this.flags+=`yRangePreCalc: ${i},
`}else t==="legend"&&(n==="null"||n==="undefined")&&(this.flags+=`noLegend: true,
`)}wrapStatic(t){const n=`
            var $static = {}
            ${t.replace(wN,"$static.$1 =")}
            return $static
        `;try{return new Function(n)()}catch(i){console.error("Error parsing static functions",i)}return{}}renameStatic(t){return t.replace(wN,"$static.$1 =")}wrapTheCode(t,r){return new Function("env",`

            // Setup the environment
            let { $core, $props, $events } = env
            let prop = (...args) => env.prop(...args)
            let watchProp = (...args) => env.watchProp(...args)
            let $static = {} 

            // Add primitives
            let $lib = env.lib

            // Function stubs
            var init = () => {}
            var destroy = () => {}
            var meta = () => null
            var dataFormat = () => null
            var draw = () => {}
            var drawSidebar = null
            var drawBotbar = null
            var yRange = null
            var preSampler = null
            var legend = null
            var legendHtml = null
            var valueTracker = null
            var ohlc = null

            // Event handler stubs
            var mousemove = null
            var mouseout = null
            var mouseup = null
            var mousedown = null
            var click = null
            var keyup = null
            var keydown = null
            var keypress = null

            // Overlay code
            ${t}

            // Output overlay object
            return {
                gridId: () => $core.layout.id,
                id: () => $core.id,
                init, destroy, meta, dataFormat,
                draw, drawSidebar, drawBotbar,
                yRange, preSampler,
                legend, legendHtml,
                valueTracker, ohlc,
                mousemove, mouseout, mouseup,
                mousedown, click, keyup, keydown,
                keypress,
                // Generated flags
                ${r}
            }
        `)}}const kN=/\[[\s]*?UPDATE[\s]*?\]|\[[\s]*?POST[\s]*?\]/gm,BN=/\[[\s]*?UPDATE[\s]*?\]([\s\S]*?)(\[POST|\[UPDATE|\[EOF)/gm,NN=/\[[\s]*?POST[\s]*?\]([\s\S]*?)(\[POST|\[UPDATE|\[EOF)/gm;class oQ{constructor(t,r){this.tagProps=this.parseTagProps(t),this.src=r,this.parseBody()}parseTagProps(t){let r={},n=t.split(",");for(var i of n){let[o,s]=i.split("=");r[o.trim()]=s.trim()}return r}parseBody(){kN.lastIndex=0,BN.lastIndex=0,NN.lastIndex=0;let t=Uu.decomment(this.src);this.init=t.split(kN)[0],t+=`
[EOF]`,this.update=(BN.exec(t)||[])[1],this.post=(NN.exec(t)||[])[1]}}const jN=.2,sQ="lite",aQ=/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,ZC=/\[OVERLAY[\s]+([\s\S]*?)]([\s\S]*?)(\[OVERLAY|\[INDICATOR|\[EOF)/gm,HC=/\[INDICATOR[\s]+([\s\S]*?)]([\s\S]*?)(\[OVERLAY|\[INDICATOR|\[EOF)/gm;class lQ{constructor(t,r="Unknown Script"){r=this.extractName(t)||r,this.version=jN,this.src=t+`
[EOF]`,this.scriptName=r,this.scriptVers=this.navyVers()[0],this.scriptTag=this.navyVers()[1],this.overlays=[],this.indicators=[],this.scriptVers===0&&console.warn(`${r}: There is no script version string`),this.scriptVers>this.version&&console.warn(`${r}: Script version > parser version`),this.scriptVers<.2&&t.includes("OVERLAY")&&t.includes("yRange")&&console.warn(`${r}: Update yRange() function (see docs)`),this.scriptTag!==sQ&&console.warn(`${r}: Script version should have 'lite' tag
Most likely are using the community version of NavyJS
with a script written for the PRO version.
If not the case just use 'lite' tag: ${jN}-lite`),this.overlayTags(),this.indicatorTags()}navyVers(){let t=(this.src.match(aQ)||[])[0];if(t){let r=t.split("~");if(r.length<2)return[0];let n=parseFloat(r[1]),i=r[1].split("-")[1];return[n===n?n:0,i]}return[0]}extractName(t){const r=/\[.*?name=([^\s,]+)/,n=t.match(r);return n&&n[1]?n[1].trim():null}overlayTags(){ZC.lastIndex=0;for(var t;t=ZC.exec(this.src);)this.overlays.push(new iQ(t[1],t[2])),ZC.lastIndex-=10}indicatorTags(){HC.lastIndex=0;for(var t;t=HC.exec(this.src);)this.indicators.push(new oQ(t[1],t[2])),HC.lastIndex-=12}}const xZ="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICBmdW5jdGlvbiByZWdyZXNzaW9uKGRhdGEsIGxlbiwgb2Zmc2V0KSB7CiAgICBkYXRhID0gZGF0YS5zbGljZSgwLCBsZW4pLnJldmVyc2UoKS5tYXAoKHgsIGkyKSA9PiBbaTIsIHhdKTsKICAgIHZhciBzdW1feCA9IDAsIHN1bV95ID0gMCwgc3VtX3h5ID0gMCwgc3VtX3h4ID0gMCwgY291bnQgPSAwLCBtLCBiOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgaWYgKCFkYXRhW2ldKQogICAgICAgIHJldHVybiBOYU47CiAgICAgIHZhciBwb2ludCA9IGRhdGFbaV07CiAgICAgIHN1bV94ICs9IHBvaW50WzBdOwogICAgICBzdW1feSArPSBwb2ludFsxXTsKICAgICAgc3VtX3h4ICs9IHBvaW50WzBdICogcG9pbnRbMF07CiAgICAgIHN1bV94eSArPSBwb2ludFswXSAqIHBvaW50WzFdOwogICAgICBjb3VudCsrOwogICAgfQogICAgbSA9IChjb3VudCAqIHN1bV94eSAtIHN1bV94ICogc3VtX3kpIC8gKGNvdW50ICogc3VtX3h4IC0gc3VtX3ggKiBzdW1feCk7CiAgICBiID0gc3VtX3kgLyBjb3VudCAtIG0gKiBzdW1feCAvIGNvdW50OwogICAgcmV0dXJuIG0gKiAoZGF0YS5sZW5ndGggLSAxIC0gb2Zmc2V0KSArIGI7CiAgfQogIGZ1bmN0aW9uIGdldERlZmF1bHRFeHBvcnRGcm9tQ2pzKHgpIHsKICAgIHJldHVybiB4ICYmIHguX19lc01vZHVsZSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoeCwgImRlZmF1bHQiKSA/IHhbImRlZmF1bHQiXSA6IHg7CiAgfQogIHZhciB1dGlsJDEgPSB7fTsKICBmdW5jdGlvbiBpc0FycmF5TGlrZShvKSB7CiAgICBpZiAobyAmJiAvLyBvIGlzIG5vdCBudWxsLCB1bmRlZmluZWQsIGV0Yy4KICAgIHR5cGVvZiBvID09PSAib2JqZWN0IiAmJiAvLyBvIGlzIGFuIG9iamVjdAogICAgaXNGaW5pdGUoby5sZW5ndGgpICYmIC8vIG8ubGVuZ3RoIGlzIGEgZmluaXRlIG51bWJlcgogICAgby5sZW5ndGggPj0gMCAmJiAvLyBvLmxlbmd0aCBpcyBub24tbmVnYXRpdmUKICAgIG8ubGVuZ3RoID09PSBNYXRoLmZsb29yKG8ubGVuZ3RoKSAmJiAvLyBvLmxlbmd0aCBpcyBhbiBpbnRlZ2VyCiAgICBvLmxlbmd0aCA8IDQyOTQ5NjcyOTYpCiAgICAgIHJldHVybiB0cnVlOwogICAgZWxzZQogICAgICByZXR1cm4gZmFsc2U7CiAgfQogIGZ1bmN0aW9uIGlzU29ydGFibGUobykgewogICAgaWYgKG8gJiYgLy8gbyBpcyBub3QgbnVsbCwgdW5kZWZpbmVkLCBldGMuCiAgICB0eXBlb2YgbyA9PT0gIm9iamVjdCIgJiYgLy8gbyBpcyBhbiBvYmplY3QKICAgIHR5cGVvZiBvLnNvcnQgPT09ICJmdW5jdGlvbiIpCiAgICAgIHJldHVybiB0cnVlOwogICAgZWxzZQogICAgICByZXR1cm4gZmFsc2U7CiAgfQogIHV0aWwkMS5pc1NvcnRhYmxlQXJyYXlMaWtlID0gZnVuY3Rpb24obykgewogICAgcmV0dXJuIGlzQXJyYXlMaWtlKG8pICYmIGlzU29ydGFibGUobyk7CiAgfTsKICB2YXIgY29tcGFyZSA9IHsKICAgIC8qKgogICAgICogQ29tcGFyZSB0d28gbnVtYmVycy4KICAgICAqCiAgICAgKiBAcGFyYW0ge051bWJlcn0gYQogICAgICogQHBhcmFtIHtOdW1iZXJ9IGIKICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IDEgaWYgYSA+IGIsIDAgaWYgYSA9IGIsIC0xIGlmIGEgPCBiCiAgICAgKi8KICAgIG51bWNtcDogZnVuY3Rpb24oYSwgYikgewogICAgICByZXR1cm4gYSAtIGI7CiAgICB9LAogICAgLyoqCiAgICAgKiBDb21wYXJlIHR3byBzdHJpbmdzLgogICAgICoKICAgICAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gYQogICAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBiCiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSAxIGlmIGEgPiBiLCAwIGlmIGEgPSBiLCAtMSBpZiBhIDwgYgogICAgICovCiAgICBzdHJjbXA6IGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwOwogICAgfQogIH07CiAgdmFyIGJpbmFyeSA9IHt9OwogIGZ1bmN0aW9uIGxvb3AoZGF0YSwgbWluLCBtYXgsIGluZGV4LCB2YWxwb3MpIHsKICAgIHZhciBjdXJyID0gbWF4ICsgbWluID4+PiAxOwogICAgdmFyIGRpZmYgPSB0aGlzLmNvbXBhcmUoZGF0YVtjdXJyXVt0aGlzLmluZGV4XSwgaW5kZXgpOwogICAgaWYgKCFkaWZmKSB7CiAgICAgIHJldHVybiB2YWxwb3NbaW5kZXhdID0gewogICAgICAgICJmb3VuZCI6IHRydWUsCiAgICAgICAgImluZGV4IjogY3VyciwKICAgICAgICAicHJldiI6IG51bGwsCiAgICAgICAgIm5leHQiOiBudWxsCiAgICAgIH07CiAgICB9CiAgICBpZiAobWluID49IG1heCkgewogICAgICByZXR1cm4gdmFscG9zW2luZGV4XSA9IHsKICAgICAgICAiZm91bmQiOiBmYWxzZSwKICAgICAgICAiaW5kZXgiOiBudWxsLAogICAgICAgICJwcmV2IjogZGlmZiA8IDAgPyBtYXggOiBtYXggLSAxLAogICAgICAgICJuZXh0IjogZGlmZiA8IDAgPyBtYXggKyAxIDogbWF4CiAgICAgIH07CiAgICB9CiAgICBpZiAoZGlmZiA+IDApCiAgICAgIHJldHVybiBsb29wLmNhbGwodGhpcywgZGF0YSwgbWluLCBjdXJyIC0gMSwgaW5kZXgsIHZhbHBvcyk7CiAgICBlbHNlCiAgICAgIHJldHVybiBsb29wLmNhbGwodGhpcywgZGF0YSwgY3VyciArIDEsIG1heCwgaW5kZXgsIHZhbHBvcyk7CiAgfQogIGZ1bmN0aW9uIHNlYXJjaChpbmRleCkgewogICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7CiAgICByZXR1cm4gbG9vcC5jYWxsKHRoaXMsIGRhdGEsIDAsIGRhdGEubGVuZ3RoIC0gMSwgaW5kZXgsIHRoaXMudmFscG9zKTsKICB9CiAgYmluYXJ5LnNlYXJjaCA9IHNlYXJjaDsKICB2YXIgdXRpbCA9IHV0aWwkMSwgY21wID0gY29tcGFyZSwgYmluID0gYmluYXJ5OwogIHZhciBsaWIgPSBJbmRleGVkQXJyYXk7CiAgZnVuY3Rpb24gSW5kZXhlZEFycmF5KGRhdGEsIGluZGV4KSB7CiAgICBpZiAoIXV0aWwuaXNTb3J0YWJsZUFycmF5TGlrZShkYXRhKSkKICAgICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGRhdGEiKTsKICAgIGlmICghaW5kZXggfHwgZGF0YS5sZW5ndGggPiAwICYmICEoaW5kZXggaW4gZGF0YVswXSkpCiAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBpbmRleCIpOwogICAgdGhpcy5kYXRhID0gZGF0YTsKICAgIHRoaXMuaW5kZXggPSBpbmRleDsKICAgIHRoaXMuc2V0Qm91bmRhcmllcygpOwogICAgdGhpcy5jb21wYXJlID0gdHlwZW9mIHRoaXMubWludiA9PT0gIm51bWJlciIgPyBjbXAubnVtY21wIDogY21wLnN0cmNtcDsKICAgIHRoaXMuc2VhcmNoID0gYmluLnNlYXJjaDsKICAgIHRoaXMudmFscG9zID0ge307CiAgICB0aGlzLmN1cnNvciA9IG51bGw7CiAgICB0aGlzLm5leHRsb3cgPSBudWxsOwogICAgdGhpcy5uZXh0aGlnaCA9IG51bGw7CiAgfQogIEluZGV4ZWRBcnJheS5wcm90b3R5cGUuc2V0Q29tcGFyZSA9IGZ1bmN0aW9uKGZuKSB7CiAgICBpZiAodHlwZW9mIGZuICE9PSAiZnVuY3Rpb24iKQogICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgYXJndW1lbnQiKTsKICAgIHRoaXMuY29tcGFyZSA9IGZuOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBJbmRleGVkQXJyYXkucHJvdG90eXBlLnNldFNlYXJjaCA9IGZ1bmN0aW9uKGZuKSB7CiAgICBpZiAodHlwZW9mIGZuICE9PSAiZnVuY3Rpb24iKQogICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgYXJndW1lbnQiKTsKICAgIHRoaXMuc2VhcmNoID0gZm47CiAgICByZXR1cm4gdGhpczsKICB9OwogIEluZGV4ZWRBcnJheS5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHNlbGYyID0gdGhpcywgaW5kZXggPSB0aGlzLmluZGV4OwogICAgdGhpcy5kYXRhLnNvcnQoZnVuY3Rpb24oYSwgYikgewogICAgICByZXR1cm4gc2VsZjIuY29tcGFyZShhW2luZGV4XSwgYltpbmRleF0pOwogICAgfSk7CiAgICB0aGlzLnNldEJvdW5kYXJpZXMoKTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgSW5kZXhlZEFycmF5LnByb3RvdHlwZS5zZXRCb3VuZGFyaWVzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YSwgaW5kZXggPSB0aGlzLmluZGV4OwogICAgdGhpcy5taW52ID0gZGF0YS5sZW5ndGggJiYgZGF0YVswXVtpbmRleF07CiAgICB0aGlzLm1heHYgPSBkYXRhLmxlbmd0aCAmJiBkYXRhW2RhdGEubGVuZ3RoIC0gMV1baW5kZXhdOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBJbmRleGVkQXJyYXkucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24odmFsdWUpIHsKICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDsKICAgICAgdGhpcy5uZXh0bG93ID0gbnVsbDsKICAgICAgdGhpcy5uZXh0aGlnaCA9IG51bGw7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgaWYgKHRoaXMuY29tcGFyZSh2YWx1ZSwgdGhpcy5taW52KSA9PT0gLTEpIHsKICAgICAgdGhpcy5jdXJzb3IgPSBudWxsOwogICAgICB0aGlzLm5leHRsb3cgPSBudWxsOwogICAgICB0aGlzLm5leHRoaWdoID0gMDsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICBpZiAodGhpcy5jb21wYXJlKHZhbHVlLCB0aGlzLm1heHYpID09PSAxKSB7CiAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDsKICAgICAgdGhpcy5uZXh0bG93ID0gdGhpcy5kYXRhLmxlbmd0aCAtIDE7CiAgICAgIHRoaXMubmV4dGhpZ2ggPSBudWxsOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIHZhciB2YWxwb3MgPSB0aGlzLnZhbHBvcywgcG9zID0gdmFscG9zW3ZhbHVlXTsKICAgIGlmIChwb3MpIHsKICAgICAgaWYgKHBvcy5mb3VuZCkgewogICAgICAgIHRoaXMuY3Vyc29yID0gcG9zLmluZGV4OwogICAgICAgIHRoaXMubmV4dGxvdyA9IG51bGw7CiAgICAgICAgdGhpcy5uZXh0aGlnaCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJzb3IgPSBudWxsOwogICAgICAgIHRoaXMubmV4dGxvdyA9IHBvcy5wcmV2OwogICAgICAgIHRoaXMubmV4dGhpZ2ggPSBwb3MubmV4dDsKICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIHZhciByZXN1bHQgPSB0aGlzLnNlYXJjaC5jYWxsKHRoaXMsIHZhbHVlKTsKICAgIHRoaXMuY3Vyc29yID0gcmVzdWx0LmluZGV4OwogICAgdGhpcy5uZXh0bG93ID0gcmVzdWx0LnByZXY7CiAgICB0aGlzLm5leHRoaWdoID0gcmVzdWx0Lm5leHQ7CiAgICByZXR1cm4gdGhpczsKICB9OwogIEluZGV4ZWRBcnJheS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24odmFsdWUpIHsKICAgIGlmICh2YWx1ZSkKICAgICAgdGhpcy5mZXRjaCh2YWx1ZSk7CiAgICB2YXIgcG9zID0gdGhpcy5jdXJzb3I7CiAgICByZXR1cm4gcG9zICE9PSBudWxsID8gdGhpcy5kYXRhW3Bvc10gOiBudWxsOwogIH07CiAgSW5kZXhlZEFycmF5LnByb3RvdHlwZS5nZXRSYW5nZSA9IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHsKICAgIGlmICh0aGlzLmNvbXBhcmUoYmVnaW4sIGVuZCkgPT09IDEpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgdGhpcy5mZXRjaChiZWdpbik7CiAgICB2YXIgc3RhcnQgPSB0aGlzLmN1cnNvciB8fCB0aGlzLm5leHRoaWdoOwogICAgdGhpcy5mZXRjaChlbmQpOwogICAgdmFyIGZpbmlzaCA9IHRoaXMuY3Vyc29yIHx8IHRoaXMubmV4dGxvdzsKICAgIGlmIChzdGFydCA9PT0gbnVsbCB8fCBmaW5pc2ggPT09IG51bGwpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgcmV0dXJuIHRoaXMuZGF0YS5zbGljZShzdGFydCwgZmluaXNoICsgMSk7CiAgfTsKICB2YXIgSW5kZXhlZEFycmF5JDEgPSAvKiBAX19QVVJFX18gKi8gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMobGliKTsKICBjb25zdCBTRUNPTkQgPSAxZTM7CiAgY29uc3QgTUlOVVRFID0gU0VDT05EICogNjA7CiAgY29uc3QgTUlOVVRFMyA9IE1JTlVURSAqIDM7CiAgY29uc3QgTUlOVVRFNSA9IE1JTlVURSAqIDU7CiAgY29uc3QgTUlOVVRFMTUgPSBNSU5VVEUgKiAxNTsKICBjb25zdCBNSU5VVEUzMCA9IE1JTlVURSAqIDMwOwogIGNvbnN0IEhPVVIgPSBNSU5VVEUgKiA2MDsKICBjb25zdCBIT1VSNCA9IEhPVVIgKiA0OwogIGNvbnN0IEhPVVIxMiA9IEhPVVIgKiAxMjsKICBjb25zdCBEQVkgPSBIT1VSICogMjQ7CiAgY29uc3QgV0VFSyA9IERBWSAqIDc7CiAgY29uc3QgTU9OVEggPSBXRUVLICogNDsKICBjb25zdCBZRUFSID0gREFZICogMzY1OwogIGNvbnN0IE1PTlRITUFQID0gWwogICAgIkphbiIsCiAgICAiRmViIiwKICAgICJNYXIiLAogICAgIkFwciIsCiAgICAiTWF5IiwKICAgICJKdW4iLAogICAgIkp1bCIsCiAgICAiQXVnIiwKICAgICJTZXAiLAogICAgIk9jdCIsCiAgICAiTm92IiwKICAgICJEZWMiCiAgXTsKICBjb25zdCBUSU1FU0NBTEVTID0gWwogICAgWUVBUiAqIDEwLAogICAgWUVBUiAqIDUsCiAgICBZRUFSICogMywKICAgIFlFQVIgKiAyLAogICAgWUVBUiwKICAgIE1PTlRIICogNiwKICAgIE1PTlRIICogNCwKICAgIE1PTlRIICogMywKICAgIE1PTlRIICogMiwKICAgIE1PTlRILAogICAgREFZICogMTUsCiAgICBEQVkgKiAxMCwKICAgIERBWSAqIDcsCiAgICBEQVkgKiA1LAogICAgREFZICogMywKICAgIERBWSAqIDIsCiAgICBEQVksCiAgICBIT1VSICogMTIsCiAgICBIT1VSICogNiwKICAgIEhPVVIgKiAzLAogICAgSE9VUiAqIDEuNSwKICAgIEhPVVIsCiAgICBNSU5VVEUzMCwKICAgIE1JTlVURTE1LAogICAgTUlOVVRFICogMTAsCiAgICBNSU5VVEU1LAogICAgTUlOVVRFICogMiwKICAgIE1JTlVURQogIF07CiAgY29uc3QgJFNDQUxFUyA9IFswLjA1LCAwLjEsIDAuMiwgMC4yNSwgMC41LCAwLjgsIDEsIDIsIDVdOwogIGNvbnN0IENPTE9SUyA9IHsKICAgIGJhY2s6ICIjMTQxNTFjIiwKICAgIC8vIEJhY2tncm91bmQgY29sb3IKICAgIGdyaWQ6ICIjMjUyNzMyIiwKICAgIC8vIEdyaWQgY29sb3IKICAgIHRleHQ6ICIjYWRhZGFkIiwKICAgIC8vIFJlZ3VsYXIgdGV4dCBjb2xvcgogICAgdGV4dEhMOiAiI2RlZGRkZCIsCiAgICAvLyBIaWdobGlnaHRlZCB0ZXh0IGNvbG9yCiAgICB0ZXh0TEc6ICIjYzRjNGM0IiwKICAgIC8vIExlZ2VuZCB0ZXh0IGNvbG9yCiAgICBsbFZhbHVlOiAiIzgxODk4OSIsCiAgICAvLyBMZWdlbmQgdmFsdWUgY29sb3IKICAgIGxsQmFjazogIiMxNDE1MWM3NyIsCiAgICAvLyBMZWdlbmQgYmFyIGJhY2tncm91bmQKICAgIGxsU2VsZWN0OiAiIzJkN2IyZiIsCiAgICAvLyBMZWdlbmQgc2VsZWN0IGJvcmRlcgogICAgc2NhbGU6ICIjNjA2MDYwIiwKICAgIC8vIFNjYWxlIGVkZ2UgY29sb3IKICAgIGNyb3NzOiAiIzgwOTFhMCIsCiAgICAvLyBDcm9zc2hhaXIgY29sb3IKICAgIGNhbmRsZVVwOiAiIzQxYTM3NiIsCiAgICAvLyAiR3JlZW4iIGNhbmRsZSBjb2xvcgogICAgY2FuZGxlRHc6ICIjZGU0NjQ2IiwKICAgIC8vICJSZWQiIGNhbmRsZSBjb2xvcgogICAgd2lja1VwOiAiIzIzYTc3Njg4IiwKICAgIC8vICJHcmVlbiIgd2ljayBjb2xvcgogICAgd2lja0R3OiAiI2U1NDE1MDg4IiwKICAgIC8vICJSZWQiIHdpY2sgY29sb3IKICAgIHZvbFVwOiAiIzQxYTM3NjgyIiwKICAgIC8vICJHcmVlbiIgdm9sdW1lIGNvbG9yCiAgICB2b2xEdzogIiNkZTQ2NDY4MiIsCiAgICAvLyAiUmVkIiB2b2x1bWUgY29sb3IKICAgIHBhbmVsOiAiIzJhMmYzOCIsCiAgICAvLyBTY2FsZSBwYW5lbCBjb2xvcgogICAgdGJCYWNrOiB2b2lkIDAsCiAgICAvLyBUb29sYmFyIGJhY2tncm91bmQKICAgIHRiQm9yZGVyOiAiIzgyODI4MjdkIgogICAgLy8gVG9vbGJhciBib3JkZXIgY29sb3IKICB9OwogIGNvbnN0IENoYXJ0Q29uZmlnID0gewogICAgU0JNSU46IDYwLAogICAgLy8gTWluaW1hbCBzaWRlYmFyLCBweAogICAgU0JNQVg6IEluZmluaXR5LAogICAgLy8gTWF4IHNpZGViYXIsIHB4CiAgICBUT09MQkFSOiA1NywKICAgIC8vIFRvb2xiYXIgd2lkdGgsIHB4CiAgICBUQl9JQ09OOiAyNSwKICAgIC8vIFRvb2xiYXIgaWNvbiBzaXplLCBweAogICAgVEJfSVRFTV9NOiA2LAogICAgLy8gVG9vbGJhciBpdGVtIG1hcmdpbiwgcHgKICAgIFRCX0lDT05fQlJJOiAxLAogICAgLy8gVG9vbGJhciBpY29uIGJyaWdodG5lc3MKICAgIFRCX0lDT05fSE9MRDogNDIwLAogICAgLy8gV2FpdCB0byBleHBhbmQsIG1zCiAgICBUQl9CT1JERVI6IDEsCiAgICAvLyBUb29sYmFyIGJvcmRlciwgcHgKICAgIFRCX0JfU1RZTEU6ICJkb3R0ZWQiLAogICAgLy8gVG9vbGJhciBib3JkZXIgc3R5bGUKICAgIFRPT0xfQ09MTDogNywKICAgIC8vIFRvb2wgY29sbGlzaW9uIHRocmVzaG9sZAogICAgRVhQQU5EOiAwLjE1LAogICAgLy8gRXhwYW5kIHktcmFuZ2UsICUvMTAwIG9mIHJhbmdlCiAgICBDQU5ETEVXOiAwLjcsCiAgICAvLyBDYW5kbGUgd2lkdGgsICUvMTAwIG9mIHN0ZXAKICAgIEdSSURYOiAxMDAsCiAgICAvLyBHcmlkIHgtc3RlcCB0YXJnZXQsIHB4CiAgICBHUklEWTogNDcsCiAgICAvLyBHcmlkIHktc3RlcCB0YXJnZXQsIHB4CiAgICBCT1RCQVI6IDI4LAogICAgLy8gQm90dG9tIGJhciBoZWlnaHQsIHB4CiAgICBQQU5IRUlHSFQ6IDIyLAogICAgLy8gU2NhbGUgcGFuZWwgaGVpZ2h0LCBweAogICAgREVGQVVMVF9MRU46IDUwLAogICAgLy8gU3RhcnRpbmcgcmFuZ2UsIGNhbmRsZXMKICAgIE1JTklNVU1fTEVOOiA1LAogICAgLy8gTWluaW1hbCBzdGFydGluZyByYW5nZSwgY2FuZGxlcwogICAgTUlOX1pPT006IDUsCiAgICAvLyBNaW5pbWFsIHpvb20sIGNhbmRsZXMKICAgIE1BWF9aT09NOiA1ZTMsCiAgICAvLyBNYXhpbWFsIHpvb20sIGNhbmRsZXMsCiAgICBWT0xTQ0FMRTogMC4xNSwKICAgIC8vIFZvbHVtZSBiYXJzIGhlaWdodCwgJS8xMDAgb2YgbGF5b3V0LmhlaWdodAogICAgVVhfT1BBQ0lUWTogMC45LAogICAgLy8gVXggYmFja2dyb3VuZCBvcGFjaXR5CiAgICBaT09NX01PREU6ICJ0diIsCiAgICAvLyBab29tIG1vZGUsICd0dicgb3IgJ3RsJwogICAgTF9CVE5fU0laRTogMjEsCiAgICAvLyBMZWdlbmQgQnV0dG9uIHNpemUsIHB4CiAgICBMX0JUTl9NQVJHSU46ICItNnB4IDAgLTZweCAwIiwKICAgIC8vIGNzcyBtYXJnaW4KICAgIFNDUk9MTF9XSEVFTDogInByZXZlbnQiLAogICAgLy8gU2Nyb2xsIHdoZWVsIG1vcmRlLCAncHJldmVudCcsICdwYXNzJywgJ2NsaWNrJywKICAgIFFVQU5USVpFX0FGVEVSOiAwLAogICAgLy8gUXVhbnRpemUgY3Vyc29yIGFmdGVyLCBtcwogICAgQVVUT19QUkVfU0FNUExFOiAxMAogICAgLy8gU2FtcGxlIHNpemUgZm9yIGF1dG8tcHJlY2lzaW9uCiAgfTsKICBDaGFydENvbmZpZy5GT05UID0gYDExcHggLWFwcGxlLXN5c3RlbSxCbGlua01hY1N5c3RlbUZvbnQsCiAgICBTZWdvZSBVSSxSb2JvdG8sT3h5Z2VuLFVidW50dSxDYW50YXJlbGwsCiAgICBGaXJhIFNhbnMsRHJvaWQgU2FucyxIZWx2ZXRpY2EgTmV1ZSwKICAgIHNhbnMtc2VyaWZgOwogIGNvbnN0IElCX1RGX1dBUk4gPSBgV2hlbiB1c2luZyBJQiBtb2RlIHlvdSBzaG91bGQgc3BlY2lmeSB0aW1lZnJhbWUgKCd0ZicgZmlsZWQgaW4gJ2NoYXJ0JyBvYmplY3QpLG90aGVyd2lzZSB5b3UgY2FuIGdldCBhbiB1bmV4cGVjdGVkIGJlaGF2aW91cmA7CiAgY29uc3QgTUFQX1VOSVQgPSB7CiAgICAiMXMiOiBTRUNPTkQsCiAgICAiNXMiOiBTRUNPTkQgKiA1LAogICAgIjEwcyI6IFNFQ09ORCAqIDEwLAogICAgIjIwcyI6IFNFQ09ORCAqIDIwLAogICAgIjMwcyI6IFNFQ09ORCAqIDMwLAogICAgIjFtIjogTUlOVVRFLAogICAgIjNtIjogTUlOVVRFMywKICAgICI1bSI6IE1JTlVURTUsCiAgICAiMTVtIjogTUlOVVRFMTUsCiAgICAiMzBtIjogTUlOVVRFMzAsCiAgICAiMUgiOiBIT1VSLAogICAgIjJIIjogSE9VUiAqIDIsCiAgICAiM0giOiBIT1VSICogMywKICAgICI0SCI6IEhPVVI0LAogICAgIjEySCI6IEhPVVIxMiwKICAgICIxRCI6IERBWSwKICAgICIxVyI6IFdFRUssCiAgICAiMU0iOiBNT05USCwKICAgICIxWSI6IFlFQVIsCiAgICAvLyBMb3dlciBjYXNlIHZhcmlhbnRzCiAgICAiMWgiOiBIT1VSLAogICAgIjJoIjogSE9VUiAqIDIsCiAgICAiM2giOiBIT1VSICogMywKICAgICI0aCI6IEhPVVI0LAogICAgIjEyaCI6IEhPVVIxMiwKICAgICIxZCI6IERBWSwKICAgICIxdyI6IFdFRUssCiAgICAiMXkiOiBZRUFSCiAgfTsKICBjb25zdCBIUFggPSAtMC41OwogIHZhciBDb25zdCA9IHsKICAgIFNFQ09ORCwKICAgIE1JTlVURSwKICAgIE1JTlVURTUsCiAgICBNSU5VVEUxNSwKICAgIE1JTlVURTMwLAogICAgSE9VUiwKICAgIEhPVVI0LAogICAgREFZLAogICAgV0VFSywKICAgIE1PTlRILAogICAgWUVBUiwKICAgIE1PTlRITUFQLAogICAgVElNRVNDQUxFUywKICAgICRTQ0FMRVMsCiAgICBDaGFydENvbmZpZywKICAgIE1BUF9VTklULAogICAgSUJfVEZfV0FSTiwKICAgIENPTE9SUywKICAgIEhQWAogIH07CiAgdmFyIFV0aWxzID0gewogICAgY2xhbXAobnVtLCBtaW4sIG1heCkgewogICAgICByZXR1cm4gbnVtIDw9IG1pbiA/IG1pbiA6IG51bSA+PSBtYXggPyBtYXggOiBudW07CiAgICB9LAogICAgYWRkWmVybyhpKSB7CiAgICAgIGlmIChpIDwgMTApIHsKICAgICAgICBpID0gIjAiICsgaTsKICAgICAgfQogICAgICByZXR1cm4gaTsKICAgIH0sCiAgICAvLyBTdGFydCBvZiB0aGUgZGF5ICh6ZXJvIG1pbGxpc2Vjb25kKQogICAgZGF5U3RhcnQodCkgewogICAgICBsZXQgc3RhcnQgPSBuZXcgRGF0ZSh0KTsKICAgICAgcmV0dXJuIHN0YXJ0LnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogICAgfSwKICAgIC8vIFN0YXJ0IG9mIHRoZSBtb250aAogICAgbW9udGhTdGFydCh0KSB7CiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodCk7CiAgICAgIHJldHVybiBEYXRlLlVUQygKICAgICAgICBkYXRlLmdldEZ1bGxZZWFyKCksCiAgICAgICAgZGF0ZS5nZXRNb250aCgpLAogICAgICAgIDEKICAgICAgKTsKICAgIH0sCiAgICAvLyBTdGFydCBvZiB0aGUgeWVhcgogICAgeWVhclN0YXJ0KHQpIHsKICAgICAgcmV0dXJuIERhdGUuVVRDKG5ldyBEYXRlKHQpLmdldEZ1bGxZZWFyKCkpOwogICAgfSwKICAgIGdldFllYXIodCkgewogICAgICBpZiAoIXQpCiAgICAgICAgcmV0dXJuIHZvaWQgMDsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHQpLmdldFVUQ0Z1bGxZZWFyKCk7CiAgICB9LAogICAgZ2V0TW9udGgodCkgewogICAgICBpZiAoIXQpCiAgICAgICAgcmV0dXJuIHZvaWQgMDsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHQpLmdldFVUQ01vbnRoKCk7CiAgICB9LAogICAgLy8gTmVhcmVzdCBpbiBhcnJheQogICAgbmVhcmVzdEEoeCwgYXJyYXkpIHsKICAgICAgbGV0IGRpc3QgPSBJbmZpbml0eTsKICAgICAgbGV0IHZhbCA9IG51bGw7CiAgICAgIGxldCBpbmRleCA9IC0xOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHhpID0gYXJyYXlbaV07CiAgICAgICAgaWYgKE1hdGguYWJzKHhpIC0geCkgPCBkaXN0KSB7CiAgICAgICAgICBkaXN0ID0gTWF0aC5hYnMoeGkgLSB4KTsKICAgICAgICAgIHZhbCA9IHhpOwogICAgICAgICAgaW5kZXggPSBpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gW2luZGV4LCB2YWxdOwogICAgfSwKICAgIC8vIE5lYXJlc3QgdmFsdWUgYnkgdGltZSAoaW4gdGltZXNlcmllcykKICAgIG5lYXJlc3RUcyh0LCB0cykgewogICAgICBsZXQgZGlzdCA9IEluZmluaXR5OwogICAgICBsZXQgdmFsID0gbnVsbDsKICAgICAgbGV0IGluZGV4ID0gLTE7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdGkgPSB0c1tpXVswXTsKICAgICAgICBpZiAoTWF0aC5hYnModGkgLSB0KSA8IGRpc3QpIHsKICAgICAgICAgIGRpc3QgPSBNYXRoLmFicyh0aSAtIHQpOwogICAgICAgICAgdmFsID0gdHNbaV07CiAgICAgICAgICBpbmRleCA9IGk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBbaW5kZXgsIHZhbF07CiAgICB9LAogICAgLy8gTmVhcmVzdCB2YWx1ZSBieSBpbmRleCAoaW4gdGltZXNlcmllcykKICAgIG5lYXJlc3RUc0liKGksIHRzLCBvZmZzZXQpIHsKICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihpIC0gb2Zmc2V0KSArIDE7CiAgICAgIGxldCB2YWwgPSB0c1tpbmRleF0gfHwgbnVsbDsKICAgICAgcmV0dXJuIFtpbmRleCwgdmFsXTsKICAgIH0sCiAgICByb3VuZChudW0sIGRlY2ltYWxzID0gOCkgewogICAgICByZXR1cm4gcGFyc2VGbG9hdChudW0udG9GaXhlZChkZWNpbWFscykpOwogICAgfSwKICAgIC8vIFN0cmlwPyBObywgaXQncyB1Z2x5IGZsb2F0cyBpbiBqcwogICAgc3RyaXAobnVtYmVyKSB7CiAgICAgIHJldHVybiBwYXJzZUZsb2F0KAogICAgICAgIHBhcnNlRmxvYXQobnVtYmVyKS50b1ByZWNpc2lvbigxMikKICAgICAgKTsKICAgIH0sCiAgICBnZXREYXkodCkgewogICAgICByZXR1cm4gdCA/IG5ldyBEYXRlKHQpLmdldERhdGUoKSA6IG51bGw7CiAgICB9LAogICAgLy8gVXBkYXRlIGFycmF5IGtlZXBpbmcgdGhlIHNhbWUgcmVmZXJlbmNlCiAgICBvdmVyd3JpdGUoYXJyLCBuZXdfYXJyKSB7CiAgICAgIGFyci5zcGxpY2UoMCwgYXJyLmxlbmd0aCwgLi4ubmV3X2Fycik7CiAgICB9LAogICAgLy8gR2V0IGZ1bGwgbGlzdCBvZiBvdmVybGF5cyBvbiBhbGwgcGFuZXMKICAgIGFsbE92ZXJsYXlzKHBhbmVzID0gW10pIHsKICAgICAgcmV0dXJuIHBhbmVzLm1hcCgoeCkgPT4geC5vdmVybGF5cyB8fCBbXSkuZmxhdCgpOwogICAgfSwKICAgIC8vIERldGVjdHMgYSB0aW1lZnJhbWUgb2YgdGhlIGRhdGEKICAgIGRldGVjdFRpbWVmcmFtZShkYXRhKSB7CiAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDEsIDk5KTsKICAgICAgbGV0IG1pbiA9IEluZmluaXR5OwogICAgICBkYXRhLnNsaWNlKDAsIGxlbikuZm9yRWFjaCgoeCwgaSkgPT4gewogICAgICAgIGxldCBkID0gZGF0YVtpICsgMV1bMF0gLSB4WzBdOwogICAgICAgIGlmIChkID09PSBkICYmIGQgPCBtaW4pCiAgICAgICAgICBtaW4gPSBkOwogICAgICB9KTsKICAgICAgaWYgKG1pbiA+PSBDb25zdC5NT05USCAmJiBtaW4gPD0gQ29uc3QuREFZICogMzApIHsKICAgICAgICByZXR1cm4gQ29uc3QuREFZICogMzE7CiAgICAgIH0KICAgICAgcmV0dXJuIG1pbjsKICAgIH0sCiAgICAvLyBGYXN0IGZpbHRlci4gUmVhbGx5IGZhc3QsIGxpa2UgMTBYCiAgICBmYXN0RmlsdGVyKGFyciwgdDEsIHQyKSB7CiAgICAgIGlmICghYXJyLmxlbmd0aCkKICAgICAgICByZXR1cm4gW2Fyciwgdm9pZCAwXTsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgaWEgPSBuZXcgSW5kZXhlZEFycmF5JDEoYXJyLCAiMCIpOwogICAgICAgIGxldCByZXMgPSBpYS5nZXRSYW5nZSh0MSwgdDIpOwogICAgICAgIGxldCBpMCA9IGlhLnZhbHBvc1t0MV0ubmV4dDsKICAgICAgICByZXR1cm4gW3JlcywgaTBdOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIFthcnIuZmlsdGVyKAogICAgICAgICAgKHgpID0+IHhbMF0gPj0gdDEgJiYgeFswXSA8PSB0MgogICAgICAgICksIDBdOwogICAgICB9CiAgICB9LAogICAgLy8gRmFzdCBmaWx0ZXIgMiAocmV0dXJucyBpbmRpY2VzKQogICAgZmFzdEZpbHRlcjIoYXJyLCB0MSwgdDIpIHsKICAgICAgaWYgKCFhcnIubGVuZ3RoKQogICAgICAgIHJldHVybiBbYXJyLCB2b2lkIDBdOwogICAgICB0cnkgewogICAgICAgIGxldCBpYSA9IG5ldyBJbmRleGVkQXJyYXkkMShhcnIsICIwIik7CiAgICAgICAgaWEuZmV0Y2godDEpOwogICAgICAgIGxldCBzdGFydCA9IGlhLmN1cnNvciB8fCBpYS5uZXh0aGlnaDsKICAgICAgICBpYS5mZXRjaCh0Mik7CiAgICAgICAgbGV0IGZpbmlzaCA9IGlhLmN1cnNvciB8fCBpYS5uZXh0bG93OwogICAgICAgIHJldHVybiBbc3RhcnQsIGZpbmlzaCArIDFdOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgbGV0IHN1YnNldCA9IGFyci5maWx0ZXIoCiAgICAgICAgICAoeCkgPT4geFswXSA+PSB0MSAmJiB4WzBdIDw9IHQyCiAgICAgICAgKTsKICAgICAgICBsZXQgaTEgPSBhcnIuaW5kZXhPZihzdWJzZXRbMF0pOwogICAgICAgIGxldCBpMiA9IGFyci5pbmRleE9mKHN1YnNldFtzdWJzZXQubGVuZ3RoIC0gMV0pOwogICAgICAgIHJldHVybiBbaTEsIGkyXTsKICAgICAgfQogICAgfSwKICAgIC8vIEZhc3QgZmlsdGVyIChpbmRleC1iYXNlZCkKICAgIGZhc3RGaWx0ZXJJQihhcnIsIHQxLCB0MikgewogICAgICBpZiAoIWFyci5sZW5ndGgpCiAgICAgICAgcmV0dXJuIFt2b2lkIDAsIHZvaWQgMF07CiAgICAgIGxldCBpMSA9IE1hdGguZmxvb3IodDEpOwogICAgICBpZiAoaTEgPCAwKQogICAgICAgIGkxID0gMDsKICAgICAgbGV0IGkyID0gTWF0aC5mbG9vcih0MiArIDEpOwogICAgICByZXR1cm4gW2kxLCBpMl07CiAgICB9LAogICAgLy8gTmVhcmVzdCBpbmRleGVzIChsZWZ0IGFuZCByaWdodCkKICAgIGZhc3ROZWFyZXN0KGFyciwgdDEpIHsKICAgICAgbGV0IGlhID0gbmV3IEluZGV4ZWRBcnJheSQxKGFyciwgIjAiKTsKICAgICAgaWEuZmV0Y2godDEpOwogICAgICByZXR1cm4gW2lhLm5leHRsb3csIGlhLm5leHRoaWdoXTsKICAgIH0sCiAgICBub3coKSB7CiAgICAgIHJldHVybiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLmdldFRpbWUoKTsKICAgIH0sCiAgICBwYXVzZShkZWxheSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJzLCByaikgPT4gc2V0VGltZW91dChycywgZGVsYXkpKTsKICAgIH0sCiAgICAvLyBMaW1pdCBjcmF6eSB3aGVlbCBkZWx0YSB2YWx1ZXMKICAgIHNtYXJ0V2hlZWwoZGVsdGEpIHsKICAgICAgbGV0IGFicyA9IE1hdGguYWJzKGRlbHRhKTsKICAgICAgaWYgKGFicyA+IDUwMCkgewogICAgICAgIHJldHVybiAoMjAwICsgTWF0aC5sb2coYWJzKSkgKiBNYXRoLnNpZ24oZGVsdGEpOwogICAgICB9CiAgICAgIHJldHVybiBkZWx0YTsKICAgIH0sCiAgICAvLyBQYXJzZSB0aGUgb3JpZ2luYWwgbW91c2UgZXZlbnQgdG8gZmluZCBkZWx0YVgKICAgIGdldERlbHRhWChldmVudCkgewogICAgICByZXR1cm4gZXZlbnQub3JpZ2luYWxFdmVudC5kZWx0YVggLyAxMjsKICAgIH0sCiAgICAvLyBQYXJzZSB0aGUgb3JpZ2luYWwgbW91c2UgZXZlbnQgdG8gZmluZCBkZWx0YVkKICAgIGdldERlbHRhWShldmVudCkgewogICAgICByZXR1cm4gZXZlbnQub3JpZ2luYWxFdmVudC5kZWx0YVkgLyAxMjsKICAgIH0sCiAgICAvLyBBcHBseSBvcGFjaXR5IHRvIGEgaGV4IGNvbG9yCiAgICBhcHBseU9wYWNpdHkoYywgb3ApIHsKICAgICAgaWYgKGMubGVuZ3RoID09PSA3KSB7CiAgICAgICAgbGV0IG4gPSBNYXRoLmZsb29yKG9wICogMjU1KTsKICAgICAgICBuID0gdGhpcy5jbGFtcChuLCAwLCAyNTUpOwogICAgICAgIGMgKz0gbi50b1N0cmluZygxNik7CiAgICAgIH0KICAgICAgcmV0dXJuIGM7CiAgICB9LAogICAgLy8gUGFyc2UgdGltZWZyYW1lIG9yIHJldHVybiB2YWx1ZSBpbiBtcwogICAgLy8gVE9ETzogYWRkIGZ1bGwgcGFyc2VyCiAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL3R2anN4L3RyYWRpbmctdnVlLWpzLwogICAgLy8gYmxvYi9tYXN0ZXIvc3JjL2hlbHBlcnMvc2NyaXB0X3V0aWxzLmpzI0w5OCkKICAgIHBhcnNlVGYoc210aCkgewogICAgICBpZiAodHlwZW9mIHNtdGggPT09ICJzdHJpbmciKSB7CiAgICAgICAgcmV0dXJuIENvbnN0Lk1BUF9VTklUW3NtdGhdOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBzbXRoOwogICAgICB9CiAgICB9LAogICAgLy8gRGV0ZWN0IGluZGV4IHNoaWZ0IGJldHdlZW4gdGhlIG1haW4gZGF0YSBzdWJzZXQKICAgIC8vIGFuZCB0aGUgb3ZlcmxheSdzIHN1YnNldCAoZm9yIElCLW1vZGUpCiAgICBpbmRleFNoaWZ0KHN1YiwgZGF0YSkgewogICAgICBpZiAoIWRhdGEubGVuZ3RoKQogICAgICAgIHJldHVybiAwOwogICAgICBsZXQgZmlyc3QgPSBkYXRhWzBdWzBdOwogICAgICBsZXQgc2Vjb25kOwogICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoZGF0YVtpXVswXSAhPT0gZmlyc3QpIHsKICAgICAgICAgIHNlY29uZCA9IGRhdGFbaV1bMF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdWIubGVuZ3RoOyBqKyspIHsKICAgICAgICBpZiAoc3ViW2pdWzBdID09PSBzZWNvbmQpIHsKICAgICAgICAgIHJldHVybiBqIC0gaTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIDA7CiAgICB9LAogICAgLy8gRmFsbGJhY2sgZml4IGZvciBCcmF2ZSBicm93c2VyCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYnJhdmUvYnJhdmUtYnJvd3Nlci9pc3N1ZXMvMTczOAogICAgbWVhc3VyZVRleHQoY3R4LCB0ZXh0LCBudklkKSB7CiAgICAgIGxldCBtID0gY3R4Lm1lYXN1cmVUZXh0T3JnKHRleHQpOwogICAgICBpZiAobS53aWR0aCA9PT0gMCkgewogICAgICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50OwogICAgICAgIGNvbnN0IGlkID0gIm52anMtbWVhc3VyZS10ZXh0IjsKICAgICAgICBsZXQgZWwgPSBkb2MuZ2V0RWxlbWVudEJ5SWQoaWQpOwogICAgICAgIGlmICghZWwpIHsKICAgICAgICAgIGxldCBiYXNlID0gZG9jLmdldEVsZW1lbnRCeUlkKG52SWQpOwogICAgICAgICAgZWwgPSBkb2MuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICBlbC5pZCA9IGlkOwogICAgICAgICAgZWwuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgICAgICAgZWwuc3R5bGUudG9wID0gIi0xMDAwcHgiOwogICAgICAgICAgYmFzZS5hcHBlbmRDaGlsZChlbCk7CiAgICAgICAgfQogICAgICAgIGlmIChjdHguZm9udCkKICAgICAgICAgIGVsLnN0eWxlLmZvbnQgPSBjdHguZm9udDsKICAgICAgICBlbC5pbm5lclRleHQgPSB0ZXh0LnJlcGxhY2UoLyAvZywgIi4iKTsKICAgICAgICByZXR1cm4geyB3aWR0aDogZWwub2Zmc2V0V2lkdGggfTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbTsKICAgICAgfQogICAgfSwKICAgIHV1aWQodGVtcCA9ICJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgiKSB7CiAgICAgIHJldHVybiB0ZW1wLnJlcGxhY2UoL1t4eV0vZywgKGMpID0+IHsKICAgICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDAsIHYgPSBjID09ICJ4IiA/IHIgOiByICYgMyB8IDg7CiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpOwogICAgICB9KTsKICAgIH0sCiAgICB1dWlkMigpIHsKICAgICAgcmV0dXJuIHRoaXMudXVpZCgieHh4eHh4eHh4eHh4Iik7CiAgICB9LAogICAgdXVpZDMoKSB7CiAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc2xpY2UoMikucmVwbGFjZSgvXjArLywgIiIpOwogICAgfSwKICAgIC8vIERlbGF5ZWQgd2FybmluZywgZiA9IGNvbmRpdGlvbiBsYW1iZGEgZm4KICAgIHdhcm4oZiwgdGV4dCwgZGVsYXkgPSAwKSB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmIChmKCkpCiAgICAgICAgICBjb25zb2xlLndhcm4odGV4dCk7CiAgICAgIH0sIGRlbGF5KTsKICAgIH0sCiAgICAvLyBDaGVja3MgaWYgc2NyaXB0IHByb3BzIHVwZGF0ZWQKICAgIC8vIChhbmQgbm90IHN0eWxlIHNldHRpbmdzIG9yIHNvbWV0aGluZyBlbHNlKQogICAgLyppc1NjclByb3BzVXBkKG4sIHByZXYpIHsKICAgICAgICAgICAgICAgIGxldCBwID0gcHJldi5maW5kKHggPT4geC52LiR1dWlkID09PSBuLnYuJHV1aWQpCiAgICAgICAgICAgICAgICBpZiAoIXApIHJldHVybiBmYWxzZQogICAgCiAgICAgICAgICAgICAgICBsZXQgcHJvcHMgPSBuLnAuc2V0dGluZ3MuJHByb3BzCiAgICAgICAgICAgICAgICBpZiAoIXByb3BzKSByZXR1cm4gZmFsc2UKICAgIAogICAgICAgICAgICAgICAgcmV0dXJuIHByb3BzLnNvbWUoeCA9PiBuLnZbeF0gIT09IHAudlt4XSkKICAgICAgICAgICAgfSwqLwogICAgLy8gQ2hlY2tzIGlmIGl0J3MgdGltZSB0byBtYWtlIGEgc2NyaXB0IHVwZGF0ZQogICAgLy8gKGJhc2VkIG9uIGV4ZWNJbnRlcnZhbCBpbiBtcykKICAgIGRlbGF5ZWRFeGVjKHYpIHsKICAgICAgaWYgKCF2LnNjcmlwdCB8fCAhdi5zY3JpcHQuZXhlY0ludGVydmFsKQogICAgICAgIHJldHVybiB0cnVlOwogICAgICBsZXQgdCA9IHRoaXMubm93KCk7CiAgICAgIGxldCBkdCA9IHYuc2NyaXB0LmV4ZWNJbnRlcnZhbDsKICAgICAgaWYgKCF2LnNldHRpbmdzLiRsYXN0X2V4ZWMgfHwgdCA+IHYuc2V0dGluZ3MuJGxhc3RfZXhlYyArIGR0KSB7CiAgICAgICAgdi5zZXR0aW5ncy4kbGFzdF9leGVjID0gdDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgLy8gRm9ybWF0IG5hbWVzIHN1Y2ggJ1JTSSwgJGxlbmd0aCcsIHdoZXJlCiAgICAvLyBsZW5ndGggLSBpcyBvbmUgb2YgdGhlIHNldHRpbmdzCiAgICBmb3JtYXROYW1lKG92KSB7CiAgICAgIGlmICghb3YubmFtZSkKICAgICAgICByZXR1cm4gdm9pZCAwOwogICAgICBsZXQgbmFtZSA9IG92Lm5hbWU7CiAgICAgIGZvciAodmFyIGsgaW4gb3Yuc2V0dGluZ3MgfHwge30pIHsKICAgICAgICBsZXQgdmFsID0gb3Yuc2V0dGluZ3Nba107CiAgICAgICAgbGV0IHJlZyA9IG5ldyBSZWdFeHAoYFxcJCR7a31gLCAiZyIpOwogICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UocmVnLCB2YWwpOwogICAgICB9CiAgICAgIHJldHVybiBuYW1lOwogICAgfSwKICAgIC8vIERlZmF1bHQgY3Vyc29yIG1vZGUKICAgIHhNb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5pc19tb2JpbGUgPyAiZXhwbG9yZSIgOiAiZGVmYXVsdCI7CiAgICB9LAogICAgZGVmYXVsdFByZXZlbnRlZChldmVudCkgewogICAgICBpZiAoZXZlbnQub3JpZ2luYWwpIHsKICAgICAgICByZXR1cm4gZXZlbnQub3JpZ2luYWwuZGVmYXVsdFByZXZlbnRlZDsKICAgICAgfQogICAgICByZXR1cm4gZXZlbnQuZGVmYXVsdFByZXZlbnRlZDsKICAgIH0sCiAgICAvLyBHZXQgYSB2aWV3IGZyb20gdGhlIGRhdGEgYnkgdGhlIG5hbWUKICAgIC8qdmlldyhkYXRhLCBuYW1lKSB7CiAgICAgICAgaWYgKCFkYXRhLnZpZXdzKSByZXR1cm4gZGF0YQogICAgICAgIGxldCB2ID0gZGF0YS52aWV3cy5maW5kKHggPT4geC5uYW1lID09PSBuYW1lKQogICAgICAgIGlmICghdikgcmV0dXJuIGRhdGEKICAgICAgICByZXR1cm4gdi5kYXRhCiAgICB9LCovCiAgICAvKmNvbmNhdEFycmF5cyhhcnJheXMpIHsKICAgICAgICB2YXIgYWNjID0gW10KICAgICAgICBmb3IgKHZhciBhIG9mIGFycmF5cykgewogICAgICAgICAgICBhY2MgPSBhY2MuY29uY2F0KGEpCiAgICAgICAgfQogICAgICAgIHJldHVybiBhY2MKICAgIH0sKi8KICAgIC8vIENhbGwKICAgIGFmdGVyQWxsKG9iamVjdCwgZiwgdGltZSkgewogICAgICBjbGVhclRpbWVvdXQob2JqZWN0Ll9fYWZ0ZXJBbGxJZF9fKTsKICAgICAgb2JqZWN0Ll9fYWZ0ZXJBbGxJZF9fID0gc2V0VGltZW91dCgoKSA9PiBmKCksIHRpbWUpOwogICAgfSwKICAgIC8vIERlZmF1bHQgYXV0by1wcmVjaXNpb24gc2FtcGxlciBmb3IgYSBnZW5lcmljCiAgICAvLyB0aW1lc2VyaWVzLWVsZW1lbnQ6IFt0aW1lLCB4MSwgeDIsIHgzLCAuLi5dCiAgICBkZWZhdWx0UHJlU2FtcGxlcihlbCkgewogICAgICBpZiAoIWVsKQogICAgICAgIHJldHVybiBbXTsKICAgICAgbGV0IG91dCA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGVsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHR5cGVvZiBlbFtpXSA9PT0gIm51bWJlciIpIHsKICAgICAgICAgIG91dC5wdXNoKGVsW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICAvLyBHZXQgc2NhbGVzIGJ5IHNpZGUgaWQgKDAgLSBsZWZ0LCAxIC0gcmlnaHQpCiAgICBnZXRTY2FsZXNCeVNpZGUoc2lkZSwgbGF5b3V0KSB7CiAgICAgIGlmICghbGF5b3V0KQogICAgICAgIHJldHVybiBbXTsKICAgICAgbGV0IHRlbXBsYXRlID0gbGF5b3V0LnNldHRpbmdzLnNjYWxlVGVtcGxhdGU7CiAgICAgIHJldHVybiB0ZW1wbGF0ZVtzaWRlXS5tYXAoKGlkKSA9PiBsYXlvdXQuc2NhbGVzW2lkXSkuZmlsdGVyKCh4KSA9PiB4KTsKICAgIH0sCiAgICAvLyBJZiBzY2FsZVRlbXBsYXRlIGlzIGNoYW5nZWQgdGhlcmUgY291bGQgYmUgYQogICAgLy8gc2l0dWF0aW9uIHdoZW4gdXNlciBmb3JnZXQgdG8gcmVzZXQgc2NhbGVTaWRlSWR4cy4KICAgIC8vIEhlcmUgd2UgYXR0ZW1wIHRvIGdldCB0aGVtIGluIHN5bmMKICAgIGF1dG9TY2FsZVNpZGVJZChTLCBzaWRlcywgaWR4cykgewogICAgICBpZiAoc2lkZXNbU10ubGVuZ3RoKSB7CiAgICAgICAgaWYgKCFpZHhzW1NdIHx8ICFzaWRlc1tTXS5pbmNsdWRlcyhpZHhzW1NdKSkgewogICAgICAgICAgaWR4c1tTXSA9IHNpZGVzW1NdWzBdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZHhzW1NdID0gdm9pZCAwOwogICAgICB9CiAgICB9LAogICAgLy8gRGVidWcgZnVuY3Rpb24sIHNob3dzIGhvdyBtYW55IHRpbWVzCiAgICAvLyB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgcGVyIHNlY29uZAogICAgY2FsbHNQZXJTZWNvbmQoKSB7CiAgICAgIGlmICh3aW5kb3cuX19jb3VudGVyX18gPT09IHZvaWQgMCkgewogICAgICAgIHdpbmRvdy5fX2NvdW50ZXJfXyA9IDA7CiAgICAgIH0KICAgICAgd2luZG93Ll9fY291bnRlcl9fKys7CiAgICAgIGlmICh3aW5kb3cuX19jcHNJZF9fKQogICAgICAgIHJldHVybjsKICAgICAgd2luZG93Ll9fY3BzSWRfXyA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5fX2NvdW50ZXJfXywgInVwZC9zZWMiKTsKICAgICAgICB3aW5kb3cuX19jb3VudGVyX18gPSAwOwogICAgICAgIHdpbmRvdy5fX2Nwc0lkX18gPSBudWxsOwogICAgICB9LCAxZTMpOwogICAgfSwKICAgIC8vIENhbGN1bGF0ZSBhbiBpbmRleCBvZmZzZXQgZm9yIGEgdGltZXNlcmllcwogICAgLy8gYWdhaW5zdCB0aGUgbWFpbiB0cy4gKGZvciBpbmRleEJhc2VkIG1vZGUpCiAgICBmaW5kSW5kZXhPZmZzZXQobWFpblRzLCB0cykgewogICAgICBsZXQgc2V0MSA9IHt9OwogICAgICBsZXQgc2V0MiA9IHt9OwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1haW5Ucy5sZW5ndGg7IGkrKykgewogICAgICAgIHNldDFbbWFpblRzW2ldWzBdXSA9IGk7CiAgICAgIH0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHNldDJbdHNbaV1bMF1dID0gaTsKICAgICAgfQogICAgICBsZXQgZGVsdGFzID0gW107CiAgICAgIGZvciAodmFyIHQgaW4gc2V0MikgewogICAgICAgIGlmIChzZXQxW3RdICE9PSB2b2lkIDApIHsKICAgICAgICAgIGxldCBkID0gc2V0MVt0XSAtIHNldDJbdF07CiAgICAgICAgICBpZiAoIWRlbHRhcy5sZW5ndGggfHwgZGVsdGFzWzBdID09PSBkKSB7CiAgICAgICAgICAgIGRlbHRhcy51bnNoaWZ0KGQpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGRlbHRhcy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgcmV0dXJuIGRlbHRhcy5wb3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIDA7CiAgICB9LAogICAgLy8gRm9ybWF0IGNhc2ggdmFsdWVzCiAgICBmb3JtYXRDYXNoKG4pIHsKICAgICAgaWYgKG4gPT0gdm9pZCAwKQogICAgICAgIHJldHVybiAieCI7CiAgICAgIGlmICh0eXBlb2YgbiAhPT0gIm51bWJlciIpCiAgICAgICAgcmV0dXJuIG47CiAgICAgIGlmIChuIDwgMWUzKQogICAgICAgIHJldHVybiBuLnRvRml4ZWQoMCk7CiAgICAgIGlmIChuID49IDFlMyAmJiBuIDwgMWU2KQogICAgICAgIHJldHVybiArKG4gLyAxZTMpLnRvRml4ZWQoMikgKyAiSyI7CiAgICAgIGlmIChuID49IDFlNiAmJiBuIDwgMWU5KQogICAgICAgIHJldHVybiArKG4gLyAxZTYpLnRvRml4ZWQoMikgKyAiTSI7CiAgICAgIGlmIChuID49IDFlOSAmJiBuIDwgMWUxMikKICAgICAgICByZXR1cm4gKyhuIC8gMWU5KS50b0ZpeGVkKDIpICsgIkIiOwogICAgICBpZiAobiA+PSAxZTEyKQogICAgICAgIHJldHVybiArKG4gLyAxZTEyKS50b0ZpeGVkKDIpICsgIlQiOwogICAgfSwKICAgIC8vIFRpbWUgcmFuZ2Ugb2YgYSBkYXRhIHN1YnNldCAoZnJvbSBpMCB0byBpTi0xKQogICAgcmVhbFRpbWVSYW5nZShkYXRhKSB7CiAgICAgIGlmICghZGF0YS5sZW5ndGgpCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIHJldHVybiBkYXRhW2RhdGEubGVuZ3RoIC0gMV1bMF0gLSBkYXRhWzBdWzBdOwogICAgfSwKICAgIC8vIEdldCBzaXplcyBsZWZ0IGFuZCByaWdodCBwYXJ0cyBvZiBhIG51bWJlcgogICAgLy8gKDExLjIyIC0+IFsnMTEnLCAnMjInXSkKICAgIG51bWJlckxSKHgpIHsKICAgICAgdmFyIHN0ciA9IHggIT0gbnVsbCA/IHgudG9TdHJpbmcoKSA6ICIiOwogICAgICBpZiAoeCA8IDFlLTYpIHsKICAgICAgICB2YXIgW2xzLCByc10gPSBzdHIuc3BsaXQoImUtIik7CiAgICAgICAgdmFyIFtsLCByXSA9IGxzLnNwbGl0KCIuIik7CiAgICAgICAgaWYgKCFyKQogICAgICAgICAgciA9ICIiOwogICAgICAgIHIgPSB7IGxlbmd0aDogci5sZW5ndGggKyBwYXJzZUludChycykgfHwgMCB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBbbCwgcl0gPSBzdHIuc3BsaXQoIi4iKTsKICAgICAgfQogICAgICByZXR1cm4gW2wubGVuZ3RoLCByID8gci5sZW5ndGggOiAwXTsKICAgIH0sCiAgICAvLyBHZXQgYSBoYXNoIG9mIGN1cnJlbnQgb3ZlcmxheSBkaXNwb3NpdGlvbjoKICAgIC8vIHBhbmUxLnV1aWQrb3YxLnR5cGUrb3YyLnR5cGUrLi4uK3BhbmUyLnV1aWQrLi4uCiAgICBvdkRpc3Bvc2l0aW9uSGFzaChwYW5lcykgewogICAgICBsZXQgaCA9ICIiOwogICAgICBmb3IgKHZhciBwYW5lIG9mIHBhbmVzKSB7CiAgICAgICAgaCArPSBwYW5lLnV1aWQ7CiAgICAgICAgZm9yICh2YXIgb3Ygb2YgcGFuZS5vdmVybGF5cykgewogICAgICAgICAgaWYgKG92Lm1haW4pCiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgaCArPSBvdi50eXBlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gaDsKICAgIH0sCiAgICAvLyBGb3JtYXQgY3Vyc29yIGV2ZW50IGZvciB0aGUgJyRjdXJzb3ItdXBkYXRlJyBob29rCiAgICAvLyBUT0RPOiBkb2Vzbid0IHdvcmsgZm9yIHJlbmtvCiAgICBtYWtlQ3Vyc29yRXZlbnQoJGN1cnNvciwgY3Vyc29yLCBsYXlvdXQpIHsKICAgICAgJGN1cnNvci52YWx1ZXMgPSBjdXJzb3IudmFsdWVzOwogICAgICAkY3Vyc29yLnRpID0gY3Vyc29yLnRpOwogICAgICAkY3Vyc29yLnRpbWUgPSBjdXJzb3IudGltZTsKICAgICAgJGN1cnNvci5vaGxjQ29vcmQgPSAoKSA9PiB7CiAgICAgICAgbGV0IG9obGMgPSBsYXlvdXQubWFpbi5vaGxjKGN1cnNvci50aW1lKTsKICAgICAgICByZXR1cm4gb2hsYyA/IHsKICAgICAgICAgIHg6IGxheW91dC5tYWluLnRpbWUyeChjdXJzb3IudGkpLAogICAgICAgICAgeXM6IG9obGMubWFwKCh4KSA9PiBsYXlvdXQubWFpbi52YWx1ZTJ5KHgpKQogICAgICAgIH0gOiBudWxsOwogICAgICB9OwogICAgICByZXR1cm4gJGN1cnNvcjsKICAgIH0sCiAgICAvLyBXVEYgd2l0aCBtb2Rlcm4gd2ViIGRldmVsb3BtZW50CiAgICBpc01vYmlsZTogKCh3KSA9PiAib25vcmllbnRhdGlvbmNoYW5nZSIgaW4gdyAmJiAoISFuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgfHwgISFuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyB8fCAoIm9udG91Y2hzdGFydCIgaW4gdyB8fCB3LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiB3LkRvY3VtZW50VG91Y2gpKSkodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKICB9OwogIGNvbnN0IEZERUZTID0gLyhmdW5jdGlvbiB8KShbJEEtWl9dWzAtOUEtWl8kXC5dKilbXHNdKj9cKCguKj8pXCkvZ21pOwogIGNvbnN0IFNCUkFDS0VUUyA9IC8oWyRBLVpfXVswLTlBLVpfJFwuXSopW1xzXSo/XFsoW14iXlxbXlxdXSs/KVxdL2dtaTsKICBjb25zdCBURlNUUiA9IC8oXGQrKShcdyopL2dtOwogIGNvbnN0IEJVRl9JTkMkMSA9IDU7CiAgdmFyIHRmX2NhY2hlID0ge307CiAgZnVuY3Rpb24gZl9hcmdzKHNyYykgewogICAgRkRFRlMubGFzdEluZGV4ID0gMDsKICAgIHZhciBtID0gRkRFRlMuZXhlYyhzcmMpOwogICAgaWYgKG0pIHsKICAgICAgbVsxXS50cmltKCk7CiAgICAgIG1bMl0udHJpbSgpOwogICAgICBsZXQgZmFyZ3MgPSBtWzNdLnRyaW0oKTsKICAgICAgcmV0dXJuIGZhcmdzLnNwbGl0KCIsIikubWFwKCh4KSA9PiB4LnRyaW0oKSk7CiAgICB9CiAgICByZXR1cm4gW107CiAgfQogIGZ1bmN0aW9uIGZfYm9keShzcmMpIHsKICAgIHJldHVybiBzcmMuc2xpY2UoCiAgICAgIHNyYy5pbmRleE9mKCJ7IikgKyAxLAogICAgICBzcmMubGFzdEluZGV4T2YoIn0iKQogICAgKTsKICB9CiAgZnVuY3Rpb24gd3JhcF9pZHhzKHNyYywgcHJlID0gIiIpIHsKICAgIFNCUkFDS0VUUy5sYXN0SW5kZXggPSAwOwogICAgbGV0IGNoYW5nZWQgPSBmYWxzZTsKICAgIGRvIHsKICAgICAgdmFyIG0gPSBTQlJBQ0tFVFMuZXhlYyhzcmMpOwogICAgICBpZiAobSkgewogICAgICAgIGxldCB2bmFtZSA9IG1bMV0udHJpbSgpOwogICAgICAgIGxldCB2aW5kZXggPSBtWzJdLnRyaW0oKTsKICAgICAgICBpZiAodmluZGV4ID09PSAiMCIgfHwgcGFyc2VJbnQodmluZGV4KSA8IEJVRl9JTkMkMSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIHN3aXRjaCAodm5hbWUpIHsKICAgICAgICAgIGNhc2UgImxldCI6CiAgICAgICAgICBjYXNlICJ2YXIiOgogICAgICAgICAgY2FzZSAicmV0dXJuIjoKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGxldCB3cmFwID0gYCR7dm5hbWV9WyR7cHJlfV9pKCR7dmluZGV4fSwgJHt2bmFtZX0pXWA7CiAgICAgICAgc3JjID0gc3JjLnJlcGxhY2UobVswXSwgd3JhcCk7CiAgICAgICAgY2hhbmdlZCA9IHRydWU7CiAgICAgIH0KICAgIH0gd2hpbGUgKG0pOwogICAgcmV0dXJuIGNoYW5nZWQgPyBzcmMgOiBzcmM7CiAgfQogIGZ1bmN0aW9uIHRmX2Zyb21fcGFpcihudW0sIHBmKSB7CiAgICB2YXIgbXVsdCA9IDE7CiAgICBzd2l0Y2ggKHBmKSB7CiAgICAgIGNhc2UgInMiOgogICAgICAgIG11bHQgPSBDb25zdC5TRUNPTkQ7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm0iOgogICAgICAgIG11bHQgPSBDb25zdC5NSU5VVEU7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIkgiOgogICAgICAgIG11bHQgPSBDb25zdC5IT1VSOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJEIjoKICAgICAgICBtdWx0ID0gQ29uc3QuREFZOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJXIjoKICAgICAgICBtdWx0ID0gQ29uc3QuV0VFSzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAiTSI6CiAgICAgICAgbXVsdCA9IENvbnN0Lk1PTlRIOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJZIjoKICAgICAgICBtdWx0ID0gQ29uc3QuWUVBUjsKICAgICAgICBicmVhazsKICAgIH0KICAgIHJldHVybiBwYXJzZUludChudW0pICogbXVsdDsKICB9CiAgZnVuY3Rpb24gdGZfZnJvbV9zdHIoc3RyKSB7CiAgICBpZiAodHlwZW9mIHN0ciA9PT0gIm51bWJlciIpCiAgICAgIHJldHVybiBzdHI7CiAgICBpZiAodGZfY2FjaGVbc3RyXSkKICAgICAgcmV0dXJuIHRmX2NhY2hlW3N0cl07CiAgICBURlNUUi5sYXN0SW5kZXggPSAwOwogICAgbGV0IG0gPSBURlNUUi5leGVjKHN0cik7CiAgICBpZiAobSkgewogICAgICB0Zl9jYWNoZVtzdHJdID0gdGZfZnJvbV9wYWlyKG1bMV0sIG1bMl0pOwogICAgICByZXR1cm4gdGZfY2FjaGVbc3RyXTsKICAgIH0KICAgIHJldHVybiB2b2lkIDA7CiAgfQogIGZ1bmN0aW9uIGdldF9mbl9pZChwcmUsIGlkKSB7CiAgICByZXR1cm4gcHJlICsgIi0iICsgaWQuc3BsaXQoIjwtIikucG9wKCk7CiAgfQogIGZ1bmN0aW9uIG5leHR0KGRhdGEsIHQsIHRpID0gMCkgewogICAgbGV0IGkwID0gMDsKICAgIGxldCBpTiA9IGRhdGEubGVuZ3RoIC0gMTsKICAgIHdoaWxlIChpMCA8PSBpTikgewogICAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigoaTAgKyBpTikgLyAyKTsKICAgICAgaWYgKGRhdGFbbWlkXVt0aV0gPT09IHQpIHsKICAgICAgICByZXR1cm4gbWlkOwogICAgICB9IGVsc2UgaWYgKGRhdGFbbWlkXVt0aV0gPCB0KSB7CiAgICAgICAgaTAgPSBtaWQgKyAxOwogICAgICB9IGVsc2UgewogICAgICAgIGlOID0gbWlkIC0gMTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHQgPCBkYXRhW21pZF1bdGldID8gbWlkIDogbWlkICsgMTsKICB9CiAgZnVuY3Rpb24gc2l6ZV9vZl9kc3MoZGF0YSkgewogICAgbGV0IGJ5dGVzID0gMDsKICAgIGZvciAodmFyIGlkIGluIGRhdGEpIHsKICAgICAgaWYgKGRhdGFbaWRdLmRhdGEgJiYgZGF0YVtpZF0uZGF0YVswXSkgewogICAgICAgIGxldCBzMCA9IHNpemVfb2YoZGF0YVtpZF0uZGF0YVswXSk7CiAgICAgICAgYnl0ZXMgKz0gczAgKiBkYXRhW2lkXS5kYXRhLmxlbmd0aDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGJ5dGVzOwogIH0KICBmdW5jdGlvbiBzaXplX29mKG9iamVjdCkgewogICAgdmFyIGxpc3QgPSBbXSwgc3RhY2sgPSBbb2JqZWN0XSwgYnl0ZXMgPSAwOwogICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkgewogICAgICB2YXIgdmFsdWUgPSBzdGFjay5wb3AoKTsKICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7CiAgICAgIGlmICh0eXBlID09PSAiYm9vbGVhbiIpIHsKICAgICAgICBieXRlcyArPSA0OwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJzdHJpbmciKSB7CiAgICAgICAgYnl0ZXMgKz0gdmFsdWUubGVuZ3RoICogMjsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAibnVtYmVyIikgewogICAgICAgIGJ5dGVzICs9IDg7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gIm9iamVjdCIgJiYgbGlzdC5pbmRleE9mKHZhbHVlKSA9PT0gLTEpIHsKICAgICAgICBsaXN0LnB1c2godmFsdWUpOwogICAgICAgIGZvciAodmFyIGkgaW4gdmFsdWUpIHsKICAgICAgICAgIHN0YWNrLnB1c2godmFsdWVbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIGJ5dGVzOwogIH0KICBmdW5jdGlvbiB1cGRhdGUoZGF0YSwgdmFsKSB7CiAgICBjb25zdCBpID0gZGF0YS5sZW5ndGggLSAxOwogICAgY29uc3QgbGFzdCA9IGRhdGFbaV07CiAgICBpZiAoIWxhc3QgfHwgdmFsWzBdID4gbGFzdFswXSkgewogICAgICBkYXRhLnB1c2godmFsKTsKICAgIH0gZWxzZSB7CiAgICAgIGRhdGFbaV0gPSB2YWw7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG5vdygpIHsKICAgIHJldHVybiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLmdldFRpbWUoKTsKICB9CiAgZnVuY3Rpb24gb3ZlcnJpZGVPdmVybGF5KG92MSwgb3YyKSB7CiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvdjIpKSB7CiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICJvYmplY3QiICYmIHZhbHVlICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgIGlmICghb3YxW2tleV0pIHsKICAgICAgICAgIG92MVtrZXldID0ge307CiAgICAgICAgfQogICAgICAgIE9iamVjdC5hc3NpZ24ob3YxW2tleV0sIHZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdjFba2V5XSA9IHZhbHVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3YxOwogIH0KICBjb25zdCBERUZfTElNSVQkMiA9IDU7CiAgZnVuY3Rpb24gU2FtcGxlcihULCBhdXRvID0gZmFsc2UpIHsKICAgIGxldCBUaSA9IFsiaGlnaCIsICJsb3ciLCAiY2xvc2UiLCAidm9sIl0uaW5kZXhPZihUKTsKICAgIHJldHVybiBmdW5jdGlvbih4LCB0KSB7CiAgICAgIGxldCB0ZiA9IHRoaXMuX190Zl9fOwogICAgICB0aGlzLl9faWRfXzsKICAgICAgdCA9IHQgfHwgc2UudDsKICAgICAgbGV0IHZhbCA9IGF1dG8gPyBzZVtUXVswXSA6IHg7CiAgICAgIGlmICghdGhpcy5fX3QwX18gfHwgdCA+PSB0aGlzLl9fdDBfXyArIHRmKSB7CiAgICAgICAgdGhpcy51bnNoaWZ0KFRpICE9PSAzID8gdmFsIDogMCk7CiAgICAgICAgdGhpcy5fX3QwX18gPSB0IC0gdCAlIHRmOwogICAgICB9CiAgICAgIHN3aXRjaCAoVGkpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBpZiAodmFsID4gdGhpc1swXSkKICAgICAgICAgICAgdGhpc1swXSA9IHZhbDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMToKICAgICAgICAgIGlmICh2YWwgPCB0aGlzWzBdKQogICAgICAgICAgICB0aGlzWzBdID0gdmFsOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpc1swXSA9IHZhbDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHRoaXNbMF0gKz0gdmFsOwogICAgICB9CiAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5fX2xlbl9fIHx8IERFRl9MSU1JVCQyOwogICAgfTsKICB9CiAgZnVuY3Rpb24gVFMoaWQsIGFyciwgbGVuKSB7CiAgICBhcnIuX19pZF9fID0gaWQ7CiAgICBhcnIuX19sZW5fXyA9IGxlbjsKICAgIHJldHVybiBhcnI7CiAgfQogIGNvbnN0IE9ITENWID0gWyJvcGVuIiwgImhpZ2giLCAibG93IiwgImNsb3NlIiwgInZvbCJdOwogIGNvbnN0IEFSUiA9IDA7CiAgY29uc3QgVFNTID0gMTsKICBjb25zdCBOVU0gPSAyOwogIGNsYXNzIFN5bSB7CiAgICBjb25zdHJ1Y3RvcihkYXRhLCBwYXJhbXMpIHsKICAgICAgdGhpcy5pZCA9IHBhcmFtcy5pZDsKICAgICAgdGhpcy50ZiA9IHRmX2Zyb21fc3RyKHBhcmFtcy50Zik7CiAgICAgIHRoaXMuZm9ybWF0ID0gcGFyYW1zLmZvcm1hdDsKICAgICAgdGhpcy5hZ2d0eXBlID0gcGFyYW1zLmFnZ3R5cGUgfHwgIm9obGN2IjsKICAgICAgdGhpcy53aW5kb3cgPSB0Zl9mcm9tX3N0cihwYXJhbXMud2luZG93KTsKICAgICAgdGhpcy5maWxsZ2FwcyA9IHBhcmFtcy5maWxsZ2FwczsKICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgdGhpcy5kYXRhX3R5cGUgPSBBUlI7CiAgICAgIHRoaXMubWFpbiA9ICEhcGFyYW1zLm1haW47CiAgICAgIHRoaXMuaWR4ID0gdGhpcy5kYXRhX2lkeCgpOwogICAgICB0aGlzLnRtYXAgPSB7fTsKICAgICAgdGhpcy50ZiA9IHRoaXMudGYgfHwgc2UudGY7CiAgICAgIGlmICh0aGlzLm1haW4pCiAgICAgICAgdGhpcy50ZiA9IHNlLnRmOwogICAgICBpZiAodGhpcy5hZ2d0eXBlID09PSAib2hsY3YiKSB7CiAgICAgICAgZm9yICh2YXIgaWQgb2YgT0hMQ1YpIHsKICAgICAgICAgIHRoaXNbaWRdID0gVFMoYCR7dGhpcy5pZH1fJHtpZH1gLCBbXSk7CiAgICAgICAgICB0aGlzW2lkXS5fX2ZuX18gPSBTYW1wbGVyKGlkKS5iaW5kKHRoaXNbaWRdKTsKICAgICAgICAgIHRoaXNbaWRdLl9fdGZfXyA9IHRoaXMudGY7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmFnZ3R5cGUgPT09ICJjb3B5IikgewogICAgICAgIGZvciAodmFyIGlkIG9mIE9ITENWKSB7CiAgICAgICAgICB0aGlzW2lkXSA9IFRTKGAke3RoaXMuaWR9XyR7aWR9YCwgW10pOwogICAgICAgICAgdGhpc1tpZF0uX190Zl9fID0gdGhpcy50ZjsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMudG1hcFt0aGlzLmRhdGFbaV1bMF1dID0gaTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiB0aGlzLmFnZ3R5cGUgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICB0aGlzLmNsb3NlID0gVFMoYCR7dGhpcy5pZH1fY2xvc2VgLCBbXSk7CiAgICAgICAgdGhpcy5jbG9zZS5fX2ZuX18gPSB0aGlzLmFnZ3R5cGU7CiAgICAgICAgdGhpcy5jbG9zZS5fX3RmX18gPSB0aGlzLnRmOwogICAgICB9CiAgICAgIGlmICh0aGlzLm1haW4pIHsKICAgICAgICBpZiAoIXRoaXMudGYpCiAgICAgICAgICB0aHJvdyAiTWFpbiB0ZiBzaG91bGQgYmUgZGVmaW5lZCI7CiAgICAgICAgc2UuY3VzdG9tX21haW4gPSB0aGlzOwogICAgICAgIGxldCB0MCA9IHRoaXMuZGF0YVswXVswXTsKICAgICAgICBzZS50ID0gdDAgLSB0MCAlIHRoaXMudGY7CiAgICAgICAgdGhpcy51cGRhdGUobnVsbCwgc2UudCk7CiAgICAgICAgc2UuZGF0YS5vaGxjdi5kYXRhLmxlbmd0aCA9IDA7CiAgICAgICAgc2UuZGF0YS5vaGxjdi5kYXRhLnB1c2goWwogICAgICAgICAgc2UudCwKICAgICAgICAgIHRoaXMub3BlblswXSwKICAgICAgICAgIHRoaXMuaGlnaFswXSwKICAgICAgICAgIHRoaXMubG93WzBdLAogICAgICAgICAgdGhpcy5jbG9zZVswXSwKICAgICAgICAgIHRoaXMudm9sWzBdCiAgICAgICAgXSk7CiAgICAgIH0KICAgIH0KICAgIHVwZGF0ZSh4LCB0KSB7CiAgICAgIGlmICh0aGlzLmFnZ3R5cGUgPT09ICJvaGxjdiIpIHsKICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVfb2hsY3YoeCwgdCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hZ2d0eXBlID09PSAiY29weSIpIHsKICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVfY29weSh4LCB0KTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5hZ2d0eXBlID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlX2N1c3RvbSh4LCB0KTsKICAgICAgfQogICAgfQogICAgdXBkYXRlX29obGN2KHgsIHQpIHsKICAgICAgdCA9IHQgfHwgc2UudDsKICAgICAgbGV0IGlkeCA9IHRoaXMuaWR4OwogICAgICBzd2l0Y2ggKHRoaXMuZGF0YV90eXBlKSB7CiAgICAgICAgY2FzZSBBUlI6CiAgICAgICAgICBpZiAodCA+IHRoaXMuZGF0YVt0aGlzLmRhdGEubGVuZ3RoIC0gMV1bMF0pCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIGxldCB0MCA9IHRoaXMud2luZG93ID8gdCAtIHRoaXMud2luZG93ICsgdGhpcy50ZiA6IHQ7CiAgICAgICAgICBsZXQgZHQgPSB0MCAlIHRoaXMudGY7CiAgICAgICAgICB0MCAtPSBkdDsKICAgICAgICAgIGxldCBpMCA9IG5leHR0KHRoaXMuZGF0YSwgdDApOwogICAgICAgICAgaWYgKGkwID49IHRoaXMuZGF0YS5sZW5ndGgpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIGxldCB0MSA9IHQgKyBzZS50ZjsKICAgICAgICAgIGlmICh0IDwgdGhpcy52b2wuX190MF9fICsgdGhpcy50ZikKICAgICAgICAgICAgdGhpcy52b2xbMF0gPSAwOwogICAgICAgICAgbGV0IG5vZXZlbnQgPSB0cnVlOwogICAgICAgICAgZm9yICh2YXIgaSA9IGkwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIG5vZXZlbnQgPSBmYWxzZTsKICAgICAgICAgICAgbGV0IGRwID0gdGhpcy5kYXRhW2ldOwogICAgICAgICAgICBpZiAoZHBbaWR4LnRpbWVdID49IHQxKQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB0aGlzLm9wZW4uX19mbl9fKGRwW2lkeC5vcGVuXSwgdCk7CiAgICAgICAgICAgIHRoaXMuaGlnaC5fX2ZuX18oZHBbaWR4LmhpZ2hdLCB0KTsKICAgICAgICAgICAgdGhpcy5sb3cuX19mbl9fKGRwW2lkeC5sb3ddLCB0KTsKICAgICAgICAgICAgdGhpcy5jbG9zZS5fX2ZuX18oZHBbaWR4LmNsb3NlXSwgdCk7CiAgICAgICAgICAgIHRoaXMudm9sLl9fZm5fXyhkcFtpZHgudm9sXSwgdCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobm9ldmVudCkgewogICAgICAgICAgICBpZiAodGhpcy5maWxsZ2FwcyA9PT0gZmFsc2UgJiYgIXRoaXMubWFpbikKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGxldCBsYXN0ID0gdGhpcy5jbG9zZVswXTsKICAgICAgICAgICAgdGhpcy5vcGVuLl9fZm5fXyhsYXN0LCB0KTsKICAgICAgICAgICAgdGhpcy5oaWdoLl9fZm5fXyhsYXN0LCB0KTsKICAgICAgICAgICAgdGhpcy5sb3cuX19mbl9fKGxhc3QsIHQpOwogICAgICAgICAgICB0aGlzLmNsb3NlLl9fZm5fXyhsYXN0LCB0KTsKICAgICAgICAgICAgdGhpcy52b2wuX19mbl9fKDAsIHQpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICB1cGRhdGVfY29weSh4LCB0KSB7CiAgICAgIHQgPSB0IHx8IHNlLnQ7CiAgICAgIGxldCBpID0gdGhpcy50bWFwW3RdOwogICAgICBsZXQgcyA9IHRoaXMuZGF0YVtpXTsKICAgICAgbGV0IHRzMCA9IHRoaXMuX190MF9fOwogICAgICBpZiAoIXRzMCB8fCB0ID49IHRzMCArIHRoaXMudGYpIHsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IDU7IGsrKykgewogICAgICAgICAgbGV0IHRzbiA9IE9ITENWW2tdOwogICAgICAgICAgdGhpc1t0c25dLnVuc2hpZnQodm9pZCAwKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fX3QwX18gPSB0IC0gdCAlIHRoaXMudGY7CiAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmRhdGEubGVuZ3RoIC0gMTsKICAgICAgICBpZiAodGhpcy5fX3QwX18gPT09IHRoaXMuZGF0YVtsYXN0XVswXSkgewogICAgICAgICAgdGhpcy50bWFwW3RoaXMuX190MF9fXSA9IGxhc3Q7CiAgICAgICAgICBzID0gdGhpcy5kYXRhW2xhc3RdOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocykgewogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgNTsgaysrKSB7CiAgICAgICAgICBsZXQgdHNuID0gT0hMQ1Zba107CiAgICAgICAgICB0aGlzW3Rzbl1bMF0gPSBzW2sgKyAxXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy5maWxsZ2FwcykgewogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgNTsgaysrKSB7CiAgICAgICAgICBsZXQgdHNuID0gT0hMQ1Zba107CiAgICAgICAgICB0aGlzW3Rzbl1bMF0gPSB0aGlzLmNsb3NlWzFdOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgdXBkYXRlX2N1c3RvbSh4LCB0KSB7CiAgICAgIHQgPSB0IHx8IHNlLnQ7CiAgICAgIGxldCBpZHggPSB0aGlzLmlkeDsKICAgICAgc3dpdGNoICh0aGlzLmRhdGFfdHlwZSkgewogICAgICAgIGNhc2UgQVJSOgogICAgICAgICAgaWYgKCF0aGlzLmRhdGEubGVuZ3RoKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICBpZiAodCA+IHRoaXMuZGF0YVt0aGlzLmRhdGEubGVuZ3RoIC0gMV1bMF0pCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIGxldCB0MCA9IHRoaXMud2luZG93ID8gdCAtIHRoaXMud2luZG93ICsgdGhpcy50ZiA6IHQ7CiAgICAgICAgICBsZXQgZHQgPSB0MCAlIHRoaXMudGY7CiAgICAgICAgICB0MCAtPSBkdDsKICAgICAgICAgIGxldCBpMCA9IG5leHR0KHRoaXMuZGF0YSwgdDApOwogICAgICAgICAgaWYgKGkwID49IHRoaXMuZGF0YS5sZW5ndGgpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIGxldCB0MSA9IHQgKyBzZS50ZjsKICAgICAgICAgIGxldCBzdWIgPSBbXTsKICAgICAgICAgIGZvciAodmFyIGkgPSBpMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBsZXQgZHAgPSB0aGlzLmRhdGFbaV07CiAgICAgICAgICAgIGlmIChkcFtpZHgudGltZV0gPj0gdDEpCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIHN1Yi5wdXNoKGRwKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdWIubGVuZ3RoIHx8IHRoaXMuZmlsbGdhcHMgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLmNsb3NlLl9fZm5fXyhzdWIpOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZpbGxnYXBzICE9PSBmYWxzZSkgewogICAgICAgICAgICB2YWwgPSB0aGlzLmNsb3NlWzBdOwogICAgICAgICAgfQogICAgICAgICAgbGV0IHRzMCA9IHRoaXMuY2xvc2UuX190MF9fOwogICAgICAgICAgaWYgKCF0czAgfHwgdCA+PSB0czAgKyB0aGlzLnRmKSB7CiAgICAgICAgICAgIHRoaXMuY2xvc2UudW5zaGlmdCh2YWwpOwogICAgICAgICAgICB0aGlzLmNsb3NlLl9fdDBfXyA9IHQgLSB0ICUgdGhpcy50ZjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuY2xvc2VbMF0gPSB2YWw7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8vIENhbGN1bGF0ZXMgZGF0YSBpbmRpY2VzIGZyb20gdGhlIGZvcm1hdAogICAgZGF0YV9pZHgoKSB7CiAgICAgIGxldCBpZHggPSB7fTsKICAgICAgc3dpdGNoICh0aGlzLmFnZ3R5cGUpIHsKICAgICAgICBjYXNlICJvaGxjdiI6CiAgICAgICAgICBpZiAoIXRoaXMuZm9ybWF0KSB7CiAgICAgICAgICAgIGxldCB4MCA9IHRoaXMuZGF0YVswXTsKICAgICAgICAgICAgaWYgKCF4MCB8fCB4MC5sZW5ndGggPT09IDYpIHsKICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9ICJ0aW1lOm9wZW46aGlnaDpsb3c6Y2xvc2U6dm9sIjsKICAgICAgICAgICAgfSBlbHNlIGlmICh4MC5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9ICJ0aW1lOm9wZW4saGlnaCxsb3csY2xvc2U6dm9sIjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRoaXMuZm9ybWF0ID0gInRpbWU6Y2xvc2UiOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgdGhpcy5mb3JtYXQuc3BsaXQoIjoiKS5mb3JFYWNoKCh4LCBpKSA9PiB7CiAgICAgICAgaWYgKCF4Lmxlbmd0aCkKICAgICAgICAgIHJldHVybjsKICAgICAgICBsZXQgbGlzdCA9IHguc3BsaXQoIiwiKTsKICAgICAgICBsaXN0LmZvckVhY2goKHkpID0+IGlkeFt5XSA9IGkpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGlkeDsKICAgIH0KICB9CiAgY2xhc3MgVmlldyB7CiAgICBjb25zdHJ1Y3RvcihzdGQsIG5hbWUsIHByb3BzKSB7CiAgICAgIHRoaXMuc3RkID0gc3RkOwogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLnByb3BzID0gcHJvcHMgfHwge307CiAgICAgIHRoaXMucHJvcHMuJHN5bnRoID0gdHJ1ZTsKICAgICAgdGhpcy5wcm9wcy50ZiA9IHRmX2Zyb21fc3RyKHRoaXMucHJvcHMudGYpOwogICAgICB0aGlzLnRmID0gdGhpcy5wcm9wcy50ZjsKICAgICAgdGhpcy5pdGVyID0gewogICAgICAgIG9uY2hhcnQ6ICh4LCBuLCBzKSA9PiB0aGlzLm9uY2hhcnQoeCwgbiwgcywgdHJ1ZSksCiAgICAgICAgb2ZmY2hhcnQ6ICh4LCBuLCBzKSA9PiB0aGlzLm9mZmNoYXJ0KHgsIG4sIHMsIHRydWUpCiAgICAgIH07CiAgICB9CiAgICAvLyBBZGQgY2hhcnQgcG9pbnQKICAgIGNoYXJ0KHgsIHNldHQgPSB7fSkgewogICAgICBpZiAodGhpcy50ZiAmJiAhdGhpcy5zdGQub25jbG9zZSh0aGlzLnRmKSkKICAgICAgICByZXR1cm47CiAgICAgIHNldHQudmlldyA9IHRoaXMubmFtZTsKICAgICAgc2V0dC52cHJvcHMgPSB0aGlzLnByb3BzOwogICAgICBpZiAoeCAmJiB4LmFnZ3R5cGUpIHsKICAgICAgICBsZXQgeDAgPSBbCiAgICAgICAgICB4Lm9wZW5bMF0sCiAgICAgICAgICB4LmhpZ2hbMF0sCiAgICAgICAgICB4Lmxvd1swXSwKICAgICAgICAgIHguY2xvc2VbMF0sCiAgICAgICAgICB4LnZvbFswXQogICAgICAgIF07CiAgICAgICAgdGhpcy5zdGQuY2hhcnQoeDAsIHNldHQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc3RkLmNoYXJ0KHgsIHNldHQpOwogICAgICB9CiAgICB9CiAgICAvLyBBZGQgb25jaGFydCBwb2ludAogICAgb25jaGFydCh4LCBuYW1lLCBzZXR0ID0ge30sIGl0ZXIpIHsKICAgICAgaWYgKHRoaXMudGYgJiYgIXRoaXMuc3RkLm9uY2xvc2UodGhpcy50ZikgJiYgIWl0ZXIpCiAgICAgICAgcmV0dXJuOwogICAgICBzZXR0LnZpZXcgPSB0aGlzLm5hbWU7CiAgICAgIHNldHQudnByb3BzID0gdGhpcy5wcm9wczsKICAgICAgbmFtZSA9IHNldHQudmlldyArICIvIiArIChuYW1lIHx8ICJPViIpOwogICAgICB0aGlzLnN0ZC5vbmNoYXJ0KHgsIG5hbWUsIHNldHQpOwogICAgfQogICAgLy8gQWRkIG9mZmNoYXJ0IHBvaW50CiAgICBvZmZjaGFydCh4LCBuYW1lLCBzZXR0ID0ge30sIGl0ZXIpIHsKICAgICAgaWYgKHRoaXMudGYgJiYgIXRoaXMuc3RkLm9uY2xvc2UodGhpcy50ZikgJiYgIWl0ZXIpCiAgICAgICAgcmV0dXJuOwogICAgICBzZXR0LnZpZXcgPSB0aGlzLm5hbWU7CiAgICAgIHNldHQudnByb3BzID0gdGhpcy5wcm9wczsKICAgICAgbmFtZSA9IHNldHQudmlldyArICIvIiArIChuYW1lIHx8ICJPViIpOwogICAgICB0aGlzLnN0ZC5vZmZjaGFydCh4LCBuYW1lLCBzZXR0KTsKICAgIH0KICAgIC8vIFNldHRlcnMgKHNldCB0aGUgZW50aXJlIG92ZXJsYXkgb2JqZWN0KQogICAgJGNoYXJ0KGRhdGEsIHNldHQgPSB7fSkgewogICAgICBsZXQgdHlwZSA9IHNldHQudHlwZTsKICAgICAgc2V0dC4kc3ludGggPSB0cnVlOwogICAgICBzZXR0LnNraXBOYU4gPSB0cnVlOwogICAgICB0aGlzLnN0ZC5lbnYuY2hhcnRbdGhpcy5uYW1lXSA9IHsKICAgICAgICB0eXBlOiB0eXBlIHx8ICJDYW5kbGVzIiwKICAgICAgICBkYXRhLAogICAgICAgIHNldHRpbmdzOiBzZXR0LAogICAgICAgIHZpZXc6IHRoaXMubmFtZSwKICAgICAgICB2cHJvcHM6IHRoaXMucHJvcHMsCiAgICAgICAgaW5kZXhCYXNlZDogdGhpcy5wcm9wcy5pYiwKICAgICAgICB0ZjogdGhpcy5wcm9wcy50ZgogICAgICB9OwogICAgICBkZWxldGUgc2V0dC50eXBlOwogICAgICBkZWxldGUgc2V0dC52cHJvcHM7CiAgICAgIGRlbGV0ZSBzZXR0LnZpZXc7CiAgICB9CiAgICAkb25jaGFydChkYXRhLCBuYW1lLCBzZXR0ID0ge30pIHsKICAgICAgbGV0IHR5cGUgPSBzZXR0LnR5cGU7CiAgICAgIG5hbWUgPSB0aGlzLm5hbWUgKyAiLyIgKyAobmFtZSB8fCAiT1YiKTsKICAgICAgc2V0dC4kc3ludGggPSB0cnVlOwogICAgICBzZXR0LnNraXBOYU4gPSB0cnVlOwogICAgICB0aGlzLnN0ZC5lbnYub25jaGFydFtuYW1lXSA9IHsKICAgICAgICBuYW1lLAogICAgICAgIHR5cGU6IHR5cGUgfHwgIlNwbGluZSIsCiAgICAgICAgZGF0YSwKICAgICAgICBzZXR0aW5nczogc2V0dCwKICAgICAgICBzY3JpcHRzOiBmYWxzZSwKICAgICAgICBncmlkOiBzZXR0LmdyaWQgfHwge30sCiAgICAgICAgdmlldzogdGhpcy5uYW1lLAogICAgICAgIHZwcm9wczogdGhpcy5wcm9wcwogICAgICB9OwogICAgICBkZWxldGUgc2V0dC50eXBlOwogICAgICBkZWxldGUgc2V0dC5ncmlkOwogICAgfQogICAgJG9mZmNoYXJ0KGRhdGEsIG5hbWUsIHNldHQgPSB7fSkgewogICAgICBsZXQgdHlwZSA9IHNldHQudHlwZTsKICAgICAgbmFtZSA9IHRoaXMubmFtZSArICIvIiArIChuYW1lIHx8ICJPViIpOwogICAgICBzZXR0LiRzeW50aCA9IHRydWU7CiAgICAgIHNldHQuc2tpcE5hTiA9IHRydWU7CiAgICAgIHRoaXMuc3RkLmVudi5vZmZjaGFydFtuYW1lXSA9IHsKICAgICAgICBuYW1lLAogICAgICAgIHR5cGU6IHR5cGUgfHwgIlNwbGluZSIsCiAgICAgICAgZGF0YSwKICAgICAgICBzZXR0aW5nczogc2V0dCwKICAgICAgICBzY3JpcHRzOiBmYWxzZSwKICAgICAgICBncmlkOiBzZXR0LmdyaWQgfHwge30sCiAgICAgICAgdmlldzogdGhpcy5uYW1lLAogICAgICAgIHZwcm9wczogdGhpcy5wcm9wcwogICAgICB9OwogICAgICBkZWxldGUgc2V0dC50eXBlOwogICAgICBkZWxldGUgc2V0dC5ncmlkOwogICAgfQogIH0KICBjb25zdCBCVUZfSU5DID0gNTsKICBjbGFzcyBTY3JpcHRTdGQgewogICAgY29uc3RydWN0b3IoZW52KSB7CiAgICAgIHRoaXMuZW52ID0gZW52OwogICAgICB0aGlzLnNlID0gc2U7CiAgICAgIHRoaXMuU1dNQSA9IFsxIC8gNiwgMiAvIDYsIDIgLyA2LCAxIC8gNl07CiAgICAgIHRoaXMuU1RERVZfRVBTID0gMWUtMTA7CiAgICAgIHRoaXMuU1RERVZfWiA9IDFlLTQ7CiAgICAgIHRoaXMuX2luZGV4X3RyYWNraW5nKCk7CiAgICB9CiAgICAvLyBXcmFwIGV2ZXJ5IGluZGV4IHdpdGggaW5kZXgtdHJhY2tpbmcgZnVuY3Rpb24KICAgIC8vIFRoYXQgd2F5IHdlIHdpbGwga25vdyBleGFjdCBpbmRleCByYW5nZXMKICAgIF9pbmRleF90cmFja2luZygpIHsKICAgICAgbGV0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpOwogICAgICBmb3IgKHZhciBrIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKSkgewogICAgICAgIHN3aXRjaCAoaykgewogICAgICAgICAgY2FzZSAiY29uc3RydWN0b3IiOgogICAgICAgICAgY2FzZSAidHMiOgogICAgICAgICAgY2FzZSAidHN0ZiI6CiAgICAgICAgICBjYXNlICJzYW1wbGUiOgogICAgICAgICAgY2FzZSAiX2luZGV4X3RyYWNraW5nIjoKICAgICAgICAgIGNhc2UgIl90c2lkIjoKICAgICAgICAgIGNhc2UgIl9pIjoKICAgICAgICAgIGNhc2UgIl92IjoKICAgICAgICAgIGNhc2UgIl9hZGRfaSI6CiAgICAgICAgICBjYXNlICJjaGFydCI6CiAgICAgICAgICBjYXNlICJzeW0iOgogICAgICAgICAgY2FzZSAidmlldyI6CiAgICAgICAgICBjYXNlICJwcm9wIjoKICAgICAgICAgIGNhc2UgImF1dG9QcmVjIjoKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGxldCBmID0gdGhpcy5fYWRkX2koaywgdGhpc1trXS50b1N0cmluZygpKTsKICAgICAgICBpZiAoZikKICAgICAgICAgIHRoaXNba10gPSBmOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIERlY2xhcmUgbmV3IHNjcmlwdCBwcm9wZXJ0eQogICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBQcm9wZXJ5IG5hbWUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjciAtIFByb3BlcnkgZGVzY3JpcHRvcgogICAgICovCiAgICBwcm9wKG5hbWUsIGRlc2NyKSB7CiAgICAgIGxldCBwcm9wcyA9IHRoaXMuZW52LnNyYy5wcm9wczsKICAgICAgaWYgKCEobmFtZSBpbiBwcm9wcykpIHsKICAgICAgICBwcm9wc1tuYW1lXSA9IGRlc2NyLmRlZjsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgcHJlY2lzaW9uIG9mIG9obGMgZGF0YXNldAogICAgICogQHJldHVybiB7bnVtYmVyfSAtIE9obGMgcHJlY2lvc2lvbgogICAgICovCiAgICBhdXRvUHJlYygpIHsKICAgICAgaWYgKCFzZS5kYXRhLm9obGN2KQogICAgICAgIHJldHVybiB2b2lkIDA7CiAgICAgIGxldCBkYXRhID0gc2UuZGF0YS5vaGxjdi5kYXRhOwogICAgICBsZXQgbGVuID0gZGF0YS5sZW5ndGg7CiAgICAgIGxldCBpMCA9IE1hdGgubWF4KDAsIGxlbiAtIDEwMCk7CiAgICAgIGxldCBtYXggPSAwOwogICAgICBmb3IgKHZhciBpID0gaTA7IGkgPCBsZW47IGkrKykgewogICAgICAgIGxldCBwID0gZGF0YVtpXTsKICAgICAgICBmb3IgKHZhciBrID0gMTsgayA8IDU7IGsrKykgewogICAgICAgICAgbGV0IHIgPSBVdGlscy5udW1iZXJMUihwW2tdKVsxXTsKICAgICAgICAgIGlmIChyID4gbWF4KQogICAgICAgICAgICBtYXggPSByOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbWF4OwogICAgfQogICAgLy8gQWRkIGluZGV4IHRyYWNraW5nIHRvIHRoZSBmdW5jdGlvbgogICAgX2FkZF9pKG5hbWUsIHNyYykgewogICAgICBsZXQgYXJncyA9IGZfYXJncyhzcmMpOwogICAgICBzcmMgPSBmX2JvZHkoc3JjKTsKICAgICAgbGV0IHNyYzIgPSB3cmFwX2lkeHMoc3JjLCAidGhpcy4iKTsKICAgICAgaWYgKHNyYzIgIT09IHNyYykgewogICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oLi4uYXJncywgc3JjMik7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAvLyBHZW5lcmF0ZSB0aGUgbmV4dCB0aW1lc2VyaWVzIGlkCiAgICBfdHNpZChwcmV2LCBuZXh0KSB7CiAgICAgIHJldHVybiBgJHtwcmV2fTwtJHtuZXh0fWA7CiAgICB9CiAgICAvLyBJbmRleC10cmFja2VyCiAgICBfaShpLCB4KSB7CiAgICAgIGlmICh4ICE9IHZvaWQgMCAmJiB4ID09PSB4ICYmIHguX19pZF9fKSB7CiAgICAgICAgaWYgKCF4Ll9fbGVuX18gfHwgaSA+PSB4Ll9fbGVuX18pIHsKICAgICAgICAgIHguX19sZW5fXyA9IGkgKyBCVUZfSU5DOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gaTsKICAgIH0KICAgIC8vIEluZGV4LXRyYWNrZXIgKG9iamVjdC1iYXNlZCkKICAgIF92KHgsIGkpIHsKICAgICAgaWYgKHggIT0gdm9pZCAwICYmIHggPT09IHggJiYgeC5fX2lkX18pIHsKICAgICAgICBpZiAoIXguX19sZW5fXyB8fCBpID49IHguX19sZW5fXykgewogICAgICAgICAgeC5fX2xlbl9fID0gaSArIEJVRl9JTkM7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB4OwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWUtc2VyaWVzICYgcmVjb3JkcyBlYWNoIHguCiAgICAgKiBSZXR1cm5zICBhbiBhcnJheS4gSWQgaXMgYXV0by1nZW5yYXRlZAogICAgICogQHBhcmFtIHsqfSB4IC0gQSB2YXJpYWJsZSB0byBzYW1wbGUgZnJvbQogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIHRzKHgsIF9pZCwgX3RmKSB7CiAgICAgIGlmIChfdGYpCiAgICAgICAgcmV0dXJuIHRoaXMudHN0Zih4LCBfdGYsIF9pZCk7CiAgICAgIGxldCB0cyA9IHRoaXMuZW52LnRzc1tfaWRdOwogICAgICBpZiAoIXRzKSB7CiAgICAgICAgdHMgPSB0aGlzLmVudi50c3NbX2lkXSA9IFt4XTsKICAgICAgICB0cy5fX2lkX18gPSBfaWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHNbMF0gPSB4OwogICAgICB9CiAgICAgIHJldHVybiB0czsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lLXNlcmllcyAmIHJlY29yZHMgZWFjaCB4LgogICAgICogVXNlcyBTYW1wbGVyIHRvIGFnZ3JlZ2F0ZSB0aGUgdmFsdWVzCiAgICAgKiBSZXR1cm4gdGhlIGFuIGFycmF5LiBJZCBpcyBhdXRvLWdlbnJhdGVkCiAgICAgKiBAcGFyYW0geyp9IHggLSBBIHZhcmlhYmxlIHRvIHNhbXBsZSBmcm9tCiAgICAgKiBAcGFyYW0geyhudW1iZXJ8c3RyaW5nKX0gdGYgLSBUaW1lZnJhbWUgaW4gbXMgb3IgYXMgYSBzdHJpbmcKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICB0c3RmKHgsIHRmLCBfaWQpIHsKICAgICAgbGV0IHRzID0gdGhpcy5lbnYudHNzW19pZF07CiAgICAgIGlmICghdHMpIHsKICAgICAgICB0cyA9IHRoaXMuZW52LnRzc1tfaWRdID0gW3hdOwogICAgICAgIHRzLl9faWRfXyA9IF9pZDsKICAgICAgICB0cy5fX3RmX18gPSB0Zl9mcm9tX3N0cih0Zik7CiAgICAgICAgdHMuX19mbl9fID0gU2FtcGxlcigiY2xvc2UiKS5iaW5kKHRzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0cy5fX2ZuX18oeCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRzOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IGN1c3RvbSBzYW1wbGVyLgogICAgICogUmV0dXJuIHRoZSBhbiBhcnJheS4gSWQgaXMgYXV0by1nZW5yYXRlZAogICAgICogQHBhcmFtIHsqfSB4IC0gQSB2YXJpYWJsZSB0byBzYW1wbGUgZnJvbQogICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBTYW1wbGVyIHR5cGUKICAgICAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpfSB0ZiAtIFRpbWVmcmFtZSBpbiBtcyBvciBhcyBhIHN0cmluZwogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIHNhbXBsZSh4LCB0eXBlLCB0ZiwgX2lkKSB7CiAgICAgIGxldCB0cyA9IHRoaXMuZW52LnRzc1tfaWRdOwogICAgICBpZiAoIXRzKSB7CiAgICAgICAgdHMgPSB0aGlzLmVudi50c3NbX2lkXSA9IFt4XTsKICAgICAgICB0cy5fX2lkX18gPSBfaWQ7CiAgICAgICAgdHMuX190Zl9fID0gdGZfZnJvbV9zdHIodGYpOwogICAgICAgIHRzLl9fZm5fXyA9IFNhbXBsZXIodHlwZSkuYmluZCh0cyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHMuX19mbl9fKHgpOwogICAgICB9CiAgICAgIHJldHVybiB0czsKICAgIH0KICAgIC8qKgogICAgICogUmVwbGFjZXMgdGhlIHZhcmlhYmxlIGlmIGl0J3MgTmFOCiAgICAgKiBAcGFyYW0geyp9IHggLSBUaGUgdmFyaWFibGUKICAgICAqIEBwYXJhbSB7Kn0gW3ZdIC0gQSB2YWx1ZSB0byByZXBsYWNlIHdpdGgKICAgICAqIEByZXR1cm4geyp9IC0gTmV3IHZhbHVlCiAgICAgKi8KICAgIG56KHgsIHYpIHsKICAgICAgaWYgKHggPT0gdm9pZCAwIHx8IHggIT09IHgpIHsKICAgICAgICByZXR1cm4gdiB8fCAwOwogICAgICB9CiAgICAgIHJldHVybiB4OwogICAgfQogICAgLyoqCiAgICAgKiBJcyB0aGUgdmFyaWFibGUgTmFOID8KICAgICAqIEBwYXJhbSB7Kn0geCAtIFRoZSB2YXJpYWJsZQogICAgICogQHJldHVybiB7Ym9vbGVhbn0gLSBOZXcgdmFsdWUKICAgICAqLwogICAgbmEoeCkgewogICAgICByZXR1cm4geCA9PSB2b2lkIDAgfHwgeCAhPT0geDsKICAgIH0KICAgIC8qKiBSZXBsYWNlcyB0aGUgdmFyIHdpdGggTmFOIGlmIEluZmluaXRlCiAgICAgKiBAcGFyYW0geyp9IHggLSBUaGUgdmFyaWFibGUKICAgICAqIEBwYXJhbSB7Kn0gW3ZdIC0gQSB2YWx1ZSB0byByZXBsYWNlIHdpdGgKICAgICAqIEByZXR1cm4geyp9IC0gTmV3IHZhbHVlCiAgICAgKi8KICAgIG5mKHgsIHYpIHsKICAgICAgaWYgKCFpc0Zpbml0ZSh4KSkgewogICAgICAgIHJldHVybiB2ICE9PSB2b2lkIDAgPyB2IDogTmFOOwogICAgICB9CiAgICAgIHJldHVybiB4OwogICAgfQogICAgLy8gTWF0aCBvcGVyYXRvcnMgb24gdC1zZXJpZXMgYW5kIG51bWJlcnMKICAgIC8qKiBBZGRzIHZhbHVlcyAvIHRpbWUtc2VyaWVzCiAgICAgKiBAcGFyYW0geyhUU3wqKX0geCAtIEZpcnN0IGlucHV0CiAgICAgKiBAcGFyYW0geyhUU3wqKX0geSAtIFNlY29uZCBpbnB1dAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIGFkZCh4LCB5LCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBhZGRgKTsKICAgICAgbGV0IHgwID0gdGhpcy5uYSh4KSA/IE5hTiA6IHguX19pZF9fID8geFswXSA6IHg7CiAgICAgIGxldCB5MCA9IHRoaXMubmEoeSkgPyBOYU4gOiB5Ll9faWRfXyA/IHlbMF0gOiB5OwogICAgICByZXR1cm4gdGhpcy50cyh4MCArIHkwLCBpZCwgeC5fX3RmX18pOwogICAgfQogICAgLyoqIFN1YnRyYWN0cyB2YWx1ZXMgLyB0aW1lLXNlcmllcwogICAgICogQHBhcmFtIHsoVFN8Kil9IHggLSBGaXJzdCBpbnB1dAogICAgICogQHBhcmFtIHsoVFN8Kil9IHkgLSBTZWNvbmQgaW5wdXQKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBzdWIoeCwgeSwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgc3ViYCk7CiAgICAgIGxldCB4MCA9IHRoaXMubmEoeCkgPyBOYU4gOiB4Ll9faWRfXyA/IHhbMF0gOiB4OwogICAgICBsZXQgeTAgPSB0aGlzLm5hKHkpID8gTmFOIDogeS5fX2lkX18gPyB5WzBdIDogeTsKICAgICAgcmV0dXJuIHRoaXMudHMoeDAgLSB5MCwgaWQsIHguX190Zl9fKTsKICAgIH0KICAgIC8qKiBNdWx0aXBsaWVzIHZhbHVlcyAvIHRpbWUtc2VyaWVzCiAgICAgKiBAcGFyYW0geyhUU3wqKX0geCAtIEZpcnN0IGlucHV0CiAgICAgKiBAcGFyYW0geyhUU3wqKX0geSAtIFNlY29uZCBpbnB1dAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIG11bHQoeCwgeSwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgbXVsdGApOwogICAgICBsZXQgeDAgPSB0aGlzLm5hKHgpID8gTmFOIDogeC5fX2lkX18gPyB4WzBdIDogeDsKICAgICAgbGV0IHkwID0gdGhpcy5uYSh5KSA/IE5hTiA6IHkuX19pZF9fID8geVswXSA6IHk7CiAgICAgIHJldHVybiB0aGlzLnRzKHgwICogeTAsIGlkLCB4Ll9fdGZfXyk7CiAgICB9CiAgICAvKiogRGl2aWRlcyB2YWx1ZXMgLyB0aW1lLXNlcmllcwogICAgICogQHBhcmFtIHsoVFN8Kil9IHggLSBGaXJzdCBpbnB1dAogICAgICogQHBhcmFtIHsoVFN8Kil9IHkgLSBTZWNvbmQgaW5wdXQKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBkaXYoeCwgeSwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgZGl2YCk7CiAgICAgIGxldCB4MCA9IHRoaXMubmEoeCkgPyBOYU4gOiB4Ll9faWRfXyA/IHhbMF0gOiB4OwogICAgICBsZXQgeTAgPSB0aGlzLm5hKHkpID8gTmFOIDogeS5fX2lkX18gPyB5WzBdIDogeTsKICAgICAgcmV0dXJuIHRoaXMudHMoeDAgLyB5MCwgaWQsIHguX190Zl9fKTsKICAgIH0KICAgIC8qKiBSZXR1cm5zIGEgbmVnYXRpdmUgdmFsdWUgLyB0aW1lLXNlcmllcwogICAgICogQHBhcmFtIHsoVFN8Kil9IHggLSBJbnB1dAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIG5lZyh4LCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBuZWdgKTsKICAgICAgbGV0IHgwID0gdGhpcy5uYSh4KSA/IE5hTiA6IHguX19pZF9fID8geFswXSA6IHg7CiAgICAgIHJldHVybiB0aGlzLnRzKC14MCwgaWQsIHguX190Zl9fKTsKICAgIH0KICAgIC8qKiBBYnNvbHV0ZSB2YWx1ZQogICAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBJbnB1dAogICAgICogQHJldHVybiB7bnVtYmVyfSAtIEFic29sdXRlIHZhbHVlCiAgICAgKi8KICAgIGFicyh4KSB7CiAgICAgIHJldHVybiBNYXRoLmFicyh4KTsKICAgIH0KICAgIC8qKiBBcmNjb3NpbmUgZnVuY3Rpb24KICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gSW5wdXQKICAgICAqIEByZXR1cm4ge251bWJlcn0gLSBBcmNjb3NpbmUgb2YgeAogICAgICovCiAgICBhY29zKHgpIHsKICAgICAgcmV0dXJuIE1hdGguYWNvcyh4KTsKICAgIH0KICAgIC8qKiBFbWl0cyBhbiBldmVudCB0byBEYXRhQ3ViZQogICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBTaWduYWwgdHlwZQogICAgICogQHBhcmFtIHsqfSBkYXRhIC0gU2lnbmFsIGRhdGEKICAgICAqLwogICAgc2lnbmFsKHR5cGUsIGRhdGEgPSB7fSkgewogICAgICBpZiAodGhpcy5zZS5zaGFyZWQuZXZlbnQgIT09ICJ1cGRhdGUiKQogICAgICAgIHJldHVybjsKICAgICAgdGhpcy5zZS5zZW5kKCJzY3JpcHQtc2lnbmFsIiwgeyB0eXBlLCBkYXRhIH0pOwogICAgfQogICAgLyoqIEVtaXRzIGFuIGV2ZW50IGlmIGNvbmQgPT09IHRydWUKICAgICAqIEBwYXJhbSB7KGJvb2xlYW58VFMpfSBjb25kIC0gVGhlIGNvbmRpdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBTaWduYWwgdHlwZQogICAgICogQHBhcmFtIHsqfSBkYXRhIC0gU2lnbmFsIGRhdGEKICAgICAqLwogICAgc2lnbmFsaWYoY29uZCwgdHlwZSwgZGF0YSA9IHt9KSB7CiAgICAgIGlmICh0aGlzLnNlLnNoYXJlZC5ldmVudCAhPT0gInVwZGF0ZSIpCiAgICAgICAgcmV0dXJuOwogICAgICBpZiAoY29uZCAmJiBjb25kLl9faWRfXykKICAgICAgICBjb25kID0gY29uZFswXTsKICAgICAgaWYgKGNvbmQpIHsKICAgICAgICB0aGlzLnNlLnNlbmQoInNjcmlwdC1zaWduYWwiLCB7IHR5cGUsIGRhdGEgfSk7CiAgICAgIH0KICAgIH0KICAgIC8qKiBBcm5hdWQgTGVnb3V4IE1vdmluZyBBdmVyYWdlCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIE9mZnNldAogICAgICogQHBhcmFtIHtudW1iZXJ9IHNpZ21hIC0gU2lnbWEKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBhbG1hKHNyYywgbGVuLCBvZmZzZXQsIHNpZ21hLCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBhbG1hKCR7bGVufSwke29mZnNldH0sJHtzaWdtYX0pYCk7CiAgICAgIGxldCBtID0gTWF0aC5mbG9vcihvZmZzZXQgKiAobGVuIC0gMSkpOwogICAgICBsZXQgcyA9IGxlbiAvIHNpZ21hOwogICAgICBsZXQgbm9ybSA9IDA7CiAgICAgIGxldCBzdW0gPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgbGV0IHcgPSBNYXRoLmV4cCgtMSAqIE1hdGgucG93KGkgLSBtLCAyKSAvICgyICogTWF0aC5wb3cocywgMikpKTsKICAgICAgICBub3JtID0gbm9ybSArIHc7CiAgICAgICAgc3VtID0gc3VtICsgc3JjW2xlbiAtIGkgLSAxXSAqIHc7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudHMoc3VtIC8gbm9ybSwgaWQsIHNyYy5fX3RmX18pOwogICAgfQogICAgLyoqIEFyY3NpbmUgZnVuY3Rpb24KICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gSW5wdXQKICAgICAqIEByZXR1cm4ge251bWJlcn0gLSBBcmNzaW5lIG9mIHgKICAgICAqLwogICAgYXNpbih4KSB7CiAgICAgIHJldHVybiBNYXRoLmFzaW4oeCk7CiAgICB9CiAgICAvKiogQXJjdGFuZ2VudCBmdW5jdGlvbgogICAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBJbnB1dAogICAgICogQHJldHVybiB7bnVtYmVyfSAtIEFyY3RhbmdlbnQgb2YgeAogICAgICovCiAgICBhdGFuKHgpIHsKICAgICAgcmV0dXJuIE1hdGguYXRhbih4KTsKICAgIH0KICAgIC8qKiBBdmVyYWdlIFRydWUgUmFuZ2UKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBhdHIobGVuLCBfaWQsIF90ZikgewogICAgICBsZXQgdGZzID0gX3RmIHx8ICIiOwogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGF0cigke2xlbn0pYCk7CiAgICAgIGxldCBoaWdoID0gdGhpcy5lbnYuc2hhcmVkW2BoaWdoJHt0ZnN9YF07CiAgICAgIGxldCBsb3cgPSB0aGlzLmVudi5zaGFyZWRbYGxvdyR7dGZzfWBdOwogICAgICBsZXQgY2xvc2UgPSB0aGlzLmVudi5zaGFyZWRbYGNsb3NlJHt0ZnN9YF07CiAgICAgIGxldCB0ciA9IHRoaXMudHMoMCwgaWQsIF90Zik7CiAgICAgIHRyWzBdID0gdGhpcy5uYShoaWdoWzFdKSA/IGhpZ2hbMF0gLSBsb3dbMF0gOiBNYXRoLm1heCgKICAgICAgICBNYXRoLm1heCgKICAgICAgICAgIGhpZ2hbMF0gLSBsb3dbMF0sCiAgICAgICAgICBNYXRoLmFicyhoaWdoWzBdIC0gY2xvc2VbMV0pCiAgICAgICAgKSwKICAgICAgICBNYXRoLmFicyhsb3dbMF0gLSBjbG9zZVsxXSkKICAgICAgKTsKICAgICAgcmV0dXJuIHRoaXMucm1hKHRyLCBsZW4sIGlkKTsKICAgIH0KICAgIC8qKiBBdmVyYWdlIG9mIGFyZ3VtZW50cwogICAgICogQHBhcmFtIHsuLi5udW1iZXJ9IGFyZ3MgLSBOdW1lcmljIHZhbHVlcwogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBhdmcoLi4uYXJncykgewogICAgICBhcmdzLnBvcCgpOwogICAgICBsZXQgc3VtID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc3VtICs9IGFyZ3NbaV07CiAgICAgIH0KICAgICAgcmV0dXJuIHN1bSAvIGFyZ3MubGVuZ3RoOwogICAgfQogICAgLyoqIENhbmRsZXMgc2luY2UgdGhlIGV2ZW50IG9jY3VyZWQgKGNvbmQgPT09IHRydWUpCiAgICAgKiBAcGFyYW0geyhib29sZWFufFRTKX0gY29uZCAtIHRoZSBjb25kaXRpb24KICAgICAqLwogICAgc2luY2UoY29uZCwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgc2luY2UoKWApOwogICAgICBpZiAoY29uZCAmJiBjb25kLl9faWRfXykKICAgICAgICBjb25kID0gY29uZFswXTsKICAgICAgbGV0IHMgPSB0aGlzLnRzKHZvaWQgMCwgaWQpOwogICAgICBzWzBdID0gY29uZCA/IDAgOiBzWzFdICsgMTsKICAgICAgcmV0dXJuIHM7CiAgICB9CiAgICAvKiogQm9sbGluZ2VyIEJhbmRzCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHBhcmFtIHtudW1iZXJ9IG11bHQgLSBNdWx0aXBsaWVyCiAgICAgKiBAcmV0dXJuIHtUU1tdfSAtIEFycmF5IG9mIG5ldyB0aW1lLXNlcmllcyAoMyBiYW5kcykKICAgICAqLwogICAgYmIoc3JjLCBsZW4sIG11bHQsIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGJiKCR7bGVufSwke211bHR9KWApOwogICAgICBsZXQgYmFzaXMgPSB0aGlzLnNtYShzcmMsIGxlbiwgaWQpOwogICAgICBsZXQgZGV2ID0gdGhpcy5zdGRldihzcmMsIGxlbiwgaWQpWzBdICogbXVsdDsKICAgICAgcmV0dXJuIFsKICAgICAgICBiYXNpcywKICAgICAgICB0aGlzLnRzKGJhc2lzWzBdICsgZGV2LCBpZCArICIxIiwgc3JjLl9fdGZfXyksCiAgICAgICAgdGhpcy50cyhiYXNpc1swXSAtIGRldiwgaWQgKyAiMiIsIHNyYy5fX3RmX18pCiAgICAgIF07CiAgICB9CiAgICAvKiogQm9sbGluZ2VyIEJhbmRzIFdpZHRoCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHBhcmFtIHtudW1iZXJ9IG11bHQgLSBNdWx0aXBsaWVyCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgYmJ3KHNyYywgbGVuLCBtdWx0LCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBiYncoJHtsZW59LCR7bXVsdH0pYCk7CiAgICAgIGxldCBiYXNpcyA9IHRoaXMuc21hKHNyYywgbGVuLCBpZClbMF07CiAgICAgIGxldCBkZXYgPSB0aGlzLnN0ZGV2KHNyYywgbGVuLCBpZClbMF0gKiBtdWx0OwogICAgICByZXR1cm4gdGhpcy50cygyICogZGV2IC8gYmFzaXMsIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBDb252ZXJ0cyB0aGUgdmFyaWFibGUgdG8gQm9vbGVhbgogICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGhlIHZhcmlhYmxlCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIGJvb2woeCkgewogICAgICByZXR1cm4gISF4OwogICAgfQogICAgLyoqIENvbW1vZGl0eSBDaGFubmVsIEluZGV4CiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIGNjaShzcmMsIGxlbiwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgY2NpKCR7bGVufSlgKTsKICAgICAgbGV0IG1hID0gdGhpcy5zbWEoc3JjLCBsZW4sIGlkKTsKICAgICAgbGV0IGRldiA9IHRoaXMuZGV2KHNyYywgbGVuLCBpZCk7CiAgICAgIGxldCBjY2kgPSAoc3JjWzBdIC0gbWFbMF0pIC8gKDAuMDE1ICogZGV2WzBdKTsKICAgICAgcmV0dXJuIHRoaXMudHMoY2NpLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogU2hvcnRjdXQgZm9yIE1hdGguY2VpbCgpCiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaGUgdmFyaWFibGUKICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAqLwogICAgY2VpbCh4KSB7CiAgICAgIHJldHVybiBNYXRoLmNlaWwoeCk7CiAgICB9CiAgICAvKiogQ2hhbmdlOiB4WzBdIC0geFtsZW5dCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5dIC0gTGVuZ3RoCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgY2hhbmdlKHNyYywgbGVuID0gMSwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgY2hhbmdlKCR7bGVufSlgKTsKICAgICAgcmV0dXJuIHRoaXMudHMoc3JjWzBdIC0gc3JjW2xlbl0sIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBDaGFuZGUgTW9tZW50dW0gT3NjaWxsYXRvcgogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBjbW8oc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGNtbygke2xlbn0pYCk7CiAgICAgIGxldCBtb20gPSB0aGlzLmNoYW5nZShzcmMsIDEsIGlkKTsKICAgICAgbGV0IGcgPSB0aGlzLnRzKG1vbVswXSA+PSAwID8gbW9tWzBdIDogMCwgaWQgKyAiZyIsIHNyYy5fX3RmX18pOwogICAgICBsZXQgbCA9IHRoaXMudHMobW9tWzBdID49IDAgPyAwIDogLW1vbVswXSwgaWQgKyAibCIsIHNyYy5fX3RmX18pOwogICAgICBsZXQgc20xID0gdGhpcy5zdW0oZywgbGVuLCBpZCArICIxIilbMF07CiAgICAgIGxldCBzbTIgPSB0aGlzLnN1bShsLCBsZW4sIGlkICsgIjIiKVswXTsKICAgICAgcmV0dXJuIHRoaXMudHMoMTAwICogKHNtMSAtIHNtMikgLyAoc20xICsgc20yKSwgaWQsIHNyYy5fX3RmX18pOwogICAgfQogICAgLyoqIENlbnRlciBvZiBHcmF2aXR5CiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIGNvZyhzcmMsIGxlbiwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgY21vKCR7bGVufSlgKTsKICAgICAgbGV0IHN1bSA9IHRoaXMuc3VtKHNyYywgbGVuLCBpZClbMF07CiAgICAgIGxldCBudW0gPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgbnVtICs9IHNyY1tpXSAqIChpICsgMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudHMoLW51bSAvIHN1bSwgaWQsIHNyYy5fX3RmX18pOwogICAgfQogICAgLy8gQ29ycmVsYXRpb24KICAgIGNvcnIoKSB7CiAgICB9CiAgICAvKiogQ29zaW5lIGZ1bmN0aW9uCiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIElucHV0CiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IC0gQ29zaW5lIG9mIHgKICAgICAqLwogICAgY29zKHgpIHsKICAgICAgcmV0dXJuIE1hdGguY29zKHgpOwogICAgfQogICAgLyoqIFdoZW4gb25lIHRpbWUtc2VyaWVzIGNyb3NzZXMgYW5vdGhlcgogICAgICogQHBhcmFtIHtUU30gc3JjMSAtIFRTMQogICAgICogQHBhcmFtIHtUU30gc3JjMiAtIFRTMgogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIGNyb3NzKHNyYzEsIHNyYzIsIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGNyb3NzYCk7CiAgICAgIGxldCB4ID0gc3JjMVswXSA+IHNyYzJbMF0gIT09IHNyYzFbMV0gPiBzcmMyWzFdOwogICAgICByZXR1cm4gdGhpcy50cyh4LCBpZCwgc3JjMS5fX3RmX18pOwogICAgfQogICAgLyoqIFdoZW4gb25lIHRpbWUtc2VyaWVzIGdvZXMgb3ZlciBhbm90aGVyIG9uZQogICAgICogQHBhcmFtIHtUU30gc3JjMSAtIFRTMQogICAgICogQHBhcmFtIHtUU30gc3JjMiAtIFRTMgogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIGNyb3Nzb3ZlcihzcmMxLCBzcmMyLCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBjcm9zc292ZXJgKTsKICAgICAgbGV0IHggPSBzcmMxWzBdID4gc3JjMlswXSAmJiBzcmMxWzFdIDw9IHNyYzJbMV07CiAgICAgIHJldHVybiB0aGlzLnRzKHgsIGlkLCBzcmMxLl9fdGZfXyk7CiAgICB9CiAgICAvKiogV2hlbiBvbmUgdGltZS1zZXJpZXMgZ29lcyB1bmRlciBhbm90aGVyIG9uZQogICAgICogQHBhcmFtIHtUU30gc3JjMSAtIFRTMQogICAgICogQHBhcmFtIHtUU30gc3JjMiAtIFRTMgogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIGNyb3NzdW5kZXIoc3JjMSwgc3JjMiwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgY3Jvc3N1bmRlcmApOwogICAgICBsZXQgeCA9IHNyYzFbMF0gPCBzcmMyWzBdICYmIHNyYzFbMV0gPj0gc3JjMlsxXTsKICAgICAgcmV0dXJuIHRoaXMudHMoeCwgaWQsIHNyYzEuX190Zl9fKTsKICAgIH0KICAgIC8qKiBTdW0gb2YgYWxsIGVsZW1lbnRzIG9mIHNyYwogICAgICogQHBhcmFtIHtUU30gc3JjMSAtIElucHV0CiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgY3VtKHNyYywgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgY3VtYCk7CiAgICAgIGxldCByZXMgPSB0aGlzLnRzKDAsIGlkLCBzcmMuX190Zl9fKTsKICAgICAgcmVzWzBdID0gdGhpcy5ueihzcmNbMF0pICsgdGhpcy5ueihyZXNbMV0pOwogICAgICByZXR1cm4gcmVzOwogICAgfQogICAgLyoqIERheSBvZiBtb250aCwgbGl0ZXJhbGx5CiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVdIC0gVGltZSBpbiBtcyAoY3VycmVudCB0LCBpZiBub3QgZGVmaW5lZCkKICAgICAqIEByZXR1cm4ge251bWJlcn0gLSBEYXkKICAgICAqLwogICAgZGF5b2Ztb250aCh0aW1lKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lIHx8IHNlLnQpLmdldFVUQ0RhdGUoKTsKICAgIH0KICAgIC8qKiBEYXkgb2Ygd2VlaywgbGl0ZXJhbGx5CiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVdIC0gVGltZSBpbiBtcyAoY3VycmVudCB0LCBpZiBub3QgZGVmaW5lZCkKICAgICAqIEByZXR1cm4ge251bWJlcn0gLSBEYXkKICAgICAqLwogICAgZGF5b2Z3ZWVrKHRpbWUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHRpbWUgfHwgc2UudCkuZ2V0VVRDRGF5KCkgKyAxOwogICAgfQogICAgLyoqIERldmlhdGlvbiBmcm9tIFNNQQogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBkZXYoc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGRldigke2xlbn0pYCk7CiAgICAgIGxldCBtZWFuID0gdGhpcy5zbWEoc3JjLCBsZW4sIGlkKVswXTsKICAgICAgbGV0IHN1bSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBzdW0gKz0gTWF0aC5hYnMoc3JjW2ldIC0gbWVhbik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudHMoc3VtIC8gbGVuLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogRGlyZWN0aW9uYWwgTW92ZW1lbnQgSW5kZXggQURYLCArREksIC1ESQogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHBhcmFtIHtudW1iZXJ9IHNtb290aCAtIFNtb290aG5lc3MKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBkbWkobGVuLCBzbW9vdGgsIF9pZCwgX3RmKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgZG1pKCR7bGVufSwke3Ntb290aH0pYCk7CiAgICAgIGxldCB0ZnMgPSBfdGYgfHwgIiI7CiAgICAgIGxldCBoaWdoID0gdGhpcy5lbnYuc2hhcmVkW2BoaWdoJHt0ZnN9YF07CiAgICAgIGxldCBsb3cgPSB0aGlzLmVudi5zaGFyZWRbYGxvdyR7dGZzfWBdOwogICAgICBsZXQgdXAgPSB0aGlzLmNoYW5nZShoaWdoLCAxLCBpZCArICIxIilbMF07CiAgICAgIGxldCBkb3duID0gdGhpcy5uZWcodGhpcy5jaGFuZ2UobG93LCAxLCBpZCArICIyIiksIGlkKVswXTsKICAgICAgbGV0IHBsdXNETSA9IHRoaXMudHMoCiAgICAgICAgMTAwICogKHRoaXMubmEodXApID8gTmFOIDogdXAgPiBkb3duICYmIHVwID4gMCA/IHVwIDogMCksCiAgICAgICAgaWQgKyAiMyIsCiAgICAgICAgX3RmCiAgICAgICk7CiAgICAgIGxldCBtaW51c0RNID0gdGhpcy50cygKICAgICAgICAxMDAgKiAodGhpcy5uYShkb3duKSA/IE5hTiA6IGRvd24gPiB1cCAmJiBkb3duID4gMCA/IGRvd24gOiAwKSwKICAgICAgICBpZCArICI0IiwKICAgICAgICBfdGYKICAgICAgKTsKICAgICAgbGV0IHRydXIgPSB0aGlzLnJtYSh0aGlzLnRyKGZhbHNlLCBpZCwgX3RmKSwgbGVuLCBpZCArICI1Iik7CiAgICAgIGxldCBwbHVzID0gdGhpcy5kaXYoCiAgICAgICAgdGhpcy5ybWEocGx1c0RNLCBsZW4sIGlkICsgIjYiKSwKICAgICAgICB0cnVyLAogICAgICAgIGlkICsgIjgiCiAgICAgICk7CiAgICAgIGxldCBtaW51cyA9IHRoaXMuZGl2KAogICAgICAgIHRoaXMucm1hKG1pbnVzRE0sIGxlbiwgaWQgKyAiNyIpLAogICAgICAgIHRydXIsCiAgICAgICAgaWQgKyAiOSIKICAgICAgKTsKICAgICAgbGV0IHN1bSA9IHRoaXMuYWRkKHBsdXMsIG1pbnVzLCBpZCArICIxMCIpWzBdOwogICAgICBsZXQgYWR4ID0gdGhpcy5ybWEoCiAgICAgICAgdGhpcy50cygxMDAgKiBNYXRoLmFicyhwbHVzWzBdIC0gbWludXNbMF0pIC8gKHN1bSA9PT0gMCA/IDEgOiBzdW0pLCBpZCArICIxMSIsIF90ZiksCiAgICAgICAgc21vb3RoLAogICAgICAgIGlkICsgIjEyIgogICAgICApOwogICAgICByZXR1cm4gW2FkeCwgcGx1cywgbWludXNdOwogICAgfQogICAgLyoqIEV4cG9uZW50aWFsIE1vdmluZyBBdmVyYWdlIHdpdGggYWxwaGEgPSAyIC8gKHkgKyAxKQogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBlbWEoc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGVtYSgke2xlbn0pYCk7CiAgICAgIGxldCBhID0gMiAvIChsZW4gKyAxKTsKICAgICAgbGV0IGVtYSA9IHRoaXMudHMoMCwgaWQsIHNyYy5fX3RmX18pOwogICAgICBlbWFbMF0gPSB0aGlzLm5hKGVtYVsxXSkgPyB0aGlzLnNtYShzcmMsIGxlbiwgaWQpWzBdIDogYSAqIHNyY1swXSArICgxIC0gYSkgKiB0aGlzLm56KGVtYVsxXSk7CiAgICAgIHJldHVybiBlbWE7CiAgICB9CiAgICAvKiogU2hvcnRjdXQgZm9yIE1hdGguZXhwKCkKICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRoZSB2YXJpYWJsZQogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBleHAoeCkgewogICAgICByZXR1cm4gTWF0aC5leHAoeCk7CiAgICB9CiAgICAvKiogVGVzdCBpZiAic3JjIiBUUyBpcyBmYWxsaW5nIGZvciAibGVuIiBjYW5kbGVzCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIGZhbGxpbmcoc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGZhbGxpbmcoJHtsZW59KWApOwogICAgICBsZXQgYm90ID0gc3JjWzBdOwogICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbiArIDE7IGkrKykgewogICAgICAgIGlmIChib3QgPj0gc3JjW2ldKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50cyhmYWxzZSwgaWQsIHNyYy5fX3RmX18pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpcy50cyh0cnVlLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogRm9yIGEgZ2l2ZW4gc2VyaWVzIHJlcGxhY2VzIE5hTiB2YWx1ZXMgd2l0aAogICAgICogcHJldmlvdXMgbmVhcmVzdCBub24tTmFOIHZhbHVlCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dCB0aW1lLXNlcmllcwogICAgICogQHJldHVybiB7VFN9CiAgICAgKi8KICAgIGZpeG5hbihzcmMpIHsKICAgICAgaWYgKHRoaXMubmEoc3JjWzBdKSkgewogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc3JjLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoIXRoaXMubmEoc3JjW2ldKSkgewogICAgICAgICAgICBzcmNbMF0gPSBzcmNbaV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3JjOwogICAgfQogICAgLyogVE9ETzogdGhpbmsKICAgIHNraXBuYW4oeCwgX2lkKSB7CiAgICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBza2lwbmFuKClgKQogICAgICAgIHJldHVybiB0aGlzLnRzKHRydWUsIGlkLCBzcmMuX190Zl9fKQogICAgfSovCiAgICAvKiogU2hvcnRjdXQgZm9yIE1hdGguZmxvb3IoKQogICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGhlIHZhcmlhYmxlCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIGZsb29yKHgpIHsKICAgIH0KICAgIC8qKiBIaWdoZXN0IHZhbHVlIGZvciBhIGdpdmVuIG51bWJlciBvZiBjYW5kbGVzIGJhY2sKICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gTGVuZ3RoCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgaGlnaGVzdChzcmMsIGxlbiwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgaGlnaGVzdCgke2xlbn0pYCk7CiAgICAgIGxldCBoaWdoID0gLUluZmluaXR5OwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgaWYgKHNyY1tpXSA+IGhpZ2gpCiAgICAgICAgICBoaWdoID0gc3JjW2ldOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnRzKGhpZ2gsIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBIaWdoZXN0IHZhbHVlIG9mZnNldCBmb3IgYSBnaXZlbiBudW1iZXIgb2YgYmFycyBiYWNrCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICovCiAgICBoaWdoZXN0YmFycyhzcmMsIGxlbiwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgaGlnaGVzdGJhcnMoJHtsZW59KWApOwogICAgICBsZXQgaGlnaCA9IC1JbmZpbml0eTsKICAgICAgbGV0IGhpID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIGlmIChzcmNbaV0gPiBoaWdoKSB7CiAgICAgICAgICBoaWdoID0gc3JjW2ldLCBoaSA9IGk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnRzKC1oaSwgaWQsIHNyYy5fX3RmX18pOwogICAgfQogICAgLyoqIEh1bGwgTW92aW5nIEF2ZXJhZ2UKICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gTGVuZ3RoCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgaG1hKHNyYywgbGVuLCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBobWEoJHtsZW59KWApOwogICAgICBsZXQgbGVuMiA9IE1hdGguZmxvb3IobGVuIC8gMik7CiAgICAgIGxldCBsZW4zID0gTWF0aC5yb3VuZChNYXRoLnNxcnQobGVuKSk7CiAgICAgIGxldCBhID0gdGhpcy5tdWx0KHRoaXMud21hKHNyYywgbGVuMiwgaWQgKyAiMSIpLCAyLCBpZCk7CiAgICAgIGxldCBiID0gdGhpcy53bWEoc3JjLCBsZW4sIGlkICsgIjIiKTsKICAgICAgbGV0IGRlbHQgPSB0aGlzLnN1YihhLCBiLCBpZCArICIzIik7CiAgICAgIHJldHVybiB0aGlzLndtYShkZWx0LCBsZW4zLCBpZCArICI0Iik7CiAgICB9CiAgICAvKiogUmV0dXJucyBob3VycyBvZiBhIGdpdmVuIHRpbWVzdGFtcAogICAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lXSAtIFRpbWUgaW4gbXMgKGN1cnJlbnQgdCwgaWYgbm90IGRlZmluZWQpCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IC0gSG91cgogICAgICovCiAgICBob3VyKHRpbWUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHRpbWUgfHwgc2UudCkuZ2V0VVRDSG91cnMoKTsKICAgIH0KICAgIC8qKiBSZXR1cm5zIHggb3IgeSBkZXBlbmRpbmcgb24gdGhlIGNvbmRpdGlvbgogICAgICogQHBhcmFtIHsoYm9vbGVhbnxUUyl9IGNvbmQgLSBDb25kaXRpb24KICAgICAqIEBwYXJhbSB7Kn0geCAtIEZyaXN0IHZhbHVlCiAgICAgKiBAcGFyYW0geyp9IHkgLSBTZWNvbmQgdmFsdWUKICAgICAqIEByZXR1cm4geyp9CiAgICAgKi8KICAgIGlmZihjb25kLCB4LCB5KSB7CiAgICAgIGlmIChjb25kICYmIGNvbmQuX19pZF9fKQogICAgICAgIGNvbmQgPSBjb25kWzBdOwogICAgICByZXR1cm4gY29uZCA/IHggOiB5OwogICAgfQogICAgLyoqIEtlbHRuZXIgQ2hhbm5lbHMKICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gTGVuZ3RoCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbXVsdCAtIE11bHRpcGxpZXIKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VzZV90cl0gLSBVc2UgdHJ1ZSByYW5nZQogICAgICogQHJldHVybiB7VFNbXX0gLSBBcnJheSBvZiBuZXcgdGltZS1zZXJpZXMgKDMgYmFuZHMpCiAgICAgKi8KICAgIGtjKHNyYywgbGVuLCBtdWx0LCB1c2VfdHIgPSB0cnVlLCBfaWQsIF90ZikgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGtjKCR7bGVufSwke211bHR9LCR7dXNlX3RyfSlgKTsKICAgICAgbGV0IHRmcyA9IF90ZiB8fCAiIjsKICAgICAgbGV0IGhpZ2ggPSB0aGlzLmVudi5zaGFyZWRbYGhpZ2gke3Rmc31gXTsKICAgICAgbGV0IGxvdyA9IHRoaXMuZW52LnNoYXJlZFtgbG93JHt0ZnN9YF07CiAgICAgIGxldCBiYXNpcyA9IHRoaXMuZW1hKHNyYywgbGVuLCBpZCArICIxIik7CiAgICAgIGxldCByYW5nZSA9IHVzZV90ciA/IHRoaXMudHIoZmFsc2UsIGlkICsgIjIiLCBfdGYpIDogdGhpcy50cyhoaWdoWzBdIC0gbG93WzBdLCBpZCArICIzIiwgc3JjLl9fdGZfXyk7CiAgICAgIGxldCBlbWEgPSB0aGlzLmVtYShyYW5nZSwgbGVuLCBpZCArICI0Iik7CiAgICAgIHJldHVybiBbCiAgICAgICAgYmFzaXMsCiAgICAgICAgdGhpcy50cyhiYXNpc1swXSArIGVtYVswXSAqIG11bHQsIGlkICsgIjUiLCBzcmMuX190Zl9fKSwKICAgICAgICB0aGlzLnRzKGJhc2lzWzBdIC0gZW1hWzBdICogbXVsdCwgaWQgKyAiNiIsIHNyYy5fX3RmX18pCiAgICAgIF07CiAgICB9CiAgICAvKiogS2VsdG5lciBDaGFubmVscyBXaWR0aAogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtdWx0IC0gTXVsdGlwbGllcgogICAgICogQHBhcmFtIHtib29sZWFufSBbdXNlX3RyXSAtIFVzZSB0cnVlIHJhbmdlCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAga2N3KHNyYywgbGVuLCBtdWx0LCB1c2VfdHIgPSB0cnVlLCBfaWQsIF90ZikgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYGtjdygke2xlbn0sJHttdWx0fSwke3VzZV90cn0pYCk7CiAgICAgIGxldCBrYyA9IHRoaXMua2Moc3JjLCBsZW4sIG11bHQsIHVzZV90ciwgYGtjd2AsIF90Zik7CiAgICAgIHJldHVybiB0aGlzLnRzKChrY1sxXVswXSAtIGtjWzJdWzBdKSAvIGtjWzBdWzBdLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogTGluZWFyIFJlZ3Jlc3Npb24KICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gTGVuZ3RoCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gT2Zmc2V0CiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgbGlucmVnKHNyYywgbGVuLCBvZmZzZXQgPSAwLCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBsaW5yZWcoJHtsZW59KWApOwogICAgICBzcmMuX19sZW5fXyA9IE1hdGgubWF4KHNyYy5fX2xlbl9fIHx8IDAsIGxlbik7CiAgICAgIGxldCBsciA9IHJlZ3Jlc3Npb24oc3JjLCBsZW4sIG9mZnNldCk7CiAgICAgIHJldHVybiB0aGlzLnRzKGxyLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogU2hvcnRjdXQgZm9yIE1hdGgubG9nKCkKICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRoZSB2YXJpYWJsZQogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBsb2coeCkgewogICAgICByZXR1cm4gTWF0aC5sb2coeCk7CiAgICB9CiAgICAvKiogU2hvcnRjdXQgZm9yIE1hdGgubG9nMTAoKQogICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGhlIHZhcmlhYmxlCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIGxvZzEwKHgpIHsKICAgICAgcmV0dXJuIE1hdGgubG9nMTAoeCk7CiAgICB9CiAgICAvKiogTG93ZXN0IHZhbHVlIGZvciBhIGdpdmVuIG51bWJlciBvZiBjYW5kbGVzIGJhY2sKICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gTGVuZ3RoCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgbG93ZXN0KHNyYywgbGVuLCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBsb3dlc3QoJHtsZW59KWApOwogICAgICBsZXQgbG93ID0gSW5maW5pdHk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBpZiAoc3JjW2ldIDwgbG93KQogICAgICAgICAgbG93ID0gc3JjW2ldOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnRzKGxvdywgaWQsIHNyYy5fX3RmX18pOwogICAgfQogICAgLyoqIExvd2VzdCB2YWx1ZSBvZmZzZXQgZm9yIGEgZ2l2ZW4gbnVtYmVyIG9mIGJhcnMgYmFjawogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqLwogICAgbG93ZXN0YmFycyhzcmMsIGxlbiwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgbG93ZXN0YmFycygke2xlbn0pYCk7CiAgICAgIGxldCBsb3cgPSBJbmZpbml0eTsKICAgICAgbGV0IGxpID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIGlmIChzcmNbaV0gPCBsb3cpIHsKICAgICAgICAgIGxvdyA9IHNyY1tpXSwgbGkgPSBpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpcy50cygtbGksIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBNb3ZpbmcgQXZlcmFnZSBDb252ZXJnZW5jZS9EaXZlcmdlbmNlCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGZhc3QgLSBGYXN0IEVNQQogICAgICogQHBhcmFtIHtudW1iZXJ9IHNsb3cgLSBTbG93IEVNQQogICAgICogQHBhcmFtIHtudW1iZXJ9IHNpZyAtIFNpZ25hbAogICAgICogQHJldHVybiB7VFNbXX0gLSBbbWFjZCwgc2lnbmFsLCBoaXN0XQogICAgICovCiAgICBtYWNkKHNyYywgZmFzdCwgc2xvdywgc2lnLCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBtYWNkKCR7ZmFzdH0ke3Nsb3d9JHtzaWd9KWApOwogICAgICBsZXQgZmFzdF9tYSA9IHRoaXMuZW1hKHNyYywgZmFzdCwgaWQgKyAiMSIpOwogICAgICBsZXQgc2xvd19tYSA9IHRoaXMuZW1hKHNyYywgc2xvdywgaWQgKyAiMiIpOwogICAgICBsZXQgbWFjZCA9IHRoaXMuc3ViKGZhc3RfbWEsIHNsb3dfbWEsIGlkICsgIjMiKTsKICAgICAgbGV0IHNpZ25hbCA9IHRoaXMuZW1hKG1hY2QsIHNpZywgaWQgKyAiNCIpOwogICAgICBsZXQgaGlzdCA9IHRoaXMuc3ViKG1hY2QsIHNpZ25hbCwgaWQgKyAiNSIpOwogICAgICByZXR1cm4gW21hY2QsIHNpZ25hbCwgaGlzdF07CiAgICB9CiAgICAvKiogTWF4IG9mIGFyZ3VtZW50cwogICAgICogQHBhcmFtIHsuLi5udW1iZXJ9IGFyZ3MgLSBOdW1lcmljIHZhbHVlcwogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBtYXgoLi4uYXJncykgewogICAgICBhcmdzLnBvcCgpOwogICAgICByZXR1cm4gTWF0aC5tYXgoLi4uYXJncyk7CiAgICB9CiAgICAvKiogU2VuZHMgdXBkYXRlIHRvIHNvbWUgb3ZlcmxheSAvIG1haW4gY2hhcnQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIE92ZXJsYXkgaWQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZHMgLSBGaWVsZHMgdG8gYmUgb3ZlcndyaXR0ZW4KICAgICAqLwogICAgbW9kaWZ5KGlkLCBmaWVsZHMpIHsKICAgICAgc2Uuc2VuZCgibW9kaWZ5LW92ZXJsYXkiLCB7IHV1aWQ6IGlkLCBmaWVsZHMgfSk7CiAgICB9CiAgICAvKiogU2V0cyB0aGUgcmV2ZXJzZSBidWZmZXIgc2l6ZSBmb3IgYSBnaXZlbgogICAgICogdGltZS1zZXJpZXMgKGRlZmF1bHQgPSA1LCBncm93cyBvbiBkZW1hbmQpCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIE5ldyBsZW5ndGgKICAgICAqLwogICAgYnVmZnNpemUoc3JjLCBsZW4pIHsKICAgICAgc3JjLl9fbGVuX18gPSBsZW47CiAgICB9CiAgICAvKiogTW9uZXkgRmxvdyBJbmRleAogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBtZmkoc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYG1maSgke2xlbn0pYCk7CiAgICAgIGxldCB2b2wgPSB0aGlzLmVudi5zaGFyZWQudm9sOwogICAgICBsZXQgY2ggPSB0aGlzLmNoYW5nZShzcmMsIDEsIGlkICsgIjEiKVswXTsKICAgICAgbGV0IHRzMSA9IHRoaXMubXVsdCh2b2wsIGNoIDw9IDAgPyAwIDogc3JjWzBdLCBpZCArICIyIik7CiAgICAgIGxldCB0czIgPSB0aGlzLm11bHQodm9sLCBjaCA+PSAwID8gMCA6IHNyY1swXSwgaWQgKyAiMyIpOwogICAgICBsZXQgdXBwZXIgPSB0aGlzLnN1bSh0czEsIGxlbiwgaWQgKyAiNCIpOwogICAgICBsZXQgbG93ZXIgPSB0aGlzLnN1bSh0czIsIGxlbiwgaWQgKyAiNSIpOwogICAgICBsZXQgcmVzID0gdm9pZCAwOwogICAgICBpZiAoIXRoaXMubmEobG93ZXIpKSB7CiAgICAgICAgcmVzID0gdGhpcy5yc2kodXBwZXIsIGxvd2VyLCBpZCArICI2IilbMF07CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudHMocmVzLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogTWluIG9mIGFyZ3VtZW50cwogICAgICogQHBhcmFtIHsuLi5udW1iZXJ9IGFyZ3MgLSBOdW1lcmljIHZhbHVlcwogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBtaW4oLi4uYXJncykgewogICAgICBhcmdzLnBvcCgpOwogICAgICByZXR1cm4gTWF0aC5taW4oLi4uYXJncyk7CiAgICB9CiAgICAvKiogUmV0dXJucyBtaW51dGVzIG9mIGEgZ2l2ZW4gdGltZXN0YW1wCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVdIC0gVGltZSBpbiBtcyAoY3VycmVudCB0LCBpZiBub3QgZGVmaW5lZCkKICAgICAqIEByZXR1cm4ge251bWJlcn0gLSBIb3VyCiAgICAgKi8KICAgIG1pbnV0ZSh0aW1lKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lIHx8IHNlLnQpLmdldFVUQ01pbnV0ZXMoKTsKICAgIH0KICAgIC8qKiBNb21lbnR1bQogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBtb20oc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYG1vbSgke2xlbn0pYCk7CiAgICAgIHJldHVybiB0aGlzLnRzKHNyY1swXSAtIHNyY1tsZW5dLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogTW9udGgKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZV0gLSBUaW1lIGluIG1zIChjdXJyZW50IHQsIGlmIG5vdCBkZWZpbmVkKQogICAgICogQHJldHVybiB7bnVtYmVyfSAtIERheQogICAgICovCiAgICBtb250aCh0aW1lKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lIHx8IHNlLnQpLmdldFVUQ01vbnRoKCk7CiAgICB9CiAgICAvKiogRGlzcGxheSBkYXRhIHBvaW50IGFzIHRoZSBtYWluIGNoYXJ0CiAgICAgKiBAcGFyYW0geyhUU3xUU1tdfCopfSB4IC0gRGF0YSBwb2ludCAvIFRTIC8gYXJyYXkgb2YgVFMKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2V0dF0gLSBPYmplY3Qgd2l0aCBzZXR0aW5ncyAmIE9WIHR5cGUKICAgICAqLwogICAgY2hhcnQoeCwgc2V0dCA9IHt9LCBfaWQpIHsKICAgICAgbGV0IHZpZXcgPSBzZXR0LnZpZXcgfHwgIm1haW4iOwogICAgICBsZXQgb2ZmID0gMDsKICAgICAgaWYgKHggJiYgeC5fX2lkX18pIHsKICAgICAgICBvZmYgPSB4Ll9fb2Zmc2V0X18gfHwgMDsKICAgICAgICB4ID0geFswXTsKICAgICAgfQogICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSAmJiB4WzBdICYmIHhbMF0uX19pZF9fKSB7CiAgICAgICAgb2ZmID0geFswXS5fX29mZnNldF9fIHx8IDA7CiAgICAgICAgeCA9IHgubWFwKCh4MikgPT4geDJbMF0pOwogICAgICB9CiAgICAgIGlmICghdGhpcy5lbnYuY2hhcnRbdmlld10pIHsKICAgICAgICBsZXQgdHlwZSA9IHNldHQudHlwZTsKICAgICAgICBzZXR0LiRzeW50aCA9IHRydWU7CiAgICAgICAgc2V0dC5za2lwTmFOID0gdHJ1ZTsKICAgICAgICB0aGlzLmVudi5jaGFydFt2aWV3XSA9IHsKICAgICAgICAgIHR5cGU6IHR5cGUgfHwgIkNhbmRsZXMiLAogICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICBzZXR0aW5nczogc2V0dCwKICAgICAgICAgIHZpZXcsCiAgICAgICAgICB2cHJvcHM6IHNldHQudnByb3BzLAogICAgICAgICAgaW5kZXhCYXNlZDogc2V0dC52cHJvcHMuaWIsCiAgICAgICAgICB0Zjogc2V0dC52cHJvcHMudGYKICAgICAgICB9OwogICAgICAgIGRlbGV0ZSBzZXR0LnR5cGU7CiAgICAgICAgZGVsZXRlIHNldHQudnByb3BzOwogICAgICAgIGRlbGV0ZSBzZXR0LnZpZXc7CiAgICAgIH0KICAgICAgb2ZmICo9IHNlLnRmOwogICAgICBsZXQgdiA9IEFycmF5LmlzQXJyYXkoeCkgPyBbc2UudCArIG9mZiwgLi4ueF0gOiBbc2UudCArIG9mZiwgeF07CiAgICAgIHVwZGF0ZSh0aGlzLmVudi5jaGFydFt2aWV3XS5kYXRhLCB2KTsKICAgIH0KICAgIC8qKiBSZXR1cm5zIHRydWUgd2hlbiB0aGUgY2FuZGxlKHRmKSBpcyBiZWluZyBjbG9zZWQKICAgICAqIChjcmVhdGUgYSBuZXcgb3ZlcmxheSBpbiBEYXRhQ3ViZSkKICAgICAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpfSB0ZiAtIFRpbWVmcmFtZSBpbiBtcyBvciBhcyBhIHN0cmluZwogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgb25jbG9zZSh0ZikgewogICAgICBpZiAoIXRoaXMuZW52LnNoYXJlZC5vbmNsb3NlKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgaWYgKCF0ZikKICAgICAgICB0ZiA9IHNlLnRmOwogICAgICByZXR1cm4gKHNlLnQgKyBzZS50ZikgJSB0Zl9mcm9tX3N0cih0ZikgPT09IDA7CiAgICB9CiAgICAvKiogU2VuZHMgc2V0dGluZ3MgdXBkYXRlCiAgICAgKiAoY2FuIGJlIGNhbGxlZCBmcm9tIGluaXQoKSwgdXBkYXRlKCkgb3IgcG9zdCgpKQogICAgICogQHBhcmFtIHtPYmplY3R9IHVwZCAtIFNldHRpbmdzIHVwZGF0ZSAob2JqZWN0IHRvIG1lcmdlKQogICAgICovCiAgICBzZXR0aW5ncyh1cGQpIHsKICAgICAgdGhpcy5lbnYuc2VuZF9tb2RpZnkoeyBzZXR0aW5nczogdXBkIH0pOwogICAgICBPYmplY3QuYXNzaWduKHRoaXMuZW52LnNyYy5zZXR0LCB1cGQpOwogICAgfQogICAgLyoqIFNoaWZ0cyBUUyBsZWZ0IG9yIHJpZ2h0IGJ5ICJudW0iIGNhbmRsZXMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudW0gLSBPZmZzZXQgbWVhc3VyZWQgaW4gY2FuZGxlcwogICAgICogQHJldHVybiB7VFN9IC0gTmV3IC8gZXhpc3RpbmcgdGltZS1zZXJpZXMKICAgICAqLwogICAgb2Zmc2V0KHNyYywgbnVtLCBfaWQpIHsKICAgICAgaWYgKHNyYy5fX2lkX18pIHsKICAgICAgICBzcmMuX19vZmZzZXRfXyA9IG51bTsKICAgICAgICByZXR1cm4gc3JjOwogICAgICB9CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgb2Zmc2V0KCR7bnVtfSlgKTsKICAgICAgbGV0IG91dCA9IHRoaXMudHMoc3JjLCBpZCk7CiAgICAgIG91dC5fX29mZnNldF9fID0gbnVtOwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLy8gcGVyY2VudGlsZV9saW5lYXJfaW50ZXJwb2xhdGlvbgogICAgbGluZWFyaW50KCkgewogICAgfQogICAgLy8gcGVyY2VudGlsZV9uZWFyZXN0X3JhbmsKICAgIG5lYXJlc3RyYW5rKCkgewogICAgfQogICAgLyoqIFRoZSBjdXJyZW50IHRpbWUKICAgICAqIEByZXR1cm4ge251bWJlcn0gLSB0aW1lc3RhbXAKICAgICAqLwogICAgbm93KCkgewogICAgICByZXR1cm4gKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7CiAgICB9CiAgICBwZXJjZW50cmFuaygpIHsKICAgIH0KICAgIC8qKiBSZXR1cm5zIHByaWNlIG9mIHRoZSBwaXZvdCBoaWdoIHBvaW50CiAgICAgKiBUaXA6IHdvcmtzIGJlc3Qgd2l0aCBgb2Zmc2V0YCBmdW5jdGlvbgogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IC0gbGVmdCB0aHJlc2hvbGQsIGNhbmRsZXMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCAtIHJpZ2h0IHRocmVzaG9sZCwgY2FuZGxlcwogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIHBpdm90aGlnaChzcmMsIGxlZnQsIHJpZ2h0LCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBwaXZvdGhpZ2goJHtsZWZ0fSwke3JpZ2h0fSlgKTsKICAgICAgbGV0IGxlbiA9IGxlZnQgKyByaWdodCArIDE7CiAgICAgIGxldCB0b3AgPSBzcmNbcmlnaHRdOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgaWYgKHRvcCA8PSBzcmNbaV0gJiYgaSAhPT0gcmlnaHQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnRzKE5hTiwgaWQsIHNyYy5fX3RmX18pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpcy50cyh0b3AsIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBSZXR1cm5zIHByaWNlIG9mIHRoZSBwaXZvdCBsb3cgcG9pbnQKICAgICAqIFRpcDogd29ya3MgYmVzdCB3aXRoIGBvZmZzZXRgIGZ1bmN0aW9uCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlZnQgLSBsZWZ0IHRocmVzaG9sZCwgY2FuZGxlcwogICAgICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0IC0gcmlnaHQgdGhyZXNob2xkLCBjYW5kbGVzCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgcGl2b3Rsb3coc3JjLCBsZWZ0LCByaWdodCwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgcGl2b3Rsb3coJHtsZWZ0fSwke3JpZ2h0fSlgKTsKICAgICAgbGV0IGxlbiA9IGxlZnQgKyByaWdodCArIDE7CiAgICAgIGxldCBib3QgPSBzcmNbcmlnaHRdOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgaWYgKGJvdCA+PSBzcmNbaV0gJiYgaSAhPT0gcmlnaHQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnRzKE5hTiwgaWQsIHNyYy5fX3RmX18pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpcy50cyhib3QsIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBTaG9ydGN1dCBmb3IgTWF0aC5wb3coKQogICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGhlIHZhcmlhYmxlCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIHBvdyh4KSB7CiAgICAgIHJldHVybiBNYXRoLnBvdyh4KTsKICAgIH0KICAgIC8qKiBUZXN0IGlmICJzcmMiIFRTIGlzIHJpc2luZyBmb3IgImxlbiIgY2FuZGxlcwogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICByaXNpbmcoc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYHJpc2luZygke2xlbn0pYCk7CiAgICAgIGxldCB0b3AgPSBzcmNbMF07CiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuICsgMTsgaSsrKSB7CiAgICAgICAgaWYgKHRvcCA8PSBzcmNbaV0pIHsKICAgICAgICAgIHJldHVybiB0aGlzLnRzKGZhbHNlLCBpZCwgc3JjLl9fdGZfXyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnRzKHRydWUsIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBFeHBvbmVudGlhbGx5IE1BIHdpdGggYWxwaGEgPSAxIC8gbGVuZ3RoCiAgICAgKiBVc2VkIGluIFJTSQogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBybWEoc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYHJtYSgke2xlbn0pYCk7CiAgICAgIGxldCBhID0gbGVuOwogICAgICBsZXQgc3VtID0gdGhpcy50cygwLCBpZCwgc3JjLl9fdGZfXyk7CiAgICAgIHN1bVswXSA9IHRoaXMubmEoc3VtWzFdKSA/IHRoaXMuc21hKHNyYywgbGVuLCBpZClbMF0gOiAoc3JjWzBdICsgKGEgLSAxKSAqIHRoaXMubnooc3VtWzFdKSkgLyBhOwogICAgICByZXR1cm4gc3VtOwogICAgfQogICAgLyoqIFJhdGUgb2YgQ2hhbmdlCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIHJvYyhzcmMsIGxlbiwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgcm9jKCR7bGVufSlgKTsKICAgICAgcmV0dXJuIHRoaXMudHMoCiAgICAgICAgMTAwICogKHNyY1swXSAtIHNyY1tsZW5dKSAvIHNyY1tsZW5dLAogICAgICAgIGlkLAogICAgICAgIHNyYy5fX3RmX18KICAgICAgKTsKICAgIH0KICAgIC8qKiBTaG9ydGN1dCBmb3IgTWF0aC5yb3VuZCgpCiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaGUgdmFyaWFibGUKICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAqLwogICAgcm91bmQoeCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZCh4KTsKICAgIH0KICAgIC8qKiBSZWxhdGl2ZSBTdHJlbmd0aCBJbmRleAogICAgICogQHBhcmFtIHtUU30geCAtIEZpcnN0IElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcnxUU30geSAtIFNlY29uZCBJbnB1dAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIHJzaSh4LCB5LCBfaWQpIHsKICAgICAgaWYgKCF0aGlzLm5hKHkpICYmIHkuX19pZF9fKSB7CiAgICAgICAgdmFyIGlkID0gdGhpcy5fdHNpZChfaWQsIGByc2koeCx5KWApOwogICAgICAgIHZhciByc2kgPSAxMDAgLSAxMDAgLyAoMSArIHRoaXMuZGl2KHgsIHksIGlkKVswXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGlkID0gdGhpcy5fdHNpZChfaWQsIGByc2koJHt5fSlgKTsKICAgICAgICBsZXQgY2ggPSB0aGlzLmNoYW5nZSh4LCAxLCBfaWQpWzBdOwogICAgICAgIGxldCBwYyA9IHRoaXMudHMoTWF0aC5tYXgoY2gsIDApLCBpZCArICIxIiwgeC5fX3RmX18pOwogICAgICAgIGxldCBuYyA9IHRoaXMudHMoLU1hdGgubWluKGNoLCAwKSwgaWQgKyAiMiIsIHguX190Zl9fKTsKICAgICAgICBsZXQgdXAgPSB0aGlzLnJtYShwYywgeSwgaWQgKyAiMyIpWzBdOwogICAgICAgIGxldCBkb3duID0gdGhpcy5ybWEobmMsIHksIGlkICsgIjQiKVswXTsKICAgICAgICB2YXIgcnNpID0gZG93biA9PT0gMCA/IDEwMCA6IHVwID09PSAwID8gMCA6IDEwMCAtIDEwMCAvICgxICsgdXAgLyBkb3duKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy50cyhyc2ksIGlkICsgIjUiLCB4Ll9fdGZfXyk7CiAgICB9CiAgICAvKiogUGFyYWJvbGljIFNBUgogICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IC0gU3RhcnQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmMgLSBJbmNyZW1lbnQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXggLSBNYXhpbXVtCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgc2FyKHN0YXJ0LCBpbmMsIG1heCwgX2lkLCBfdGYpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBzYXIoJHtzdGFydH0sJHtpbmN9LCR7bWF4fSlgKTsKICAgICAgbGV0IHRmcyA9IF90ZiB8fCAiIjsKICAgICAgbGV0IGhpZ2ggPSB0aGlzLmVudi5zaGFyZWRbYGhpZ2gke3Rmc31gXTsKICAgICAgbGV0IGxvdyA9IHRoaXMuZW52LnNoYXJlZFtgbG93JHt0ZnN9YF07CiAgICAgIGxldCBjbG9zZSA9IHRoaXMuZW52LnNoYXJlZFtgY2xvc2Uke3Rmc31gXTsKICAgICAgbGV0IG1pblRpY2sgPSAwOwogICAgICBsZXQgb3V0ID0gdGhpcy50cyh2b2lkIDAsIGlkICsgIjEiLCBfdGYpOwogICAgICBsZXQgcG9zID0gdGhpcy50cyh2b2lkIDAsIGlkICsgIjIiLCBfdGYpOwogICAgICBsZXQgbWF4TWluID0gdGhpcy50cyh2b2lkIDAsIGlkICsgIjMiLCBfdGYpOwogICAgICBsZXQgYWNjID0gdGhpcy50cyh2b2lkIDAsIGlkICsgIjQiLCBfdGYpOwogICAgICBsZXQgbiA9IF90ZiA/IG91dC5fX2xlbl9fIC0gMSA6IHRoaXMuc2UuaXRlcjsKICAgICAgbGV0IHByZXY7CiAgICAgIGxldCBvdXRTZXQgPSBmYWxzZTsKICAgICAgaWYgKG4gPj0gMSkgewogICAgICAgIHByZXYgPSBvdXRbMV07CiAgICAgICAgaWYgKG4gPT09IDEpIHsKICAgICAgICAgIGlmIChjbG9zZVswXSA+IGNsb3NlWzFdKSB7CiAgICAgICAgICAgIHBvc1swXSA9IDE7CiAgICAgICAgICAgIG1heE1pblswXSA9IE1hdGgubWF4KGhpZ2hbMF0sIGhpZ2hbMV0pOwogICAgICAgICAgICBwcmV2ID0gTWF0aC5taW4obG93WzBdLCBsb3dbMV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcG9zWzBdID0gLTE7CiAgICAgICAgICAgIG1heE1pblswXSA9IE1hdGgubWluKGxvd1swXSwgbG93WzFdKTsKICAgICAgICAgICAgcHJldiA9IE1hdGgubWF4KGhpZ2hbMF0sIGhpZ2hbMV0pOwogICAgICAgICAgfQogICAgICAgICAgYWNjWzBdID0gc3RhcnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBvc1swXSA9IHBvc1sxXTsKICAgICAgICAgIGFjY1swXSA9IGFjY1sxXTsKICAgICAgICAgIG1heE1pblswXSA9IG1heE1pblsxXTsKICAgICAgICB9CiAgICAgICAgaWYgKHBvc1swXSA9PT0gMSkgewogICAgICAgICAgaWYgKGhpZ2hbMF0gPiBtYXhNaW5bMF0pIHsKICAgICAgICAgICAgbWF4TWluWzBdID0gaGlnaFswXTsKICAgICAgICAgICAgYWNjWzBdID0gTWF0aC5taW4oYWNjWzBdICsgaW5jLCBtYXgpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxvd1swXSA8PSBwcmV2KSB7CiAgICAgICAgICAgIHBvc1swXSA9IC0xOwogICAgICAgICAgICBvdXRbMF0gPSBtYXhNaW5bMF07CiAgICAgICAgICAgIG1heE1pblswXSA9IGxvd1swXTsKICAgICAgICAgICAgYWNjWzBdID0gc3RhcnQ7CiAgICAgICAgICAgIG91dFNldCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChsb3dbMF0gPCBtYXhNaW5bMF0pIHsKICAgICAgICAgICAgbWF4TWluWzBdID0gbG93WzBdOwogICAgICAgICAgICBhY2NbMF0gPSBNYXRoLm1pbihhY2NbMF0gKyBpbmMsIG1heCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaGlnaFswXSA+PSBwcmV2KSB7CiAgICAgICAgICAgIHBvc1swXSA9IDE7CiAgICAgICAgICAgIG91dFswXSA9IG1heE1pblswXTsKICAgICAgICAgICAgbWF4TWluWzBdID0gaGlnaFswXTsKICAgICAgICAgICAgYWNjWzBdID0gc3RhcnQ7CiAgICAgICAgICAgIG91dFNldCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghb3V0U2V0KSB7CiAgICAgICAgICBvdXRbMF0gPSBwcmV2ICsgYWNjWzBdICogKG1heE1pblswXSAtIHByZXYpOwogICAgICAgICAgaWYgKHBvc1swXSA9PT0gMSkgewogICAgICAgICAgICBpZiAob3V0WzBdID49IGxvd1swXSkKICAgICAgICAgICAgICBvdXRbMF0gPSBsb3dbMF0gLSBtaW5UaWNrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHBvc1swXSA9PT0gLTEpIHsKICAgICAgICAgICAgaWYgKG91dFswXSA8PSBoaWdoWzBdKQogICAgICAgICAgICAgIG91dFswXSA9IGhpZ2hbMF0gKyBtaW5UaWNrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqIFJldHVybnMgc2Vjb25kcyBvZiBhIGdpdmVuIHRpbWVzdGFtcAogICAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lXSAtIFRpbWUgaW4gbXMgKGN1cnJlbnQgdCwgaWYgbm90IGRlZmluZWQpCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IC0gSG91cgogICAgICovCiAgICBzZWNvbmQodGltZSkgewogICAgICByZXR1cm4gbmV3IERhdGUodGltZSB8fCBzZS50KS5nZXRVVENTZWNvbmRzKCk7CiAgICB9CiAgICAvKiogU2hvcnRjdXQgZm9yIE1hdGguc2luZygpCiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaGUgdmFyaWFibGUKICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAqLwogICAgc2lnbih4KSB7CiAgICAgIHJldHVybiBNYXRoLnNpZ24oeCk7CiAgICB9CiAgICAvKiogU2luZSBmdW5jdGlvbgogICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGhlIHZhcmlhYmxlCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIHNpbih4KSB7CiAgICAgIHJldHVybiBNYXRoLnNpbih4KTsKICAgIH0KICAgIC8qKiBTaW1wbGUgTW92aW5nIEF2ZXJhZ2UKICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gTGVuZ3RoCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgc21hKHNyYywgbGVuLCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGBzbWEoJHtsZW59KWApOwogICAgICBsZXQgc3VtID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIHN1bSA9IHN1bSArIHNyY1tpXTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy50cyhzdW0gLyBsZW4sIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBTaG9ydGN1dCBmb3IgTWF0aC5zcXJ0KCkKICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRoZSB2YXJpYWJsZQogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBzcXJ0KHgpIHsKICAgICAgcmV0dXJuIE1hdGguc3FydCh4KTsKICAgIH0KICAgIC8qKiBTdGFuZGFyZCBkZXZpYXRpb24KICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gTGVuZ3RoCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgc3RkZXYoc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgc3VtZiA9ICh4LCB5KSA9PiB7CiAgICAgICAgbGV0IHJlcyA9IHggKyB5OwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH07CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgc3RkZXYoJHtsZW59KWApOwogICAgICBsZXQgYXZnID0gdGhpcy5zbWEoc3JjLCBsZW4sIGlkKTsKICAgICAgbGV0IHNxZCA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBsZXQgc3VtID0gc3VtZihzcmNbaV0sIC1hdmdbMF0pOwogICAgICAgIHNxZCArPSBzdW0gKiBzdW07CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudHMoTWF0aC5zcXJ0KHNxZCAvIGxlbiksIGlkLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBTdG9jaGFzdGljCiAgICAgKiBAcGFyYW0ge1RTfSBzcmMgLSBJbnB1dAogICAgICogQHBhcmFtIHtUU30gaGlnaCAtIFRTIG9mIGhpZ2gKICAgICAqIEBwYXJhbSB7VFN9IGxvdyAtIFRTIG9mIGxvdwogICAgICogQHBhcmFtIHtudW1iZXJ9IGxlbiAtIExlbmd0aAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIHN0b2NoKHNyYywgaGlnaCwgbG93LCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYHN1bSgke2xlbn0pYCk7CiAgICAgIGxldCB4ID0gMTAwICogKHNyY1swXSAtIHRoaXMubG93ZXN0KGxvdywgbGVuKVswXSk7CiAgICAgIGxldCB5ID0gdGhpcy5oaWdoZXN0KGhpZ2gsIGxlbilbMF0gLSB0aGlzLmxvd2VzdChsb3csIGxlbilbMF07CiAgICAgIHJldHVybiB0aGlzLnRzKHggLyB5LCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogUmV0dXJucyB0aGUgc2xpZGluZyBzdW0gb2YgbGFzdCAibGVuIiB2YWx1ZXMgb2YgdGhlIHNvdXJjZQogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBMZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICBzdW0oc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYHN1bSgke2xlbn0pYCk7CiAgICAgIGxldCBzdW0gPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgc3VtID0gc3VtICsgc3JjW2ldOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnRzKHN1bSwgaWQsIHNyYy5fX3RmX18pOwogICAgfQogICAgLyoqIFN1cGVydHJlbmQgSW5kaWNhdG9yCiAgICAgKiBAcGFyYW0ge251bWJlcn0gZmFjdG9yIC0gQVRSIG11bHRpcGxpZXIKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdHJsZW4gLSBMZW5ndGggb2YgQVRSCiAgICAgKiBAcmV0dXJuIHtUU1tdfSAtIFN1cGVydHJlbmQgbGluZSBhbmQgZGlyZWN0aW9uIG9mIHRyZW5kCiAgICAgKi8KICAgIHN1cGVydHJlbmQoZmFjdG9yLCBhdHJsZW4sIF9pZCwgX3RmKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgc3VwZXJ0cmVuZCgke2ZhY3Rvcn0sJHthdHJsZW59KWApOwogICAgICBsZXQgdGZzID0gX3RmIHx8ICIiOwogICAgICBsZXQgaGlnaCA9IHRoaXMuZW52LnNoYXJlZFtgaGlnaCR7dGZzfWBdOwogICAgICBsZXQgbG93ID0gdGhpcy5lbnYuc2hhcmVkW2Bsb3cke3Rmc31gXTsKICAgICAgbGV0IGNsb3NlID0gdGhpcy5lbnYuc2hhcmVkW2BjbG9zZSR7dGZzfWBdOwogICAgICBsZXQgaGwyID0gKGhpZ2hbMF0gKyBsb3dbMF0pICogMC41OwogICAgICBsZXQgYXRyID0gZmFjdG9yICogdGhpcy5hdHIoYXRybGVuLCBpZCArICIxIiwgX3RmKVswXTsKICAgICAgbGV0IGxzID0gdGhpcy50cyhobDIgLSBhdHIsIGlkICsgIjIiLCBfdGYpOwogICAgICBsZXQgbHMxID0gdGhpcy5ueihsc1sxXSwgbHNbMF0pOwogICAgICBsc1swXSA9IGNsb3NlWzFdID4gbHMxID8gTWF0aC5tYXgobHNbMF0sIGxzMSkgOiBsc1swXTsKICAgICAgbGV0IHNzID0gdGhpcy50cyhobDIgKyBhdHIsIGlkICsgIjMiLCBfdGYpOwogICAgICBsZXQgc3MxID0gdGhpcy5ueihzc1sxXSwgc3MpOwogICAgICBzc1swXSA9IGNsb3NlWzFdIDwgc3MxID8gTWF0aC5taW4oc3NbMF0sIHNzMSkgOiBzc1swXTsKICAgICAgbGV0IGRpciA9IHRoaXMudHMoMSwgaWQgKyAiNCIsIF90Zik7CiAgICAgIGRpclswXSA9IHRoaXMubnooZGlyWzFdLCBkaXJbMF0pOwogICAgICBkaXJbMF0gPSBkaXJbMF0gPT09IC0xICYmIGNsb3NlWzBdID4gc3MxID8gMSA6IGRpclswXSA9PT0gMSAmJiBjbG9zZVswXSA8IGxzMSA/IC0xIDogZGlyWzBdOwogICAgICBsZXQgcGxvdCA9IHRoaXMudHMoZGlyWzBdID09PSAxID8gbHNbMF0gOiBzc1swXSwgaWQgKyAiNSIsIF90Zik7CiAgICAgIHJldHVybiBbcGxvdCwgdGhpcy5uZWcoZGlyLCBpZCArICI2IildOwogICAgfQogICAgLyoqIFN5bW1ldHJpY2FsbHkgV2VpZ2h0ZWQgTW92aW5nIEF2ZXJhZ2UKICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgc3dtYShzcmMsIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYHN3bWFgKTsKICAgICAgbGV0IHN1bSA9IHNyY1szXSAqIHRoaXMuU1dNQVswXSArIHNyY1syXSAqIHRoaXMuU1dNQVsxXSArIHNyY1sxXSAqIHRoaXMuU1dNQVsyXSArIHNyY1swXSAqIHRoaXMuU1dNQVszXTsKICAgICAgcmV0dXJuIHRoaXMudHMoc3VtLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICAvKiogQ3JlYXRlcyBhIG5ldyBTeW1ib2wuCiAgICAgKiBAcGFyYW0geyp9IHggLSBTb21ldGhpbmcsIGRlcGVuZHMgb24gYXJnIHZhcmlhdGlvbgogICAgICogQHBhcmFtIHsqfSB5IC0gU29tZXRoaW5nLCBkZXBlbmRzIG9uIGFyZyB2YXJpYXRpb24KICAgICAqIEByZXR1cm4ge1N5bX0KICAgICAqIEFyZ3VtZW50IHZhcmlhdGlvbnM6CiAgICAgKiBkYXRhKEFycmF5KSwgW3BhcmFtcyhPYmplY3QpXQogICAgICogdHMoVFMpLCBbcGFyYW1zKE9iamVjdCldCiAgICAgKiBwb2ludChOdW1iZXIpLCBbcGFyYW1zKE9iamVjdCldCiAgICAgKiB0ZihTdHJpbmcpIDFtLCA1bSwgMUgsIGV0Yy4gKHVzZXMgbWFpbiBPSExDVikKICAgICAqIFBhcmFtcyBvYmplY3Q6IHsKICAgICAqICBpZDogU3RyaW5nLAogICAgICogIHRmOiBTdHJpbmd8TnVtYmVyLAogICAgICogIGFnZ3R5cGU6IFN0cmluZyAoVE9ETzogVHlwZSBvZiBhZ2dyZWdhdGlvbikKICAgICAqICBmb3JtYXQ6IFN0cmluZyAoRGF0YSBmb3JtYXQsIGUuZy4gInRpbWU6cHJpY2U6dm9sIikKICAgICAqICB3aW5kb3c6IFN0cmluZ3xOdW1iZXIgKEFnZ3JlZ2F0aW9uIHdpbmRvdykKICAgICAqICBtYWluIHRydWV8ZmFsc2UgKFVzZSBhcyB0aGUgbWFpbiBjaGFydCkKICAgICAqIH0KICAgICAqLwogICAgc3ltKHgsIHkgPSB7fSwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHkuaWQgfHwgdGhpcy5fdHNpZChfaWQsIGBzeW1gKTsKICAgICAgeS5pZCA9IGlkOwogICAgICBpZiAodGhpcy5lbnYuc3ltc1tpZF0pIHsKICAgICAgICB0aGlzLmVudi5zeW1zW2lkXS51cGRhdGUoeCk7CiAgICAgICAgcmV0dXJuIHRoaXMuZW52LnN5bXNbaWRdOwogICAgICB9CiAgICAgIHN3aXRjaCAodHlwZW9mIHgpIHsKICAgICAgICBjYXNlICJvYmplY3QiOgogICAgICAgICAgdmFyIHN5bSA9IG5ldyBTeW0oeCwgeSk7CiAgICAgICAgICB0aGlzLmVudi5zeW1zW2lkXSA9IHN5bTsKICAgICAgICAgIGlmICh4Ll9faWRfXykgewogICAgICAgICAgICBzeW0uZGF0YV90eXBlID0gVFNTOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3ltLmRhdGFfdHlwZSA9IEFSUjsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIm51bWJlciI6CiAgICAgICAgICBzeW0gPSBuZXcgU3ltKG51bGwsIHkpOwogICAgICAgICAgc3ltLmRhdGFfdHlwZSA9IE5VTTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInN0cmluZyI6CiAgICAgICAgICB5LnRmID0geDsKICAgICAgICAgIHN5bSA9IG5ldyBTeW0oc2UuZGF0YS5vaGxjdi5kYXRhLCB5KTsKICAgICAgICAgIHN5bS5kYXRhX3R5cGUgPSBBUlI7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICB0aGlzLmVudi5zeW1zW2lkXSA9IHN5bTsKICAgICAgcmV0dXJuIHN5bTsKICAgIH0KICAgIC8qKiBUYW5nZW50IGZ1bmN0aW9uCiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaGUgdmFyaWFibGUKICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAqLwogICAgdGFuKHgpIHsKICAgICAgcmV0dXJuIE1hdGgudGFuKHgpOwogICAgfQogICAgdGltZShyZXMsIHNlc2gpIHsKICAgIH0KICAgIHRpbWVzdGFtcCgpIHsKICAgIH0KICAgIC8qKiBUcnVlIFJhbmdlCiAgICAgKiBAcGFyYW0ge1RTfSBmaXhuYW4gLSBGaXggTmFOIHZhbHVlcwogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIHRyKGZpeG5hbiA9IGZhbHNlLCBfaWQsIF90ZikgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYHRyKCR7Zml4bmFufSlgKTsKICAgICAgbGV0IHRmcyA9IF90ZiB8fCAiIjsKICAgICAgbGV0IGhpZ2ggPSB0aGlzLmVudi5zaGFyZWRbYGhpZ2gke3Rmc31gXTsKICAgICAgbGV0IGxvdyA9IHRoaXMuZW52LnNoYXJlZFtgbG93JHt0ZnN9YF07CiAgICAgIGxldCBjbG9zZSA9IHRoaXMuZW52LnNoYXJlZFtgY2xvc2Uke3Rmc31gXTsKICAgICAgbGV0IHJlcyA9IDA7CiAgICAgIGlmICh0aGlzLm5hKGNsb3NlWzFdKSAmJiBmaXhuYW4pIHsKICAgICAgICByZXMgPSBoaWdoWzBdIC0gbG93WzBdOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcyA9IE1hdGgubWF4KAogICAgICAgICAgaGlnaFswXSAtIGxvd1swXSwKICAgICAgICAgIE1hdGguYWJzKGhpZ2hbMF0gLSBjbG9zZVsxXSksCiAgICAgICAgICBNYXRoLmFicyhsb3dbMF0gLSBjbG9zZVsxXSkKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnRzKHJlcywgaWQsIF90Zik7CiAgICB9CiAgICAvKiogVHJ1ZSBzdHJlbmd0aCBpbmRleAogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaG9ydCAtIFNob3J0IGxlbmd0aAogICAgICogQHBhcmFtIHtudW1iZXJ9IGxvbmcgLSBMb25nIGxlbmd0aAogICAgICogQHJldHVybiB7VFN9IC0gTmV3IHRpbWUtc2VyaWVzCiAgICAgKi8KICAgIHRzaShzcmMsIHNob3J0LCBsb25nLCBfaWQpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGB0c2koJHtzaG9ydH0sJHtsb25nfSlgKTsKICAgICAgbGV0IG0gPSB0aGlzLmNoYW5nZShzcmMsIDEsIGlkICsgIjAiKTsKICAgICAgbGV0IG1fYWJzID0gdGhpcy50cyhNYXRoLmFicyhtWzBdKSwgaWQgKyAiMSIsIHNyYy5fX3RmX18pOwogICAgICBsZXQgdHNpID0gdGhpcy5lbWEodGhpcy5lbWEobSwgbG9uZywgaWQgKyAiMSIpLCBzaG9ydCwgaWQgKyAiMiIpWzBdIC8gdGhpcy5lbWEodGhpcy5lbWEobV9hYnMsIGxvbmcsIGlkICsgIjMiKSwgc2hvcnQsIGlkICsgIjQiKVswXTsKICAgICAgcmV0dXJuIHRoaXMudHModHNpLCBpZCwgc3JjLl9fdGZfXyk7CiAgICB9CiAgICB2YXJpYW5jZShzcmMsIGxlbikgewogICAgfQogICAgLyoqIENyZWF0ZSBhIG5ldyBWaWV3CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFZpZXcgbmFtZQogICAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzIC0gVmlldyBwcm9wZXJ0aWVzCiAgICAgKi8KICAgIHZpZXcobmFtZSwgcHJvcHMgPSB7fSwgX2lkKSB7CiAgICAgIGlmICghdGhpcy5lbnYudmlld3NbbmFtZV0pIHsKICAgICAgICBsZXQgdmlldyA9IG5ldyBWaWV3KHRoaXMsIG5hbWUsIHByb3BzKTsKICAgICAgICB0aGlzLmVudi52aWV3c1tuYW1lXSA9IHZpZXc7CiAgICAgICAgcmV0dXJuIHZpZXc7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZW52LnZpZXdzW25hbWVdOwogICAgfQogICAgdndhcChzcmMpIHsKICAgIH0KICAgIC8qKiBWb2x1bWUgV2VpZ2h0ZWQgTW92aW5nIEF2ZXJhZ2UKICAgICAqIEBwYXJhbSB7VFN9IHNyYyAtIElucHV0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gbGVuZ3RoCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgdndtYShzcmMsIGxlbiwgX2lkKSB7CiAgICAgIGxldCBpZCA9IHRoaXMuX3RzaWQoX2lkLCBgdndtYSgke2xlbn0pYCk7CiAgICAgIGxldCB2b2wgPSB0aGlzLmVudi5zaGFyZWQudm9sOwogICAgICBsZXQgc3h2ID0gdGhpcy50cyhzcmNbMF0gKiB2b2xbMF0sIGlkICsgIjEiLCBzcmMuX190Zl9fKTsKICAgICAgbGV0IHJlcyA9IHRoaXMuc21hKHN4diwgbGVuLCBpZCArICIyIilbMF0gLyB0aGlzLnNtYSh2b2wsIGxlbiwgaWQgKyAiMyIpWzBdOwogICAgICByZXR1cm4gdGhpcy50cyhyZXMsIGlkICsgIjQiLCBzcmMuX190Zl9fKTsKICAgIH0KICAgIC8qKiBXZWVrIG9mIHllYXIsIGxpdGVyYWxseQogICAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lXSAtIFRpbWUgaW4gbXMgKGN1cnJlbnQgdCwgaWYgbm90IGRlZmluZWQpCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IC0gV2VlawogICAgICovCiAgICB3ZWVrb2Z5ZWFyKHRpbWUpIHsKICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lIHx8IHNlLnQpOwogICAgICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXRVVENEYXRlKCkgKyAzIC0gKGRhdGUuZ2V0VVRDRGF5KCkgKyA2KSAlIDcpOwogICAgICBsZXQgd2VlazEgPSBuZXcgRGF0ZShkYXRlLmdldFVUQ0Z1bGxZZWFyKCksIDAsIDQpOwogICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoCiAgICAgICAgKChkYXRlIC0gd2VlazEpIC8gODY0ZTUgLSAzICsgKHdlZWsxLmdldFVUQ0RheSgpICsgNikgJSA3KSAvIDcKICAgICAgKTsKICAgIH0KICAgIC8qKiBXZWlnaHRlZCBtb3ZpbmcgYXZlcmFnZQogICAgICogQHBhcmFtIHtUU30gc3JjIC0gSW5wdXQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gLSBsZW5ndGgKICAgICAqIEByZXR1cm4ge1RTfSAtIE5ldyB0aW1lLXNlcmllcwogICAgICovCiAgICB3bWEoc3JjLCBsZW4sIF9pZCkgewogICAgICBsZXQgaWQgPSB0aGlzLl90c2lkKF9pZCwgYHdtYSgke2xlbn0pYCk7CiAgICAgIGxldCBub3JtID0gMDsKICAgICAgbGV0IHN1bSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBsZXQgdyA9IChsZW4gLSBpKSAqIGxlbjsKICAgICAgICBub3JtICs9IHc7CiAgICAgICAgc3VtICs9IHNyY1tpXSAqIHc7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudHMoc3VtIC8gbm9ybSwgaWQsIHNyYy5fX3RmX18pOwogICAgfQogICAgLyoqIFdpbGxpYW1zICVSCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gbGVuZ3RoCiAgICAgKiBAcmV0dXJuIHtUU30gLSBOZXcgdGltZS1zZXJpZXMKICAgICAqLwogICAgd3ByKGxlbiwgX2lkLCBfdGYpIHsKICAgICAgbGV0IGlkID0gdGhpcy5fdHNpZChfaWQsIGB3cHIoJHtsZW59KWApOwogICAgICBsZXQgdGZzID0gX3RmIHx8ICIiOwogICAgICBsZXQgaGlnaCA9IHRoaXMuZW52LnNoYXJlZFtgaGlnaCR7dGZzfWBdOwogICAgICBsZXQgbG93ID0gdGhpcy5lbnYuc2hhcmVkW2Bsb3cke3Rmc31gXTsKICAgICAgbGV0IGNsb3NlID0gdGhpcy5lbnYuc2hhcmVkW2BjbG9zZSR7dGZzfWBdOwogICAgICBsZXQgaGggPSB0aGlzLmhpZ2hlc3QoaGlnaCwgbGVuLCBpZCk7CiAgICAgIGxldCBsbCA9IHRoaXMubG93ZXN0KGxvdywgbGVuLCBpZCk7CiAgICAgIGxldCByZXMgPSAoaGhbMF0gLSBjbG9zZVswXSkgLyAoaGhbMF0gLSBsbFswXSk7CiAgICAgIHJldHVybiB0aGlzLnRzKC1yZXMgKiAxMDAsIGlkLCBfdGYpOwogICAgfQogICAgLyoqIFllYXIKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZV0gLSBUaW1lIGluIG1zIChjdXJyZW50IHQsIGlmIG5vdCBkZWZpbmVkKQogICAgICogQHJldHVybiB7bnVtYmVyfSAtIFllYXIKICAgICAqLwogICAgeWVhcih0aW1lKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lIHx8IHNlLnQpLmdldFVUQ0Z1bGxZZWFyKCk7CiAgICB9CiAgfQogIGNsYXNzIFBhbmUgewogICAgY29uc3RydWN0b3IoZW52KSB7CiAgICAgIHRoaXMuc2NyaXB0SWQgPSBlbnYuaWQ7CiAgICAgIHRoaXMuZW52ID0gZW52OwogICAgICB0aGlzLnNlbGZJZCA9IHRoaXMuZmluZFNlbGZJZChlbnYuaWQpOwogICAgICB0aGlzLnBhbmVNYXAgPSB0aGlzLmNyZWF0ZU1hcCgpOwogICAgICB0aGlzLm5hbWUyb3YgPSB7fTsKICAgICAgdGhpcy5zZWxmID0gdGhpcy5wYW5lTGliKHRoaXMuc2VsZklkKTsKICAgIH0KICAgIC8vIENyZWF0ZSBhIHZpcnR1YWwgcGFuZSB3aXRoIGFsbCBvdmVybGF5cywgc28KICAgIC8vIHdlIGNhbiBjYWxsLCBlLmcuOiBwYW5lLnNlbGYuPE92ZXJsYXlUeXBlPiguLi4pCiAgICBwYW5lTGliKHV1aWQpIHsKICAgICAgbGV0IGxpYjIgPSB7fTsKICAgICAgZm9yICh2YXIgayBpbiBzZWxmLnNjcmlwdExpYi5wcmVmYWJzKSB7CiAgICAgICAgbGliMltrXSA9ICgodHlwZSkgPT4gewogICAgICAgICAgcmV0dXJuICh2LCBzcGVjcywgX2lkKSA9PiB7CiAgICAgICAgICAgIGxldCBuYW1lID0gZ2V0X2ZuX2lkKHR5cGUsIF9pZCAhPSBudWxsID8gX2lkIDogc3BlY3MpOwogICAgICAgICAgICBpZiAoIXRoaXMubmFtZTJvdltuYW1lXSkgewogICAgICAgICAgICAgIGxldCBwYW5lID0gdGhpcy5wYW5lTWFwW3V1aWRdOwogICAgICAgICAgICAgIGlmICghcGFuZSkKICAgICAgICAgICAgICAgIHBhbmUgPSB0aGlzLmNyZWF0ZVBhbmUoKTsKICAgICAgICAgICAgICB0aGlzLm5hbWUyb3ZbbmFtZV0gPSB0aGlzLm5ld092ZXJsYXkoCiAgICAgICAgICAgICAgICBwYW5lLAogICAgICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgICBzcGVjcwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IG92ID0gdGhpcy5uYW1lMm92W25hbWVdOwogICAgICAgICAgICB0aGlzLmFkZE5ld1ZhbHVlKG92LCB2KTsKICAgICAgICAgIH07CiAgICAgICAgfSkoayk7CiAgICAgIH0KICAgICAgcmV0dXJuIGxpYjI7CiAgICB9CiAgICAvLyBDcmVhdGUge3BhbmUudXVpZCA9PiBwYW5lfSBtYXAKICAgIGNyZWF0ZU1hcCgpIHsKICAgICAgbGV0IG1hcCA9IHt9OwogICAgICBmb3IgKHZhciBwYW5lIG9mIHNlbGYucGFuZVN0cnVjdCkgewogICAgICAgIG1hcFtwYW5lLnV1aWRdID0gcGFuZTsKICAgICAgfQogICAgICByZXR1cm4gbWFwOwogICAgfQogICAgLy8gRmluZCBwYW5lLnNlbGYgaWQKICAgIGZpbmRTZWxmSWQoaWQpIHsKICAgICAgZm9yICh2YXIgcGFuZSBvZiBzZWxmLnBhbmVTdHJ1Y3QpIHsKICAgICAgICBmb3IgKHZhciBzY3JpcHQgb2YgcGFuZS5zY3JpcHRzKSB7CiAgICAgICAgICBpZiAoc2NyaXB0LnV1aWQgPT09IGlkKSB7CiAgICAgICAgICAgIHJldHVybiBwYW5lLnV1aWQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvLyBBZGQgYSBuZXcgb3ZlcmxheSB0byB0aGUgc3RydWN0CiAgICBuZXdPdmVybGF5KHBhbmUsIG5hbWUsIHR5cGUsIHNwZWNzKSB7CiAgICAgIHZhciBfYSwgX2IsIF9jOwogICAgICBpZiAoIXBhbmUub3ZlcmxheXMpCiAgICAgICAgcGFuZS5vdmVybGF5cyA9IFtdOwogICAgICBsZXQgb3YgPSB7CiAgICAgICAgbmFtZTogKF9hID0gc3BlY3MubmFtZSkgIT0gbnVsbCA/IF9hIDogbmFtZSwKICAgICAgICB0eXBlLAogICAgICAgIHNldHRpbmdzOiAoX2IgPSBzcGVjcy5zZXR0aW5ncykgIT0gbnVsbCA/IF9iIDoge30sCiAgICAgICAgcHJvcHM6IChfYyA9IHNwZWNzLnByb3BzKSAhPSBudWxsID8gX2MgOiB7fSwKICAgICAgICB1dWlkOiBVdGlscy51dWlkMygpLAogICAgICAgIHByb2Q6IHRoaXMuc2NyaXB0SWQsCiAgICAgICAgZGF0YTogW10KICAgICAgfTsKICAgICAgcGFuZS5vdmVybGF5cy5wdXNoKG92KTsKICAgICAgcmV0dXJuIG92OwogICAgfQogICAgLy8gQWRkIG5ldyB2YWx1ZSB0byBvdmVybGF5J3MgZGF0YQogICAgYWRkTmV3VmFsdWUob3YsIHgpIHsKICAgICAgbGV0IG9mZiA9IDA7CiAgICAgIGlmICh4ICYmIHguX19pZF9fKSB7CiAgICAgICAgb2ZmID0geC5fX29mZnNldF9fIHx8IDA7CiAgICAgICAgeCA9IHhbMF07CiAgICAgIH0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkoeCkgJiYgeFswXSAmJiB4WzBdLl9faWRfXykgewogICAgICAgIG9mZiA9IHhbMF0uX19vZmZzZXRfXyB8fCAwOwogICAgICAgIHggPSB4Lm1hcCgoeDIpID0+IHgyWzBdKTsKICAgICAgfQogICAgICBvZmYgKj0gc2UudGY7CiAgICAgIGxldCB2ID0gQXJyYXkuaXNBcnJheSh4KSA/IFtzZS50ICsgb2ZmLCAuLi54XSA6IFtzZS50ICsgb2ZmLCB4XTsKICAgICAgdXBkYXRlKG92LmRhdGEsIHYpOwogICAgfQogICAgY3JlYXRlUGFuZSgpIHsKICAgIH0KICB9CiAgY29uc3QgRkRFRlMxID0gLyhmdW5jdGlvbiB8KShbJEEtWl9dWzAtOUEtWl8kXC5dKilbXHNdKj9cKCguKj9ccyopXCkvbWk7CiAgY29uc3QgRkRFRlMyID0gLyhmdW5jdGlvbiB8KShbJEEtWl9dWzAtOUEtWl8kXC5dKilbXHNdKj9cKCguKlxzKilcKS9nbWlzOwogIGNvbnN0IERFRl9MSU1JVCQxID0gNTsKICBjbGFzcyBTY3JpcHRFbnYgewogICAgY29uc3RydWN0b3IocywgZGF0YSkgewogICAgICB0aGlzLnN0ZCA9IHNlLnN0ZF9pbmplY3QobmV3IFNjcmlwdFN0ZCh0aGlzKSk7CiAgICAgIHRoaXMuaWQgPSBzLnV1aWQ7CiAgICAgIHRoaXMuc3JjID0gczsKICAgICAgdGhpcy5vdXRwdXQgPSB7fTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMudHNzID0ge307CiAgICAgIHRoaXMuc3ltcyA9IHt9OwogICAgICB0aGlzLnZpZXdzID0ge307CiAgICAgIHRoaXMuc2hhcmVkID0gZGF0YTsKICAgICAgdGhpcy5vdXRwdXQuYm94X21ha2VyID0gdGhpcy5tYWtlX2JveCgpOwogICAgICB0aGlzLnBhbmUgPSBuZXcgUGFuZSh0aGlzKTsKICAgIH0KICAgIGJ1aWxkKCkgewogICAgICB0aGlzLm91dHB1dC5ib3hfbWFrZXIodGhpcywgdGhpcy5zaGFyZWQsIHNlKTsKICAgICAgZGVsZXRlIHRoaXMub3V0cHV0LmJveF9tYWtlcjsKICAgIH0KICAgIGluaXQoKSB7CiAgICAgIHRoaXMub3V0cHV0LmluaXQoKTsKICAgIH0KICAgIHN0ZXAodW5zaGlmdCA9IHRydWUpIHsKICAgICAgaWYgKHVuc2hpZnQpCiAgICAgICAgdGhpcy51bnNoaWZ0KCk7CiAgICAgIHRoaXMub3V0cHV0LnVwZGF0ZSgpOwogICAgICB0aGlzLmxpbWl0KCk7CiAgICB9CiAgICB1bnNoaWZ0KCkgewogICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRzcykgewogICAgICAgIGlmICh0aGlzLnRzc1tpZF0uX190Zl9fKQogICAgICAgICAgY29udGludWU7CiAgICAgICAgdGhpcy50c3NbaWRdLnVuc2hpZnQodm9pZCAwKTsKICAgICAgfQogICAgfQogICAgLy8gTGltaXQgZW52Lm91dHB1dCBsZW5ndGgKICAgIGxpbWl0KCkgewogICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRzcykgewogICAgICAgIGxldCB0cyA9IHRoaXMudHNzW2lkXTsKICAgICAgICB0cy5sZW5ndGggPSB0cy5fX2xlbl9fIHx8IERFRl9MSU1JVCQxOwogICAgICB9CiAgICB9CiAgICAvLyBBIHNtYWxsIHNhbmRib3ggZm9yIGEgcGFydGljdWxhciBzY3JpcHQKICAgIC8vIFRPRE86IGFkZCBzdXBwb3J0IG9mICdTb3VyY2UnIHByb3AgdHlwZSAob3BlbiwgaGlnaCwgaGwyIC4uLikKICAgIG1ha2VfYm94KCkgewogICAgICBsZXQgY29kZSA9IHRoaXMuc3JjLmNvZGU7CiAgICAgIGxldCBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzLnN0ZCk7CiAgICAgIGxldCBzdGQgPSBgYDsKICAgICAgZm9yICh2YXIgayBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90bykpIHsKICAgICAgICBpZiAoayA9PT0gImNvbnN0cnVjdG9yIikKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIHN0ZCArPSBgY29uc3Qgc3RkXyR7a30gPSBzZWxmLnN0ZC4ke2t9LmJpbmQoc2VsZi5zdGQpCmA7CiAgICAgIH0KICAgICAgbGV0IHRzcyA9IGBgOwogICAgICBmb3IgKHZhciBrIGluIHRoaXMuc2hhcmVkKSB7CiAgICAgICAgaWYgKHRoaXMuc2hhcmVkW2tdICYmIHRoaXMuc2hhcmVkW2tdLl9faWRfXykgewogICAgICAgICAgdHNzICs9IGBjb25zdCAke2t9ID0gc2hhcmVkLiR7a30KYDsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IGRzcyA9IGBgOwogICAgICB0cnkgewogICAgICAgIHJldHVybiBGdW5jdGlvbigic2VsZixzaGFyZWQsc2UiLCBgCiAgICAgICAgICAgICAgICAndXNlIHN0cmljdCc7CgogICAgICAgICAgICAgICAgLy8gQnVpbHQtaW4gZnVuY3Rpb25zIChhbGlhc2VzKQogICAgICAgICAgICAgICAgJHtzdGR9CgogICAgICAgICAgICAgICAgLy8gTW9kdWxlcyAoQVBJIC8gaW50ZXJmYWNlcykKICAgICAgICAgICAgICAgICR7dGhpcy5tYWtlX21vZHVsZXMoKX0KCiAgICAgICAgICAgICAgICAvLyBUaW1lc2VyaWVzCiAgICAgICAgICAgICAgICAke3Rzc30KCiAgICAgICAgICAgICAgICAvLyBEaXJlY3QgZGF0YSB0cwogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHNlbGYuZGF0YQogICAgICAgICAgICAgICAgY29uc3Qgb2hsY3YgPSBzaGFyZWQuZHNzLm9obGN2LmRhdGEKICAgICAgICAgICAgICAgICR7ZHNzfQoKICAgICAgICAgICAgICAgIC8vIFNjcmlwdCdzIHByb3BlcnRpZXMgKGluaXQpCiAgICAgICAgICAgICAgICBjb25zdCAkcHJvcHMgPSBzZWxmLnNyYy5wcm9wcwoKICAgICAgICAgICAgICAgIC8vIEdsb2JhbHMKICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gc2VsZi5zcmMuc2V0dGluZ3MKICAgICAgICAgICAgICAgIGNvbnN0IHRmID0gc2hhcmVkLnRmCiAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IHNoYXJlZC5yYW5nZQogICAgICAgICAgICAgICAgY29uc3QgcGFuZSA9IHNlbGYucGFuZQoKICAgICAgICAgICAgICAgIHRoaXMuaW5pdCA9IChfaWQgPSAncm9vdCcpID0+IHsKICAgICAgICAgICAgICAgICAgICAke3RoaXMucHJlcChjb2RlLmluaXQpfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlID0gKF9pZCA9ICdyb290JykgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBzaGFyZWQudCgpCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlciA9IHNoYXJlZC5pdGVyKCkKICAgICAgICAgICAgICAgICAgICAke3RoaXMucHJlcChjb2RlLnVwZGF0ZSl9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5wb3N0ID0gKF9pZCA9ICdyb290JykgPT4gewogICAgICAgICAgICAgICAgICAgICR7dGhpcy5wcmVwKGNvZGUucG9zdCl9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uKCJzZWxmLHNoYXJlZCIsIGAKICAgICAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsKICAgICAgICAgICAgICAgIHRoaXMuaW5pdCA9ICgpID0+IHt9CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSA9ICgpID0+IHt9CiAgICAgICAgICAgICAgICB0aGlzLnBvc3QgPSAoKSA9PiB7fQogICAgICAgICAgICBgKTsKICAgICAgfQogICAgfQogICAgLy8gTWFrZSBkZWZpbml0aW9ucyBmb3IgbW9kdWxlcwogICAgbWFrZV9tb2R1bGVzKCkgewogICAgICBsZXQgcyA9IGBgOwogICAgICBmb3IgKHZhciBpZCBpbiBzZS5tb2RzKSB7CiAgICAgICAgaWYgKCFzZS5tb2RzW2lkXS5hcGkpCiAgICAgICAgICBjb250aW51ZTsKICAgICAgICBzICs9IGBjb25zdCAke2lkfSA9IHNlLm1vZHNbJyR7aWR9J10uYXBpW3NlbGYuaWRdYDsKICAgICAgICBzICs9ICJcbiI7CiAgICAgIH0KICAgICAgcmV0dXJuIHM7CiAgICB9CiAgICAvLyBQcmVwcm9jZXNzIHRoZSB1cGRhdGUgZnVuY3Rpb24uCiAgICAvLyBSZXBsYWNlIGZ1bmN0aW9ucyB3aXRoIHRoZSBmdWxsIGFyZ3VtZW50cyBsaXN0ICsKICAgIC8vIGdlbmVyYXRlICYgYWRkIHRzaWQKICAgIC8vIFRPRE86IGltcGxlbWVudCByZWN1cnNpdmUgcHJlcHBpbmcgKHdpdGgganMgc3ludGF4IHBhcnNlcikKICAgIHByZXAoc3JjKSB7CiAgICAgIGxldCBoID0gdGhpcy5zcmMudHlwZTsKICAgICAgc3JjID0gIgkJICBsZXQgX3ByZWYgPSBgJHtfaWR9PC0iICsgaCArICI8LWBcbiIgKyBzcmM7CiAgICAgIEZERUZTMi5sYXN0SW5kZXggPSAwOwogICAgICBsZXQgY2FsbF9pZCA9IDA7CiAgICAgIGxldCBwcmVmYWJzID0gc2VsZi5zY3JpcHRMaWIucHJlZmFiczsKICAgICAgZG8gewogICAgICAgIHZhciBtID0gRkRFRlMyLmV4ZWMoc3JjKTsKICAgICAgICBpZiAobSkgewogICAgICAgICAgbGV0IGZrZXl3b3JkID0gbVsxXS50cmltKCk7CiAgICAgICAgICBsZXQgZm5hbWUgPSBtWzJdOwogICAgICAgICAgbVszXTsKICAgICAgICAgIGlmIChma2V5d29yZCA9PT0gImZ1bmN0aW9uIikKICAgICAgICAgICAgOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGxldCBvZmYgPSBtLmluZGV4ICsgbVswXS5pbmRleE9mKCIoIik7CiAgICAgICAgICAgIGxldCBpMSA9IG0uaW5kZXg7CiAgICAgICAgICAgIGxldCBtMCA9IHRoaXMucGFyZW50aGVzZXMobVswXSk7CiAgICAgICAgICAgIGxldCBpMiA9IG0uaW5kZXggKyBtMC5sZW5ndGg7CiAgICAgICAgICAgIGxldCBhcmdzMiA9IHRoaXMuYXJnczIobVswXSk7CiAgICAgICAgICAgIGlmICh0aGlzLnN0ZFtmbmFtZV0pIHsKICAgICAgICAgICAgICBzcmMgPSB0aGlzLnBvc3RmaXgoc3JjLCBtLCArK2NhbGxfaWQpOwogICAgICAgICAgICAgIG9mZiArPSA0OwogICAgICAgICAgICB9IGVsc2UgaWYgKGZuYW1lIGluIHByZWZhYnMpIHsKICAgICAgICAgICAgICBvZmYgKz0gMTA7CiAgICAgICAgICAgICAgbGV0IHV0c2lkID0gYF9wcmVmKyJmJHsrK2NhbGxfaWR9ImA7CiAgICAgICAgICAgICAgc3JjID0gdGhpcy5yZXBsYWNlKAogICAgICAgICAgICAgICAgc3JjLAogICAgICAgICAgICAgICAgYHBhbmUuc2VsZi4ke2ZuYW1lfSgke2FyZ3MyfSwgJHt1dHNpZH0pYCwKICAgICAgICAgICAgICAgIGkxLAogICAgICAgICAgICAgICAgaTIKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgaWYgKGZuYW1lLnNsaWNlKDAsIDQpID09PSAicGFuZSIgJiYgZm5hbWUuc3BsaXQoIi4iKS5wb3AoKSBpbiBwcmVmYWJzKSB7CiAgICAgICAgICAgICAgbGV0IHV0c2lkID0gYF9wcmVmKyJmJHsrK2NhbGxfaWR9ImA7CiAgICAgICAgICAgICAgc3JjID0gdGhpcy5yZXBsYWNlKAogICAgICAgICAgICAgICAgc3JjLAogICAgICAgICAgICAgICAgYCR7Zm5hbWV9KCR7YXJnczJ9LCAke3V0c2lkfSlgLAogICAgICAgICAgICAgICAgaTEsCiAgICAgICAgICAgICAgICBpMgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRkRFRlMyLmxhc3RJbmRleCA9IG9mZjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gd2hpbGUgKG0pOwogICAgICByZXR1cm4gd3JhcF9pZHhzKHNyYywgInN0ZF8iKTsKICAgIH0KICAgIC8vIFBvc3RmaXggZnVuY3Rpb24gY2FsbHMgd2l0aCB0cyBfaWRzCiAgICBwb3N0Zml4KHNyYywgbSwgY2FsbF9pZCkgewogICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5nZXRfYXJncyh0aGlzLmZkZWYobVsyXSkpLmxlbmd0aDsKICAgICAgbGV0IG0wID0gdGhpcy5wYXJlbnRoZXNlcyhtWzBdKTsKICAgICAgbGV0IGFyZ3MgPSB0aGlzLmdldF9hcmdzXzIobTApOwogICAgICBmb3IgKHZhciBpID0gYXJncy5sZW5ndGg7IGkgPCB0YXJnZXQ7IGkrKykgewogICAgICAgIGFyZ3MucHVzaCgidm9pZCAwIik7CiAgICAgIH0KICAgICAgYXJncy5wdXNoKGBfcHJlZisiZiR7Y2FsbF9pZH0iYCk7CiAgICAgIHJldHVybiBzcmMucmVwbGFjZShtMCwgYHN0ZF8ke21bMl19KCR7YXJncy5qb2luKCIsICIpfSlgKTsKICAgIH0KICAgIC8vIEluc2VydCBzdHJpbmcgaW50byB0ZXh0CiAgICByZXBsYWNlKHNyYywgc3RyLCBpMSwgaTIpIHsKICAgICAgcmV0dXJuIFtzcmMuc2xpY2UoMCwgaTEpLCBzdHIsIHNyYy5zbGljZShpMildLmpvaW4oIiIpOwogICAgfQogICAgcGFyZW50aGVzZXMoc3RyKSB7CiAgICAgIHZhciBjb3VudCA9IDAsIGZpcnN0ID0gZmFsc2U7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHN0cltpXSA9PT0gIigiKSB7CiAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgZmlyc3QgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoc3RyW2ldID09PSAiKSIpIHsKICAgICAgICAgIGNvdW50LS07CiAgICAgICAgfQogICAgICAgIGlmIChmaXJzdCAmJiBjb3VudCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgaSArIDEpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3RyOwogICAgfQogICAgYXJnczIoc3RyKSB7CiAgICAgIHZhciBjb3VudCA9IDAsIGZpcnN0ID0gZmFsc2U7CiAgICAgIHZhciBpMSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHN0cltpXSA9PT0gIigiKSB7CiAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgaWYgKCFmaXJzdCkKICAgICAgICAgICAgaTEgPSBpICsgMTsKICAgICAgICAgIGZpcnN0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKHN0cltpXSA9PT0gIikiKSB7CiAgICAgICAgICBjb3VudC0tOwogICAgICAgIH0KICAgICAgICBpZiAoZmlyc3QgJiYgY291bnQgPT09IDApIHsKICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKGkxLCBpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHN0cjsKICAgIH0KICAgIC8vIEdldCB0aGUgZnVuY3Rpb24gZGVmaW5pdGlvbgogICAgLy8gVE9ETzogYWRkIHN1cHBvcnQgb2YgbW9kdWxlcwogICAgZmRlZihmbmFtZSkgewogICAgICByZXR1cm4gdGhpcy5zdGRbZm5hbWVdLnRvU3RyaW5nKCk7CiAgICB9CiAgICAvLyBHZXQgYXJncyBpbiB0aGUgZnVuY3Rpb24ncyBkZWZpbml0aW9uCiAgICBnZXRfYXJncyhzcmMpIHsKICAgICAgbGV0IHJlZyA9IHRoaXMucmVnZXhfY2xvbmUoRkRFRlMxKTsKICAgICAgcmVnLmxhc3RJbmRleCA9IDA7CiAgICAgIGxldCBtID0gcmVnLmV4ZWMoc3JjKTsKICAgICAgaWYgKCFtWzNdLnRyaW0oKS5sZW5ndGgpCiAgICAgICAgcmV0dXJuIFtdOwogICAgICBsZXQgYXJyID0gbVszXS5zcGxpdCgiLCIpLm1hcCgoeCkgPT4geC50cmltKCkpLmZpbHRlcigoeCkgPT4geCAhPT0gIl9pZCIgJiYgeCAhPT0gIl90ZiIpOwogICAgICByZXR1cm4gYXJyOwogICAgfQogICAgZ2V0X2FyZ3NfMihzdHIpIHsKICAgICAgbGV0IHBhcnRzID0gW107CiAgICAgIGxldCBjID0gMDsKICAgICAgbGV0IHMgPSAwOwogICAgICB2YXIgcTEgPSBmYWxzZSwgcTIgPSBmYWxzZSwgcTMgPSBmYWxzZTsKICAgICAgbGV0IHBhcnQ7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHN0cltpXSA9PT0gIigiKSB7CiAgICAgICAgICBjKys7CiAgICAgICAgICBpZiAoIXBhcnQpCiAgICAgICAgICAgIHBhcnQgPSBbaSArIDFdOwogICAgICAgIH0KICAgICAgICBpZiAoc3RyW2ldID09PSAiKSIpCiAgICAgICAgICBjLS07CiAgICAgICAgaWYgKHN0cltpXSA9PT0gIlsiKQogICAgICAgICAgcysrOwogICAgICAgIGlmIChzdHJbaV0gPT09ICJdIikKICAgICAgICAgIHMtLTsKICAgICAgICBpZiAoc3RyW2ldID09PSAiJyIpCiAgICAgICAgICBxMSA9ICFxMTsKICAgICAgICBpZiAoc3RyW2ldID09PSAnIicpCiAgICAgICAgICBxMiA9ICFxMjsKICAgICAgICBpZiAoc3RyW2ldID09PSAiYCIpCiAgICAgICAgICBxMyA9ICFxMzsKICAgICAgICBpZiAoc3RyW2ldID09PSAiLCIgJiYgYyA9PT0gMSAmJiAhcyAmJiAhcTEgJiYgIXEyICYmICFxMykgewogICAgICAgICAgaWYgKHBhcnQpIHsKICAgICAgICAgICAgcGFydFsxXSA9IGk7CiAgICAgICAgICAgIHBhcnRzLnB1c2gocGFydCk7CiAgICAgICAgICAgIHBhcnQgPSBbaSArIDFdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoYyA9PT0gMCAmJiBwYXJ0KSB7CiAgICAgICAgICBwYXJ0WzFdID0gaTsKICAgICAgICAgIHBhcnRzLnB1c2gocGFydCk7CiAgICAgICAgICBwYXJ0ID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHBhcnRzLm1hcCgoeCkgPT4gc3RyLnNsaWNlKC4uLngpKS5maWx0ZXIoKHgpID0+IC9bXlxzXSsvLmV4ZWMoeCkpOwogICAgfQogICAgcmVnZXhfY2xvbmUocmV4KSB7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKHJleC5zb3VyY2UsIHJleC5mbGFncyk7CiAgICB9CiAgICBzZW5kX21vZGlmeSh1cGQpIHsKICAgICAgc2Uuc2VuZCgibW9kaWZ5LW92ZXJsYXkiLCB7CiAgICAgICAgdXVpZDogdGhpcy5pZCwKICAgICAgICBmaWVsZHM6IHVwZAogICAgICB9KTsKICAgIH0KICB9CiAgY29uc3QgU1lNVEYgPSAvKG9wZW58aGlnaHxsb3d8Y2xvc2V8dm9sKShcZCspKFx3KikvZ207CiAgY29uc3QgRk5TVEQgPSAvKGE/dHJ8a2N3P3xkbWl8c2FyfHN1cGVydHJlbmR8d3ByKShcZCs/XHcqKVxzKlwoL2dtOwogIGNvbnN0IFNZTVNURCA9IC8oPzpobDJ8aGxjM3xvaGxjNCkvZ207CiAgdmFyIHN5bXN0ZCA9IHsKICAgIHBhcnNlKHMpIHsKICAgICAgbGV0IHNzID0gcy5jb2RlOwogICAgICBsZXQgYWxsID0gYCR7c3MuaW5pdH0KJHtzcy51cGRhdGV9CiR7c3MucG9zdH1gOwogICAgICBTWU1URi5sYXN0SW5kZXggPSAwOwogICAgICBGTlNURC5sYXN0SW5kZXggPSAwOwogICAgICBTWU1TVEQubGFzdEluZGV4ID0gMDsKICAgICAgZG8gewogICAgICAgIHZhciBtID0gU1lNVEYuZXhlYyhhbGwpOwogICAgICAgIGlmIChtKSB7CiAgICAgICAgICBpZiAobVswXSBpbiBzZS50c3MpCiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgbGV0IHRzID0gc2UudHNzW21bMF1dID0gVFMobVswXSwgW10pOwogICAgICAgICAgdHMuX190Zl9fID0gdGZfZnJvbV9wYWlyKG1bMl0sIG1bM10pOwogICAgICAgICAgdHMuX19mbl9fID0gU2FtcGxlcihtWzFdLCB0cnVlKS5iaW5kKHRzKTsKICAgICAgICB9CiAgICAgIH0gd2hpbGUgKG0pOwogICAgICBkbyB7CiAgICAgICAgdmFyIG0gPSBTWU1TVEQuZXhlYyhhbGwpOwogICAgICAgIGlmIChtKSB7CiAgICAgICAgICBpZiAobVswXSBpbiBzZS50c3MpCiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgdGhpcy5wYXJzZV90c19zeW0obVswXSk7CiAgICAgICAgfQogICAgICB9IHdoaWxlIChtKTsKICAgICAgZG8gewogICAgICAgIHZhciBtID0gRk5TVEQuZXhlYyhhbGwpOwogICAgICAgIGlmIChtKSB7CiAgICAgICAgICBsZXQgZm4gPSBtWzFdICsgbVsyXTsKICAgICAgICAgIGxldCB0ZiA9IG1bMl07CiAgICAgICAgICBpZiAoZm4gaW4gc2Uuc3RkX3BsdXMpCiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgc3dpdGNoIChtWzFdKSB7CiAgICAgICAgICAgIGNhc2UgInRyIjoKICAgICAgICAgICAgICB0aGlzLmRlcHMoWyJoaWdoIiwgImxvdyIsICJjbG9zZSJdLCBtWzJdKTsKICAgICAgICAgICAgICBzZS5zdGRfcGx1c1tmbl0gPSBmdW5jdGlvbihmaXhuYW4gPSBmYWxzZSwgX2lkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cihmaXhuYW4sIF9pZCwgdGYpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgImF0ciI6CiAgICAgICAgICAgICAgdGhpcy5kZXBzKFsiaGlnaCIsICJsb3ciLCAiY2xvc2UiXSwgbVsyXSk7CiAgICAgICAgICAgICAgc2Uuc3RkX3BsdXNbZm5dID0gZnVuY3Rpb24obGVuLCBfaWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF0cihsZW4sIF9pZCwgdGYpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgImtjIjoKICAgICAgICAgICAgICB0aGlzLmRlcHMoWyJoaWdoIiwgImxvdyIsICJjbG9zZSJdLCBtWzJdKTsKICAgICAgICAgICAgICBzZS5zdGRfcGx1c1tmbl0gPSBmdW5jdGlvbihzcmMsIGxlbiwgbXVsdCwgdXNlX3RyID0gdHJ1ZSwgX2lkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5rYyhzcmMsIGxlbiwgbXVsdCwgdXNlX3RyLCBfaWQsIHRmKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJrY3ciOgogICAgICAgICAgICAgIHRoaXMuZGVwcyhbImhpZ2giLCAibG93IiwgImNsb3NlIl0sIG1bMl0pOwogICAgICAgICAgICAgIHNlLnN0ZF9wbHVzW2ZuXSA9IGZ1bmN0aW9uKHNyYywgbGVuLCBtdWx0LCB1c2VfdHIgPSB0cnVlLCBfaWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmtjdyhzcmMsIGxlbiwgbXVsdCwgdXNlX3RyLCBfaWQsIHRmKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJkbWkiOgogICAgICAgICAgICAgIHRoaXMuZGVwcyhbImhpZ2giLCAibG93IiwgImNsb3NlIl0sIG1bMl0pOwogICAgICAgICAgICAgIHNlLnN0ZF9wbHVzW2ZuXSA9IGZ1bmN0aW9uKGxlbiwgc21vb3RoLCBfaWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRtaShsZW4sIHNtb290aCwgX2lkLCB0Zik7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAic2FyIjoKICAgICAgICAgICAgICB0aGlzLmRlcHMoWyJoaWdoIiwgImxvdyIsICJjbG9zZSJdLCBtWzJdKTsKICAgICAgICAgICAgICBzZS5zdGRfcGx1c1tmbl0gPSBmdW5jdGlvbihzdGFydCwgaW5jLCBtYXgsIF9pZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2FyKHN0YXJ0LCBpbmMsIG1heCwgX2lkLCB0Zik7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAic3VwZXJ0cmVuZCI6CiAgICAgICAgICAgICAgdGhpcy5kZXBzKFsiaGlnaCIsICJsb3ciLCAiY2xvc2UiXSwgbVsyXSk7CiAgICAgICAgICAgICAgc2Uuc3RkX3BsdXNbZm5dID0gZnVuY3Rpb24oZmFjdG9yLCBhdHJsZW4sIF9pZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VwZXJ0cmVuZChmYWN0b3IsIGF0cmxlbiwgX2lkLCB0Zik7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAid3ByIjoKICAgICAgICAgICAgICB0aGlzLmRlcHMoWyJoaWdoIiwgImxvdyIsICJjbG9zZSJdLCBtWzJdKTsKICAgICAgICAgICAgICBzZS5zdGRfcGx1c1tmbl0gPSBmdW5jdGlvbihsZW4sIF9pZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud3ByKGxlbiwgX2lkLCB0Zik7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gd2hpbGUgKG0pOwogICAgfSwKICAgIHBhcnNlX3RzX3N5bShzeW0sIHRmKSB7CiAgICAgIHN3aXRjaCAoc3ltKSB7CiAgICAgICAgY2FzZSAiaGwyIjoKICAgICAgICAgIHNlLnRzc1siaGwyIl0gPSBUUygiaGwyIiwgW10pOwogICAgICAgICAgc2UudHNzWyJobDIiXS5fX2ZuX18gPSAoKSA9PiB7CiAgICAgICAgICAgIHJldHVybiAoc2UuaGlnaFswXSArIHNlLmxvd1swXSkgKiAwLjU7CiAgICAgICAgICB9OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiaGxjMyI6CiAgICAgICAgICBzZS50c3NbImhsYzMiXSA9IFRTKCJobGMzIiwgW10pOwogICAgICAgICAgc2UudHNzWyJobGMzIl0uX19mbl9fID0gKCkgPT4gewogICAgICAgICAgICByZXR1cm4gKHNlLmhpZ2hbMF0gKyBzZS5sb3dbMF0gKyBzZS5jbG9zZVswXSkgLyAzOwogICAgICAgICAgfTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIm9obGM0IjoKICAgICAgICAgIHNlLnRzc1sib2hsYzQiXSA9IFRTKCJvaGxjNCIsIFtdKTsKICAgICAgICAgIHNlLnRzc1sib2hsYzQiXS5fX2ZuX18gPSAoKSA9PiB7CiAgICAgICAgICAgIHJldHVybiAoc2Uub3BlblswXSArIHNlLmhpZ2hbMF0gKyBzZS5sb3dbMF0gKyBzZS5jbG9zZVswXSkgKiAwLjI1OwogICAgICAgICAgfTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgZGVwcyh0eXBlcywgdGYpIHsKICAgICAgZm9yICh2YXIgdHlwZSBvZiB0eXBlcykgewogICAgICAgIGxldCBzeW0gPSB0eXBlICsgdGY7CiAgICAgICAgaWYgKHN5bSBpbiBzZS50c3MpCiAgICAgICAgICBjb250aW51ZTsKICAgICAgICBsZXQgdHMgPSBzZS50c3Nbc3ltXSA9IFRTKHN5bSwgW10pOwogICAgICAgIHRzLl9fdGZfXyA9IHRmX2Zyb21fc3RyKHRmKTsKICAgICAgICB0cy5fX2ZuX18gPSBTYW1wbGVyKHR5cGUsIHRydWUpLmJpbmQodHMpOwogICAgICB9CiAgICB9CiAgfTsKICBjb25zdCBERUZfTElNSVQgPSA1OwogIGNsYXNzIFNjcmlwdEVuZ2luZSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXAgPSB7fTsKICAgICAgdGhpcy5kYXRhID0ge307CiAgICAgIHRoaXMucXVldWUgPSBbXTsKICAgICAgdGhpcy5kZWx0YV9xdWV1ZSA9IFtdOwogICAgICB0aGlzLnVwZGF0ZV9xdWV1ZSA9IFtdOwogICAgICB0aGlzLnNldHQgPSB7fTsKICAgICAgdGhpcy5zdGF0ZSA9IHt9OwogICAgICB0aGlzLm1vZHMgPSB7fTsKICAgICAgdGhpcy5zdGRfcGx1cyA9IHt9OwogICAgICB0aGlzLnRmID0gdm9pZCAwOwogICAgfQogICAgYXN5bmMgZXhlY19hbGwoKSB7CiAgICAgIGlmICghdGhpcy5kYXRhLm9obGN2KQogICAgICAgIHJldHVybjsKICAgICAgdGhpcy5tYXAgPSB0aGlzLnN0cnVjdF90b19tYXAoc2VsZi5wYW5lU3RydWN0KTsKICAgICAgaWYgKCF0aGlzLmluaXRfc3RhdGUoKSkKICAgICAgICByZXR1cm47CiAgICAgIHRoaXMuaW5pdF9tYXAoKTsKICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubWFwKS5sZW5ndGgpIHsKICAgICAgICBhd2FpdCB0aGlzLnJ1bigpOwogICAgICAgIHRoaXMuZHJhaW5fcXVldWVzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZW5kKCJvdmVybGF5LWRhdGEiLCB0aGlzLmZvcm1hdF9kYXRhKCkpOwogICAgICB9CiAgICAgIHRoaXMuc2VuZF9zdGF0ZSgpOwogICAgfQogICAgLy8gRXhlYyBzZWxlY3RlZAogICAgYXN5bmMgZXhlY19zZWwoZGVsdGEpIHsKICAgICAgaWYgKCF0aGlzLmRhdGEub2hsY3YpCiAgICAgICAgcmV0dXJuOwogICAgICBsZXQgc2VsID0gT2JqZWN0LmtleXMoZGVsdGEpLmZpbHRlcigoeCkgPT4geCBpbiB0aGlzLm1hcCk7CiAgICAgIGlmICghdGhpcy5pbml0X3N0YXRlKHNlbCkpIHsKICAgICAgICB0aGlzLmRlbHRhX3F1ZXVlLnB1c2goZGVsdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBmb3IgKHZhciBpZCBpbiBkZWx0YSkgewogICAgICAgIGlmICghdGhpcy5tYXBbaWRdKQogICAgICAgICAgY29udGludWU7CiAgICAgICAgbGV0IHByb3BzID0gdGhpcy5tYXBbaWRdLnNyYy5wcm9wcyB8fCB7fTsKICAgICAgICBmb3IgKHZhciBrIGluIHByb3BzKSB7CiAgICAgICAgICBpZiAoayBpbiBkZWx0YVtpZF0pIHsKICAgICAgICAgICAgcHJvcHNba10udmFsID0gZGVsdGFbaWRdW2tdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmFkZF9zY3JpcHQodGhpcy5tYXBbaWRdKTsKICAgICAgfQogICAgICBhd2FpdCB0aGlzLnJ1bihzZWwpOwogICAgICB0aGlzLmRyYWluX3F1ZXVlcygpOwogICAgICB0aGlzLnNlbmRfc3RhdGUoKTsKICAgIH0KICAgIC8vIEFkZCBzY3JpcHQgKGNyZWF0ZSBhIG5ldyBTY3JpcHRFbnYsIGFkZCB0byB0aGUgbWFwKQogICAgYWRkX3NjcmlwdChzKSB7CiAgICAgIGxldCBzY3JpcHQgPSBzZWxmLnNjcmlwdExpYi5pU2NyaXB0c1tzLnR5cGVdOwogICAgICBpZiAoIXNjcmlwdCkgewogICAgICAgIGRlbGV0ZSB0aGlzLm1hcFtzLnV1aWRdOwogICAgICAgIHJldHVybiBjb25zb2xlLmxvZygiVW5rbm93biBzY3JpcHQ6ICIsIHMudHlwZSk7CiAgICAgIH0KICAgICAgcy5jb2RlID0gewogICAgICAgIGluaXQ6IHNjcmlwdC5jb2RlLmluaXQgfHwgIiIsCiAgICAgICAgdXBkYXRlOiBzY3JpcHQuY29kZS51cGRhdGUgfHwgIiIsCiAgICAgICAgcG9zdDogc2NyaXB0LmNvZGUucG9zdCB8fCAiIgogICAgICB9OwogICAgICBzeW1zdGQucGFyc2Uocyk7CiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMubW9kcykgewogICAgICAgIGlmICh0aGlzLm1vZHNbaWRdLnByZV9lbnYpIHsKICAgICAgICAgIHRoaXMubW9kc1tpZF0ucHJlX2VudihzLnV1aWQsIHMpOwogICAgICAgIH0KICAgICAgfQogICAgICBzLmVudiA9IG5ldyBTY3JpcHRFbnYocywgT2JqZWN0LmFzc2lnbih0aGlzLnNoYXJlZCwgewogICAgICAgIG9wZW46IHRoaXMub3BlbiwKICAgICAgICBoaWdoOiB0aGlzLmhpZ2gsCiAgICAgICAgbG93OiB0aGlzLmxvdywKICAgICAgICBjbG9zZTogdGhpcy5jbG9zZSwKICAgICAgICB2b2w6IHRoaXMudm9sLAogICAgICAgIGRzczogdGhpcy5kYXRhLAogICAgICAgIHQ6ICgpID0+IHRoaXMudCwKICAgICAgICBpdGVyOiAoKSA9PiB0aGlzLml0ZXIsCiAgICAgICAgdGY6IHRoaXMudGYsCiAgICAgICAgcmFuZ2U6IHRoaXMucmFuZ2UsCiAgICAgICAgb25jbG9zZTogdHJ1ZQogICAgICB9LCB0aGlzLnRzcykpOwogICAgICB0aGlzLm1hcFtzLnV1aWRdID0gczsKICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5tb2RzKSB7CiAgICAgICAgaWYgKHRoaXMubW9kc1tpZF0ubmV3X2VudikgewogICAgICAgICAgdGhpcy5tb2RzW2lkXS5uZXdfZW52KHMudXVpZCwgcyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHMuZW52LmJ1aWxkKCk7CiAgICB9CiAgICAvLyBMaXZlIHVwZGF0ZQogICAgdXBkYXRlKGNhbmRsZXMsIGUpIHsKICAgICAgaWYgKCF0aGlzLmRhdGEub2hsY3YgfHwgIXRoaXMuZGF0YS5vaGxjdi5kYXRhLmxlbmd0aCkgewogICAgICAgIHJldHVybiB0aGlzLnNlbmRfdXBkYXRlKGUuZGF0YS5pZCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucnVubmluZykgewogICAgICAgIHRoaXMudXBkYXRlX3F1ZXVlLnB1c2goW2NhbmRsZXMsIGVdKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLnNoYXJlZCkKICAgICAgICByZXR1cm47CiAgICAgIGxldCBtZnMxID0gdGhpcy5tYWtlX21vZHNfaG9va3MoInByZV9zdGVwIik7CiAgICAgIGxldCBtZnMyID0gdGhpcy5tYWtlX21vZHNfaG9va3MoInBvc3Rfc3RlcCIpOwogICAgICBsZXQgc3RlcCA9IChzZWwsIHVuc2hpZnQpID0+IHsKICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IG1mczEubGVuZ3RoOyBtKyspIHsKICAgICAgICAgIG1mczFbbV0oc2VsKTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgaWQgb2Ygc2VsKSB7CiAgICAgICAgICB0aGlzLm1hcFtpZF0uZW52LnN0ZXAodW5zaGlmdCk7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgbWZzMi5sZW5ndGg7IG0rKykgewogICAgICAgICAgbWZzMlttXShzZWwpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgb2hsY3YgPSB0aGlzLmRhdGEub2hsY3YuZGF0YTsKICAgICAgICBsZXQgaSA9IG9obGN2Lmxlbmd0aCAtIDE7CiAgICAgICAgbGV0IGxhc3QgPSBvaGxjdltpXTsKICAgICAgICBsZXQgc2VsID0gT2JqZWN0LmtleXModGhpcy5tYXApOwogICAgICAgIGxldCB1bnNoaWZ0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5zaGFyZWQuZXZlbnQgPSAidXBkYXRlIjsKICAgICAgICBmb3IgKHZhciBjYW5kbGUgb2YgY2FuZGxlcykgewogICAgICAgICAgaWYgKGNhbmRsZVswXSA+IGxhc3RbMF0pIHsKICAgICAgICAgICAgdGhpcy5zaGFyZWQub25jbG9zZSA9IHRydWU7CiAgICAgICAgICAgIHN0ZXAoc2VsLCBmYWxzZSk7CiAgICAgICAgICAgIG9obGN2LnB1c2goY2FuZGxlKTsKICAgICAgICAgICAgdW5zaGlmdCA9IHRydWU7CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgIH0gZWxzZSBpZiAoY2FuZGxlWzBdIDwgbGFzdFswXSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9obGN2W2ldID0gY2FuZGxlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLml0ZXIgPSBpOwogICAgICAgIHRoaXMudCA9IG9obGN2W2ldWzBdOwogICAgICAgIHRoaXMuc3RlcChvaGxjdltpXSwgdW5zaGlmdCk7CiAgICAgICAgdGhpcy5zaGFyZWQub25jbG9zZSA9IGZhbHNlOwogICAgICAgIHN0ZXAoc2VsLCB1bnNoaWZ0KTsKICAgICAgICB0aGlzLmxpbWl0KCk7CiAgICAgICAgdGhpcy5zZW5kX3VwZGF0ZShlLmRhdGEuaWQpOwogICAgICAgIHRoaXMuc2VuZF9zdGF0ZSgpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9CiAgICBpbml0X3N0YXRlKHNlbCkgewogICAgICBzZWwgPSBzZWwgIT0gbnVsbCA/IHNlbCA6IE9iamVjdC5rZXlzKHRoaXMubWFwKTsKICAgICAgbGV0IHRhc2sgPSBzZWwuam9pbigiLCIpOwogICAgICBpZiAodGhpcy5ydW5uaW5nKSB7CiAgICAgICAgdGhpcy5fcmVzdGFydCA9IHRhc2sgPT09IHRoaXMudGFzazsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5vcGVuID0gVFMoIm9wZW4iLCBbXSk7CiAgICAgIHRoaXMuaGlnaCA9IFRTKCJoaWdoIiwgW10pOwogICAgICB0aGlzLmxvdyA9IFRTKCJsb3ciLCBbXSk7CiAgICAgIHRoaXMuY2xvc2UgPSBUUygiY2xvc2UiLCBbXSk7CiAgICAgIHRoaXMudm9sID0gVFMoInZvbCIsIFtdKTsKICAgICAgdGhpcy50c3MgPSB7fTsKICAgICAgdGhpcy5zdGRfcGx1cyA9IHt9OwogICAgICB0aGlzLnNoYXJlZCA9IHt9OwogICAgICB0aGlzLml0ZXIgPSAwOwogICAgICB0aGlzLnQgPSAwOwogICAgICB0aGlzLnNraXAgPSBmYWxzZTsKICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICAgIHRoaXMudGFzayA9IHRhc2s7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLy8gQ29udmVydCBmdWxsIHNjcmlwdCBzdHJ1Y3QgdG8gYSBtYXAKICAgIHN0cnVjdF90b19tYXAoc3RydWN0KSB7CiAgICAgIHZhciBfYTsKICAgICAgbGV0IG1hcCA9IHt9OwogICAgICBsZXQgbGlzdCA9IFtdOwogICAgICBmb3IgKHZhciBwYW5lIG9mIHN0cnVjdCkgewogICAgICAgIGZvciAodmFyIHMgb2YgcGFuZS5zY3JpcHRzKSB7CiAgICAgICAgICBsaXN0LnB1c2goW3MudXVpZCwgcywgKF9hID0gcy5zZXR0aW5ncy5leGVjT3JkZXIpICE9IG51bGwgPyBfYSA6IDFdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiBhWzJdIC0gYlsyXSk7CiAgICAgIGxpc3QuZm9yRWFjaCgoeCkgPT4gewogICAgICAgIG1hcFt4WzBdXSA9IHhbMV07CiAgICAgIH0pOwogICAgICByZXR1cm4gbWFwOwogICAgfQogICAgLy8gSW5qZWN0L292ZXJyaWRlIGZ1bmN0aW9ucyBpbiB0aGUgc3RkIGxpYiBvYmplY3QKICAgIHN0ZF9pbmplY3Qoc3RkKSB7CiAgICAgIGxldCBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihzdGQpOwogICAgICBPYmplY3QuYXNzaWduKHByb3RvLCB0aGlzLnN0ZF9wbHVzKTsKICAgICAgcmV0dXJuIHN0ZDsKICAgIH0KICAgIHNlbmRfc3RhdGUoKSB7CiAgICAgIHRoaXMuc2VuZCgiZW5naW5lLXN0YXRlIiwgewogICAgICAgIHNjcmlwdHM6IE9iamVjdC5rZXlzKHRoaXMubWFwKS5sZW5ndGgsCiAgICAgICAgbGFzdF9wZXJmOiB0aGlzLnBlcmYsCiAgICAgICAgaXRlcjogdGhpcy5pdGVyLAogICAgICAgIGxhc3RfdDogdGhpcy50LAogICAgICAgIGRhdGFfc2l6ZTogdGhpcy5kYXRhX3NpemUsCiAgICAgICAgcnVubmluZzogZmFsc2UKICAgICAgfSk7CiAgICB9CiAgICBzZW5kX3VwZGF0ZSh0YXNrSWQpIHsKICAgICAgdGhpcy5zZW5kKAogICAgICAgICJvdmVybGF5LXVwZGF0ZSIsCiAgICAgICAgdGhpcy5mb3JtYXRfdXBkYXRlKCksCiAgICAgICAgdGFza0lkCiAgICAgICk7CiAgICB9CiAgICBpbml0X21hcCgpIHsKICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5tYXApIHsKICAgICAgICB0aGlzLmFkZF9zY3JpcHQodGhpcy5tYXBbaWRdKTsKICAgICAgfQogICAgfQogICAgYXN5bmMgcnVuKHNlbCkgewogICAgICB0aGlzLnNlbmQoImVuZ2luZS1zdGF0ZSIsIHsgcnVubmluZzogdHJ1ZSB9KTsKICAgICAgdmFyIHQxID0gVXRpbHMubm93KCk7CiAgICAgIHNlbCA9IHNlbCB8fCBPYmplY3Qua2V5cyh0aGlzLm1hcCk7CiAgICAgIHRoaXMucHJlX3J1bl9tb2RzKHNlbCk7CiAgICAgIGxldCBtZnMxID0gdGhpcy5tYWtlX21vZHNfaG9va3MoInByZV9zdGVwIik7CiAgICAgIGxldCBtZnMyID0gdGhpcy5tYWtlX21vZHNfaG9va3MoInBvc3Rfc3RlcCIpOwogICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIGlkIG9mIHNlbCkgewogICAgICAgICAgdGhpcy5tYXBbaWRdLmVudi5pbml0KCk7CiAgICAgICAgfQogICAgICAgIGxldCBvaGxjdiA9IHRoaXMuZGF0YS5vaGxjdi5kYXRhOwogICAgICAgIGxldCBzdGFydCA9IHRoaXMuc3RhcnQob2hsY3YpOwogICAgICAgIHRoaXMuc2hhcmVkLmV2ZW50ID0gInN0ZXAiOwogICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IG9obGN2Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoaSAlIDVlMyA9PT0gMCkKICAgICAgICAgICAgYXdhaXQgVXRpbHMucGF1c2UoMCk7CiAgICAgICAgICBpZiAodGhpcy5yZXN0YXJ0ZWQoKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgdGhpcy5pdGVyID0gaSAtIHN0YXJ0OwogICAgICAgICAgdGhpcy50ID0gb2hsY3ZbaV1bMF07CiAgICAgICAgICB0aGlzLnN0ZXAob2hsY3ZbaV0pOwogICAgICAgICAgdGhpcy5zaGFyZWQub25jbG9zZSA9IGkgIT09IG9obGN2Lmxlbmd0aCAtIDE7CiAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IG1mczEubGVuZ3RoOyBtKyspIHsKICAgICAgICAgICAgbWZzMVttXShzZWwpOwogICAgICAgICAgfQogICAgICAgICAgZm9yICh2YXIgaWQgb2Ygc2VsKQogICAgICAgICAgICB0aGlzLm1hcFtpZF0uZW52LnN0ZXAoKTsKICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgbWZzMi5sZW5ndGg7IG0rKykgewogICAgICAgICAgICBtZnMyW21dKHNlbCk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmxpbWl0KCk7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGlkIG9mIHNlbCkgewogICAgICAgICAgdGhpcy5tYXBbaWRdLmVudi5vdXRwdXQucG9zdCgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfQogICAgICB0aGlzLnBvc3RfcnVuX21vZHMoc2VsKTsKICAgICAgdGhpcy5wZXJmID0gVXRpbHMubm93KCkgLSB0MTsKICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VuZCgib3ZlcmxheS1kYXRhIiwgdGhpcy5mb3JtYXRfZGF0YSgpKTsKICAgIH0KICAgIHN0ZXAoZGF0YSwgdW5zaGlmdCA9IHRydWUpIHsKICAgICAgaWYgKHVuc2hpZnQpIHsKICAgICAgICB0aGlzLm9wZW4udW5zaGlmdChkYXRhWzFdKTsKICAgICAgICB0aGlzLmhpZ2gudW5zaGlmdChkYXRhWzJdKTsKICAgICAgICB0aGlzLmxvdy51bnNoaWZ0KGRhdGFbM10pOwogICAgICAgIHRoaXMuY2xvc2UudW5zaGlmdChkYXRhWzRdKTsKICAgICAgICB0aGlzLnZvbC51bnNoaWZ0KGRhdGFbNV0pOwogICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMudHNzKSB7CiAgICAgICAgICBpZiAodGhpcy50c3NbaWRdLl9fdGZfXykKICAgICAgICAgICAgdGhpcy50c3NbaWRdLl9fZm5fXygpOwogICAgICAgICAgZWxzZQogICAgICAgICAgICB0aGlzLnRzc1tpZF0udW5zaGlmdCh0aGlzLnRzc1tpZF0uX19mbl9fKCkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm9wZW5bMF0gPSBkYXRhWzFdOwogICAgICAgIHRoaXMuaGlnaFswXSA9IGRhdGFbMl07CiAgICAgICAgdGhpcy5sb3dbMF0gPSBkYXRhWzNdOwogICAgICAgIHRoaXMuY2xvc2VbMF0gPSBkYXRhWzRdOwogICAgICAgIHRoaXMudm9sWzBdID0gZGF0YVs1XTsKICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRzcykgewogICAgICAgICAgaWYgKHRoaXMudHNzW2lkXS5fX3RmX18pCiAgICAgICAgICAgIHRoaXMudHNzW2lkXS5fX2ZuX18oKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgdGhpcy50c3NbaWRdWzBdID0gdGhpcy50c3NbaWRdLl9fZm5fXygpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbGltaXQoKSB7CiAgICAgIHRoaXMub3Blbi5sZW5ndGggPSB0aGlzLm9wZW4uX19sZW5fXyB8fCBERUZfTElNSVQ7CiAgICAgIHRoaXMuaGlnaC5sZW5ndGggPSB0aGlzLmhpZ2guX19sZW5fXyB8fCBERUZfTElNSVQ7CiAgICAgIHRoaXMubG93Lmxlbmd0aCA9IHRoaXMubG93Ll9fbGVuX18gfHwgREVGX0xJTUlUOwogICAgICB0aGlzLmNsb3NlLmxlbmd0aCA9IHRoaXMuY2xvc2UuX19sZW5fXyB8fCBERUZfTElNSVQ7CiAgICAgIHRoaXMudm9sLmxlbmd0aCA9IHRoaXMudm9sLl9fbGVuX18gfHwgREVGX0xJTUlUOwogICAgfQogICAgc3RhcnQob2hsY3YpIHsKICAgICAgbGV0IGRlcHRoID0gdGhpcy5zZXR0LnNjcmlwdF9kZXB0aDsKICAgICAgcmV0dXJuIGRlcHRoID8gTWF0aC5tYXgob2hsY3YubGVuZ3RoIC0gZGVwdGgsIDApIDogMDsKICAgIH0KICAgIGRyYWluX3F1ZXVlcygpIHsKICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5leGVjX2FsbCgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZGVsdGFfcXVldWUubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5leGVjX3NlbCh0aGlzLmRlbHRhX3F1ZXVlLnBvcCgpKTsKICAgICAgICB0aGlzLmRlbHRhX3F1ZXVlID0gW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2hpbGUgKHRoaXMudXBkYXRlX3F1ZXVlLmxlbmd0aCkgewogICAgICAgICAgbGV0IHVwZCA9IHRoaXMudXBkYXRlX3F1ZXVlLnNoaWZ0KCk7CiAgICAgICAgICB0aGlzLnVwZGF0ZSguLi51cGQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgZm9ybWF0X2RhdGEoKSB7CiAgICAgIHJldHVybiBzZWxmLnBhbmVTdHJ1Y3QubWFwKCh4KSA9PiAoewogICAgICAgIGlkOiB4LmlkLAogICAgICAgIHV1aWQ6IHgudXVpZCwKICAgICAgICBvdmVybGF5czogdGhpcy5vdmVycmlkZV9vdmVybGF5cyh4Lm92ZXJsYXlzIHx8IFtdKQogICAgICB9KSk7CiAgICB9CiAgICAvLyBPdmVycmlkZSBvdmVybGF5IGZpZWxkcyB3aXRoICdzY3JpcHQub3ZlcmxheScKICAgIG92ZXJyaWRlX292ZXJsYXlzKG92cykgewogICAgICBmb3IgKHZhciBvdiBvZiBvdnMpIHsKICAgICAgICBsZXQgcyA9IHRoaXMubWFwW292LnByb2RdOwogICAgICAgIGlmICghcykKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIGlmIChzLm92ZXJsYXkpIHsKICAgICAgICAgIG92ID0gb3ZlcnJpZGVPdmVybGF5KG92LCBzLm92ZXJsYXkpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gb3ZzOwogICAgfQogICAgZm9ybWF0X3VwZGF0ZSgpIHsKICAgICAgbGV0IG1hcCA9IHt9OwogICAgICBmb3IgKHZhciBwYW5lIG9mIHNlbGYucGFuZVN0cnVjdCkgewogICAgICAgIGZvciAodmFyIG92IG9mIHBhbmUub3ZlcmxheXMgfHwgW10pIHsKICAgICAgICAgIG1hcFtvdi51dWlkXSA9IG92LmRhdGFbb3YuZGF0YS5sZW5ndGggLSAxXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG1hcDsKICAgIH0KICAgIHJlc3RhcnRlZCgpIHsKICAgICAgaWYgKHRoaXMuX3Jlc3RhcnQpIHsKICAgICAgICB0aGlzLl9yZXN0YXJ0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5wZXJmID0gMDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZW1vdmVfc2NyaXB0cyhpZHMpIHsKICAgICAgZm9yICh2YXIgaWQgb2YgaWRzKQogICAgICAgIGRlbGV0ZSB0aGlzLm1hcFtpZF07CiAgICAgIHRoaXMuc2VuZF9zdGF0ZSgpOwogICAgfQogICAgcHJlX3J1bl9tb2RzKHNlbCkgewogICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLm1vZHMpIHsKICAgICAgICBpZiAodGhpcy5tb2RzW2lkXS5wcmVfcnVuKSB7CiAgICAgICAgICB0aGlzLm1vZHNbaWRdLnByZV9ydW4oc2VsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHBvc3RfcnVuX21vZHMoc2VsKSB7CiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMubW9kcykgewogICAgICAgIGlmICh0aGlzLm1vZHNbaWRdLnBvc3RfcnVuKSB7CiAgICAgICAgICB0aGlzLm1vZHNbaWRdLnBvc3RfcnVuKHNlbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBtYWtlX21vZHNfaG9va3MobmFtZSkgewogICAgICBsZXQgYXJyID0gW107CiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMubW9kcykgewogICAgICAgIGlmICh0aGlzLm1vZHNbaWRdW25hbWVdKSB7CiAgICAgICAgICBhcnIucHVzaCh0aGlzLm1vZHNbaWRdW25hbWVdLmJpbmQodGhpcy5tb2RzW2lkXSkpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gYXJyOwogICAgfQogICAgLy8gQ2FsY3VsYXRlIGRhdGEgc2l6ZQogICAgcmVjYWxjX3NpemUoKSB7CiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgdmFyIHN6ID0gc2l6ZV9vZl9kc3ModGhpcy5kYXRhKSAvICgxMDI0ICogMTAyNCk7CiAgICAgICAgbGV0IGxpbSA9IHRoaXMuc2V0dC53d19yYW1fbGltaXQ7CiAgICAgICAgaWYgKGxpbSAmJiBzeiA+IGxpbSkgewogICAgICAgICAgdGhpcy5saW1pdF9zaXplKCk7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICB0aGlzLmRhdGFfc2l6ZSA9ICtzei50b0ZpeGVkKDIpOwogICAgICB0aGlzLnNlbmRfc3RhdGUoKTsKICAgIH0KICAgIC8vIExpbWl0IGRhdGEgc2l6ZSBieSB0aHJvd2luZyBvdXQgdGhlIGxlYXN0CiAgICAvLyBhY3RpdmUgZGF0YXNldHMgKG1lYXN1cmVkIGJ5ICdsYXN0X3VwZCcpCiAgICBsaW1pdF9zaXplKCkgewogICAgICBsZXQgZHNzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmRhdGEpLm1hcCgoeCkgPT4gKHsKICAgICAgICBpZDogeC5pZCwKICAgICAgICB0OiB4Lmxhc3RfdXBkCiAgICAgIH0pKTsKICAgICAgZHNzLnNvcnQoKGEsIGIpID0+IGEudCAtIGIudCk7CiAgICAgIGlmIChkc3MubGVuZ3RoKSB7CiAgICAgICAgZGVsZXRlIHRoaXMuZGF0YVtkc3NbMF0uaWRdOwogICAgICB9CiAgICB9CiAgfQogIHZhciBzZSA9IG5ldyBTY3JpcHRFbmdpbmUoKTsKICBjbGFzcyBEYXRhc2V0V1cgewogICAgY29uc3RydWN0b3IoaWQsIGRhdGEpIHsKICAgICAgdGhpcy5sYXN0X3VwZCA9IG5vdygpOwogICAgICB0aGlzLmlkID0gaWQ7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgICBpZiAoaWQgPT09ICJvaGxjdiIpCiAgICAgICAgICB0aGlzLnR5cGUgPSAiT0hMQ1YiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGF0YSA9IGRhdGEuZGF0YTsKICAgICAgICB0aGlzLnR5cGUgPSBkYXRhLnR5cGU7CiAgICAgIH0KICAgIH0KICAgIC8vIFVwZGF0ZSBmcm9tICd1cGRhdGUtZGF0YScgZXZlbnQKICAgIC8vIFRPRE86IGRzIHNpemUgbGltaXQgKGluIE1CIC8gZGF0YSBwb2ludHMpCiAgICBzdGF0aWMgdXBkYXRlX2FsbChzZTIsIGRhdGEpIHsKICAgICAgZm9yICh2YXIgayBpbiBkYXRhKSB7CiAgICAgICAgaWYgKGsgPT09ICJvaGxjdiIpCiAgICAgICAgICBjb250aW51ZTsKICAgICAgICBsZXQgaWQgPSBrLnNwbGl0KCIuIilbMV0gfHwgazsKICAgICAgICBpZiAoIXNlMi5kYXRhW2lkXSkKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIGxldCBhcnIgPSBzZTIuZGF0YVtpZF0uZGF0YTsKICAgICAgICBsZXQgaU4gPSBhcnIubGVuZ3RoIC0gMTsKICAgICAgICBsZXQgbGFzdCA9IGFycltpTl07CiAgICAgICAgZm9yICh2YXIgZHAgb2YgZGF0YVtrXSkgewogICAgICAgICAgaWYgKCFsYXN0IHx8IGRwWzBdID4gbGFzdFswXSkgewogICAgICAgICAgICBhcnIucHVzaChkcCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNlMi5kYXRhW2lkXS5sYXN0X3VwZCA9IG5vdygpOwogICAgICB9CiAgICB9CiAgICBtZXJnZShkYXRhKSB7CiAgICAgIGxldCBsZW4gPSB0aGlzLmRhdGEubGVuZ3RoOwogICAgICBpZiAoIWxlbikgewogICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxldCB0MCA9IHRoaXMuZGF0YVswXVswXTsKICAgICAgbGV0IHROID0gdGhpcy5kYXRhW2xlbiAtIDFdWzBdOwogICAgICBsZXQgbCA9IGRhdGEuZmlsdGVyKCh4KSA9PiB4WzBdIDwgdDApOwogICAgICBsZXQgciA9IGRhdGEuZmlsdGVyKCh4KSA9PiB4WzBdID4gdE4pOwogICAgICB0aGlzLmRhdGEgPSBsLmNvbmNhdCh0aGlzLmRhdGEsIHIpOwogICAgfQogICAgLy8gT24gZGF0YXNldCBvcGVyYXRpb24KICAgIG9wKHNlMiwgb3ApIHsKICAgICAgdGhpcy5sYXN0X3VwZCA9IG5vdygpOwogICAgICBzd2l0Y2ggKG9wLnR5cGUpIHsKICAgICAgICBjYXNlICJzZXQiOgogICAgICAgICAgdGhpcy5kYXRhID0gb3AuZGF0YTsKICAgICAgICAgIHNlMi5yZWNhbGNfc2l6ZSgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiZGVsIjoKICAgICAgICAgIGRlbGV0ZSBzZTIuZGF0YVt0aGlzLmlkXTsKICAgICAgICAgIHNlMi5yZWNhbGNfc2l6ZSgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAibXJnIjoKICAgICAgICAgIHRoaXMubWVyZ2Uob3AuZGF0YSk7CiAgICAgICAgICBzZTIucmVjYWxjX3NpemUoKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfQogIHNlbGYuc2NyaXB0TGliID0ge307CiAgc2VsZi5wYW5lU3RydWN0ID0ge307CiAgc2VsZi5vbm1lc3NhZ2UgPSBhc3luYyAoZSkgPT4gewogICAgc3dpdGNoIChlLmRhdGEudHlwZSkgewogICAgICBjYXNlICJ1cGxvYWQtc2NyaXB0cyI6CiAgICAgICAgc2VsZi5zY3JpcHRMaWIgPSBlLmRhdGEuZGF0YTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAic2VuZC1tZXRhLWluZm8iOgogICAgICAgIHNlLnRmID0gdGZfZnJvbV9zdHIoZS5kYXRhLmRhdGEudGYpOwogICAgICAgIHNlLnJhbmdlID0gZS5kYXRhLmRhdGEucmFuZ2U7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgInVwbG9hZC1kYXRhIjoKICAgICAgICBzZS50ZiA9IHRmX2Zyb21fc3RyKGUuZGF0YS5kYXRhLm1ldGEudGYpOwogICAgICAgIHNlLnJhbmdlID0gZS5kYXRhLmRhdGEubWV0YS5yYW5nZTsKICAgICAgICBmb3IgKHZhciBpZCBpbiBlLmRhdGEuZGF0YS5kc3MpIHsKICAgICAgICAgIGxldCBkYXRhID0gZS5kYXRhLmRhdGEuZHNzW2lkXTsKICAgICAgICAgIHNlLmRhdGFbaWRdID0gbmV3IERhdGFzZXRXVyhpZCwgZGF0YSk7CiAgICAgICAgfQogICAgICAgIHNlLnJlY2FsY19zaXplKCk7CiAgICAgICAgc2Uuc2VuZCgiZGF0YS11cGxvYWRlZCIsIHt9LCBlLmRhdGEuaWQpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJleGVjLWFsbC1zY3JpcHRzIjoKICAgICAgICBzZWxmLnBhbmVTdHJ1Y3QgPSBlLmRhdGEuZGF0YTsKICAgICAgICBzZS5leGVjX2FsbCgpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJ1cGRhdGUtZGF0YSI6CiAgICAgICAgRGF0YXNldFdXLnVwZGF0ZV9hbGwoc2UsIGUuZGF0YS5kYXRhKTsKICAgICAgICBpZiAoZS5kYXRhLmRhdGEub2hsY3YpIHsKICAgICAgICAgIHNlLnVwZGF0ZShlLmRhdGEuZGF0YS5vaGxjdiwgZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgfQogIH07CiAgc2Uuc2VuZCA9ICh0eXBlLCBkYXRhLCBpZCkgPT4gewogICAgaWQgPSBpZCAhPSBudWxsID8gaWQgOiBVdGlscy51dWlkKCk7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAiZGF0YS11cGxvYWRlZCI6CiAgICAgIGNhc2UgIm92ZXJsYXktZGF0YSI6CiAgICAgIGNhc2UgIm92ZXJsYXktdXBkYXRlIjoKICAgICAgY2FzZSAiZW5naW5lLXN0YXRlIjoKICAgICAgY2FzZSAibW9kaWZ5LW92ZXJsYXkiOgogICAgICBjYXNlICJtb2R1bGUtZGF0YSI6CiAgICAgIGNhc2UgInNjcmlwdC1zaWduYWwiOgogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgdHlwZSwKICAgICAgICAgIGRhdGEsCiAgICAgICAgICBpZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgfQogIH07Cn0pKCk7Cg==",TN=typeof window<"u"&&window.Blob&&new Blob([atob(xZ)],{type:"text/javascript;charset=utf-8"});function cQ(){let e;try{if(e=TN&&(window.URL||window.webkitURL).createObjectURL(TN),!e)throw"";return new Worker(e)}catch{return new Worker("data:application/javascript;base64,"+xZ)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}class uQ{constructor(t,r){this.chart=r,this.tasks={},this.onevent=()=>{},this.start()}start(){this.worker&&this.worker.terminate(),this.worker=new cQ,this.worker.onmessage=t=>this.onmessage(t)}startSocket(){}send(t,r){if(r){let n=r.map(i=>t.data[i]);this.worker.postMessage(t,n)}else this.worker.postMessage(t)}sendToNode(t,r){}onmessage(t){t.data.id in this.tasks?(this.tasks[t.data.id](t.data.data),delete this.tasks[t.data.id]):this.onevent(t)}async exec(t,r,n){return new Promise((i,o)=>{let s=le.uuid();this.send({type:t,id:s,data:r},n),this.tasks[s]=a=>{i(a)}})}just(t,r,n){let i=le.uuid();this.send({type:t,id:i,data:r},n)}async relay(t,r=!1){return new Promise((n,i)=>{this.send(t,t.txKeys),r||(this.tasks[t.id]=o=>{n(o)})})}stop(){this.worker&&this.worker.terminate()}}let LC={};function dQ(e,t){return LC[e]||(LC[e]=new uQ(e,t)),LC[e]}const AZ={instance:dQ},gQ=Object.assign({"../scripts/AppleArea.navy":c8,"../scripts/Area.navy":d8,"../scripts/ArrowTrades.navy":f8,"../scripts/Band.navy":p8,"../scripts/Candles.navy":I8,"../scripts/CandlesPlus.navy":C8,"../scripts/Cloud.navy":b8,"../scripts/Histogram.navy":A8,"../scripts/PriceLabels.navy":S8,"../scripts/Range.navy":B8,"../scripts/Sparse.navy":j8,"../scripts/Spline.navy":E8,"../scripts/Splines.navy":O8,"../scripts/SuperBands.navy":P8,"../scripts/Trades.navy":M8,"../scripts/Volume.navy":H8,"../scripts/VolumeDelta.navy":W8}),fQ=Object.assign({"../scripts/tools/RangeTool.navy":$8}),hQ=Object.assign({"../scripts/indicators/ALMA.navy":F8,"../scripts/indicators/ATR.navy":V8,"../scripts/indicators/ATRp.navy":Y8,"../scripts/indicators/BB.navy":J8,"../scripts/indicators/BBW.navy":q8,"../scripts/indicators/CCI.navy":t6,"../scripts/indicators/CMO.navy":n6,"../scripts/indicators/COG.navy":o6,"../scripts/indicators/DMI.navy":a6,"../scripts/indicators/EMA.navy":c6,"../scripts/indicators/HMA.navy":d6,"../scripts/indicators/Ichimoku.navy":f6,"../scripts/indicators/KC.navy":p6,"../scripts/indicators/KCW.navy":I6,"../scripts/indicators/MACD.navy":C6,"../scripts/indicators/MFI.navy":b6,"../scripts/indicators/MOM.navy":A6,"../scripts/indicators/ROC.navy":S6,"../scripts/indicators/RSI.navy":B6,"../scripts/indicators/Ribbon.navy":j6,"../scripts/indicators/SAR.navy":E6,"../scripts/indicators/SMA.navy":O6,"../scripts/indicators/SWMA.navy":P6,"../scripts/indicators/Stoch.navy":M6,"../scripts/indicators/TSI.navy":H6,"../scripts/indicators/VWMA.navy":W6,"../scripts/indicators/WilliamsR.navy":$6});class pQ{constructor(t){this.ww=AZ.instance(t)}async init(t){this.srcLib=Object.values(gQ).map(r=>r.default),this.srcLib.push(...Object.values(fQ).map(r=>r.default)),this.srcLib.push(...Object.values(hQ).map(r=>r.default)),this.srcLib.push(...t),this.prefabs={},this.iScripts={},this.parse(),this.ww.exec("upload-scripts",{prefabs:Object.keys(this.prefabs).reduce((r,n)=>(r[n]={name:this.prefabs[n].name,author:this.prefabs[n].author,version:this.prefabs[n].version},r),{}),iScripts:this.iScripts})}parse(){this.prefabs={};for(var t of this.srcLib){let i=new lQ(t);for(var r of i.overlays)this.prefabs[r.tagProps.name]={name:r.tagProps.name,author:r.tagProps.author,version:r.tagProps.version,ctx:r.tagProps.ctx||"Canvas",make:r.prefab,static:r.static};for(var n of i.indicators)this.iScripts[n.tagProps.name]={name:n.tagProps.name,author:n.tagProps.author,version:n.tagProps.version,code:{init:n.init,update:n.update,post:n.post}}}}}let WC={};function mQ(e){return WC[e]||(WC[e]=new pQ(e)),WC[e]}const Rw={instance:mQ},{$SCALES:IQ}=Zr,yQ=Number.MAX_SAFE_INTEGER;function CQ(e,t,r){let{hub:n,props:i,settings:o,height:s}=r,{ctx:a}=i,c=is.instance(i.id),u=Rw.instance(i.id).prefabs,d={},g=(c.yTransforms[t.gridId]||[])[e],f=t.gridId,m=t.ovs,v=t.log;const p=i.config.AUTO_PRE_SAMPLE;function I(){if(Math.max(...m.map(G=>G.dataSubset.length))<2){d.prec=0,d.sb=i.config.SBMIN;return}if(t.precision!==void 0)d.prec=t.precision;else{d.prec=0;for(var N of m){if(N.settings.precision!==void 0)var B=N.settings.precision;else var B=y(N);B>d.prec&&(d.prec=B)}}if(!isFinite(d.$hi)||!isFinite(d.$lo)){d.sb=i.config.SBMIN;return}let E=[];E.push(d.$hi.toFixed(d.prec).length),E.push(d.$lo.toFixed(d.prec).length);let M="0".repeat(Math.max(...E))+"    ";d.sb=a.measureText(M).width,d.sb=Math.max(Math.floor(d.sb),i.config.SBMIN),d.sb=Math.min(d.sb,i.config.SBMAX)}function h(){var P=-1/0,N=1/0;for(var B of m){if(B.settings.display===!1)continue;let X=(c.yRangeFns[f]||[])[B.id],V=u[B.type].static.yRange;V&&(X={exec:V,preCalc:V.length>1});let z=B.dataSubset;var E=-1/0,M=1/0;if(!X||X&&X.preCalc)for(var G=0;G<z.length;G++)for(var T=1;T<z[G].length;T++){let ee=z[G][T];ee>E&&(E=ee),ee<M&&(M=ee)}if(X){var L=X.exec(z,E,M);if(L)var[E,M,W]=L;else var[E,M]=[P,N]}E>P&&(P=E),M<N&&(N=M)}g&&!g.auto&&g.range?(d.$hi=g.range[0],d.$lo=g.range[1]):(v?(d.$hi=P,d.$lo=N,xN.expand(d,s)):(W=W===!1?0:1,d.$hi=P+(P-N)*i.config.EXPAND*W,d.$lo=N-(P-N)*i.config.EXPAND*W),d.$hi===d.$lo&&(v?xN.expand(d,s):(d.$hi*=1.05,d.$lo*=.95)))}function y(P){let N=0,B=[],E=c.getPreSampler(f,P.id);E=E||u[P.type].static.preSampler,E=E||le.defaultPreSampler;for(var M=0;M<p;M++){let T=Math.floor(Math.random()*P.dataSubset.length),L=E(P.dataSubset[T]);typeof L=="number"?B.push(L):B=B.concat(L)}B.forEach(T=>{let L=le.numberLR(T)[1];L>N&&(N=L)});let G=c.getAutoPrec(f,P.id);return G===void 0||N>G?(c.setAutoPrec(f,P.id,N),N):G}function C(){v?(d.A=-s/(yt.log(d.$hi)-yt.log(d.$lo)),d.B=-yt.log(d.$hi)*d.A):(d.A=-s/(d.$hi-d.$lo),d.B=-d.$hi*d.A)}function x(){let P=d.$hi-d.$lo,N=P*(i.config.GRIDY/s),B=parseInt(P.toExponential().split("e")[1]),E=Math.pow(10,B),M=IQ.map(G=>G*E);return le.strip(le.nearestA(N,M)[1])}function A(){let P=w(),N=S();return Math.max(P,N)}function w(){let P=Math.min(d.B,s);if(P<i.config.GRIDY)return 1;let N=P/i.config.GRIDY,B=d.$hi;if(d.$lo>0)var E=d.$hi/d.$lo;else E=d.$hi/1;return B*(i.config.GRIDY/P),parseInt(B.toExponential().split("e")[1]),Math.pow(E,1/N)}function S(){let P=Math.min(s-d.B,s);if(P<i.config.GRIDY)return 1;let N=P/i.config.GRIDY,B=Math.abs(d.$lo);if(d.$hi<0&&d.$lo<0)var E=Math.abs(d.$lo/d.$hi);else E=Math.abs(d.$lo)/1;return B*(i.config.GRIDY/P),parseInt(B.toExponential().split("e")[1]),Math.pow(E,1/N)}function k(){let P=Math.pow(10,-d.prec);d.$step=Math.max(P,x()),d.ys=[];let N=d.$lo-d.$lo%d.$step;for(var B=N;B<=d.$hi;B+=d.$step){let E=Math.floor(B*d.A+d.B);E>s||d.ys.push([E,le.strip(B)])}}function R(){d.$_mult=A(),d.ys=[];let P=(d.$hi+d.$lo)/2,N=j(P),B=_(-P),E=-1/0,M=s/i.config.GRIDY,G=1+(d.$_mult-1)/2;for(var T=N;T>0;T/=d.$_mult){T=O(T,G);let L=Math.floor(yt.log(T)*d.A+d.B);if(d.ys.push([L,le.strip(T)]),L>s||L-E<i.config.GRIDY*.7||d.ys.length>M+1)break;E=L}E=1/0;for(var T=B;T<0;T/=d.$_mult){T=O(T,G);let W=Math.floor(yt.log(T)*d.A+d.B);if(E-W<i.config.GRIDY*.7||(d.ys.push([W,le.strip(T)]),W<0)||d.ys.length>M*3+1)break;E=W}}function j(P){let N=s/i.config.GRIDY;for(var B=1/0,E=P,M=0;B>0;)if(B=Math.floor(yt.log(E)*d.A+d.B),E*=d.$_mult,M++>N*3)return 0;return E}function _(P){let N=s/i.config.GRIDY;for(var B=-1/0,E=P,M=0;B<s&&(B=Math.floor(yt.log(E)*d.A+d.B),E*=d.$_mult,!(M++>N*3)););return E}function O(P,N){let B=Math.sign(P);if(P=Math.abs(P),P>10){for(var E=10;E<yQ;E*=10){let G=Math.floor(P/E)*E;if(P/G>N)break}return E/=10,B*Math.floor(P/E)*E}else if(P<1){for(var M=10;M>=1;M--){let G=le.round(P,M);if(P/G>N)break}return B*le.round(P,M+1)}else return B*Math.floor(P)}return h(),I(),C(),v?R():k(),d.scaleSpecs={id:e,log:t.log,ovIdxs:t.ovIdxs},d.height=s,d}const{TIMESCALES:vQ,WEEK:bQ,MONTH:EN,YEAR:RN,HOUR:ON,DAY:DC}=Zr;function GN(e,t,r=null){let{hub:n,meta:i,props:o,settings:s,height:a}=t,{interval:c,timeFrame:u,range:d,ctx:g,timezone:f}=o,m=!!s.logScale,v=n.panes()[e].overlays,p=n.mainOv.dataSubset,I=n.mainOv.dataView,h={indexBased:n.indexBased};function y(){let M=C();for(var G=0;G<v.length;G++){let T=v[G],L=T.settings.scale||"A";M[L]||(M[L]=x(L)),M[L].ovs.push(T),M[L].ovIdxs.push(G)}return Object.values(M)}function C(){let M={A:x("A")};for(var G in s.scales||{}){let T=s.scales[G];M[G]=x(G,T)}return M}function x(M,G={}){var T;return{id:M,gridId:e,ovs:[],ovIdxs:[],log:(T=G.log)!=null?T:m,precision:G.precision}}function A(){if(p.length<2)return;let M=d[1]-d[0];h.spacex=o.width-h.sbMax[0]-h.sbMax[1];let G=M/c;h.pxStep=h.spacex/G;let T=h.spacex/M;h.startx=(p[0][0]-d[0])*T}function w(){let M=h.indexBased?u:1,T=(d[1]-d[0])*M*(o.config.GRIDX/o.width),L=vQ;return le.nearestA(T,L)[1]}function S(){if(r)h.tStep=r.tStep,h.pxStep=r.pxStep,h.startx=r.startx,h.spacex=r.spacex,h.xs=r.xs;else{A(),h.tStep=w(),h.xs=[];const T=d[1]-d[0],L=h.spacex/T;let W=le.realTimeRange(p);if(h.indexBased||(W=T),h.indexBased&&d[1]-I.src.length>0){let ee=1-(d[1]-I.src.length)/T;W/=ee}let X=W/DC>10,V=W/EN>10,z=I.i1;V?z=R(I.i1):X&&(z=k(I.i1));for(var M=z,G=I.i2;M<=G;M++){let ee=I.src[M],D=I.src[M-1]||[],F=h.xs[h.xs.length-1]||[0,[]],Z=h.indexBased?M:ee[0],$=Math.floor((Z-d[0])*L);j(D,ee,$);let J=h.xs[h.xs.length-1]||[0,[]];F!==J&&J[1]-F[1]<h.tStep*.8&&(J[2]*J[3]<=F[2]*F[3]?h.xs.pop():h.xs.splice(h.xs.length-2,1))}!h.indexBased&&u<bQ&&L>0&&(_(T,L),O(T,L))}}function k(M){let G=le.getMonth(I.src[M][0]);for(var T=M-1;T>=0;T--)if(le.getMonth(I.src[T][0])!==G)return T;return 0}function R(M){let G=le.getYear(I.src[M][0]);for(var T=M-1;T>=0;T--)if(le.getYear(I.src[T][0])!==G)return T;return 0}function j(M,G,T,L){let W=M[0],X=G[0];if(u<DC&&(W+=f*ON,X+=f*ON),(M[0]||u===RN)&&le.getYear(X)!==le.getYear(W))h.xs.push([T,X,RN,1]);else if(M[0]&&le.getMonth(X)!==le.getMonth(W))h.xs.push([T,X,EN,1]);else if(le.dayStart(X)===X){let V=le.getDay(X)===13?0:.9;h.xs.push([T,X,DC,V])}else X%h.tStep===0&&h.xs.push([T,X,u,1])}function _(M,G){if(!h.xs.length||!isFinite(G))return;let T=h.xs[0][1];for(;;){T-=h.tStep;let L=Math.floor((T-d[0])*G);if(L<0)break;T%u===0&&h.xs.unshift([L,T,u,1])}}function O(M,G){if(!h.xs.length||!isFinite(G))return;let T=h.xs[h.xs.length-1][1];for(;;){T+=h.tStep;let L=Math.floor((T-d[0])*G);if(L>h.spacex)break;T%c===0&&h.xs.push([L,T,c,1])}}function P(){h.width=o.width-h.sbMax[0]-h.sbMax[1],h.height=a}function N(){let M={};for(var G of y()){let T=new CQ(G.id,G,t);M[G.id]=T}h.scales=M}function B(){h.scales[s.scaleIndex]||(s.scaleIndex="A"),h.scaleIndex=s.scaleIndex,s.scaleTemplate||(s.scaleTemplate=[[],Object.keys(h.scales)]);let M=s.scaleTemplate;(!M[0]||!M[1])&&console.error("Define scaleTemplate as [[],[]]"),s.scaleSideIdxs||(s.scaleSideIdxs=[]);let G=s.scaleSideIdxs;le.autoScaleSideId(0,M,G),le.autoScaleSideId(1,M,G),h.sb=[];let T=M[0].includes(G[0])?G[0]:null;h.sb.push(h.scales[T]?h.scales[T].sb:0);let L=M[1].includes(G[1])?G[1]:null;h.sb.push(h.scales[L]?h.scales[L].sb:0)}function E(){let M=h.sb;Object.assign(h,h.scales[h.scaleIndex]),h.sb=M,h.ys=h.ys||[]}return N(),B(),{create:()=>(S(),P(),r&&(h.mainGrid=r),h.settings=s,h.main=!r,h.id=e,E(),h.ohlc=i.ohlc.bind(i),mZ(h,d)),getLayout:()=>h,setMaxSidebar:M=>h.sbMax=M,getSidebar:()=>h.sb,id:()=>e}}function PN(e,t,r){let n=t.chart,i=t.offchart,o=t.panes().filter(h=>h.settings);if(!n)return{};function s(){const h=e.height-e.config.BOTBAR;if(o.find(S=>S.settings.height))return a(h);const y=i.length,C=2*Math.sqrt(y)/7/(y||1),x=Math.floor(h*C),A=h-x*y;let w=Array(y+1).fill(x);return w[t.mainPaneId]=A,w}function a(h){let y=t.panes().map(A=>{var w;return(w=A.settings.height)!=null?w:1}),C=y.reduce((A,w)=>A+w,0);y=y.map(A=>Math.floor(A/C*h)),C=y.reduce((A,w)=>A+w,0);for(var x=0;x<h-C;x++)y[x%y.length]++;return y}const c=s();let u=h=>({hub:t,meta:r,props:e,settings:o[h].settings,height:c[h]}),d=new GN(t.mainPaneId,u(t.mainPaneId)),g=[d];for(var[f,m]of o.entries())f!==t.mainPaneId&&g.push(new GN(f,u(f),d.getLayout()));let v=[Math.max(...g.map(h=>h.getSidebar()[0])),Math.max(...g.map(h=>h.getSidebar()[1]))],p=[],I=0;for(var f=0;f<g.length;f++){let y=g[f].id();g[f].setMaxSidebar(v),p[y]=g[f].create()}for(var f=0;f<p.length;f++)p[f].offset=I,I+=p[f].height;return{grids:p,main:p.find(h=>h.main),indexBased:t.indexBased,botbar:{width:e.width,height:e.config.BOTBAR,offset:I,xs:p[0]?p[0].xs:[]}}}function xQ(e){let r=document.createElement("canvas").getContext("2d");return r.font=e.config.FONT,r}class AQ{constructor(t,r,n,i){this.ctx=n,this.core=t,this.style=i.src[6]||r,this.draw(i)}draw(t){const r=t.src[4]>=t.src[1],n=r?this.style.colorCandleUp:this.style.colorCandleDw,i=r?this.style.colorWickUp:this.style.colorWickDw;let o=Math.max(t.w,1),s=t.x-1;this.ctx.lineWidth=1,this.ctx.strokeStyle=i,this.ctx.beginPath(),this.ctx.moveTo(s,Math.floor(t.h)),this.ctx.lineTo(s,Math.floor(t.l)),this.ctx.stroke(),this.ctx.lineWidth=o,this.ctx.strokeStyle=n,this.ctx.beginPath(),this.ctx.moveTo(s,Math.floor(Math.min(t.o,t.c))),this.ctx.lineTo(s,Math.floor(Math.max(t.o,t.c))+(t.o===t.c?1:0)),this.ctx.stroke()}}function wQ(e,t){let r=t.x-1;e.moveTo(r,Math.floor(Math.min(t.o-1,t.c-1))),e.lineTo(r,Math.floor(Math.max(t.o,t.c)))}function SQ(e,t){let r=t.x-1;e.moveTo(r,Math.floor(t.h)),e.lineTo(r,Math.floor(t.l))}const kQ=Zr.HPX;function BQ(e,t,r){let n=r.height,i=Math.max(1,t.x2-t.x1+kQ),o=t.h,s=(t.x2+t.x1)*.5;e.lineWidth=i,e.moveTo(s,n-o),e.lineTo(s,n)}const NQ=Zr.HPX;class jQ{constructor(t,r,n,i){this.ctx=n,this.style=i.src[6]||r,this.layout=t.layout,this.draw(i)}draw(t){let r=this.layout.height,n=t.x2-t.x1,i=Math.floor(t.h);this.ctx.fillStyle=t.green?this.style.colorVolUp:this.style.colorVolDw,this.ctx.fillRect(Math.floor(t.x1),Math.floor(r-i+NQ),Math.floor(n),Math.floor(i+1))}}const TQ=Zr.HPX;function EQ(e,t=!0,r=!0,n=5,i,o){let s=e.props.config,a=e.props.interval,c=e.data,u=e.layout.ti2x,d=e.layout,g=e.view,f=d.scaleSpecs.log,m=[],v=[],p=[],I=[],h=[],y=[];if(r)var C=o??s.VOLSCALE,x=RQ(e.dataSubset,n),A=C*d.height/x;var w,S,k,R=void 0;let{A:j,B:_,pxStep:O}=d,P=O*s.CANDLEW,N=O>5?1:0;for(var B=g.i1,E=g.i2;B<=E;B++){let M=c[B],G=i?M[i]>0:M[4]>=M[1];if(k=u(M[0],B)+1,c[B-1]&&M[0]-c[B-1][0]>a&&(R=null),t){let T=f?{x:k,w:P,o:Math.floor(yt.log(M[1])*j+_),h:Math.floor(yt.log(M[2])*j+_),l:Math.floor(yt.log(M[3])*j+_),c:Math.floor(yt.log(M[4])*j+_),green:G,src:M}:{x:k,w:P,o:Math.floor(M[1]*j+_),h:Math.floor(M[2]*j+_),l:Math.floor(M[3]*j+_),c:Math.floor(M[4]*j+_),green:G,src:M};G?(m.push(T),p.push(T)):(v.push(T),I.push(T))}if(r){w=R||Math.floor(k-O*.5),S=Math.floor(k+O*.5)+TQ;let T={x1:w,x2:S,h:M[n]*A,green:G,src:M};G?h.push(T):y.push(T)}R=S+N}return{upBodies:m,upWicks:p,dwBodies:v,dwWicks:I,upVolbars:h,dwVolbars:y,maxVolume:x,volScale:A}}function RQ(e,t){let r=0;for(var n=0;n<e.length;n++){let i=e[n][t];i>r&&(r=i)}return r}function wZ(e,t,r,n,i){let o=0,s=[],a=0,c=1/i,u=Math.max(r-i,0);for(var d=u;d<=n;d++)o+=e[d][t],a++,a>i&&(o-=e[d-i][t],a--),a===i&&s.push([e[d][0],o*c]);return s}function OQ(e,t=[]){return t[4]>=t[1]?e.colorBodyUp:e.colorBodyDw}function GQ(e,t){let r=e.split("px");return t+"px"+r[1]}function PQ(e,t,r,n,i=5){let o=t.view.i1,s=t.view.i2,a=r.avgVolumeSMA,c=wZ(t.data,i,o,s,a),u=t.layout;n.maxVolume;let d=n.volScale,g=u.height;if(t.props.config.VOLSCALE*.5*g,e.lineJoin="round",e.lineWidth=.75,e.strokeStyle=r.colorAvgVol,e.beginPath(),t.layout.indexBased)return;let f=t.data.length-c.length;for(var m=0,v=c.length;m<v;m++){let p=u.ti2x(c[m][0],m+f),I=g-c[m][1]*d;e.lineTo(p,I)}e.stroke()}function _Q(e,t,r,n,i,o,s=!0,a){if(typeof o>"u"&&(o=5),typeof o=="number")o={tl:o,tr:o,br:o,bl:o};else{var c={tl:0,tr:0,br:0,bl:0};for(var u in c)o[u]=o[u]||c[u]}e.beginPath(),e.moveTo(t+o.tl,r),e.lineTo(t+n-o.tr,r),e.quadraticCurveTo(t+n,r,t+n,r+o.tr),e.lineTo(t+n,r+i-o.br),e.quadraticCurveTo(t+n,r+i,t+n-o.br,r+i),e.lineTo(t+o.bl,r+i),e.quadraticCurveTo(t,r+i,t,r+i-o.bl),e.lineTo(t,r+o.tl),e.quadraticCurveTo(t,r,t+o.tl,r),e.closePath(),s&&e.fill(),a&&e.stroke()}function MQ(e,t,r,n,i,o,s=!0){const c=n-t,u=i-r,d=Math.atan2(u,c);e.beginPath(),e.moveTo(t,r),e.lineTo(n,i),s&&(e.moveTo(n,i),e.lineTo(n-7*Math.cos(d-Math.PI/5),i-7*Math.sin(d-Math.PI/5)),e.moveTo(n,i),e.lineTo(n-7*Math.cos(d+Math.PI/5),i-7*Math.sin(d+Math.PI/5))),e.strokeStyle=o,e.lineWidth=1,e.stroke()}const ZQ=le.formatCash;class HQ{constructor(t,r,n,i){let o=ns.instance(i.id),s=is.instance(i.id),a=Er.instance(i.id),c=Ew.instance(i.id);this.ovSrc=r,this.overlay=null,this.id=t,this.handlers={},this.$core={hub:o,meta:s,scan:c},this.update(r,n,i),this.$props=r.props,this.$events=a,this.lib={Candle:AQ,Volbar:jQ,layoutCnv:EQ,formatCash:ZQ,candleBody:wQ,candleWick:SQ,volumeBar:BQ,fastSma:wZ,avgVolume:PQ,candleColor:OQ,roundRect:_Q,rescaleFont:GQ,drawArrow:MQ,Utils:le}}prop(t,r={}){t in this.$props||(this.$props[t]=r.def)}update(t,r,n){if(!r)return;let i=this.$core;i.layout=this.buildLayout(r,n.range,t),i.dataSubset=t.dataSubset,i.data=t.data,i.view=t.dataView,i.id=t.id,i.paneId=i.layout.id,i.uuid=t.uuid,i.range=n.range,i.colors=n.colors,i.cursor=n.cursor,i.src=t,i.props=n,i.indexOffset=t.indexOffset}buildLayout(t,r,n){let i={};this.scaleId=this.getScaleId(t);let o=t.scales[this.scaleId];return mZ(Object.assign(i,t,o),r,n)}getScaleId(t){let r=t.scales;for(var n in r)if(r[n].scaleSpecs.ovIdxs.includes(this.id))return n}watchProp(t,r){this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(r);let n=this.$props[t];delete this.$props[t],Object.defineProperty(this.$props,t,{get:()=>n,set:i=>{let o=n;n=i;for(let s of this.handlers[t])s(i,o)},enumerable:!0,configurable:!0})}destroy(){for(let t in this.handlers){let r=this.$props[t];delete this.$props[t],this.$props[t]=r}this.handlers={}}}let xI=class{constructor(t,r,n){this.id=t,this.nvId=n,this.name=r,this.zIndex=0,this.overlay=null,this.ovSrc=null,this.env=null,this.ctxType=null,this.display=!0,this.opacity=void 0}update(){var t;this.ovSrc&&(this.display=(t=this.ovSrc.settings.display)!=null?t:!0)}};class LQ{constructor(t){this.t0=this.t=le.now(),this.id=setInterval(()=>{le.now()-this.t>100||(le.now()-this.t0>1200&&this.stop(),this.id&&t(this),this.t=le.now())},16)}stop(){clearInterval(this.id),this.id=null}}class WQ{async setup(t){this.MIN_ZOOM=t.props.config.MIN_ZOOM,this.MAX_ZOOM=t.props.config.MAX_ZOOM,le.isMobile&&(this.MIN_ZOOM*=.5),this.canvas=t.canvas,this.ctx=t.ctx,this.props=t.props,this.layout=t.layout,this.rrId=t.rrUpdId,this.gridUpdId=t.gridUpdId,this.gridId=t.id,this.cursor={},this.oldMeta={},this.range=this.props.range,this.interval=this.props.interval,this.offsetX=0,this.offsetY=0,this.deltas=0,this.wmode=this.props.config.SCROLL_WHEEL,this.hub=ns.instance(this.props.id),this.meta=is.instance(this.props.id),this.events=Er.instance(this.props.id),await this.listeners(),this.mouseEvents("addEventListener")}mouseEvents(t){["mousemove","mouseout","mouseup","mousedown","click"].forEach(r=>{t==="addEventListener"&&(this["_"+r]=this[r].bind(this)),this.canvas[t](r,this["_"+r])})}async listeners(){const t=await $t(()=>import("./hamster-e7735821-BXp71Zm1.js"),[]).then(s=>s.h),r=await $t(()=>import("./hammer-3390a618-_z7O2djB.js"),[]).then(s=>s.h);this.hm=t.default(this.canvas),this.hm.wheel((s,a)=>this.mousezoom(-a*50,s));let n=this.mc=new r.Manager(this.canvas),i=le.isMobile?10:0;n.add(new r.Pan({threshold:i})),n.add(new r.Tap),n.add(new r.Pinch({threshold:0})),n.get("pinch").set({enable:!0}),le.isMobile&&n.add(new r.Press),n.on("panstart",s=>{if(this.cursor.scroll_lock)return;if(this.cursor.mode==="aim")return this.emitCursorCoord(s);let a=this.layout.scaleIndex,c=this.meta.getYtransform(this.gridId,a);this.drug={x:s.center.x+this.offsetX,y:s.center.y+this.offsetY,r:this.range.slice(),t:this.range[1]-this.range[0],o:c&&c.offset||0,y_r:c&&c.range?c.range.slice():void 0,B:this.layout.B,t0:le.now()},this.events.emit("cursor-locked",!0),this.events.emit("cursor-changed",{gridId:this.gridId,x:s.center.x+this.offsetX,y:s.center.y+this.offsetY})}),n.on("panmove",s=>{le.isMobile&&(this.calcOffset(),this.propagate("mousemove",this.touch2mouse(s))),this.drug?this.mousedrag(this.drug.x+s.deltaX,this.drug.y+s.deltaY):this.cursor.mode==="aim"&&this.emitCursorCoord(s)}),n.on("panend",s=>{le.isMobile&&this.drug&&this.panFade(s),this.drug=null,this.events.emit("cursor-locked",!1)}),n.on("tap",s=>{le.isMobile&&(this.simMousedown(s),this.fade&&this.fade.stop(),this.events.emit("cursor-changed",{}),this.events.emit("cursor-changed",{mode:"explore"}),this.events.emitSpec(this.rrId,"update-rr"))}),n.on("pinchstart",()=>{this.drug=null,this.pinch={t:this.range[1]-this.range[0],r:this.range.slice()}}),n.on("pinchend",()=>{this.pinch=null}),n.on("pinch",s=>{this.pinch&&this.pinchZoom(s.scale)}),n.on("press",s=>{le.isMobile&&(this.fade&&this.fade.stop(),this.calcOffset(),this.emitCursorCoord(s,{mode:"aim"}),setTimeout(()=>this.events.emitSpec(this.rrId,"update-rr")),this.simMousedown(s))});let o=this.canvas.addEventListener;o("gesturestart",this.gesturestart),o("gesturechange",this.gesturechange),o("gestureend",this.gestureend)}gesturestart(t){t.preventDefault()}gesturechange(t){t.preventDefault()}gestureend(t){t.preventDefault()}mousemove(t){le.isMobile||(this.events.emit("cursor-changed",{visible:!0,gridId:this.gridId,x:t.layerX,y:t.layerY-1}),this.calcOffset(),this.propagate("mousemove",t))}mouseout(t){le.isMobile||(this.events.emit("cursor-changed",{visible:!1}),this.propagate("mouseout",t))}mouseup(t){this.drug=null,this.events.emit("cursor-locked",!1),this.propagate("mouseup",t)}mousedown(t){le.isMobile||(this.events.emit("cursor-locked",!0),this.propagate("mousedown",t),!t.defaultPrevented&&this.events.emit("grid-mousedown",[this.gridId,t]))}simMousedown(t){t.srcEvent.defaultPrevented||(this.events.emit("grid-mousedown",[this.gridId,t]),this.propagate("mousemove",this.touch2mouse(t)),this.events.emitSpec(this.rrId,"update-rr"),this.propagate("mousedown",this.touch2mouse(t)),setTimeout(()=>{this.propagate("click",this.touch2mouse(t))}))}touch2mouse(t){return this.calcOffset(),{original:t.srcEvent,layerX:t.center.x+this.offsetX,layerY:t.center.y+this.offsetY,preventDefault:function(){this.original.preventDefault()}}}click(t){this.propagate("click",t)}emitCursorCoord(t,r={}){this.events.emit("cursor-changed",Object.assign({gridId:this.gridId,x:t.center.x+this.offsetX,y:t.center.y+this.offsetY},r))}panFade(t){let r=le.now()-this.drug.t0,i=42*(this.range[1]-this.drug.r[1])/r,o=Math.abs(i*.01);r>500||(this.fade&&this.fade.stop(),this.fade=new LQ(s=>{i*=.85,Math.abs(i)<o&&s.stop(),this.range[0]+=i,this.range[1]+=i,this.changeRange()}))}calcOffset(){let t=this.canvas.getBoundingClientRect();this.offsetX=-t.x,this.offsetY=-t.y}mousezoom(t,r){var n;if(this.meta.scrollLock)return;if(this.wmode!=="pass"){if(this.wmode==="click"&&!this.oldMeta.activated)return;r.originalEvent.preventDefault(),r.preventDefault()}r.deltaX=r.deltaX||le.getDeltaX(r),r.deltaY=r.deltaY||le.getDeltaY(r),Math.abs(r.deltaX)>0&&(this.trackpad=!0,Math.abs(r.deltaX)>=Math.abs(r.deltaY)&&(t*=.1),this.trackpadScroll(r)),this.trackpad&&(t*=.032),t=le.smartWheel(t);const i=(n=window.devicePixelRatio)!=null?n:1;let o=this.hub.mainOv.dataSubset;if(t<0&&o.length<=this.MIN_ZOOM||t>0&&o.length>this.MAX_ZOOM)return;let s=this.interval/1e3,a=t*s*o.length,c=this.props.config.ZOOM_MODE==="tl";if(r.originalEvent.ctrlKey||c){let d=r.originalEvent.offsetX/(this.canvas.width/i-1)*a,g=a-d;this.range[0]-=d,this.range[1]+=g}else this.range[0]-=a;if(c){let d=r.originalEvent.offsetY/(this.canvas.height/i-1)*2,g=2-d,f=a/(this.range[1]-this.range[0]);this.events.emit("rezoom-range",{gridId:this.gridId,z:f,diff1:d,diff2:g})}this.changeRange()}mousedrag(t,r){if(this.meta.scrollLock)return;let n=this.drug.t*(this.drug.x-t)/this.layout.width,i=this.layout.$hi-this.layout.$lo;i*=(this.drug.y-r)/this.layout.height;let o=this.drug.o+i,s=this.layout.settings.logScale;if(s&&this.drug.y_r){let d=this.drug.y-r;var a=this.drug.y_r.slice();a[0]=yt.exp((0-this.drug.B+d)/this.layout.A),a[1]=yt.exp((this.layout.height-this.drug.B+d)/this.layout.A)}let c=this.layout.scaleIndex,u=this.meta.getYtransform(this.gridId,c);this.drug.y_r&&u&&!u.auto&&this.events.emit("sidebar-transform",{gridId:this.gridId,scaleId:c,range:s?a||this.drug.y_r:[this.drug.y_r[0]-o,this.drug.y_r[1]-o]}),this.range[0]=this.drug.r[0]+n,this.range[1]=this.drug.r[1]+n,this.changeRange()}pinchZoom(t){if(this.meta.scrollLock)return;let r=this.hub.mainOv.dataSubset;if(t>1&&r.length<=this.MIN_ZOOM||t<1&&r.length>this.MAX_ZOOM)return;let n=this.pinch.t,i=n*1/t;this.range[0]=this.pinch.r[0]-(i-n)*.5,this.range[1]=this.pinch.r[1]+(i-n)*.5,this.changeRange()}trackpadScroll(t){if(this.meta.scrollLock)return;let r=this.range[1]-this.range[0];this.range[0]+=t.deltaX*r*.011,this.range[1]+=t.deltaX*r*.011,this.changeRange()}changeRange(){let t=this.hub.mainOv.data;if(!this.range.length||t.length<2)return;let r=t.length-1,n=this.range,i=this.layout;n[0]=le.clamp(n[0],-1/0,i.ti(t[r][0],r)-this.interval*5.5),n[1]=le.clamp(n[1],i.ti(t[0][0],0)+this.interval*5.5,1/0),this.events.emit("range-changed",n)}propagate(t,r){this.events.emitSpec(this.gridUpdId,"propagate",{name:t,event:r})}destroy(){let t=this.canvas.removeEventListener;t("gesturestart",this.gesturestart),t("gesturechange",this.gesturechange),t("gestureend",this.gestureend),this.mc&&this.mc.destroy(),this.hm&&this.hm.unwheel(),this.mouseEvents("removeEventListener")}}class DQ{constructor(t,r){this._keydown=this.keydown.bind(this),this._keyup=this.keyup.bind(this),this._keypress=this.keypress.bind(this),window.addEventListener("keydown",this._keydown),window.addEventListener("keyup",this._keyup),window.addEventListener("keypress",this._keypress),this.events=r,this.updId=t}off(){window.removeEventListener("keydown",this._keydown),window.removeEventListener("keyup",this._keyup),window.removeEventListener("keypress",this._keypress)}keydown(t){this.events.emitSpec(this.updId,"propagate",{name:"keydown",event:t})}keyup(t){this.events.emitSpec(this.updId,"propagate",{name:"keyup",event:t})}keypress(t){this.events.emitSpec(this.updId,"propagate",{name:"keypress",event:t})}}const $C=Zr.HPX;class $Q extends xI{constructor(t,r){super(t,"__$Crosshair__",r),this.events=Er.instance(this.nvId),this.events.on("crosshair:show-crosshair",this.onShowHide.bind(this)),this.id=t,this.zIndex=1e6,this.ctxType="Canvas",this.show=!0,this.overlay={draw:this.draw.bind(this),destroy:this.destroy.bind(this)},this.env={update:this.envEpdate.bind(this),destroy:()=>{}}}draw(t){if(!this.layout)return;const r=this.props.cursor;!r.visible||!this.show||(t.save(),t.strokeStyle=this.props.colors.cross,t.beginPath(),t.setLineDash([5]),r.gridId===this.layout.id&&(t.moveTo(0,r.y+$C),t.lineTo(this.layout.width+$C,r.y+$C)),t.moveTo(r.x,0),t.lineTo(r.x,this.layout.height),t.stroke(),t.restore())}envEpdate(t,r,n){this.ovSrc=t,this.layout=r,this.props=n}onCursor(t){this.props&&(this.props.cursor=t)}onShowHide(t){this.show=t}destroy(){this.events.off("crosshair")}}const Jf=Zr.HPX;class XQ extends xI{constructor(t,r){super(t,"__$Grid__",r),this.events=Er.instance(this.nvId),this.events.on("grid-layer:show-grid",this.onShowHide.bind(this)),this.id=t,this.zIndex=-1e6,this.ctxType="Canvas",this.show=!0,this.overlay={draw:this.draw.bind(this),destroy:this.destroy.bind(this)},this.env={update:this.envEpdate.bind(this),destroy:()=>{}}}draw(t){let r=this.layout;if(!r||!this.show)return;t.strokeStyle=this.props.colors.grid,t.beginPath();const n=r.height;for(var[i,o]of r.xs)t.moveTo(i+Jf,0),t.lineTo(i+Jf,n);for(var[s,a]of r.ys)t.moveTo(0,s+Jf),t.lineTo(r.width,s+Jf);t.stroke()}envEpdate(t,r,n){this.ovSrc=t,this.layout=r,this.props=n}onShowHide(t){this.show=t}destroy(){this.events.off("grid-layer")}}const eo=Zr.HPX;function FQ(e,t,r,n,i){var o=r.ys;i.font=e.config.FONT;var{x:s,w:a}=Ow(e,t,n,i);i.fillStyle=e.colors.text,i.beginPath();for(var c of o){if(c[0]>t.height)continue;var u=n==="left"?a+eo:s+eo,d=n==="left"?u-4.5:u+4.5;i.moveTo(u,c[0]+eo),i.lineTo(d,c[0]+eo);var g=n==="left"?-10:10;i.textAlign=n==="left"?"end":"start";let f=r.prec;i.fillText(c[1].toFixed(f),u+g,c[0]+4)}i.stroke()}function Ow(e,t,r,n){var i=r==="right"?1:0,o=t.sbMax[i],s,a,c,u;switch(r){case"left":s=0,a=0,c=Math.floor(o),u=t.height,n.clearRect(s,a,c,u),n.strokeStyle=e.colors.scale,n.beginPath(),n.moveTo(s+eo+c,0),n.lineTo(s+eo+c,u),n.stroke();break;case"right":s=0,a=0,c=Math.floor(o),u=t.height,n.clearRect(s,a,c,u),n.strokeStyle=e.colors.scale,n.beginPath(),n.moveTo(s-eo,0),n.lineTo(s-eo,u),n.stroke();break}return{x:s,y:a,w:c,h:u}}function KQ(e,t,r,n,i){const o=e.config.PANHEIGHT;let a=(e.cursor.scales[r.scaleSpecs.id]||0).toFixed(r.prec);i.fillStyle=e.colors.panel;var c=n==="right"?1:0;let u=t.sbMax[c]-5,d=c?1:4,g=e.cursor.y-o*.5+eo,f=c?7:u-3;SZ(i,d,g,u,o,3,c),i.fillStyle=e.colors.textHL,i.textAlign=c?"left":"right",i.fillText(a,f,g+15)}function VQ(e,t,r,n,i,o){const s=Math.floor(e.config.PANHEIGHT*.8);let c=o.value.toFixed(r.prec);i.fillStyle=o.color;var u=n==="right"?1:0;let d=t.sbMax[u]-5,g=u?1:4,f=o.y-s*.5+eo,m=u?7:d-3;SZ(i,g,f,d,s,3,u),i.fillStyle=e.colors.back,i.textAlign=u?"left":"right",i.fillText(c,m,f+s-4)}function SZ(e,t,r,n,i,o,s){n<2*o&&(o=n/2),i<2*o&&(o=i/2),e.beginPath(),e.moveTo(t+o,r),e.arcTo(t+n,r,t+n,r+i,o*s),e.arcTo(t+n,r+i,t,r+i,o*s),e.arcTo(t,r+i,t,r,o*(1-s)),e.arcTo(t,r,t+n,r,o*(1-s)),e.closePath(),e.fill()}function kZ(e,t,r){r.strokeStyle=e.colors.scale,r.beginPath(),r.moveTo(0,.5),r.lineTo(t.width,.5),r.stroke()}function zQ(e,t,r,n){var i=r==="right"?1:0,o=t.sbMax[i];n.font=e.config.FONT,Ow(e,t,r,n),t.id&&kZ(e,t,n);let s=Math.floor(o*.5),a=Math.floor(t.height*.5);n.fillStyle=e.colors.text,n.textAlign="center",n.fillText("Error",s,a)}const Ju={body:FQ,border:Ow,panel:KQ,upperBorder:kZ,error:zQ,tracker:VQ};function YQ(e,t,r){t.strokeStyle=r.color,t.setLineDash([1,2]),t.beginPath(),t.moveTo(0,r.y),t.lineTo(e.width,r.y),t.stroke(),t.setLineDash([])}class UQ extends xI{constructor(t,r,n){super(t,"__$Trackers__"),this.id=t,this.zIndex=5e5,this.ctxType="Canvas",this.hub=ns.instance(r.id),this.meta=is.instance(r.id),this.gridId=n,this.props=r,this.overlay={draw:this.draw.bind(this),destroy:this.destroy.bind(this),drawSidebar:this.drawSidebar.bind(this)},this.env={update:this.envEpdate.bind(this),destroy:()=>{}}}draw(t){if(!this.layout)return;let r=this.meta.valueTrackers[this.gridId]||[];this.trackers=[];for(var n=0;n<r.length;n++){let i=r[n];if(!i)continue;let o=this.hub.ovData(this.gridId,n)||[],s=o[o.length-1]||[],a=i(s);a.ovId=n,!(!a.show||a.value===void 0)&&(a.y=this.layout.value2y(a.value),a.color=a.color||this.props.colors.scale,a.line&&YQ(this.layout,t,a),this.trackers.push(a))}}drawSidebar(t,r,n){if(this.layout)for(var i of this.trackers||[])this.getScaleId(i.ovId)===n.scaleSpecs.id&&Ju.tracker(this.props,this.layout,n,r,t,i)}envEpdate(t,r,n){this.ovSrc=t,this.layout=r,this.props=n,this.scaleId=this.getScaleId()}getScaleId(t){let r=this.layout.scales;for(var n in r)if(r[n].scaleSpecs.ovIdxs.includes(t))return n}destroy(){}}function JQ(e,t,r){let n=document.getElementById(e),i=window.devicePixelRatio||1;n.style.width=`${t}px`,n.style.height=`${r}px`,i<1&&(i=1);var o=n.getBoundingClientRect();n.width=o.width*i,n.height=o.height*i;let s=n.getContext("2d",{});s.scale(i,i),s.measureTextOrg||(s.measureTextOrg=s.measureText);let a=e.split("-").shift();return s.measureText=c=>le.measureText(s,c,a),[n,s]}function QQ(e,t,r,n){let i=window.devicePixelRatio||1;e.style.width=`${r}px`,e.style.height=`${n}px`,i<1&&(i=1);var o=e.getBoundingClientRect();e.width=o.width*i,e.height=o.height*i,t.scale(i,i)}const Oc={setup:JQ,resize:QQ};function qQ(e){let t,r;return{c(){t=It("div"),r=It("canvas"),me(r,"id",e[2]),me(t,"id",e[1]),me(t,"style",e[0]),me(t,"class","nvjs-canvas-rendrer svelte-8n0n7w")},m(n,i){tt(n,t,i),qt(t,r)},p(n,[i]){i&1&&me(t,"style",n[0])},i:Tr,o:Tr,d(n){n&&ze(t)}}}function eq(e,t,r){let n,i,o,{id:s}=t,{props:a={}}=t,{rr:c={}}=t,{layout:u={}}=t,d=Er.instance(a.id),g=`rr-${s}-${c.id}`,f=`grid-${s}`,m=`${a.id}-rr-${s}-${c.id}`,v=`${a.id}-canvas-${s}-${c.id}`;d.on(`${g}:update-rr`,w),d.on(`${g}:run-rr-task`,S);let p,I,h;ul(()=>{A()}),sa(()=>{d.off(`${g}`),h&&h.destroy()});function y(j){h=j,h.setup({id:s,canvas:p,ctx:I,props:a,layout:u,rrUpdId:g,gridUpdId:f})}function C(){h&&(h.destroy(),h=null)}function x(){return h}function A(){[p,I]=Oc.setup(v,u.width,u.height)}function w(j=u){r(3,u=j),!(!I||!u)&&(I.clearRect(0,0,p.width,p.height),c.layers.forEach(_=>{if(!_.display)return;I.save();let O=_.overlay;_.opacity&&(I.globalAlpha=_.opacity);try{O.draw(I)}catch(P){console.log(`Layer ${s}.${_.id}`,P)}I.globalAlpha=1,I.restore()}),s>0&&k())}function S(j){j.handler(p,I,h)}function k(){I.strokeStyle=a.colors.scale,I.beginPath(),I.moveTo(0,.5),I.lineTo(u.width,.5),I.stroke()}function R(){p&&(Oc.resize(p,I,u.width,u.height),w())}return e.$$set=j=>{"id"in j&&r(4,s=j.id),"props"in j&&r(5,a=j.props),"rr"in j&&r(6,c=j.rr),"layout"in j&&r(3,u=j.layout)},e.$$.update=()=>{e.$$.dirty&8&&r(0,n=`
    left: ${u.sbMax[0]}px;
    top: ${u.offset||0}px;
    position: absolute;
    height: ${u.height}px;
}`),e.$$.dirty&8&&r(11,i=u.width),e.$$.dirty&8&&r(10,o=u.height),e.$$.dirty&3072&&R()},[n,m,v,u,s,a,c,y,C,x,o,i]}class tq extends Ln{constructor(t){super(),Hn(this,t,eq,qQ,yn,{id:4,props:5,rr:6,layout:3,attach:7,detach:8,getInput:9})}get attach(){return this.$$.ctx[7]}get detach(){return this.$$.ctx[8]}get getInput(){return this.$$.ctx[9]}}function _N(e,t,r){const n=e.slice();return n[23]=t[r],n[24]=t,n[25]=r,n}function MN(e){let t,r=e[24],n=e[25],i;const o=()=>e[7](t,r,n),s=()=>e[7](null,r,n);let a={id:e[1],layout:e[0],props:e[2],rr:e[23]};return t=new tq({props:a}),o(),{c(){In(t.$$.fragment)},m(c,u){Qr(t,c,u),i=!0},p(c,u){(r!==c[24]||n!==c[25])&&(s(),r=c[24],n=c[25],o());const d={};u&2&&(d.id=c[1]),u&1&&(d.layout=c[0]),u&4&&(d.props=c[2]),u&8&&(d.rr=c[23]),t.$set(d)},i(c){i||(je(t.$$.fragment,c),i=!0)},o(c){We(t.$$.fragment,c),i=!1},d(c){s(),qr(t,c)}}}function ZN(e){let t,r,n=e[23].ctxType==="Canvas"&&MN(e);return{c(){n&&n.c(),t=fi()},m(i,o){n&&n.m(i,o),tt(i,t,o),r=!0},p(i,o){i[23].ctxType==="Canvas"?n?(n.p(i,o),o&8&&je(n,1)):(n=MN(i),n.c(),je(n,1),n.m(t.parentNode,t)):n&&(Pn(),We(n,1,1,()=>{n=null}),_n())},i(i){r||(je(n),r=!0)},o(i){We(n),r=!1},d(i){i&&ze(t),n&&n.d(i)}}}function rq(e){let t,r,n=ai(e[3]),i=[];for(let s=0;s<n.length;s+=1)i[s]=ZN(_N(e,n,s));const o=s=>We(i[s],1,1,()=>{i[s]=null});return{c(){t=It("div");for(let s=0;s<i.length;s+=1)i[s].c();me(t,"class","nvjs-grid"),me(t,"style",e[4])},m(s,a){tt(s,t,a);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(t,null);r=!0},p(s,[a]){if(a&15){n=ai(s[3]);let c;for(c=0;c<n.length;c+=1){const u=_N(s,n,c);i[c]?(i[c].p(u,a),je(i[c],1)):(i[c]=ZN(u),i[c].c(),je(i[c],1),i[c].m(t,null))}for(Pn(),c=n.length;c<i.length;c+=1)o(c);_n()}(!r||a&16)&&me(t,"style",s[4])},i(s){if(!r){for(let a=0;a<n.length;a+=1)je(i[a]);r=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)We(i[a]);r=!1},d(s){s&&ze(t),cu(i,s)}}}function nq(e,t,r){let n,{id:i}=t,{props:o}=t,{main:s}=t,{layout:a}=t;function c(){return m}let u=ns.instance(o.id),d=is.instance(o.id),g=Er.instance(o.id),f=Rw.instance(o.id),m=[],v=[],p=null,I=null;g.on(`grid-${i}:update-grid`,w),g.on(`grid-${i}:remake-grid`,h),g.on(`grid-${i}:propagate`,S),g.on(`grid-${i}:run-grid-task`,k),ul(()=>{h(),I=new DQ(`grid-${i}`,g)}),sa(()=>{g.off(`grid-${i}`),I.off()});function h(j){if(!u.panes()[i])return;C(),m=x(),r(3,v=A());let _=v[v.length-1];_&&setTimeout(()=>{_.ref&&(y(),_.ref.attach(p=new WQ))})}function y(){for(var j of v)j.ref.detach()}function C(){for(var j of m)j.overlay.destroy(),j.env.destroy()}function x(){let j=u.panes()[i].overlays||[],_=[];for(var O=0;O<j.length;O++){let P=j[O],N=f.prefabs[P.type];if(!N)continue;let B=new xI(O,P.name,o.id),E=P.settings.zIndex;B.zIndex=E??(P.main?0:-1);let M=new HQ(O,P,a,o);B.overlay=N.make(M),B.env=M,B.ovSrc=P,B.ctxType=N.ctx,M.overlay=B.overlay,d.exctractFrom(B.overlay),_.push(B),B.overlay.init()}return _.push(new $Q(O++,o.id)),_.push(new XQ(O++,o.id)),_.push(new UQ(O++,o,i)),_.sort((P,N)=>P.zIndex-N.zIndex),d.finish(),_}function A(){let j=[],_=null;for(var O of m){if(O.ctxType!==_){var P={ctxType:O.ctxType,layers:[],id:j.length,ref:null};j.push(P),_=O.ctxType}P.layers.push(O)}return j}function w(j=a){r(0,a=j),p&&(p.layout=a);for(var _ of m)_.env.update(_.ovSrc,a,o),_.update();for(var O of v)g.emitSpec(`rr-${i}-${O.id}`,"update-rr",a)}function S(j){let{name:_,event:O}=j;for(var P of m)P.overlay[_]&&P.overlay[_](O)}function k(j){j.handler(m,v,{update:w})}function R(j,_,O){ao[j?"unshift":"push"](()=>{_[O].ref=j,r(3,v)})}return e.$$set=j=>{"id"in j&&r(1,i=j.id),"props"in j&&r(2,o=j.props),"main"in j&&r(5,s=j.main),"layout"in j&&r(0,a=j.layout)},e.$$.update=()=>{e.$$.dirty&5&&r(4,n=`
    width: ${a.width}px;
    height: ${a.height}px;
    background: ${o.colors.back};
    margin-left: ${a.sbMax[0]}px;
`)},[a,i,o,v,n,s,c,R]}class iq extends Ln{constructor(t){super(),Hn(this,t,nq,rq,yn,{id:1,props:2,main:5,layout:0,getLayers:6})}get getLayers(){return this.$$.ctx[6]}}function HN(e,{delay:t=0,duration:r=400,easing:n=rZ}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:o=>`opacity: ${o*i}`}}function oq(e){rf(e,"svelte-16w6gr6",".scale-selector.svelte-16w6gr6{position:absolute;bottom:5px;display:grid;justify-content:center;align-content:center}.scale-button.svelte-16w6gr6{border-radius:3px;text-align:center;user-select:none;margin:auto;margin-top:1px}.scale-button.svelte-16w6gr6:hover{filter:brightness(1.2)}")}function LN(e,t,r){const n=e.slice();n[13]=t[r],n[15]=r;const i=n[13].scaleSpecs.id;return n[1]=i,n}function WN(e){let t,r=e[1]+"",n,i,o,s,a;function c(){return e[10](e[1])}return{c(){t=It("div"),n=uu(r),i=Sn(),me(t,"class","scale-button svelte-16w6gr6"),me(t,"style",o=e[2](e[1]))},m(u,d){tt(u,t,d),qt(t,n),qt(t,i),s||(a=Oo(t,"click",aZ(c)),s=!0)},p(u,d){e=u,d&1&&r!==(r=e[1]+"")&&Nw(n,r),d&5&&o!==(o=e[2](e[1]))&&me(t,"style",o)},d(u){u&&ze(t),s=!1,a()}}}function sq(e){let t,r,n,i=ai(e[0]),o=[];for(let s=0;s<i.length;s+=1)o[s]=WN(LN(e,i,s));return{c(){t=It("div");for(let s=0;s<o.length;s+=1)o[s].c();me(t,"class","scale-selector svelte-16w6gr6"),me(t,"id",e[4]),me(t,"style",e[3])},m(s,a){tt(s,t,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(t,null);n=!0},p(s,[a]){if(a&37){i=ai(s[0]);let c;for(c=0;c<i.length;c+=1){const u=LN(s,i,c);o[c]?o[c].p(u,a):(o[c]=WN(u),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}(!n||a&8)&&me(t,"style",s[3])},i(s){n||(s&&eg(()=>{n&&(r||(r=yN(t,HN,{duration:150},!0)),r.run(1))}),n=!0)},o(s){s&&(r||(r=yN(t,HN,{duration:150},!1)),r.run(0)),n=!1},d(s){s&&ze(t),cu(o,s),s&&r&&r.end()}}}function aq(e,t,r){let n,i,o,{id:s}=t,{props:a}=t,{layout:c}=t,{scales:u}=t,{side:d}=t,g=Er.instance(a.id),f=d==="right"?1:0,m=`${a.id}-ss-${s}-${d}`;function v(I){u[I];let h=c.settings.scaleSideIdxs;h[f]=I,g.emitSpec("hub","set-scale-index",{paneId:s,index:I,sideIdxs:h})}const p=I=>v(I);return e.$$set=I=>{"id"in I&&r(1,s=I.id),"props"in I&&r(6,a=I.props),"layout"in I&&r(7,c=I.layout),"scales"in I&&r(0,u=I.scales),"side"in I&&r(8,d=I.side)},e.$$.update=()=>{e.$$.dirty&129&&r(9,n=function(){let h={},y=c.sbMax[f];switch(u.length){case 2:case 4:default:h.ssw=46,h.ssm=(y-h.ssw)/2,h.bw=18,h.bh=18,h.tmp="50% 50%";break;case 3:h.ssw=54,h.ssm=(y-h.ssw)/3,h.bw=15,h.bh=15,h.tmp="33% 33% 33%";break}return h}()),e.$$.dirty&576&&r(3,i=`
    grid-template-columns: ${n.tmp};
    font: ${a.config.FONT};
    width: ${n.ssw}px;
    margin-left: ${n.ssm}px;
`),e.$$.dirty&704&&r(2,o=I=>{let y=I===c.settings.scaleSideIdxs[f]?a.colors.text:a.colors.scale;return`
    background: ${a.colors.back};
    line-height: ${n.bh}px;
    width: ${n.bw}px;
    height: ${n.bh}px;
    box-shadow: 0 0 0 1px ${a.colors.back};
    border: 1px solid ${y};
    color: ${y};
`})},[u,s,o,i,m,v,a,c,d,n,p]}class lq extends Ln{constructor(t){super(),Hn(this,t,aq,sq,yn,{id:1,props:6,layout:7,scales:0,side:8},oq)}}function DN(e){let t,r;return t=new lq({props:{id:e[1],props:e[2],layout:e[0],scales:e[4],side:e[3]}}),{c(){In(t.$$.fragment)},m(n,i){Qr(t,n,i),r=!0},p(n,i){const o={};i[0]&2&&(o.id=n[1]),i[0]&4&&(o.props=n[2]),i[0]&1&&(o.layout=n[0]),i[0]&16&&(o.scales=n[4]),i[0]&8&&(o.side=n[3]),t.$set(o)},i(n){r||(je(t.$$.fragment,n),r=!0)},o(n){We(t.$$.fragment,n),r=!1},d(n){qr(t,n)}}}function cq(e){let t,r,n,i,o,s,a=e[4].length>1&&e[5]&&DN(e);return{c(){t=It("div"),r=It("canvas"),n=Sn(),a&&a.c(),me(r,"id",e[8]),me(t,"id",e[7]),me(t,"style",e[6]),me(t,"class","nvjs-sidebar svelte-gpuvhh")},m(c,u){tt(c,t,u),qt(t,r),qt(t,n),a&&a.m(t,null),i=!0,o||(s=[Oo(t,"click",e[9]),Oo(t,"mouseover",e[10]),Oo(t,"mouseleave",e[11])],o=!0)},p(c,u){c[4].length>1&&c[5]?a?(a.p(c,u),u[0]&48&&je(a,1)):(a=DN(c),a.c(),je(a,1),a.m(t,null)):a&&(Pn(),We(a,1,1,()=>{a=null}),_n()),(!i||u[0]&64)&&me(t,"style",c[6])},i(c){i||(je(a),i=!0)},o(c){We(a),i=!1},d(c){c&&ze(t),a&&a.d(),o=!1,oa(s)}}}function uq(e,t,r){let n,i,o,s,{id:a}=t,{props:c={}}=t,{layout:u={}}=t,{side:d}=t,{scales:g=[]}=t,f=[];function m(z){f=z}let v=is.instance(c.id),p=Er.instance(c.id),I=d==="right"?1:0,h=`sb-${a}-${d}`,y=`${c.id}-sb-${a}-${d}`,C=`${c.id}-sb-canvas-${a}-${d}`,x=!1,A=!0;p.on(`${h}:update-sb`,N),p.on(`${h}:show-sb-panel`,z=>A=z);let w,S,k,R=1,j,_;ul(async()=>{await O()}),sa(()=>{p.off(`${h}`),k&&k.destroy()});async function O(){[w,S]=Oc.setup(C,u.sbMax[I],u.height),N(),i&&await P()}async function P(){const z=await $t(()=>import("./hammer-3390a618-_z7O2djB.js"),[]).then(ee=>ee.h);k=new z.Manager(w),k.add(new z.Pan({direction:z.DIRECTION_VERTICAL,threshold:0})),k.add(new z.Tap({event:"doubletap",taps:2,posThreshold:50})),k.on("panstart",ee=>{if(!i)return;let D=L();D?R=D.zoom:R=1,j=[i.$hi,i.$lo],_={y:ee.center.y,z:R,mid:yt.log_mid(j,u.height),A:i.A,B:i.B}}),k.on("panmove",ee=>{_&&(R=M(ee),p.emit("sidebar-transform",{gridId:a,scaleId:i.scaleSpecs.id,zoom:R,auto:!1,range:G(),drugging:!0,updateLayout:!0}),N())}),k.on("panend",()=>{_=null,i&&p.emit("sidebar-transform",{gridId:a,scaleId:i.scaleSpecs.id,drugging:!1,updateLayout:!0})}),k.on("doubletap",()=>{p.emit("sidebar-transform",{gridId:a,scaleId:i.scaleSpecs.id,zoom:1,auto:!0,updateLayout:!0}),R=1,N()})}function N(z=u){if(z){if(r(0,u=z),i=T(),!i)return Ju.error(c,u,d,S);Ju.body(c,u,i,d,S),B(),a&&Ju.upperBorder(c,u,S),c.cursor.y&&c.cursor.scales&&A&&c.cursor.gridId===u.id&&Ju.panel(c,u,i,d,S)}}function B(){for(var z of f){let ee=z.overlay;ee.drawSidebar&&ee.drawSidebar(S,d,i)}}function E(){w&&(Oc.resize(w,S,u.sbMax[I],u.height),N())}function M(z){let ee=_.y-z.center.y,F=1+(ee>0?3:1)*ee/u.height;return le.clamp(_.z*F,.005,100)}function G(z=1,ee=1){let D=R/_.z,F=(1/D-1)/2,Z=j.slice(),$=Z[0]-Z[1];if(!i.log)Z[0]=Z[0]+$*F*z,Z[1]=Z[1]-$*F*ee;else{let J=u.height/2,U=J-J*(1/D),K=J+J*(1/D),re=ce=>yt.exp((ce-_.B)/_.A);Z.slice(),Z[0]=re(U),Z[1]=re(K)}return Z}function T(){let z=u.scales,ee=u.settings.scaleTemplate[I],D=z[u.settings.scaleSideIdxs[I]];return D&&ee.includes(D.scaleSpecs.id)?D:null}function L(){if(!v.yTransforms[a])return;let z=i.scaleSpecs.id;return v.yTransforms[a][z]}function W(z){i&&p.emitSpec("hub","set-scale-index",{paneId:a,index:i.scaleSpecs.id,sideIdxs:u.settings.scaleSideIdxs})}function X(){r(5,x=!0)}function V(){r(5,x=!1)}return e.$$set=z=>{"id"in z&&r(1,a=z.id),"props"in z&&r(2,c=z.props),"layout"in z&&r(0,u=z.layout),"side"in z&&r(3,d=z.side),"scales"in z&&r(4,g=z.scales)},e.$$.update=()=>{e.$$.dirty[0]&5&&r(6,n=`
    left: ${I*(u.width+u.sbMax[0])}px;
    top: ${u.offset||0}px;
    position: absolute;
    background: ${c.colors.back};
    height: ${u.height}px;
`),e.$$.dirty[0]&1&&(i=T()),e.$$.dirty[0]&1&&r(14,o=u.width),e.$$.dirty[0]&1&&r(13,s=u.height),e.$$.dirty[0]&24576&&E()},[u,a,c,d,g,x,n,y,C,W,X,V,m,s,o]}class BZ extends Ln{constructor(t){super(),Hn(this,t,uq,cq,yn,{id:1,props:2,layout:0,side:3,scales:4,setLayers:12},null,[-1,-1])}get setLayers(){return this.$$.ctx[12]}}function $N(e){let t;return{c(){t=It("div"),me(t,"id",e[3]),me(t,"style",e[1]),me(t,"class","nvjs-sidebar-stub svelte-yr5ja6")},m(r,n){tt(r,t,n)},p(r,n){n&2&&me(t,"style",r[1])},d(r){r&&ze(t)}}}function dq(e){let t,r=e[0].sbMax[e[2]]&&$N(e);return{c(){r&&r.c(),t=fi()},m(n,i){r&&r.m(n,i),tt(n,t,i)},p(n,[i]){n[0].sbMax[n[2]]?r?r.p(n,i):(r=$N(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Tr,o:Tr,d(n){n&&ze(t),r&&r.d(n)}}}function gq(e,t,r){let n,{id:i}=t,{props:o={}}=t,{layout:s={}}=t,{side:a}=t,c=a==="right"?1:0,u=`${o.id}-stub-${i}-${a}`;return e.$$set=d=>{"id"in d&&r(4,i=d.id),"props"in d&&r(5,o=d.props),"layout"in d&&r(0,s=d.layout),"side"in d&&r(6,a=d.side)},e.$$.update=()=>{e.$$.dirty&113&&r(1,n=`
    left: ${c*(s.width+s.sbMax[0])}px;
    top: ${s.offset||0}px;
    width: ${s.sbMax[c]-1}px;
    height: ${s.height-(i?1:0)}px;
    position: absolute;
    border: 1px solid;
    border-${a}: none;
    border-bottom: none;
    /* TODO: remove to-boder, it's in the pane now */
    border-top: ${i?"auto":"none"};
    border-color: ${o.colors.scale};
    background: ${o.colors.back}
`)},[s,n,c,u,i,o,a]}class NZ extends Ln{constructor(t){super(),Hn(this,t,gq,dq,yn,{id:4,props:5,layout:0,side:6})}}const fq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAlJQTFRFAAAA7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIoTJ5QQQAAAMZ0Uk5TAAiA1fv+35cTG9b/6jUH0+4caZ0M7Lyi/SZztQGHmAMaz/czEuU2ePqsfZ4EHfUtD+LoPCdihoRgKH+ldaMFVoltCnDkbg0i1/Le60JVzfGOFQKhmwuSX7IGd8ov4e9T84zE7fmTirgJSNkjMWE0EPRZPulDGakpmWfmQFB5w2TdKr3cP03LW3xXwERH1HZS9lrwEbP4Xfw9ZtqITIXCsY8ukaCBNzDIqItUHiuCxxa2a0Y5MpXnLGO/ciVvyachGH6wxh8ghaUgOQAAA1FJREFUeJxjYBgFo2AUjATAyMTMwsrGzkGufk4ubjDg4SVPPx8/NxQICJJlgBA3HAiTo19EFKRVTJwVSEpIkmGAFEi/tAyDLIiWkydZv4IiUJ+SMgODiiqQoapGsgHqGkB9miCWFsgJ2jok6tcFRYGePohpYAhkGhnjUy1jYmpmbmGJ7E8rFqAuawjbBuQEWzsk9YL2TA6OynARJ2cXkBI2Vze4EncPoICnCYQj4gXkePvAJe18/SSAIv4BgRB+UDArJLZZQkJhVgSAhMJgOsJBshGRUJ5OlB40eUSLgAV8JWDphSUMGlQxsUBeXCDMAB1QgHjGQw13TIAnsESwSBKIKZoMIlNcweEgkwpyQBrC0/YgfnoGWC4zDqTSXxWsCywLclBWdg7YHKXcIKBIHihMRPMRBsj7AQUKCkHMomJweJWUloFosCyIYcXAUA5SxF3gG8QgU8EKdx4UVIJExIDBzgsO76pqGYYaFANqgbRlHYjlWR8k6Q2kGxqRDQhsAjkvk8EHlCa4m1uA7mzFMIAhpg3ETG5nB1EdqKm/E5QuurqbQVKGPSB/YjFARq0XxI4DB4oJin4GjnRQGBuB5I1qwGZjMYAhqMgbFkF96NmvPwUqM2EiJK6xGcAQFD8Jooo5G00/w+QpEJmpNtAEhdUABvlpkFTiHIRuAEOrEkhCg4mRAZ8BQKdOAKXRUgz9DE62QInpHTIMBAxgsJjKzRqOqZ+BYYYet0QaImhwGsAwcxZ7PgMWEGnjNRspT+M2gEgw8AbModSA6lEDBp0Bc0k3oAduACgD85PcDmLUhhswD8SaX45ZAuADggtA5XQymN0+HWTCrNqFTsTqjpQUigaXO4vAXJnFkMKqwG/J0kCC7pCZvEyqDlrwLYda6bQCVjumxNatXLVwdT7W1oS8m+Ca1rVNDUqwgnfdepgUnzMPNwKk8DQrbghZsrFz02blLfr6Ocp5m1bN7Nga0ZZlpISkzDPAAMn01Qu2sXJjAawpKRLYxLmTrbejOVB3x85i7GoxTU1evmu3DAMG0NGt3rN4rwB+zf6K+/p69vPhDGO7A2u6TQ9WHEriqkpA1jfBKOvwFOEllT36nIw4NSNAkEjgEUl9ZSSw0PLoejfSG5t0AQDCD8LOo5GzAgAAAABJRU5ErkJggg==",hq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAlJQTFRFAAAA7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIo7pIoTJ5QQQAAAMZ0Uk5TAAiA1fv+35cTG9b/6jUH0+4caZ0M7Lyi/SZztQGHmAMaz/czEuU2ePqsfZ4EHfUtD+LoPCdihoRgKH+ldaMFVoltCnDkbg0i1/Le60JVzfGOFQKhmwuSX7IGd8ov4e9T84zE7fmTirgJSNkjMWE0EPRZPulDGakpmWfmQFB5w2TdKr3cP03LW3xXwERH1HZS9lrwEbP4Xfw9ZtqITIXCsY8ukaCBNzDIqItUHiuCxxa2a0Y5MpXnLGO/ciVvyachGH6wxh8ghaUgOQAAA1JJREFUeJxjYBgFo2AUDAHAyMTMwsrGzkGufk4ubjDg4SVPPx8/NxQICJJlgBA3HAiTo19EFKRVTJwVSEpIkmGAFEi/tAyDLIiWkydZv4IiUJ+SMgODiiqQoapGsgHqGkB9miCWFsgJ2jok6tcFRYGePohpYAhkGhnjUy1jYmpmbmGJ7E8rFqAuawjbBuQEWzsk9YL2TA6OynARJ2cXkBI2Vze4EncPoICnCYQj4gXkePvAJe18/SSAIv4BgRB+UDArJLZZQkJhVgSAhMJgOsJBshGRUJ5OlB40eUSLgAV8JWDphSUMGlQxsUBeXCDMAB1QgHjGQw13TIAnsESwSBKIKZoMIlNcweEgkwpyQBrC0/YgfnoGWC4zDqTSXxWsCywLclBWdg7YHKXcIKBIHihMRPMRBsj7AQUKCkHMomJweJWUloFosCyIYcXAUA5SxF3gG8QgU8EKdx4UVIJExIDBzgsO76pqGYYaFANqgbRlHYjlWR8k6Q2kGxqRDQhsAjkvk8EHlCa4m1uA7mzFMIAhpg3ETG5nB1EdqKm/E5QuurqbQVKGPSB/YjFARq0XxI4DB4oJin4GjnRQGBuB5I1qwGZjMYAhqMgbFkF96NmvPwUqM2EiJK6xGcAQFD8Jooo5G00/w+QpEJmpNtAEhdUABvlpkFTiHIRuAEOrEkhCg4mRAZ8BQKdOAKXRUgz9DE62QInpHTIMBAxgsJjKzRqOqZ+BYYYet0QaImhwGsAwcxZ7PgMWEGnjNRspT+M2gEgw8AbModSA6lEDBp0Bc0k3oAduACgD85PcDmLUhhswD8SaX45ZAuADggtA5XQymN0+HWTCrNqFTsTqjpQUigaXO4vAXJnFkMKqwG/J0kCC7pCZvEyqDlrwLYda6bQCVjumxNatXLVwdT7W1oS8m+Ca1rVNDUqwgnfdepgUnzMPNwKk8DQrbghZsrFz02blLfr6Ocp5m1bN7Nga0ZZlpISkzDPAAMn01Qu2sXJjAawpKRLYxLmTrbejOVB3x85i7GoxTU1evmu3DAMG0NGt3rN4rwB+zf6K+/p69vPhDGO7A2u6TQ9WHEriqkpA1jfBKOvwFOEllT36nIw4NSNAkEjgEUl9ZSSw0PLoejfSG5tDAwAAOwrCzjMUsXkAAAAASUVORK5CYII=",pq="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAABVxJREFUeJztmlmoVlUUx/30XjVLnFC0bJTsWlmZQwRlYlE+FIR2jQzRBpSISooGobKi0aLoRlSEUolU0EMDRQ9JUdFgiA9NFA0oDTfLVTaZZdb/39oXD/tb55x9vnvOPUp7wQ/u/c4e1lpnT2et3a9flChRokSJEiVKlChRokSJEiVKxSJdHYPBTeBD8BfYBb4ED4FRdetXqcDAA8BH4J8UtoDpdetZicCwQeD9DON7EDC+bn1LFxh1SYDxPayqW99SBQbtB34wDH0FPOHWgeTvf4OJdetdmsCYqwzjXwQN9/wO4/nDYEDduvdaYMT+YKNn3HYwNVFmJPjaK8P/Z9SpeykCI64Df3rGPWOUu8EYBatBWx16lyJQ/kBj5f8NTDbKDgObvbLd4KS+VroBjgAXgtvBrWAx6Cg6J1F+hTvsJI1am1H+amMUrAHtBfUfD+aLHrjuApdxyuW2gwJDwDLwlaEIT2uXg6GBihwGPvba+JnOzajD3eILr873YHZgn+2gE2xwO0mynW3gXjA6rXJ/8LixJSXh23wU7JujSMN15rfVFWDEIqPf58HAnHpt4Fo3xbLOGOvpaKuBTsNraU7oylqc8OxYsMmr92Oq95sN8dcNjpx5GXUabpj/EqA/ucdq5E2jIA8vW43fd7jp0LQmOGUeMN7+yjzjE23MN+q/DPZJ6W+Oc7CvJ4e9v73+Z5fVqT90PgETwJQU53AvvwD099qZJs1rCB05vIADBojO42Qbv4LzjLIzwXeGflyzTgXjwNP+c6tTv4EViWeTDIV6lOrscYJ7G48Yb695yOU7YanRDo/O7Yky0w1nk2/ALNl90jy7FQcs955zG3zDKMf5ebHoIjpRdNVOPv8cHNmCA0aDdcaom+Oez5bmcwP5DJySHJn4+6xeO8CV4eL2nlGW68T5okEN/9n10uKZHvXOleZzxGvgNGeo3xcdcoY0T8vSHMAhPgN8YJTnImStI6n7foADRokufv4C3G303+2GurUwl+MAV45DfaYx1C2uafXtJ/qb64zO6ud3sEBStuZSHZBwwjzwU4ZSjPlN6I3xrq8R4IWMfv4QPUKnHpRKd4Arz61qoaQfPpb5c7FVcQZsN/rgVybP+4MD6pfrgES9uW4IJuvyuDmuRXutPviNssbrY6foAtsIqF+dA1zdxW4osh737kUFbQzp42TZvcjyyL4ydH2p3AGu/hLwqehWGHzqK9D+QDfX+bV4pxT7RK7eAXuyRAdEB3Sc+X93wKzogOiA6IDogOiA6IBiDritBl0rEdEoUa4D/M9axub3+js7oneSVoc44HVjFDwnGhEu5bu+r0U0R3ifNEeXt1qFGdTcaTiBX3jLwTFgSA12FBLRr0ZGp3klZ71hD7nfqsiA52MpFQhzAMwN3AxOEA1b1z4ynN4Mmx0nehOFofusUN07qS9SNPLylOTnCBmk3OQ6uxuc40bIQWC4VHCpQTQEN9QN66NEv/BuEc0dMPdghcx83gZj8jridTbG87YENOg7hXUYr+eVmJdEM8kcMZeKxvhPByeK5uqPB5MdU9xv01wZOpQBFoa8HhTNDjMfwTB7d6CxSZi8YbZ6WBGP821yAflWslPmrbLLOW1HwIhrFSZs1oKjezP0eM3lIvCqaBKyKmXLciqN5jy/EhwuAUHTUEe0OWfwVHWF6IL5rujNzroMZvqb0+1J0SQMDzyHgkGlGJ3jEF5HGSu6IDFXxztFN4pmh58VTanzXjAztaEXF5Iw1M75znn/lmhyZJXomrLUGcv1g/ePM/MCfSqiWSPe9eE2ebDonkxFpxaEuwoz0oeAMaI7wN5/cXJPk38Bz1zMtWby+i0AAAAASUVORK5CYII=",nb={"open-eye":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAelQTFRFAAAAmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYMxdw0QAAAKN0Uk5TAB1Pq7bV/v/5xZFHCw6h6NOCOQMRbNGwTgdo7PPOlIAlJDOSoNr7w0FL1+ubRRgCIVqz/CIKkPbpexsBPOFcJ/WDCBm5mULqye/BYocVtyxQDDIFjCpyslXi8j70d17PH5cEU+54V4anWUmeUmuatBS4c6ac58cgW/1Gsc0PE+Znn+S1Ott9LfAaEmlRFi+kxiNUNEhtK7p6nUzWcWEu2aKt90TEJrgAAALFSURBVHic7VZrWxJBFF5pdbxkRWkKSolGRYmhZBkYoWSIRaFkXjIx7GIWXSktzS6opVlJZvf7L+3MLpszuzvL9jz1bd8vMO8579mZMzPnDMcZMGDgPyPPtI7PL0CosIgvLln/l+JS04aNiMIm8+YtuuVl5VuRCioqLbrkFmuV4F9t27a9xg6ordvh2ClQu3br0Dv3YNe99a4GgtznbmzCtIffn0PefOAg+LUc8iosvtZ6PI3Dfk39ERv4BNra1a3Bo3gWHc1s/bEQOHS62Q7OMDh0NbDMxwPw+ROaU4ychAiOU+pGK9jCUTnb3RMkh7HTkIlAr5r+TCFC+cokt3dW97mIsa8f5jlQq9T3DIJeLfJZhIbOxQhiGCLEu+VuvZCe0IjazDh8As4nCGIUCF6+F7B/FyKqem4Yb95FkrkExGXaaQwyc0Vdz43jAAHqaF0F5hpJmIBIMvRiAHSdpCw3IGTZ2vgmJOBWTC6UcFsIEKY4Lxy5O2vDFEJ3R1h67p54mycocvI+QqPS4AFcICtT78+Wg3GankJo+mH2vyugEWCmhRkgLgXAS3hEL+HxkxnhN+F8KhUkegl+cgmcF5KYppI4i+bmn9nt/WMFkv45pV+AJFYQ4yh4lFMeVfKK2EFaLWnYxkWSwQdpkiReyPTKg7REfZCLw1F+SRJddIBcR5l7BTsRIi/DxACpf01eJnw0lxWFTXGdI00eSa7nOmcLSoYgYkmbsAdDdEF5gwvKilKvWtIyb1eTK3pLWraoypNDI5LGRfUdy1yJy3pao/k4Hbis17AdxMZiZjTR4HuckpRGY4HWVoxbW+jDgtLU+tGTu7UBPn0WmmuKaq4+d2Of0FzTGabwDyzz4j0YXP7yFXd3+7dV83exvU8v5ZZjLKo/MKZ0PjAwSk0/FE+c2URuHYW86E8ePzZ+FfF1JZqZN2DAwL/Ab6ixeYt2jKORAAAAAElFTkSuQmCC","closed-eye":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAblQTFRFAAAAmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYZNB/+AAAAJN0Uk5TAB1Pq7bV/v/5xZFHCw6h6NOCOQMRbNGwTgdo7PPOlIAlJDOSoNr7w0FL1+ubRRgCIVqz/CIKkPbpexsBPOFcJ/WDCBm5mULqye/BYocVtyxQBYwqclXiMvLkrF7PDB/9U+5XhqdZnlJrtBS4ppznW0axzQ/mtRoSURYvScYjMFQ0K7p6nUzWsn1xYS5t2aI6BK33FoqWFQAAAl5JREFUeJxjYBgFo2AU0BgwMjGzsLKxs3NwsnBx85ComZeJj58dBQgICgkTrV1EVIwdCxCXkCRKu6SUNFi9jKycvIIiECgpq6iqgYXUNYjQr6kFUqqto6uHJKhvYGgEEjZmMSGg3dTMHKjOwtIKQ8baRgfkDFs7vPrtZYFqHBydsMs6u4Bc4WqKW7+bO1CBhwFuBZqeQAVeerikvR2A1vvgdaKvH9AEVX/sklJAOc8AvPoZGAKDgCHhEIxNKoSDnZ2VUCADAzMU6M4wJUyJ8AigfgyTmSOjrNHFooEmxMSiiwYDg8c9DsPYeHZ2DAMYEoB+ZUGPC2D8JfpiugurAQxJQBOSUYVSgCGTiqkShwEMaUAT0pEFmIACGVgU4jJAMhNooQiCnwUMgOxAEgxgsAImuRwEN5edPQ8zAPEZwJAPlEmAcQqAGUgKqzLcBjAUsrMXFUPZug7kGRADMwDkhRISvWCH7AUGK2AglpIUiGXAQBRH4gcAo1GUBAMkS4HRWI4sAkpI+cQbAEpIFahCMcCkXEmsAViSMkMVMCbcMTMDVgOqgfprMAo27NkZmwHYszO0QKlFE3Suc0YTsa4HFSgNmPopL9KghSp64KAC31JQodqIS1oCVKyX4ikXNVVBxboCbgWQikUQRyXq3ASqWHLxVCzAqo0LVLW5N5dhStm0GBOu2oCgtQ1cueaiVK7WBobt4Mq1FD2asADJDkj1HlHT2QWq3RW7ewR7IdV7UQVh7SBQjr2BUUhkAwMEeJn6MJo4/ROI1g4BjAETWUCNjUmcLMrceEN+FIyCUUANAAAY0GNbcYUV2AAAAABJRU5ErkJggg==",king:fq,king2:hq,king3:pq};function mq(e){rf(e,"svelte-1cdflqk",".nvjs-eye.svelte-1cdflqk{width:20px;height:20px;float:right;margin-right:2px;margin-left:7px}.nvjs-eye.svelte-1cdflqk:hover{filter:brightness(1.25)}")}function Iq(e){let t,r,n;return{c(){t=It("div"),me(t,"class","nvjs-eye svelte-1cdflqk"),me(t,"style",e[0])},m(i,o){tt(i,t,o),r||(n=Oo(t,"click",aZ(e[1])),r=!0)},p(i,[o]){o&1&&me(t,"style",i[0])},i:Tr,o:Tr,d(i){i&&ze(t),r=!1,n()}}}function yq(e,t,r){let n,i,o,{gridId:s}=t,{ov:a}=t,{props:c}=t,{height:u}=t,d=Er.instance(c.id);function g(){r(7,n=a.settings.display!==!1)}function f(){d.emitSpec("hub","display-overlay",{paneId:s,ovId:a.id,flag:a.settings.display===void 0?!1:!a.settings.display})}return e.$$set=m=>{"gridId"in m&&r(2,s=m.gridId),"ov"in m&&r(3,a=m.ov),"props"in m&&r(4,c=m.props),"height"in m&&r(5,u=m.height)},e.$$.update=()=>{e.$$.dirty&8&&r(7,n=a.settings.display!==!1),e.$$.dirty&128&&r(8,i=n?"open":"closed"),e.$$.dirty&288&&r(0,o=`
    background-image: url(${nb[i+"-eye"]});
    background-size: contain;
    background-repeat: no-repeat;
    margin-top: ${(u-20)*.5-3}px;
    /* FIX 'overflow: hidden' changes baseline */
    margin-bottom: -2px;
`)},[o,f,s,a,c,u,g,n,i]}class Cq extends Ln{constructor(t){super(),Hn(this,t,yq,Iq,yn,{gridId:2,ov:3,props:4,height:5,update:6},mq)}get update(){return this.$$.ctx[6]}}const vq=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVQAAAC0CAMAAAD8fySxAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAvpQTFRFAAAA///////////////+/////////////////////////////v/////////////////////////////////////////////////////////////////////////////////+//////////7////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7////////+///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+///////////+//////////////////////////////////7////+////poUcigAAAP50Uk5TAD1AGUAtKyYkC/+5/5qTrNlmOjU5b2nMT+EDZMFjRT//7MT/aI+NGhUIM+YFusm38+0srmrkTcVMH/7Ql2yZa1RwbYwU+dcBYEODjlyKG+7dArTj3sbl6+KbWHE4MtLnB0ZHQnOGHbgKsCV0e9qi8A78nJ/7doIudWL0EksM8ngcIO/3F+p6ktbHi2Gdqzdyy/xVTsB9oX/9IanTyCemlYE2fBAPUUhSHii2pYTgz9TfRJ6qI4BJVoh39hO1U9gFW/lfSloqMMrcXaCykTQYeV69iaeUlpCYszs8r+jpBIUphyKxV6TRzTGovNvOo60b+sIwL1lQu7/VQRaEK34VtNnHAAAOsUlEQVR4nO2debxVVRWATxIqVwiNUAEzyKEgUEJTccoJUBwCsnBIRVNBFIGcQRMjE8kpzACnUFMTFedUUiMnHFIUCi0snzln2qCVTb9f77x3731nWHuvb+97zn39sb8/FPTstdfaZ9+z1jl77bWjKBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCDQCB9Zy0aXAqV9tP1fXZPXr23tvYN1/IxbV1JAoKsuyoVuFSvrOUrrbhcX0yPZ4GP69W309LNufSh+Az/xJj6udNfLSdongAG9kw02hFZv5GXcxlB6n75e4o30U/rbxEnaJ4EFmyYbfMp0Vf/0Xwd4GfdpoxKbpf62uZd0M1s4jYHGlpq0Vj6TbPBZYHIbAz1sGwS0ifncYA/hNoZkOuiftWgrF2lb6xYMTbf4PDR8mIdt20DZ23rItvIFtcvtHKT10S3YPt1iE2j4Du6mDd+RiS58oirOP2anQqWlnX8U7Zz4X8Kvvs4u7rbtmmje8YjOxydfdBdth7jr3bC0XpqoVot2TzfZAygQs6ezaXuNYJILn6iq848ZOYpK2xtIyzi+fZjlHoHqaCh5D2fJGvtWctFLnv2otP1zTdt+0alf3AHpJl2g6c6B6sAvWaQlTC5+okbrEYPGjIXSxumyhmbbDCUaeASq0nNFemj31kW58mVkUT8o7UBd1FeybbZHGjgHqqO+mmlv+D2OL36imt11SoeDWM+DwdgcnG10MGgU4xioHkJktj6XDnUTS/gatIhFHYcBSTkjDtVaVH+zjoHq4cyw8T5vagrkXT3miAlE2n5A0pHZRkdBFdwC1a/XmvVP/FPgaCepjH2hRazzY4CgA7KNjoUauAWqlvflpLcqY6JGE6FFlQGTgLTjdDk554/dv1OgOhmadbyLUApz/jEnAGlTKmrQm3P+UbQVU8ApUD2RySxlopJ39SpTp6nSBk/XxXwj3+wkpoBLoNrlZCbzFAeZmNj5q+9TVU5VpZ0GpAgRzOlQAYdZtSeTWMpEjc6w9pn+njNjpiaNhIZH5Zudmb9KvNE8UD3rm0CTVs52GiwK+VBfZ39N2qlAyKx8s3Ng/2dis05hAr/VzWWsMOBDfQezv61I66nLEJx/FMFPdPizZ99zmcDvOI0V5iDWe5XzFGlzdBHnS+02Yt3PpVZ9N9PQ4DVKmqjdtH7TjLBP1bHA+V8gNazHP7Yv/5XKhdQsbbG/aiwJEj24SB+FFLtapa0NJFwsNTyb9X4JtKru+Oz3qKSJqjj/PN+bZZM2D0gQnH8UXcp6Hw+t+j4Td5nraEHs4Zxwo39gkzYfWHKs1HBdNgowUB3EhJU1UZPOn70CLFhokXa53l50/or774iW10ZGXYgsqcx3Hy4GWKXPcLlF2hWpK8UH2pVyy51Y5yhQHb4AyRpa1kR1ePOvc5VRmrfzj6KrWd8oUP0hk7XIZ8AI17D+UxxnlHYVaG34Kntt7kJxnpNA9Tr2JjH0R35DppMNkjXaLD3NJO16IOEGuemNrH8SqBJv2cpozyHTmcsUSDPRJO2EjmuMXu/HctObWNcgUB2cXuw3RarlTdRoMbMlgykL+Ga9qcH5S49j6b6AQHVbY98pgbf4DpnOrfowZIjDG1MW8BK9uTEr8zbWvRqojro9viw/PzP/pcSJ6uP8Y+6QxQEPcadJlbtYz2qguhuTc4z/oGnYUvRs7wLyfLsbGGNcZruHDYYaqF6CxJQ4UVGKHrdtO9DwJyZV7mUda4GqcQNBmvsaGjY7c5kKecQs4PsrUj5tGoPzj6JhrGMtUAX5ca0s/WlDw2bnAWaJwIOCNLAobHL+7G2sogaqk1k6uros1Ajuzr+GlAUcf763f8C0bcl4KHGZ+XmuBKp3IuVLnag/QyrILMuL+7ne6iSzMmwfyblWg/ZKLvab7y9elfFBcv40ByCfBWxeEu3YQ2TJsbmF9WsNVO/LXy885EudqNHDzA6ZM7LSHgGNHjEr8yjr9jGLPXCxf8sChs5MPj/fgVwW8PGg0XCzMo+zbi23JToaSSh3osL4w0R2kxxwEmbnz3KwhV4T9M2mo8tsUcTQmbmd2WEgmwV8pd5kuU2bJ1CvlmjoSSRgRLkTFc4NI5nFZpBk+pRNnadRp3eZBbCd/b8oYujMPIOUiJFDggETktJmATmn29QRXLeAebLfgNqPeLaYwTPRkPOPWZGUdqT10vaYyuZloudQn+ZA9Xlr1zW0xKVGWZnoC9ToyDM1mbC+O2hwjk0d+MMxBars40HZE7VB5x+zKCGtB7DIqg58xJsC1VXV/2+fHr8savBMgM15CjMSCevmuhp1lBd39iXC8Ajpghb7S5+ojTr/mJUd4kTnn542VucvLJiJ/tEQqJ4n6peV8Kvihk9mEBi0DLlvFLPrCevPgubKpgWWpi8HqtctJW1Ln6jQ2yqsrkkjm/aVtZBqBqIwP5MTXg5U88kYEi8UOoAStbhQ+QRqp54FbCovkRwiW25bRHfJioHqYJSOfrKYcVgoLyIbTNQmT+3m72y9ug2786dru2KgugFq2kNqWixjUoOT/bOAOKWnz2qXBkr2qBv29LJDMVKgir5iNGGiFuH8Y6ouHRSXsuYLx6QLZJlusRCokiQuoc5A8QxCiui0ZwHLZdDSqDsWV8dXqUsPQqCKFvubMFHRzvy9F4GLVsXSyHq7WgOBPRnzgeqvUTtDZmyhkI9C10yaCq6Ks4BJaUnF+UfRb4AQKVAF++GbM1HR58tJie2IZi+2JkJFUDXnT91/Lj+eLfZbFnKLY4yuR58omvAS0Pc083e3BGC3/hGgs3zuAKprs6AZE5U4/8Wt1+0CrtsaDceJulLg1lQqv800YrXn1NCjCEhZnjjp4HekckUv8sO9X1eKVVLOBKovgybdF9xdyihmIM7/4fhCsi1gyQvgIlAAiVVSbkm1GYgW+8HPpABeAZq0paGPMj18XRcLfq8rJQdm2Y7S6Zi9Sd/NmajRq0CV9tWS14jWOrrzN75CZEZ1w2STXO05kdfLGMI8YJX91uqlbxC1Vd4kWsUvu+or1cpkC5Qt1KSJSpz/A9VrdyB6q6CnGqqknApUUe25qwsfP5G3gCr1V5flRPEUwvMWlYABHxDTgeodpEGTJmrN+Vs/UD9cu5i9PiqgYuGoknIyUEXFX98ufPhkSE2+Z+pX/4GoroBmC6uk3BGoosX+HVsKHz4Z4vw7ciV5gpAR4vxpJeWW+vWvk8st6VfF8o6uy4GJy1nymI0/Mr1QKcV6oIpqzzVtohLnPy5xPdl0buddphiqpFwPVFGZUlwiqFGqacs1P5Vz1nGsmAoHV2WvcGWFSZU04henrHo1zc5aWtHD2qZN1GgZGIbnkg0Wsm1OZi5liqmVlGNqgWqm8FJ/8c/vFTx0ZsiXnUGpFhcQay2syxRDlZSrgSpa7G/eREULEOmNEn/6MzHXCHP+sJJyNVBF1bTXFDtwNqbo2ozJNJEzwChLqGbI/bcHqigdvaXAUbNDnP+LmTYzZxsvBYlD+DMRqqTcEl9JNm1XXi1y2OyQPUu53dssJ98AdP6wknJbdZu/kCsfL3LY7JDvZU9mG02bQawwsDFVzVxJOeHc4wP5BpFuny502OwQ539YrtVlxAwD0PmLlZTzxL+i98iFfy1y1BTWAH3yZ6VMGkDsEKHOvzUgJuLehrXnxun9FQdw/k8IzS4mBotg588qKV8Jv7w28YmKqvFLTyOUWVEn+YJzM1fuTVXwZpWXUO25/osLGzHA+1XdbLwiNdxct0TGoaD2u+L4JP/SvTVQJZlzTZ2o0QeSqhnE8+fGgswKceX6b1w5VEn5fLLYv3VR44UgRSDeEluyjcp5JnPl6OHRNczpBxcVNFwMUq5EPiht1EhHk9sZQU8IjPjpPDHWJ9iQgkYLAl6a3zE0fdDB5A4cDrONxsKDFOpkH2K1qdvciUqcv/Gd2SuzwsH5F5W7Ufl74wPlAjmKx1hgkO2qz+B0SEHDiwztNHei1p2/QP2ntMzYenn+YhUH59/Y23AHzzc6So6MBjqZQzyfzIp1XNRrf2ynfBC/fXWaPFEbcP5tTBTMtFvt4vyjqMV9BPP8o9FBcqVeVc88FFMszbs6W/iGk3qwlKKdtRobImeI87eu7LCqfAkck+4+hGItWcfi+UxlQmbayzYBV+W+uinrKde6KQhP6bDxz0YGyIfaOXy29PJHrRLEbx4WrndTEH0ssdL0iYrO4XvfKsE1s8J8MIiIlg+vrzPu08Dw+AHWIRYoR6Tvygazipvz9/GEGZo/UVMldQ2sr4j4l1NmhZvzL8D9b+o7NN4QlbfRhOBTwWNWuaqYu+1uwX8nTFTy41LPwJjpslzt6Pw9YrY04oF35UK2RX2gSvm3g5E3uqoIKynnaXNhML24UIjzNx6OVGcaKQRQxdH553M93OoRGc9nKBFwCK/m/GNWWCXUYuD4YTjd0fnjSsoynTFRo3hBRLn1DwExE3BmxeHOKjZUM8daTrQkiPNHyce9qVP22MXEKimLdMpEJTuP0EltqBBAjMeRrw1shgEb4IsnPk1H21R+CJLUD5opHbOi4J+12SkTFX2t6IokjQVVWGJuclfSv7Yj3K9RMOC72gLhsBkJdoaEu/NP7zB0qtXQORM1mqNrNpLKQpkVV3go6e3+nVYYC4M4/55UGMrQ8drCXK+k7PbW/6FPX43zH6DaqVhashCAyfz/+qi52Gks6zh+DS8KcpTea1gaKWHg4fxpJeUsnTRRxUMfs3NsGBcHdoi0+Kh5RkoEfff3un8FYHL+iYGlzj9GLwTg4/ytlZTNI9xZE5Us/85xkacevXibl5pep+TO8+qqcYjzd9ofr37yztWQZLBKyik6baI+BpS7x0midtzxfD9Fh+QlaW8B3L8WzDwwqPc6SVxo3M/UPgi7+Sm6GiiaxpSmXD7zgXbqGdppnrJLsx10aIFVUk6iLwGVBTib3MX5xxxgfUz7OX+PhM13HNUOBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQOD/kv8BDVonljy6Jq4AAAAASUVORK5CYII="];function bq(e){rf(e,"svelte-ccr182",".nvjs-legend-line.svelte-ccr182{pointer-events:all;position:relative;user-select:none;border-radius:3px;padding:2px 5px;margin-bottom:2px;width:fit-content}.nvjs-logo.svelte-ccr182{width:35px;height:20px;float:left;margin-left:-5px;margin-right:2px;opacity:0.85}.nvjs-ll-data.svelte-ccr182{font-variant-numeric:tabular-nums}.nvjs-ll-value{margin-left:3px}.nvjs-ll-x{margin-left:3px}.nvjs-eye.svelte-ccr182{width:20px;height:20px;float:right;margin-right:2px;margin-left:7px}.nvjs-eye.svelte-ccr182:hover{filter:brightness(1.25)}.king-icon.svelte-ccr182{padding-left:8px;padding-right:8px;margin-right:4px;filter:grayscale()}")}function XN(e,t,r){const n=e.slice();return n[45]=t[r],n[47]=r,n}function FN(e,t,r){const n=e.slice();return n[45]=t[r],n[47]=r,n}function KN(e){let t,r,n,i,o,s,a,c,u,d,g,f=e[1].main&&e[2].showLogo&&VN(e),m=e[1].main&&zN(e),v=e[8]&&!e[3]&&YN(e),p=!e[8]&&!e[3]&&QN(e),I=e[3]&&qN(e);return{c(){t=It("div"),f&&f.c(),r=Sn(),n=It("span"),i=new jw(!1),o=Sn(),m&&m.c(),s=Sn(),v&&v.c(),a=Sn(),p&&p.c(),c=Sn(),I&&I.c(),i.a=o,me(n,"class","nvjs-ll-name"),me(t,"class","nvjs-legend-line svelte-ccr182"),me(t,"style",e[15])},m(h,y){tt(h,t,y),f&&f.m(t,null),qt(t,r),qt(t,n),i.m(e[20],n),qt(n,o),m&&m.m(n,null),e[33](n),qt(t,s),v&&v.m(t,null),qt(t,a),p&&p.m(t,null),qt(t,c),I&&I.m(t,null),e[35](t),u=!0,d||(g=[Oo(t,"mousemove",e[21]),Oo(t,"mouseleave",e[22]),Oo(t,"click",e[23]),Oo(t,"keypress",null)],d=!0)},p(h,y){h[1].main&&h[2].showLogo?f?f.p(h,y):(f=VN(h),f.c(),f.m(t,r)):f&&(f.d(1),f=null),(!u||y[0]&1048576)&&i.p(h[20]),h[1].main?m?m.p(h,y):(m=zN(h),m.c(),m.m(n,null)):m&&(m.d(1),m=null),h[8]&&!h[3]?v?v.p(h,y):(v=YN(h),v.c(),v.m(t,a)):v&&(v.d(1),v=null),!h[8]&&!h[3]?p?p.p(h,y):(p=QN(h),p.c(),p.m(t,c)):p&&(p.d(1),p=null),h[3]?I?(I.p(h,y),y[0]&8&&je(I,1)):(I=qN(h),I.c(),je(I,1),I.m(t,null)):I&&(Pn(),We(I,1,1,()=>{I=null}),_n()),(!u||y[0]&32768)&&me(t,"style",h[15])},i(h){u||(je(I),u=!0)},o(h){We(I),u=!1},d(h){h&&ze(t),f&&f.d(),m&&m.d(),e[33](null),v&&v.d(),p&&p.d(),I&&I.d(),e[35](null),d=!1,oa(g)}}}function VN(e){let t;return{c(){t=It("div"),me(t,"class","nvjs-logo svelte-ccr182"),me(t,"style",e[18])},m(r,n){tt(r,t,n)},p(r,n){n[0]&262144&&me(t,"style",r[18])},d(r){r&&ze(t)}}}function zN(e){let t;return{c(){t=It("span"),me(t,"class","king-icon svelte-ccr182"),me(t,"style",e[16])},m(r,n){tt(r,t,n)},p(r,n){n[0]&65536&&me(t,"style",r[16])},d(r){r&&ze(t)}}}function YN(e){let t;function r(o,s){if(o[1].settings.legendHtml)return Sq;if(!o[10]&&!o[14])return wq;if(o[14]&&o[9].length)return Aq;if(o[9].length)return xq}let n=r(e),i=n&&n(e);return{c(){t=It("span"),i&&i.c(),me(t,"class","nvjs-ll-data svelte-ccr182"),me(t,"style",e[19])},m(o,s){tt(o,t,s),i&&i.m(t,null)},p(o,s){n===(n=r(o))&&i?i.p(o,s):(i&&i.d(1),i=n&&n(o),i&&(i.c(),i.m(t,null))),s[0]&524288&&me(t,"style",o[19])},d(o){o&&ze(t),i&&i.d()}}}function xq(e){let t,r=ai(e[10](e[9],e[7])||[]),n=[];for(let i=0;i<r.length;i+=1)n[i]=UN(XN(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=fi()},m(i,o){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(i,o);tt(i,t,o)},p(i,o){if(o[0]&16778880){r=ai(i[10](i[9],i[7])||[]);let s;for(s=0;s<r.length;s+=1){const a=XN(i,r,s);n[s]?n[s].p(a,o):(n[s]=UN(a),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&ze(t),cu(n,i)}}}function Aq(e){let t,r=e[14](e[9],e[7],e[24])+"",n;return{c(){t=new jw(!1),n=fi(),t.a=n},m(i,o){t.m(r,i,o),tt(i,n,o)},p(i,o){o[0]&17024&&r!==(r=i[14](i[9],i[7],i[24])+"")&&t.p(r)},d(i){i&&(ze(n),t.d())}}}function wq(e){let t,r=ai(e[9]),n=[];for(let i=0;i<r.length;i+=1)n[i]=JN(FN(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=fi()},m(i,o){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(i,o);tt(i,t,o)},p(i,o){if(o[0]&16777728){r=ai(i[9]);let s;for(s=0;s<r.length;s+=1){const a=FN(i,r,s);n[s]?n[s].p(a,o):(n[s]=JN(a),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&ze(t),cu(n,i)}}}function Sq(e){let t,r=e[1].settings.legendHtml+"",n;return{c(){t=new jw(!1),n=fi(),t.a=n},m(i,o){t.m(r,i,o),tt(i,n,o)},p(i,o){o[0]&2&&r!==(r=i[1].settings.legendHtml+"")&&t.p(r)},d(i){i&&(ze(n),t.d())}}}function UN(e){let t,r=e[24](e[45][0])+"",n,i,o;return{c(){t=It("span"),n=uu(r),i=Sn(),me(t,"class","nvjs-ll-value"),me(t,"style",o=`color: ${e[45][1]}`)},m(s,a){tt(s,t,a),qt(t,n),qt(t,i)},p(s,a){a[0]&1664&&r!==(r=s[24](s[45][0])+"")&&Nw(n,r),a[0]&1664&&o!==(o=`color: ${s[45][1]}`)&&me(t,"style",o)},d(s){s&&ze(t)}}}function kq(e){let t;function r(o,s){return o[45]!=null?Nq:Bq}let n=r(e),i=n(e);return{c(){i.c(),t=fi()},m(o,s){i.m(o,s),tt(o,t,s)},p(o,s){n===(n=r(o))&&i?i.p(o,s):(i.d(1),i=n(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&ze(t),i.d(o)}}}function Bq(e){let t;return{c(){t=It("span"),t.textContent="x",me(t,"class","nvjs-ll-x")},m(r,n){tt(r,t,n)},p:Tr,d(r){r&&ze(t)}}}function Nq(e){let t,r=e[24](e[45])+"",n,i;return{c(){t=It("span"),n=uu(r),i=Sn(),me(t,"class","nvjs-ll-value")},m(o,s){tt(o,t,s),qt(t,n),qt(t,i)},p(o,s){s[0]&512&&r!==(r=o[24](o[45])+"")&&Nw(n,r)},d(o){o&&ze(t)}}}function JN(e){let t,r=e[47]>0&&kq(e);return{c(){r&&r.c(),t=fi()},m(n,i){r&&r.m(n,i),tt(n,t,i)},p(n,i){n[47]>0&&r.p(n,i)},d(n){n&&ze(t),r&&r.d(n)}}}function QN(e){let t;return{c(){t=It("div"),me(t,"class","nvjs-eye svelte-ccr182"),me(t,"style",e[17])},m(r,n){tt(r,t,n)},p(r,n){n[0]&131072&&me(t,"style",r[17])},d(r){r&&ze(t)}}}function qN(e){let t,r,n={gridId:e[0],ov:e[1],props:e[2],height:e[6].height};return t=new Cq({props:n}),e[34](t),{c(){In(t.$$.fragment)},m(i,o){Qr(t,i,o),r=!0},p(i,o){const s={};o[0]&1&&(s.gridId=i[0]),o[0]&2&&(s.ov=i[1]),o[0]&4&&(s.props=i[2]),o[0]&64&&(s.height=i[6].height),t.$set(s)},i(i){r||(je(t.$$.fragment,i),r=!0)},o(i){We(t.$$.fragment,i),r=!1},d(i){e[34](null),qr(t,i)}}}function jq(e){let t,r,n=!e[11].noLegend&&e[1].settings.showLegend!==!1&&e[13]&&KN(e);return{c(){n&&n.c(),t=fi()},m(i,o){n&&n.m(i,o),tt(i,t,o),r=!0},p(i,o){!i[11].noLegend&&i[1].settings.showLegend!==!1&&i[13]?n?(n.p(i,o),o[0]&10242&&je(n,1)):(n=KN(i),n.c(),je(n,1),n.m(t.parentNode,t)):n&&(Pn(),We(n,1,1,()=>{n=null}),_n())},i(i){r||(je(n),r=!0)},o(i){We(n),r=!1},d(i){i&&ze(t),n&&n.d(i)}}}function Tq(e,t,r){let n,i,o,s,a,c,u,d,g,f,m,v,p,I,h,y,C,x,A,w,S,{gridId:k}=t,{ov:R}=t,{props:j}=t,{layout:_}=t,O=is.instance(j.id),P=Er.instance(j.id),N=!1,B,E,M,G=!1,T=!0;ul(()=>{P.on(`${n}:update-ll`,L),P.on(`${n}:grid-mousedown`,z),P.on(`${n}:select-overlay`,z)}),sa(()=>{P.off(n)});function L(){r(8,w=R.settings.display!==!1),M&&M.update()}function W(U){U.clientX<m.x+m.width+35&&!N&&setTimeout(()=>{F(),r(3,N=!0)})}function X(U){setTimeout(()=>{F(),r(3,N=!1)})}function V(){P.emit("select-overlay",{index:[k,R.id]}),r(26,G=!0)}function z(U){r(26,G=!1)}function ee(U,K=A){return U==null?"x":typeof U!="number"?U:U.toFixed(K)}function D(U){return Object.values(U).find(K=>K.scaleSpecs.ovIdxs.includes(R.id))||U[_.scaleIndex]}function F(){B&&r(6,f=B.getBoundingClientRect())}function Z(U){ao[U?"unshift":"push"](()=>{E=U,r(5,E)})}function $(U){ao[U?"unshift":"push"](()=>{M=U,r(12,M)})}function J(U){ao[U?"unshift":"push"](()=>{B=U,r(4,B)})}return e.$$set=U=>{"gridId"in U&&r(0,k=U.gridId),"ov"in U&&r(1,R=U.ov),"props"in U&&r(2,j=U.props),"layout"in U&&r(25,_=U.layout)},e.$$.update=()=>{var U;e.$$.dirty[0]&3&&(n=`ll-${k}-${R.id}`),e.$$.dirty[0]&2&&r(20,i=(U=R.name)!=null?U:`${R.type||"Overlay"}-${R.id}`),e.$$.dirty[0]&4&&r(32,o=parseInt(j.config.FONT.split("px").shift())),e.$$.dirty[0]&100663302|e.$$.dirty[1]&2&&r(31,s=`
    font: ${j.config.FONT};
    font-size: ${o+(R.main?5:3)}px;
    font-weight: 300;
    color: ${j.colors.textLG};
    background: ${G?j.colors.back:j.colors.llBack};
    border: 1px solid transparent;
    margin-right: 30px;
    max-width: ${_.width-20}px;
    overflow-x: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    border-color: ${G?j.colors.llSelect:"auto"} !important;
`),e.$$.dirty[0]&4&&r(30,a=`
    background: ${j.colors.back};
    border: 1px solid ${j.colors.grid};

`),e.$$.dirty[0]&6|e.$$.dirty[1]&2&&r(19,c=`
    font-size: ${o+(R.main?3:2)}px;
    color: ${j.colors.llValue}
`),e.$$.dirty[0]&2&&r(8,w=R.settings.display!==!1),e.$$.dirty[0]&256&&r(27,S=w?"open":"closed"),e.$$.dirty[0]&16&&r(6,f=B?B.getBoundingClientRect():{}),e.$$.dirty[0]&134217792&&r(17,d=`
    background-image: url(${nb[S+"-eye"]});
    background-size: contain;
    background-repeat: no-repeat;
    margin-top: ${(f.height-20)*.5-3}px;
    margin-bottom: -2px;
`),e.$$.dirty[0]&64&&`${f.width}${f.height}`,e.$$.dirty[0]&4&&r(29,y=j.cursor.values||[]),e.$$.dirty[0]&536870915&&r(9,C=(y[k]||[])[R.id]||[]),e.$$.dirty[0]&776&&r(16,g=`
    background-image: url(${nb.king3});
    background-size: contain;
    background-repeat: no-repeat;
    margin-left: ${N||!w||!C.length?7:3}px;
`),e.$$.dirty[0]&32&&(m=E?E.getBoundingClientRect():{}),e.$$.dirty[0]&1073741832|e.$$.dirty[1]&1&&r(15,v=s+(N?a:"")),e.$$.dirty[0]&3&&r(11,p=O.getLegendFns(k,R.id)||{}),e.$$.dirty[0]&2048&&r(10,I=p.legend),e.$$.dirty[0]&2048&&r(14,h=p.legendHtml),e.$$.dirty[0]&33554432&&r(28,x=D(_.scales)),e.$$.dirty[0]&268435456&&r(7,A=x.prec),e.$$.dirty[0]&1664&&I&&C&&!I(C,A)&&r(13,T=!1)},r(18,u=`
    background-image: url(${vq[0]});
    background-size: contain;
    background-repeat: no-repeat;
`),[k,R,j,N,B,E,f,A,w,C,I,p,M,T,h,v,g,d,u,c,i,W,X,V,ee,_,G,S,x,y,a,s,o,Z,$,J]}class Eq extends Ln{constructor(t){super(),Hn(this,t,Tq,jq,yn,{gridId:0,ov:1,props:2,layout:25},bq,[-1,-1])}}function Rq(e){rf(e,"svelte-16ib1si",".nvjs-legend.svelte-16ib1si{pointer-events:none}")}function e2(e,t,r){const n=e.slice();return n[9]=t[r],n[11]=r,n}function t2(e){let t,r,n=ai(e[5].panes()[e[0]].overlays),i=[];for(let s=0;s<n.length;s+=1)i[s]=r2(e2(e,n,s));const o=s=>We(i[s],1,1,()=>{i[s]=null});return{c(){t=It("div");for(let s=0;s<i.length;s+=1)i[s].c();me(t,"class","nvjs-legend svelte-16ib1si"),me(t,"style",e[4])},m(s,a){tt(s,t,a);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(t,null);r=!0},p(s,a){if(a&39){n=ai(s[5].panes()[s[0]].overlays);let c;for(c=0;c<n.length;c+=1){const u=e2(s,n,c);i[c]?(i[c].p(u,a),je(i[c],1)):(i[c]=r2(u),i[c].c(),je(i[c],1),i[c].m(t,null))}for(Pn(),c=n.length;c<i.length;c+=1)o(c);_n()}(!r||a&16)&&me(t,"style",s[4])},i(s){if(!r){for(let a=0;a<n.length;a+=1)je(i[a]);r=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)We(i[a]);r=!1},d(s){s&&ze(t),cu(i,s)}}}function r2(e){let t,r;return t=new Eq({props:{gridId:e[0],props:e[1],layout:e[2],ov:e[9]}}),{c(){In(t.$$.fragment)},m(n,i){Qr(t,n,i),r=!0},p(n,i){const o={};i&1&&(o.gridId=n[0]),i&2&&(o.props=n[1]),i&4&&(o.layout=n[2]),i&1&&(o.ov=n[9]),t.$set(o)},i(n){r||(je(t.$$.fragment,n),r=!0)},o(n){We(t.$$.fragment,n),r=!1},d(n){qr(t,n)}}}function n2(e){let t=e[5].panes()[e[0]],r,n,i=t&&t2(e);return{c(){i&&i.c(),r=fi()},m(o,s){i&&i.m(o,s),tt(o,r,s),n=!0},p(o,s){s&1&&(t=o[5].panes()[o[0]]),t?i?(i.p(o,s),s&1&&je(i,1)):(i=t2(o),i.c(),je(i,1),i.m(r.parentNode,r)):i&&(Pn(),We(i,1,1,()=>{i=null}),_n())},i(o){n||(je(i),n=!0)},o(o){We(i),n=!1},d(o){o&&ze(r),i&&i.d(o)}}}function Oq(e){let t=e[3],r,n,i=n2(e);return{c(){i.c(),r=fi()},m(o,s){i.m(o,s),tt(o,r,s),n=!0},p(o,[s]){s&8&&yn(t,t=o[3])?(Pn(),We(i,1,1,Tr),_n(),i=n2(o),i.c(),je(i,1),i.m(r.parentNode,r)):i.p(o,s)},i(o){n||(je(i),n=!0)},o(o){We(i),n=!1},d(o){o&&ze(r),i.d(o)}}}function Gq(e,t,r){let n,{id:i}=t,{props:o}=t,{main:s}=t,{layout:a}=t,c=ns.instance(o.id),u=Er.instance(o.id),d=0;u.on(`legend-${i}:update-legend`,g),sa(()=>{u.off(`legend-${i}`)});function g(){r(3,d++,d)}return e.$$set=f=>{"id"in f&&r(0,i=f.id),"props"in f&&r(1,o=f.props),"main"in f&&r(6,s=f.main),"layout"in f&&r(2,a=f.layout)},e.$$.update=()=>{e.$$.dirty&4&&r(4,n=`
    left: ${a.sbMax[0]+5}px;
    top: ${(a.offset||0)+5}px;
    position: absolute;
`)},[i,o,a,d,n,c,s]}let Pq=class extends Ln{constructor(t){super(),Hn(this,t,Gq,Oq,yn,{id:0,props:1,main:6,layout:2},Rq)}};function i2(e){let t,r,n,i,o,s,a,c,u,d,g,f={id:e[1],props:e[2],layout:e[0],main:e[3]};r=new iq({props:f}),e[10](r),i=new Pq({props:{id:e[1],props:e[2],layout:e[0],main:e[3]}});const m=[Mq,_q],v=[];function p(C,x){return C[9].length?0:1}s=p(e),a=v[s]=m[s](e);const I=[Hq,Zq],h=[];function y(C,x){return C[8].length?0:1}return u=y(e),d=h[u]=I[u](e),{c(){t=It("div"),In(r.$$.fragment),n=Sn(),In(i.$$.fragment),o=Sn(),a.c(),c=Sn(),d.c(),me(t,"class","nvjs-pane"),me(t,"style",e[7])},m(C,x){tt(C,t,x),Qr(r,t,null),qt(t,n),Qr(i,t,null),qt(t,o),v[s].m(t,null),qt(t,c),h[u].m(t,null),g=!0},p(C,x){const A={};x&2&&(A.id=C[1]),x&4&&(A.props=C[2]),x&1&&(A.layout=C[0]),x&8&&(A.main=C[3]),r.$set(A);const w={};x&2&&(w.id=C[1]),x&4&&(w.props=C[2]),x&1&&(w.layout=C[0]),x&8&&(w.main=C[3]),i.$set(w);let S=s;s=p(C),s===S?v[s].p(C,x):(Pn(),We(v[S],1,1,()=>{v[S]=null}),_n(),a=v[s],a?a.p(C,x):(a=v[s]=m[s](C),a.c()),je(a,1),a.m(t,c));let k=u;u=y(C),u===k?h[u].p(C,x):(Pn(),We(h[k],1,1,()=>{h[k]=null}),_n(),d=h[u],d?d.p(C,x):(d=h[u]=I[u](C),d.c()),je(d,1),d.m(t,null)),(!g||x&128)&&me(t,"style",C[7])},i(C){g||(je(r.$$.fragment,C),je(i.$$.fragment,C),je(a),je(d),g=!0)},o(C){We(r.$$.fragment,C),We(i.$$.fragment,C),We(a),We(d),g=!1},d(C){C&&ze(t),e[10](null),qr(r),qr(i),v[s].d(),h[u].d()}}}function _q(e){let t,r;return t=new NZ({props:{id:e[1],props:e[2],layout:e[0],side:"left"}}),{c(){In(t.$$.fragment)},m(n,i){Qr(t,n,i),r=!0},p(n,i){const o={};i&2&&(o.id=n[1]),i&4&&(o.props=n[2]),i&1&&(o.layout=n[0]),t.$set(o)},i(n){r||(je(t.$$.fragment,n),r=!0)},o(n){We(t.$$.fragment,n),r=!1},d(n){qr(t,n)}}}function Mq(e){let t,r,n={id:e[1],props:e[2],layout:e[0],side:"left",scales:e[9]};return t=new BZ({props:n}),e[11](t),{c(){In(t.$$.fragment)},m(i,o){Qr(t,i,o),r=!0},p(i,o){const s={};o&2&&(s.id=i[1]),o&4&&(s.props=i[2]),o&1&&(s.layout=i[0]),o&512&&(s.scales=i[9]),t.$set(s)},i(i){r||(je(t.$$.fragment,i),r=!0)},o(i){We(t.$$.fragment,i),r=!1},d(i){e[11](null),qr(t,i)}}}function Zq(e){let t,r;return t=new NZ({props:{id:e[1],props:e[2],layout:e[0],side:"right"}}),{c(){In(t.$$.fragment)},m(n,i){Qr(t,n,i),r=!0},p(n,i){const o={};i&2&&(o.id=n[1]),i&4&&(o.props=n[2]),i&1&&(o.layout=n[0]),t.$set(o)},i(n){r||(je(t.$$.fragment,n),r=!0)},o(n){We(t.$$.fragment,n),r=!1},d(n){qr(t,n)}}}function Hq(e){let t,r,n={id:e[1],props:e[2],layout:e[0],side:"right",scales:e[8]};return t=new BZ({props:n}),e[12](t),{c(){In(t.$$.fragment)},m(i,o){Qr(t,i,o),r=!0},p(i,o){const s={};o&2&&(s.id=i[1]),o&4&&(s.props=i[2]),o&1&&(s.layout=i[0]),o&256&&(s.scales=i[8]),t.$set(s)},i(i){r||(je(t.$$.fragment,i),r=!0)},o(i){We(t.$$.fragment,i),r=!1},d(i){e[12](null),qr(t,i)}}}function Lq(e){let t,r,n=e[0]&&i2(e);return{c(){n&&n.c(),t=fi()},m(i,o){n&&n.m(i,o),tt(i,t,o),r=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&je(n,1)):(n=i2(i),n.c(),je(n,1),n.m(t.parentNode,t)):n&&(Pn(),We(n,1,1,()=>{n=null}),_n())},i(i){r||(je(n),r=!0)},o(i){We(n),r=!1},d(i){i&&ze(t),n&&n.d(i)}}}function Wq(e,t,r){let n,i,o,{id:s}=t,{props:a}=t,{main:c}=t,{layout:u}=t,d=Er.instance(a.id),g,f,m;d.on(`pane-${s}:update-pane`,v),ul(()=>{}),sa(()=>{d.off(`pane-${s}`)});function v(y){if(!y.grids)return;r(0,u=y.grids[s]),d.emitSpec(`grid-${s}`,"update-grid",u);let C=m&&m.getLayers?m.getLayers():[];g&&g.setLayers(C),f&&f.setLayers(C),d.emitSpec(`sb-${s}-left`,"update-sb",u),d.emitSpec(`sb-${s}-right`,"update-sb",u)}function p(y){ao[y?"unshift":"push"](()=>{m=y,r(6,m)})}function I(y){ao[y?"unshift":"push"](()=>{g=y,r(4,g)})}function h(y){ao[y?"unshift":"push"](()=>{f=y,r(5,f)})}return e.$$set=y=>{"id"in y&&r(1,s=y.id),"props"in y&&r(2,a=y.props),"main"in y&&r(3,c=y.main),"layout"in y&&r(0,u=y.layout)},e.$$.update=()=>{e.$$.dirty&1&&r(9,n=le.getScalesBySide(0,u)),e.$$.dirty&1&&r(8,i=le.getScalesBySide(1,u)),e.$$.dirty&7&&r(7,o=`
    width: ${a.width}px;
    height: ${(u||{}).height}px;
    /* didn't work, coz canvas draws through the border
    border-top: ${s?"1px solid":"none"};
    border-color: ${a.colors.scale};
    box-sizing: border-box;*/
`)},[u,s,a,c,g,f,m,o,i,n,p,I,h]}class Dq extends Ln{constructor(t){super(),Hn(this,t,Wq,Lq,yn,{id:1,props:2,main:3,layout:0})}}const{MINUTE15:$q,HOUR:Gw,DAY:ib,WEEK:Xq,MONTH:Fq,YEAR:ob,MONTHMAP:jZ,HPX:o2}=Zr;function Kq(e,t,r){const n=t.botbar.width,i=t.botbar.height,o=t.main.sbMax[0];t.main.sbMax[1],r.font=e.config.FONT,r.clearRect(0,0,n,i),r.strokeStyle=e.colors.scale,r.beginPath(),r.moveTo(0,.5),r.lineTo(Math.floor(n+1),.5),r.stroke(),r.fillStyle=e.colors.text,r.beginPath();for(var s of t.botbar.xs){let a=zq(e,s),c=s[0]+o;r.moveTo(c+o2,0),r.lineTo(c+o2,4.5),Uq(e,s[1][0])||(r.globalAlpha=.85),r.textAlign="center",r.fillText(a,c,18),r.globalAlpha=1}r.stroke()}function Vq(e,t,r){let n=Yq(e);r.fillStyle=e.colors.panel;let i=r.measureText(n+"    "),o=Math.floor(i.width+10),s=e.cursor.x+t.main.sbMax[0],a=Math.floor(s-o*.5),c=1,u=e.config.PANHEIGHT;Jq(r,a,c,o,u+.5,3),r.fillStyle=e.colors.textHL,r.textAlign="center",r.fillText(n,s,c+16)}function zq(e,t){let r=t[1],i=e.timeFrame<ib?1:0,o=r+i*e.timezone*Gw,s=new Date(o);if(t[2]===ob||le.yearStart(r)===r)return s.getUTCFullYear();if(t[2]===Fq||le.monthStart(r)===r)return jZ[s.getUTCMonth()];if(le.dayStart(o)===o)return s.getUTCDate();let a=le.addZero(s.getUTCHours()),c=le.addZero(s.getUTCMinutes());return a+":"+c}function Yq(e){let t=e.cursor.time;if(t===void 0)return"Out of range";let r=e.timeFrame,n=r<ib?1:0,i=new Date(t+n*e.timezone*Gw);if(r===ob)return i.getUTCFullYear();if(r<ob)var o="`"+`${i.getUTCFullYear()}`.slice(-2),s=jZ[i.getUTCMonth()],a="01";r<=Xq&&(a=i.getUTCDate());let c=`${a} ${s} ${o}`,u="";if(r<ib){let d=le.addZero(i.getUTCHours()),g=le.addZero(i.getUTCMinutes());u=d+":"+g}return`${c}  ${u}`}function Uq(e,t){let r=e.timeFrame;return t===0||le.monthStart(t)===t||le.dayStart(t)===t||r<=$q&&t%Gw===0}function Jq(e,t,r,n,i,o){n<2*o&&(o=n/2),i<2*o&&(o=i/2),e.beginPath(),e.moveTo(t+o,r),e.arcTo(t+n,r,t+n,r+i,0),e.arcTo(t+n,r+i,t,r+i,o),e.arcTo(t,r+i,t,r,o),e.arcTo(t,r,t+n,r,0),e.closePath(),e.fill()}const s2={body:Kq,panel:Vq};function Qq(e){let t,r;return{c(){t=It("div"),r=It("canvas"),me(r,"id",e[2]),me(t,"class","nvjs-botbar svelte-8gplax"),me(t,"id",e[1]),me(t,"style",e[0])},m(n,i){tt(n,t,i),qt(t,r)},p(n,[i]){i&1&&me(t,"style",n[0])},i:Tr,o:Tr,d(n){n&&ze(t)}}}function qq(e,t,r){let n,i,{props:o={}}=t,{layout:s={}}=t,a="botbar",c=`${o.id}-botbar`,u=`${o.id}-botbar-canvas`,d=Er.instance(o.id);d.on(`${a}:update-bb`,p),d.on(`${a}:show-bb-panel`,h=>m=h);let g,f,m=!0;ul(()=>{v()}),sa(()=>{d.off(`${a}`)});function v(){let h=s.botbar;[g,f]=Oc.setup(u,h.width,h.height),p()}function p(h=s){r(3,s=h),s.botbar&&(s2.body(o,s,f),o.cursor.x&&o.cursor.ti!==void 0&&m&&s2.panel(o,s,f))}function I(){let h=s.botbar;!g||!h||(Oc.resize(g,f,h.width,h.height),p())}return e.$$set=h=>{"props"in h&&r(4,o=h.props),"layout"in h&&r(3,s=h.layout)},e.$$.update=()=>{e.$$.dirty&24&&r(0,n=`
    background: ${o.colors.back};
    width: ${(s.botbar||{}).width}px;
    height: ${(s.botbar||{}).height}px;
`),e.$$.dirty&8&&r(5,i=(s.botbar||{}).width),e.$$.dirty&32&&I()},[n,c,u,s,o,i]}class eee extends Ln{constructor(t){super(),Hn(this,t,qq,Qq,yn,{props:4,layout:3})}}function tee(e){let t,r;return{c(){t=It("div"),r=uu("No data \\_( )_/"),me(t,"class","nvjs-no-data-stub svelte-172ri4o"),me(t,"style",e[0])},m(n,i){tt(n,t,i),qt(t,r)},p(n,[i]){i&1&&me(t,"style",n[0])},i:Tr,o:Tr,d(n){n&&ze(t)}}}function ree(e,t,r){let n,{props:i}=t;return e.$$set=o=>{"props"in o&&r(1,i=o.props)},e.$$.update=()=>{e.$$.dirty&2&&r(0,n=`
    display: flex;
    width: ${i.width}px;
    height: ${i.height}px;
    background: ${i.colors.back};
    color: ${i.colors.scale};
    font: ${i.config.FONT};
    font-size: 18px;
    font-style: italic;
    user-select: none;
    align-items:center;
    justify-content:center;
`)},[n,i]}class nee extends Ln{constructor(t){super(),Hn(this,t,ree,tee,yn,{props:1})}}function a2(e,t,r){const n=e.slice();return n[25]=t[r],n[27]=r,n}function iee(e){let t,r;return t=new nee({props:{props:e[0]}}),{c(){In(t.$$.fragment)},m(n,i){Qr(t,n,i),r=!0},p(n,i){const o={};i&1&&(o.props=n[0]),t.$set(o)},i(n){r||(je(t.$$.fragment,n),r=!0)},o(n){We(t.$$.fragment,n),r=!1},d(n){qr(t,n)}}}function oee(e){let t,r,n,i=ai(e[3].panes()),o=[];for(let a=0;a<i.length;a+=1)o[a]=l2(a2(e,i,a));const s=a=>We(o[a],1,1,()=>{o[a]=null});return r=new eee({props:{props:e[2],layout:e[1]}}),{c(){for(let a=0;a<o.length;a+=1)o[a].c();t=Sn(),In(r.$$.fragment)},m(a,c){for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(a,c);tt(a,t,c),Qr(r,a,c),n=!0},p(a,c){if(c&14){i=ai(a[3].panes());let d;for(d=0;d<i.length;d+=1){const g=a2(a,i,d);o[d]?(o[d].p(g,c),je(o[d],1)):(o[d]=l2(g),o[d].c(),je(o[d],1),o[d].m(t.parentNode,t))}for(Pn(),d=i.length;d<o.length;d+=1)s(d);_n()}const u={};c&4&&(u.props=a[2]),c&2&&(u.layout=a[1]),r.$set(u)},i(a){if(!n){for(let c=0;c<i.length;c+=1)je(o[c]);je(r.$$.fragment,a),n=!0}},o(a){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)We(o[c]);We(r.$$.fragment,a),n=!1},d(a){a&&ze(t),cu(o,a),qr(r,a)}}}function l2(e){let t,r;return t=new Dq({props:{id:e[27],layout:e[1].grids[e[27]],props:e[2],main:e[25]===e[3].chart}}),{c(){In(t.$$.fragment)},m(n,i){Qr(t,n,i),r=!0},p(n,i){const o={};i&2&&(o.layout=n[1].grids[n[27]]),i&4&&(o.props=n[2]),t.$set(o)},i(n){r||(je(t.$$.fragment,n),r=!0)},o(n){We(t.$$.fragment,n),r=!1},d(n){qr(t,n)}}}function see(e){let t,r,n,i;const o=[oee,iee],s=[];function a(c,u){return c[1]&&c[1].main?0:1}return r=a(e),n=s[r]=o[r](e),{c(){t=It("div"),n.c(),me(t,"class","nvjs-chart")},m(c,u){tt(c,t,u),s[r].m(t,null),i=!0},p(c,[u]){let d=r;r=a(c),r===d?s[r].p(c,u):(Pn(),We(s[d],1,1,()=>{s[d]=null}),_n(),n=s[r],n?n.p(c,u):(n=s[r]=o[r](c),n.c()),je(n,1),n.m(t,null))},i(c){i||(je(n),i=!0)},o(c){We(n),i=!1},d(c){c&&ze(t),s[r].d()}}}function aee(e,t,r){let n,{props:i={}}=t;function o(){return x}function s(){return I}function a(){return h}function c(O){var P;let N=!((P=O.preventDefault)==null||P);delete O.preventDefault,Object.assign(I,O),S(I,N)}function u(O){var P;let N=!((P=O.preventDefault)==null||P);delete O.preventDefault,Object.assign(h,O),A(h,N)}let d=ns.instance(i.id),g=is.instance(i.id),f=Er.instance(i.id),m=Ew.instance(i.id);m.init(i);let v=m.detectInterval(),p=m.getTimeframe(),I=m.defaultRange(),h=new UJ(g),y={},C=new xQ(i),x=null;m.calcIndexOffsets(),f.on("chart:cursor-changed",A),f.on("chart:cursor-locked",w),f.on("chart:range-changed",S),f.on("chart:update-layout",R),f.on("chart:full-update",j),ul(()=>{d.calcSubset(I),d.detectMain(),d.loadScripts(I,m.tf,!0),g.init(i),m.updatePanesHash(),r(1,x=new PN(n,d,g))}),sa(()=>{f.off("chart")});function A(O,P=!0){O.mode&&r(12,h.mode=O.mode,h),h.mode!=="explore"&&(h.xSync(d,x,n,O),O.visible===!1&&setTimeout(()=>R())),P&&f.emit("$cursor-update",le.makeCursorEvent(O,h,x)),R()}function w(O){h.scrollLock&&O||r(12,h.locked=O,h)}function S(O,P=!0){if(P&&f.emit("$range-update",O),_(O),d.updateRange(I),h.locked)return;h.xValues(d,x,n),h.yValues(x),R();let N=i.config.QUANTIZE_AFTER;N&&le.afterAll(y,k,N)}function k(){h.xSync(d,x,n,h),R()}function R(O={},P=!0){if(P&&f.emit("$chart-pre-update"),O.updateHash&&m.updatePanesHash(),m.panesChanged())return j(O);r(12,h),r(1,x=new PN(n,d,g)),f.emit("update-pane",x),f.emitSpec("botbar","update-bb",x),P&&f.emit("$chart-update")}function j(O={}){let P=m.ibMode;r(9,v=m.detectInterval()),r(10,p=m.getTimeframe());let N=m.ibMode!==P;(!I.length||O.resetRange||N)&&_(m.defaultRange()),m.calcIndexOffsets(),d.calcSubset(I),d.init(d.data),d.detectMain(),d.loadScripts(),g.init(i),g.restore(),m.updatePanesHash(),R(),f.emit("remake-grid")}function _(O){r(11,I=O),r(2,n.range=I,n)}return e.$$set=O=>{"props"in O&&r(0,i=O.props)},e.$$.update=()=>{e.$$.dirty&7681&&r(2,n=Object.assign({interval:v,timeFrame:p,range:I,ctx:C,cursor:h},i))},[i,x,n,d,o,s,a,c,u,v,p,I,h]}let lee=class extends Ln{constructor(t){super(),Hn(this,t,aee,see,yn,{props:0,getLayout:4,getRange:5,getCursor:6,setRange:7,setCursor:8})}get getLayout(){return this.$$.ctx[4]}get getRange(){return this.$$.ctx[5]}get getCursor(){return this.$$.ctx[6]}get setRange(){return this.$$.ctx[7]}get setCursor(){return this.$$.ctx[8]}};function cee(e){rf(e,"svelte-7z7hqo",".svelte-7z7hqo::after,.svelte-7z7hqo::before{box-sizing:content-box}.night-vision.svelte-7z7hqo{position:relative;direction:ltr}")}function uee(e){let t,r,n,i={props:e[1]};return r=new lee({props:i}),e[19](r),{c(){t=It("div"),In(r.$$.fragment),me(t,"class","night-vision svelte-7z7hqo"),me(t,"id",e[0]),me(t,"style",e[3])},m(o,s){tt(o,t,s),Qr(r,t,null),n=!0},p(o,[s]){const a={};s&2&&(a.props=o[1]),r.$set(a),(!n||s&1)&&me(t,"id",o[0]),(!n||s&8)&&me(t,"style",o[3])},i(o){n||(je(r.$$.fragment,o),n=!0)},o(o){We(r.$$.fragment,o),n=!1},d(o){o&&ze(t),e[19](null),qr(r)}}}function dee(e,t,r){let n,i,o,s,a,c;function u(){return c}let{showLogo:d=!1}=t,{id:g="nvjs"}=t,{width:f=750}=t,{height:m=420}=t,{colors:v={}}=t,{toolbar:p=!1}=t,{scripts:I=[]}=t,{config:h={}}=t,{indexBased:y=!1}=t,{timezone:C=0}=t,{data:x={}}=t,{autoResize:A=!1}=t;function w(S){ao[S?"unshift":"push"](()=>{c=S,r(2,c)})}return e.$$set=S=>{"showLogo"in S&&r(5,d=S.showLogo),"id"in S&&r(0,g=S.id),"width"in S&&r(6,f=S.width),"height"in S&&r(7,m=S.height),"colors"in S&&r(8,v=S.colors),"toolbar"in S&&r(9,p=S.toolbar),"scripts"in S&&r(10,I=S.scripts),"config"in S&&r(11,h=S.config),"indexBased"in S&&r(12,y=S.indexBased),"timezone"in S&&r(13,C=S.timezone),"data"in S&&r(14,x=S.data),"autoResize"in S&&r(15,A=S.autoResize)},e.$$.update=()=>{e.$$.dirty&2048&&r(16,n=Object.assign(Zr.ChartConfig,h)),e.$$.dirty&2560&&r(18,i=p?h.TOOLBAR:0),e.$$.dirty&256&&r(17,o=Object.assign(Zr.COLORS,v)),e.$$.dirty&468193&&r(1,s={showLogo:d,id:g,width:f-i,height:m,colors:o,scripts:I,config:n,timezone:C}),e.$$.dirty&2&&r(3,a=`
    width: ${s.width}px;
    height: ${s.height}px;
`)},[g,s,c,a,u,d,f,m,v,p,I,h,y,C,x,A,n,o,i,w]}let gee=class extends Ln{constructor(t){super(),Hn(this,t,dee,uee,yn,{getChart:4,showLogo:5,id:0,width:6,height:7,colors:8,toolbar:9,scripts:10,config:11,indexBased:12,timezone:13,data:14,autoResize:15},cee)}get getChart(){return this.$$.ctx[4]}get showLogo(){return this.$$.ctx[5]}set showLogo(t){this.$$set({showLogo:t}),on()}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),on()}get width(){return this.$$.ctx[6]}set width(t){this.$$set({width:t}),on()}get height(){return this.$$.ctx[7]}set height(t){this.$$set({height:t}),on()}get colors(){return this.$$.ctx[8]}set colors(t){this.$$set({colors:t}),on()}get toolbar(){return this.$$.ctx[9]}set toolbar(t){this.$$set({toolbar:t}),on()}get scripts(){return this.$$.ctx[10]}set scripts(t){this.$$set({scripts:t}),on()}get config(){return this.$$.ctx[11]}set config(t){this.$$set({config:t}),on()}get indexBased(){return this.$$.ctx[12]}set indexBased(t){this.$$set({indexBased:t}),on()}get timezone(){return this.$$.ctx[13]}set timezone(t){this.$$set({timezone:t}),on()}get data(){return this.$$.ctx[14]}set data(t){this.$$set({data:t}),on()}get autoResize(){return this.$$.ctx[15]}set autoResize(t){this.$$set({autoResize:t}),on()}};function fee(e){new ResizeObserver(r=>{let n=e.root.getBoundingClientRect();e.width=n.width,e.height=n.height}).observe(e.root)}class c2{constructor(t,r={}){this._data=r.data||{},this._scripts=r.scripts||[];let n=r.id||"nvjs";this.ww=AZ.instance(n,this),this.se=pZ.instance(n,this),this.hub=ns.instance(n),this.meta=is.instance(n),this.scan=Ew.instance(n),this.events=Er.instance(n),this.scriptHub=Rw.instance(n),this.hub.init(this._data),this.scriptHub.init(this._scripts),this.root=document.getElementById(t),this.comp=new gee({target:this.root,props:r}),r.autoResize&&fee(this),this.se.setRefs(this.hub,this.scan)}get id(){return this.comp.id}set id(t){this.comp.$set({id:t})}get width(){return this.comp.width}set width(t){this.comp.$set({width:t}),setTimeout(()=>this.update())}get height(){return this.comp.height}set height(t){this.comp.$set({height:t}),setTimeout(()=>this.update())}get colors(){return this.comp.colors}set colors(t){this.comp.$set({colors:t})}get showLogo(){return this.comp.showLogo}set showLogo(t){this.comp.$set({id:t})}get scripts(){return this._scripts}set scripts(t){this._scripts=t,this.scriptHub.init(this._scripts),this.update("full")}get data(){return this._data}set data(t){this._data=t,this.update("full")}get config(){return this.comp.config}set config(t){this.comp.$set({config:t})}get indexBased(){return this.comp.indexBased}set indexBased(t){this.comp.$set({indexBased:t})}get timezone(){return this.comp.timezone}set timezone(t){this.comp.$set({timezone:t}),setTimeout(()=>this.update())}get layout(){let t=this.comp.getChart();return t?t.getLayout():null}get range(){let t=this.comp.getChart();return t?t.getRange():null}set range(t){let r=this.comp.getChart();r&&r.setRange(t)}get cursor(){let t=this.comp.getChart();return t?t.getCursor():null}set cursor(t){let r=this.comp.getChart();r&&r.setCursor(t)}update(n="layout",r={}){var[n,i]=n.split("-");const o=this.events;switch(n){case"layout":o.emitSpec("chart","update-layout",r);break;case"data":this.hub.updateRange(this.range),this.meta.calcOhlcMap(),o.emitSpec("chart","update-layout",r);break;case"full":this.hub.init(this._data),o.emitSpec("chart","full-update",r);break;case"grid":if(i===void 0)o.emit("remake-grid");else{let s=`grid-${i}`;o.emitSpec(s,"remake-grid",r)}break;case"legend":if(i===void 0)o.emit("update-legend");else{let s=`legend-${i}`;o.emitSpec(s,"update-legend",r)}break}}fullReset(){this.update("full",{resetRange:!0})}goto(t){let r=this.range,n=r[1]-r[0];this.range=[t-n,t]}scroll(){if(this.cursor.locked)return;let t=this.hub.mainOv.data,r=t[t.length-1],n=this.hub.indexBased;if(!r)return;let i=n?t.length-1:r[0],o=this.range[1]-i,s=this.scan.interval;o>0&&this.goto(this.range[1]+s)}destroy(){this.comp.$destroy()}}const u2={timeframe:"1h",isSubscribed:!1,isLoading:!1,error:null},TZ=ui((e,t)=>({widgets:{},getWidget:r=>{const{widgets:n}=t();return n[r]||{...u2}},updateWidget:(r,n)=>{e(i=>({widgets:{...i.widgets,[r]:{...i.widgets[r]||u2,...n}}}))},removeWidget:r=>{e(n=>{const{[r]:i,...o}=n.widgets;return{widgets:o}})}})),hee={"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w","1M":"1M"},pee=({value:e,onChange:t,exchange:r,className:n=""})=>{const{getTimeframesForExchange:i}=ut(),o=b.useMemo(()=>{console.log(` [TimeframeSelect] Getting timeframes for exchange: ${r}`);const a=i(r);return console.log(" [TimeframeSelect] Received timeframes:",a),a.map(c=>({id:c,label:hee[c]||c.toUpperCase()}))},[r,i]),s=b.useMemo(()=>{if(!o.some(c=>c.id===e)&&o.length>0){const c=o[0].id;return setTimeout(()=>t(c),0),c}return e},[e,o,t]);return l.jsxs("div",{className:`absolute bottom-4 right-4 z-10 flex items-center gap-1 bg-terminal-bg/90 backdrop-blur-sm border border-terminal-border rounded-lg p-1 shadow-lg ${n}`,children:[l.jsx(io,{className:"w-3 h-3 text-terminal-muted ml-1 pointer-events-none"}),l.jsx("select",{value:s,onChange:a=>t(a.target.value),className:"bg-transparent text-terminal-text text-sm border-none outline-none pl-1 pr-1 py-1 cursor-pointer appearance-none min-w-[2.5rem]",style:{background:"transparent",WebkitAppearance:"none",MozAppearance:"none"},children:o.map(a=>l.jsx("option",{value:a.id,className:"bg-terminal-bg text-terminal-text",children:a.label},a.id))})]})},mee=e=>e==="light"?{back:"#ffffff",grid:"#e5e7eb",candleUp:"#16c784",candleDw:"#ea3943",wickUp:"#16c784",wickDw:"#ea3943",volUp:"#16c784",volDw:"#ea3943"}:{back:"#000000",grid:"#1a1a1a",candleUp:"#26a69a",candleDw:"#ef5350",wickUp:"#26a69a",wickDw:"#ef5350",volUp:"#26a69a",volDw:"#ef5350"},Iee=({dashboardId:e="default",widgetId:t="chart-widget",selectedGroupId:r,initialTimeframe:n="1h"})=>{const i=b.useRef(null),o=b.useRef(null),s=(te,he,Ze)=>{const se=he.charAt(0).toUpperCase()+he.slice(1);return`${te} (${se}:${Ze==="spot"?"Spot":"Futures"})`},{theme:a}=rw(),c=b.useMemo(()=>mee(a),[a]),{subscribe:u,unsubscribe:d,initializeChartData:g,loadHistoricalCandles:f,providers:m,activeProviderId:v,dataFetchSettings:p,getActiveSubscriptionsList:I,addChartUpdateListener:h,removeChartUpdateListener:y}=ut(),{getGroupById:C,selectedGroupId:x,getTransparentGroup:A}=zr(),w=r||x,S=w?C(w):A(),{getWidget:k,updateWidget:R}=TZ(),j=k(t),_=S&&S.account&&S.exchange&&S.market&&S.tradingPair,O=(S==null?void 0:S.exchange)||"binance",P=(S==null?void 0:S.tradingPair)||"BTC/USDT",N=(S==null?void 0:S.market)||"spot",B=j.timeframe||n,[E,M]=b.useState(!1),[G,T]=b.useState(!1),[L,W]=b.useState(null),[X,V]=b.useState({width:600,height:400}),[z,ee]=b.useState(!1),D=b.useRef(null),F=b.useRef(!1),Z=b.useRef(0);I().find(te=>te.key.exchange===O&&te.key.symbol===P&&te.key.dataType==="candles"&&te.key.timeframe===B&&te.key.market===N);const[J,U]=b.useState(!1),[K,re]=b.useState(!1);b.useLayoutEffect(()=>{const te=()=>{if(i.current){const Ze=i.current.getBoundingClientRect(),se={width:Math.max(Ze.width||600,300),height:Math.max(Ze.height||400,200)};V(ae=>ae.width!==se.width||ae.height!==se.height?(console.log(` [Chart] Container dimensions: ${ae.width}x${ae.height}  ${se.width}x${se.height}`),se):ae)}};te();let he=null;return i.current&&"ResizeObserver"in window?(he=new ResizeObserver(Ze=>{Ze.length>0&&te()}),he.observe(i.current),console.log(" [Chart] ResizeObserver attached")):window.addEventListener("resize",te),()=>{he?(he.disconnect(),console.log(" [Chart] ResizeObserver disconnected")):window.removeEventListener("resize",te)}},[]),b.useEffect(()=>{var te,he,Ze,se;if(!i.current||!_){o.current&&((he=(te=o.current).destroy)==null||he.call(te),o.current=null,U(!1));return}try{console.log(` [Chart] Resetting infinite scroll state for new instrument: ${O}:${P}:${B}`),D.current=null,F.current=!1,Z.current=0,o.current&&((se=(Ze=o.current).destroy)==null||se.call(Ze));const ae=`chart-${crypto.randomUUID()}`;i.current.id=ae,o.current=new c2(ae,{id:ae,width:X.width,height:X.height,autoResize:!0,colors:{back:c.back,grid:c.grid},data:{panes:[]}}),console.log(` NightVision chart initialized for ${O}:${P}:${B}`),U(!0)}catch(ae){console.error(" Failed to initialize NightVision chart:",ae),W("Failed to initialize chart"),U(!1)}return()=>{var ae,He;o.current&&((He=(ae=o.current).destroy)==null||He.call(ae),o.current=null),U(!1)}},[_,O,P,B,N,c]),b.useEffect(()=>{if(!J||!o.current||!_)return;(async()=>{try{T(!0),W(null),re(!1),console.log(` [Chart] Loading initial data via REST for ${O}:${N}:${P}:${B}`);const he=await g(O,P,B,N);if(he&&he.length>0&&o.current){const Ze=he.map(ae=>[ae.timestamp,ae.open,ae.high,ae.low,ae.close,ae.volume]),se=[{overlays:[{name:s(P,O,N),type:"Candles",data:Ze,main:!0,props:{colorCandleUp:c.candleUp,colorCandleDw:c.candleDw,colorWickUp:c.wickUp,colorWickDw:c.wickDw}}]}];if(z){const ae=he.map(He=>[He.timestamp,He.volume]);se.push({overlays:[{name:"Volume",type:"Volume",data:ae,main:!1,props:{colorCandleUp:c.volUp,colorCandleDw:c.volDw,colorWickUp:c.volUp,colorWickDw:c.volDw}}]})}o.current.data={panes:se},o.current.update("data"),re(!0),console.log(` [Chart] Initial data loaded: ${he.length} candles`)}}catch(he){console.error(" [Chart] Failed to load initial data:",he),W(he instanceof Error?he.message:"Failed to load data")}finally{T(!1)}})()},[J,O,P,B,N,z,g,c]),b.useEffect(()=>{if(!o.current||!K)return;const te=async se=>{var He,Ue,vt,jt,Lr,bt,rn,Wr,br,Jt,Rr,xt,xr,Ar,Y,Se,Be,ke,be,Je,Lt,ve,Ge,xe,Wt,Tt,Or,vn,nn,mi,K1,V1,z1,Y1,U1,J1,Q1,q1,eS,tS,rS,nS,iS,oS,sS,aS,lS;console.log(` [Chart] ===== INFINITE SCROLL EVENT ===== Range updated: [${new Date(se[0]).toISOString()}, ${new Date(se[1]).toISOString()}]`),console.log(" [Chart] Current NightVision structure:",{hasHub:!!((He=o.current)!=null&&He.hub),hasMainOv:!!((vt=(Ue=o.current)==null?void 0:Ue.hub)!=null&&vt.mainOv),hasMainOvData:!!((bt=(Lr=(jt=o.current)==null?void 0:jt.hub)==null?void 0:Lr.mainOv)!=null&&bt.data),mainOvDataLength:(Jt=(br=(Wr=(rn=o.current)==null?void 0:rn.hub)==null?void 0:Wr.mainOv)==null?void 0:br.data)==null?void 0:Jt.length,hasData:!!((Rr=o.current)!=null&&Rr.data),hasPanes:!!((xr=(xt=o.current)==null?void 0:xt.data)!=null&&xr.panes),panesLength:(Se=(Y=(Ar=o.current)==null?void 0:Ar.data)==null?void 0:Y.panes)==null?void 0:Se.length,hasOverlays:!!((Je=(be=(ke=(Be=o.current)==null?void 0:Be.data)==null?void 0:ke.panes)==null?void 0:be[0])!=null&&Je.overlays),overlaysLength:(Wt=(xe=(Ge=(ve=(Lt=o.current)==null?void 0:Lt.data)==null?void 0:ve.panes)==null?void 0:Ge[0])==null?void 0:xe.overlays)==null?void 0:Wt.length,hasOverlayData:!!((K1=(mi=(nn=(vn=(Or=(Tt=o.current)==null?void 0:Tt.data)==null?void 0:Or.panes)==null?void 0:vn[0])==null?void 0:nn.overlays)==null?void 0:mi[0])!=null&&K1.data),overlayDataLength:(q1=(Q1=(J1=(U1=(Y1=(z1=(V1=o.current)==null?void 0:V1.data)==null?void 0:z1.panes)==null?void 0:Y1[0])==null?void 0:U1.overlays)==null?void 0:J1[0])==null?void 0:Q1.data)==null?void 0:q1.length});let ae=D.current;if(ae||((rS=(tS=(eS=o.current)==null?void 0:eS.hub)==null?void 0:tS.mainOv)!=null&&rS.data&&o.current.hub.mainOv.data.length>0?(ae=o.current.hub.mainOv.data[0][0],D.current=ae,console.log(` [Chart] Extracted oldestTimestamp from WebSocket data: ${new Date(ae).toISOString()}`)):(lS=(aS=(sS=(oS=(iS=(nS=o.current)==null?void 0:nS.data)==null?void 0:iS.panes)==null?void 0:oS[0])==null?void 0:sS.overlays)==null?void 0:aS[0])!=null&&lS.data&&o.current.data.panes[0].overlays[0].data.length>0&&(ae=o.current.data.panes[0].overlays[0].data[0][0],D.current=ae,console.log(` [Chart] Extracted oldestTimestamp from REST data: ${new Date(ae).toISOString()}`))),ae&&!F.current){const cS=se[0],uS=(se[1]-se[0])*.2,dS=cS-ae<=uS;console.log(` [Chart] Should load more data: ${dS} (rangeStart=${new Date(cS).toISOString()}, oldestTimestamp=${new Date(ae).toISOString()}, buffer=${Math.round(uS/1e3)}s)`),dS&&(console.log(" [Chart] Triggering historical data load..."),Z.current=0,await Ze(ae))}else console.log(` [Chart] Skipping infinite scroll: oldestTimestamp=${!!ae}, isLoading=${F.current}`)},he=async se=>{var bt;if(F.current){console.log(" [Chart] Still loading, skipping buffer check...");return}const ae=5;if(Z.current>=ae){console.log(` [Chart] Maximum historical loading iterations (${ae}) reached, stopping`),Z.current=0;return}const He=(bt=o.current)==null?void 0:bt.range;if(!He){console.log(" [Chart] No current range available for buffer check");return}const Ue=He[0],jt=(He[1]-He[0])*.2,Lr=Ue-se<=jt;console.log(` [Chart] Buffer check: needsMoreData=${Lr} (rangeStart=${new Date(Ue).toISOString()}, oldestTimestamp=${new Date(se).toISOString()}, buffer=${Math.round(jt/1e3)}s, iteration=${Z.current+1}/${ae})`),Lr?(Z.current+=1,console.log(` [Chart] Buffer still not filled, loading more historical data (iteration ${Z.current}/${ae})...`),await Ze(se)):(console.log(" [Chart] Buffer is sufficiently filled, stopping historical loading"),Z.current=0)},Ze=async se=>{var ae,He,Ue,vt,jt,Lr,bt,rn,Wr;if(F.current){console.log(" [Chart] Already loading historical data, skipping...");return}try{F.current=!0,console.log(` [Chart] Loading historical data before ${new Date(se).toISOString()}`);const br=await f(O,P,B,N,se);if(br.length===0){console.log(" [Chart] No historical data received");return}console.log(` [Chart] Received ${br.length} historical candles`);const Jt=br.map(xt=>[xt.timestamp,xt.open,xt.high,xt.low,xt.close,xt.volume]);let Rr=!1;if((Ue=(He=(ae=o.current)==null?void 0:ae.hub)==null?void 0:He.mainOv)!=null&&Ue.data){const xt=o.current.hub.mainOv.data,xr=new Set(xt.map(Y=>Y[0])),Ar=Jt.filter(Y=>!xr.has(Y[0]));Ar.length>0?(xt.unshift(...Ar),Rr=!0,console.log(` [Chart] Added ${Ar.length} unique historical candles to WebSocket structure`)):console.log(" [Chart] No new unique historical data to add to WebSocket structure")}if((Wr=(rn=(bt=(Lr=(jt=(vt=o.current)==null?void 0:vt.data)==null?void 0:jt.panes)==null?void 0:Lr[0])==null?void 0:bt.overlays)==null?void 0:rn[0])!=null&&Wr.data){const xt=o.current.data.panes[0].overlays[0].data,xr=new Set(xt.map(Y=>Y[0])),Ar=Jt.filter(Y=>!xr.has(Y[0]));Ar.length>0?(xt.unshift(...Ar),Rr=!0,console.log(` [Chart] Added ${Ar.length} unique historical candles to REST structure`)):console.log(" [Chart] No new unique historical data to add to REST structure")}if(Rr){const xt=br[0].timestamp;D.current=xt,o.current.update("data"),console.log(` [Chart] Updated chart with historical data, new oldestTimestamp: ${new Date(xt).toISOString()}`),setTimeout(async()=>{await he(xt)},100)}else console.log(" [Chart] No data structures found to update")}catch(br){console.error(" [Chart] Failed to load historical data:",br)}finally{F.current=!1}};return o.current.events.on("app:$range-update",te),console.log(" [Chart] Added infinite scroll range update listener"),()=>{var se;(se=o.current)!=null&&se.events&&(o.current.events.off("app:$range-update",te),console.log(" [Chart] Removed infinite scroll range update listener"))}},[K,O,P,B,N,f]),b.useEffect(()=>{if(!o.current||!J){console.log(" [Chart] Skipping resize - chart not ready:",{hasChart:!!o.current,isInitialized:J});return}console.log(` [Chart] Container dimensions changed: ${X.width}x${X.height}`),console.log(" [Chart] Scheduling NightVision recreation with 200ms debounce...");const te=setTimeout(()=>{if(console.log(" [Chart] Executing debounced NightVision recreation..."),!o.current){console.log(" [Chart] NightVision ref lost during debounce");return}const he=o.current.data;o.current.destroy&&o.current.destroy();const Ze=`chart-${crypto.randomUUID()}`;i.current&&(i.current.id=Ze,o.current=new c2(Ze,{id:Ze,width:X.width,height:X.height,autoResize:!0,colors:{back:c.back,grid:c.grid},data:he}),console.log(` [Chart] NightVision instance recreated with dimensions: ${X.width}x${X.height}`))},200);return()=>{clearTimeout(te),console.log(" [Chart] Cleared pending resize timeout")}},[X,J]);const ce=b.useCallback(te=>{var Ze,se;if(!o.current||!K){console.log(" [Chart] Event received but chart not ready:",te.type,{chartReady:!!o.current,dataLoaded:K});return}const he=o.current;console.log(` [Chart] Processing ${te.type} event:`,{type:te.type,exchange:te.exchange,symbol:te.symbol,timeframe:te.timeframe,data:te.data});try{if(te.type==="new_candles"){if((Ze=te.data)!=null&&Ze.newCandles&&he.hub&&he.hub.mainOv&&he.hub.mainOv.data){const ae=te.data.newCandles.map(Ue=>[Ue.timestamp,Ue.open,Ue.high,Ue.low,Ue.close,Ue.volume]);he.hub.mainOv.data.push(...ae),he.update("data"),console.log(` [Chart] Added ${ae.length} new candles`)}}else if(te.type==="update_last_candle"&&(se=te.data)!=null&&se.lastCandle&&he.hub&&he.hub.mainOv&&he.hub.mainOv.data){const ae=he.hub.mainOv.data,He=ae.length-1;if(He>=0){const Ue=[te.data.lastCandle.timestamp,te.data.lastCandle.open,te.data.lastCandle.high,te.data.lastCandle.low,te.data.lastCandle.close,te.data.lastCandle.volume];ae[He]=Ue,he.update(),console.log(` [Chart] Updated last candle: close=${te.data.lastCandle.close}`)}}}catch(ae){console.error(" [Chart] Event processing error:",ae)}},[K]),Me=b.useRef(null);b.useEffect(()=>{if(o.current){if(Me.current){const te=Me.current;console.log(` [Chart] Unsubscribing from PREVIOUS events: ${te.exchange}:${te.symbol}:${te.timeframe}:${te.market}`),y(te.exchange,te.symbol,te.timeframe,te.market,ce)}return console.log(` [Chart] Subscribing to events for ${O}:${P}:${B}:${N}`),h(O,P,B,N,ce),Me.current={exchange:O,symbol:P,timeframe:B,market:N},()=>{console.log(` [Chart] Cleanup: Unsubscribing from events for ${O}:${P}:${B}:${N}`),y(O,P,B,N,ce),Me.current=null}}},[O,P,B,N,ce,h,y]);const Ee=async()=>{if(!v){W("No active data provider");return}try{T(!0),W(null);const te=`${e}-${t}`,he=await u(te,O,P,"candles",B,N);he.success?(M(!0),Ke.current={exchange:O,symbol:P,timeframe:B,market:N},console.log(` Chart subscribed to ${O}:${N}:${P}:${B} (method: ${p.method})`),console.log(` Saved as previous subscription: ${O}:${N}:${P}:${B}`)):W(he.error||"Subscription failed")}catch(te){console.error(" Subscription error:",te),W(te instanceof Error?te.message:"Subscription failed")}finally{T(!1)}},Ke=b.useRef(null);b.useEffect(()=>{v&&!E&&(console.log(` Chart auto-subscribing to ${O}:${N}:${P}:${B}`),Ee())},[v]),b.useEffect(()=>{if(E){if(Ke.current){const te=Ke.current;console.log(` Chart unsubscribing from PREVIOUS settings: ${te.exchange}:${te.market}:${te.symbol}:${te.timeframe}`);const he=`${e}-${t}`;d(he,te.exchange,te.symbol,"candles",te.timeframe,te.market)}setTimeout(()=>{console.log(` Chart subscribing to NEW settings: ${O}:${N}:${P}:${B}`),Ee()},100)}},[O,P,B,N]),b.useEffect(()=>()=>{const te=`${e}-${t}`;if(console.log(` Chart cleanup: unsubscribing from current settings ${O}:${N}:${P}:${B}`),d(te,O,P,"candles",B,N),Ke.current){const he=Ke.current;(he.exchange!==O||he.symbol!==P||he.timeframe!==B||he.market!==N)&&(console.log(` Chart cleanup: also unsubscribing from previous settings ${he.exchange}:${he.market}:${he.symbol}:${he.timeframe}`),d(te,he.exchange,he.symbol,"candles",he.timeframe,he.market))}},[e,t,O,P,B,N,d]);const Nt=te=>{R(t,{timeframe:te})};return l.jsx("div",{className:"flex flex-col h-full bg-terminal-bg border border-terminal-border rounded-lg",children:_?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(pee,{value:B,onChange:Nt,exchange:O}),!1,l.jsx("div",{ref:i,className:"absolute inset-0 w-full h-full",style:{minHeight:"300px"}}),(G||L||!K)&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-terminal-bg/80",children:G?l.jsxs("div",{className:"flex items-center gap-2 text-terminal-muted",children:[l.jsx(Ri,{className:"w-4 h-4 animate-spin"}),"Loading chart data..."]}):L?l.jsxs("div",{className:"text-red-400 text-center",children:[l.jsx("div",{className:"font-medium",children:"Chart Error"}),l.jsx("div",{className:"text-sm",children:L})]}):l.jsxs("div",{className:"text-terminal-muted text-center",children:[l.jsx("div",{className:"font-medium",children:"Chart Ready"}),l.jsx("div",{className:"text-sm",children:"Start subscription to see real-time data"})]})})]})}):l.jsx("div",{className:"flex-1 flex items-center justify-center bg-terminal-bg",children:l.jsxs("div",{className:"text-center text-terminal-muted",children:[l.jsx("div",{className:"text-lg font-medium mb-2",children:"No instrument selected"}),l.jsx("div",{className:"text-sm",children:"Please select a trading instrument in the selector above"})]})})})},yee=[{symbol:"RUB",name:"Russian Ruble",quantity:"1 026,85",price:"",avg:"",value:"1 026,85 ",share:"0,01%",profit:"",profitPercent:""},{symbol:"EUR",name:"Euro",quantity:"0,72",price:"93,6650 ",avg:"79,0475 ",value:"67,44 ",share:"0,00%",profit:"10,52 ",profitPercent:"18,49%"},{symbol:"USD",name:"US Dollar",quantity:"0,19",price:"86,5675 ",avg:"91,8200 ",value:"16,45 ",share:"0,00%",profit:"-1,00 ",profitPercent:"-5,72%"}],Cee=[{symbol:"LQDT",name:"LQDT",quantity:"8 250 000",price:"1,6248 ",avg:"1,3589 ",value:"13 404 600,00 ",share:"99,99%",profit:"2 193 526,50 ",profitPercent:"19,57%"}],d2=()=>{const[e,t]=H.useState(null);return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-medium",children:"Balance"}),l.jsx("p",{className:"text-sm text-terminal-muted",children:"Trading Portfolio"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex items-center text-sm",children:[l.jsx("span",{className:"mr-2",children:"Value in Rubles"}),l.jsx(Vr,{size:16})]}),l.jsxs("div",{className:"flex items-center text-sm",children:[l.jsx("span",{className:"mr-2",children:"All Time"}),l.jsx(Vr,{size:16})]}),l.jsx("button",{className:"p-1 rounded hover:bg-terminal-accent/50",children:l.jsx(Vo,{size:16,className:"text-terminal-muted"})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-terminal-accent/20 p-3 rounded-md",children:[l.jsx("div",{className:"text-sm text-terminal-muted mb-1",children:"Today"}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"text-xl font-medium mr-2",children:"8 248,37 "}),l.jsx("span",{className:"text-terminal-positive",children:"(0,06%)"})]})]}),l.jsxs("div",{className:"bg-terminal-accent/20 p-3 rounded-md",children:[l.jsx("div",{className:"text-sm text-terminal-muted mb-1",children:"All Time"}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"text-xl font-medium mr-2",children:"2 193 536,03 "}),l.jsx("span",{className:"text-terminal-positive",children:"(19,56%)"})]})]})]}),l.jsxs("div",{className:"flex-grow overflow-auto",children:[l.jsx("div",{className:"mb-1 border-b border-terminal-border pb-2",children:l.jsxs("div",{className:"grid grid-cols-8 text-xs text-terminal-muted",children:[l.jsx("div",{className:"col-span-1",children:"Name"}),l.jsx("div",{className:"text-right",children:"Total"}),l.jsx("div",{className:"text-right",children:"Price"}),l.jsx("div",{className:"text-right",children:"Average"}),l.jsx("div",{className:"text-right",children:"Value"}),l.jsx("div",{className:"text-right",children:"Share"}),l.jsx("div",{className:"text-right",children:"Profit"}),l.jsx("div",{className:"text-right",children:"Profit, %"})]})}),l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex items-center py-2 cursor-pointer text-sm hover:bg-terminal-accent/10",onClick:()=>t(e==="currency"?null:"currency"),children:[e==="currency"?l.jsx(Vr,{size:16,className:"mr-1 text-terminal-text/70"}):l.jsx(m0,{size:16,className:"mr-1 text-terminal-text/70"}),l.jsx("span",{className:"font-medium",children:"Currency and Metals"}),l.jsx("span",{className:"ml-auto",children:"1 110,73 "}),l.jsx("span",{className:"ml-4 w-12 text-right",children:"0,01%"})]}),e==="currency"&&l.jsx("div",{className:"pl-6",children:yee.map((r,n)=>l.jsxs("div",{className:"grid grid-cols-8 py-2 text-sm border-t border-terminal-border/30 hover:bg-terminal-accent/10",children:[l.jsxs("div",{className:"col-span-1 flex items-center",children:[l.jsxs("div",{className:"mr-2 w-6 h-6 rounded-full bg-terminal-accent flex items-center justify-center text-xs",children:[r.symbol==="RUB"&&"",r.symbol==="EUR"&&"",r.symbol==="USD"&&"$"]}),l.jsx("div",{children:l.jsx("div",{children:r.name})})]}),l.jsx("div",{className:"text-right",children:r.quantity}),l.jsx("div",{className:"text-right",children:r.price}),l.jsx("div",{className:"text-right",children:r.avg}),l.jsx("div",{className:"text-right",children:r.value}),l.jsx("div",{className:"text-right",children:r.share}),l.jsx("div",{className:`text-right ${r.profit.includes("-")?"text-terminal-negative":r.profit?"text-terminal-positive":""}`,children:r.profit}),l.jsx("div",{className:`text-right ${r.profitPercent.includes("-")?"text-terminal-negative":r.profitPercent?"text-terminal-positive":""}`,children:r.profitPercent})]},n))})]}),l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex items-center py-2 cursor-pointer text-sm hover:bg-terminal-accent/10",onClick:()=>t(e==="funds"?null:"funds"),children:[e==="funds"?l.jsx(Vr,{size:16,className:"mr-1 text-terminal-text/70"}):l.jsx(m0,{size:16,className:"mr-1 text-terminal-text/70"}),l.jsx("span",{className:"font-medium",children:"Funds"}),l.jsx("span",{className:"ml-auto",children:"13 404 600,00 "}),l.jsx("span",{className:"ml-4 w-12 text-right",children:"99,99%"})]}),e==="funds"&&l.jsx("div",{className:"pl-6",children:Cee.map((r,n)=>l.jsxs("div",{className:"grid grid-cols-8 py-2 text-sm border-t border-terminal-border/30 hover:bg-terminal-accent/10",children:[l.jsxs("div",{className:"col-span-1 flex items-center",children:[l.jsx("div",{className:"mr-2 w-6 h-6 rounded-full bg-purple-600/30 flex items-center justify-center text-xs",children:"LQ"}),l.jsx("div",{children:l.jsx("div",{children:r.name})})]}),l.jsx("div",{className:"text-right",children:r.quantity}),l.jsx("div",{className:"text-right",children:r.price}),l.jsx("div",{className:"text-right",children:r.avg}),l.jsx("div",{className:"text-right",children:r.value}),l.jsx("div",{className:"text-right",children:r.share}),l.jsx("div",{className:"text-right text-terminal-positive",children:r.profit}),l.jsx("div",{className:"text-right text-terminal-positive",children:r.profitPercent})]},n))})]})]})]})},vee={showTotal:!0,hideSmallAmounts:!1,displayType:"table",smallAmountThreshold:1},g2=e=>({widgetId:e,settings:{...vee}}),EZ=ui()(cl((e,t)=>({widgets:new Map,getWidget:r=>{const n=t().widgets.get(r);if(!n){const i=g2(r);return e(o=>({widgets:new Map(o.widgets).set(r,i)})),i}return n},updateWidget:(r,n)=>{e(i=>{const o=new Map(i.widgets),s=o.get(r)||g2(r);return o.set(r,{...s,settings:{...s.settings,...n}}),{widgets:o}})},setWidgetSettings:(r,n)=>{t().updateWidget(r,n)}}),{name:"user-balances-widget-store",partialize:e=>({widgets:Array.from(e.widgets.entries())}),onRehydrateStorage:()=>e=>{e&&Array.isArray(e.widgets)&&(e.widgets=new Map(e.widgets))}}));var bee=Array.isArray,Cn=bee,xee=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,RZ=xee,Aee=RZ,wee=typeof self=="object"&&self&&self.Object===Object&&self,See=Aee||wee||Function("return this")(),yo=See,kee=yo,Bee=kee.Symbol,of=Bee,f2=of,OZ=Object.prototype,Nee=OZ.hasOwnProperty,jee=OZ.toString,_u=f2?f2.toStringTag:void 0;function Tee(e){var t=Nee.call(e,_u),r=e[_u];try{e[_u]=void 0;var n=!0}catch{}var i=jee.call(e);return n&&(t?e[_u]=r:delete e[_u]),i}var Eee=Tee,Ree=Object.prototype,Oee=Ree.toString;function Gee(e){return Oee.call(e)}var Pee=Gee,h2=of,_ee=Eee,Mee=Pee,Zee="[object Null]",Hee="[object Undefined]",p2=h2?h2.toStringTag:void 0;function Lee(e){return e==null?e===void 0?Hee:Zee:p2&&p2 in Object(e)?_ee(e):Mee(e)}var os=Lee;function Wee(e){return e!=null&&typeof e=="object"}var ss=Wee,Dee=os,$ee=ss,Xee="[object Symbol]";function Fee(e){return typeof e=="symbol"||$ee(e)&&Dee(e)==Xee}var du=Fee,Kee=Cn,Vee=du,zee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yee=/^\w*$/;function Uee(e,t){if(Kee(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Vee(e)?!0:Yee.test(e)||!zee.test(e)||t!=null&&e in Object(t)}var Pw=Uee;function Jee(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var la=Jee;const gu=ht(la);var Qee=os,qee=la,ete="[object AsyncFunction]",tte="[object Function]",rte="[object GeneratorFunction]",nte="[object Proxy]";function ite(e){if(!qee(e))return!1;var t=Qee(e);return t==tte||t==rte||t==ete||t==nte}var _w=ite;const Fe=ht(_w);var ote=yo,ste=ote["__core-js_shared__"],ate=ste,XC=ate,m2=function(){var e=/[^.]+$/.exec(XC&&XC.keys&&XC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function lte(e){return!!m2&&m2 in e}var cte=lte,ute=Function.prototype,dte=ute.toString;function gte(e){if(e!=null){try{return dte.call(e)}catch{}try{return e+""}catch{}}return""}var GZ=gte,fte=_w,hte=cte,pte=la,mte=GZ,Ite=/[\\^$.*+?()[\]{}|]/g,yte=/^\[object .+?Constructor\]$/,Cte=Function.prototype,vte=Object.prototype,bte=Cte.toString,xte=vte.hasOwnProperty,Ate=RegExp("^"+bte.call(xte).replace(Ite,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wte(e){if(!pte(e)||hte(e))return!1;var t=fte(e)?Ate:yte;return t.test(mte(e))}var Ste=wte;function kte(e,t){return e==null?void 0:e[t]}var Bte=kte,Nte=Ste,jte=Bte;function Tte(e,t){var r=jte(e,t);return Nte(r)?r:void 0}var dl=Tte,Ete=dl,Rte=Ete(Object,"create"),AI=Rte,I2=AI;function Ote(){this.__data__=I2?I2(null):{},this.size=0}var Gte=Ote;function Pte(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _te=Pte,Mte=AI,Zte="__lodash_hash_undefined__",Hte=Object.prototype,Lte=Hte.hasOwnProperty;function Wte(e){var t=this.__data__;if(Mte){var r=t[e];return r===Zte?void 0:r}return Lte.call(t,e)?t[e]:void 0}var Dte=Wte,$te=AI,Xte=Object.prototype,Fte=Xte.hasOwnProperty;function Kte(e){var t=this.__data__;return $te?t[e]!==void 0:Fte.call(t,e)}var Vte=Kte,zte=AI,Yte="__lodash_hash_undefined__";function Ute(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=zte&&t===void 0?Yte:t,this}var Jte=Ute,Qte=Gte,qte=_te,ere=Dte,tre=Vte,rre=Jte;function fu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fu.prototype.clear=Qte;fu.prototype.delete=qte;fu.prototype.get=ere;fu.prototype.has=tre;fu.prototype.set=rre;var nre=fu;function ire(){this.__data__=[],this.size=0}var ore=ire;function sre(e,t){return e===t||e!==e&&t!==t}var Mw=sre,are=Mw;function lre(e,t){for(var r=e.length;r--;)if(are(e[r][0],t))return r;return-1}var wI=lre,cre=wI,ure=Array.prototype,dre=ure.splice;function gre(e){var t=this.__data__,r=cre(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():dre.call(t,r,1),--this.size,!0}var fre=gre,hre=wI;function pre(e){var t=this.__data__,r=hre(t,e);return r<0?void 0:t[r][1]}var mre=pre,Ire=wI;function yre(e){return Ire(this.__data__,e)>-1}var Cre=yre,vre=wI;function bre(e,t){var r=this.__data__,n=vre(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var xre=bre,Are=ore,wre=fre,Sre=mre,kre=Cre,Bre=xre;function hu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}hu.prototype.clear=Are;hu.prototype.delete=wre;hu.prototype.get=Sre;hu.prototype.has=kre;hu.prototype.set=Bre;var SI=hu,Nre=dl,jre=yo,Tre=Nre(jre,"Map"),Zw=Tre,y2=nre,Ere=SI,Rre=Zw;function Ore(){this.size=0,this.__data__={hash:new y2,map:new(Rre||Ere),string:new y2}}var Gre=Ore;function Pre(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _re=Pre,Mre=_re;function Zre(e,t){var r=e.__data__;return Mre(t)?r[typeof t=="string"?"string":"hash"]:r.map}var kI=Zre,Hre=kI;function Lre(e){var t=Hre(this,e).delete(e);return this.size-=t?1:0,t}var Wre=Lre,Dre=kI;function $re(e){return Dre(this,e).get(e)}var Xre=$re,Fre=kI;function Kre(e){return Fre(this,e).has(e)}var Vre=Kre,zre=kI;function Yre(e,t){var r=zre(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Ure=Yre,Jre=Gre,Qre=Wre,qre=Xre,ene=Vre,tne=Ure;function pu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pu.prototype.clear=Jre;pu.prototype.delete=Qre;pu.prototype.get=qre;pu.prototype.has=ene;pu.prototype.set=tne;var Hw=pu,PZ=Hw,rne="Expected a function";function Lw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(rne);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Lw.Cache||PZ),r}Lw.Cache=PZ;var _Z=Lw;const nne=ht(_Z);var ine=_Z,one=500;function sne(e){var t=ine(e,function(n){return r.size===one&&r.clear(),n}),r=t.cache;return t}var ane=sne,lne=ane,cne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,une=/\\(\\)?/g,dne=lne(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(cne,function(r,n,i,o){t.push(i?o.replace(une,"$1"):n||r)}),t}),gne=dne;function fne(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Ww=fne,C2=of,hne=Ww,pne=Cn,mne=du,v2=C2?C2.prototype:void 0,b2=v2?v2.toString:void 0;function MZ(e){if(typeof e=="string")return e;if(pne(e))return hne(e,MZ)+"";if(mne(e))return b2?b2.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ine=MZ,yne=Ine;function Cne(e){return e==null?"":yne(e)}var ZZ=Cne,vne=Cn,bne=Pw,xne=gne,Ane=ZZ;function wne(e,t){return vne(e)?e:bne(e,t)?[e]:xne(Ane(e))}var HZ=wne,Sne=du;function kne(e){if(typeof e=="string"||Sne(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var BI=kne,Bne=HZ,Nne=BI;function jne(e,t){t=Bne(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Nne(t[r++])];return r&&r==n?e:void 0}var Dw=jne,Tne=Dw;function Ene(e,t,r){var n=e==null?void 0:Tne(e,t);return n===void 0?r:n}var LZ=Ene;const Pi=ht(LZ);function Rne(e){return e==null}var One=Rne;const qe=ht(One);var Gne=os,Pne=Cn,_ne=ss,Mne="[object String]";function Zne(e){return typeof e=="string"||!Pne(e)&&_ne(e)&&Gne(e)==Mne}var Hne=Zne;const sf=ht(Hne);var WZ={exports:{}},pt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w=Symbol.for("react.element"),Xw=Symbol.for("react.portal"),NI=Symbol.for("react.fragment"),jI=Symbol.for("react.strict_mode"),TI=Symbol.for("react.profiler"),EI=Symbol.for("react.provider"),RI=Symbol.for("react.context"),Lne=Symbol.for("react.server_context"),OI=Symbol.for("react.forward_ref"),GI=Symbol.for("react.suspense"),PI=Symbol.for("react.suspense_list"),_I=Symbol.for("react.memo"),MI=Symbol.for("react.lazy"),Wne=Symbol.for("react.offscreen"),DZ;DZ=Symbol.for("react.module.reference");function hi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case $w:switch(e=e.type,e){case NI:case TI:case jI:case GI:case PI:return e;default:switch(e=e&&e.$$typeof,e){case Lne:case RI:case OI:case MI:case _I:case EI:return e;default:return t}}case Xw:return t}}}pt.ContextConsumer=RI;pt.ContextProvider=EI;pt.Element=$w;pt.ForwardRef=OI;pt.Fragment=NI;pt.Lazy=MI;pt.Memo=_I;pt.Portal=Xw;pt.Profiler=TI;pt.StrictMode=jI;pt.Suspense=GI;pt.SuspenseList=PI;pt.isAsyncMode=function(){return!1};pt.isConcurrentMode=function(){return!1};pt.isContextConsumer=function(e){return hi(e)===RI};pt.isContextProvider=function(e){return hi(e)===EI};pt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===$w};pt.isForwardRef=function(e){return hi(e)===OI};pt.isFragment=function(e){return hi(e)===NI};pt.isLazy=function(e){return hi(e)===MI};pt.isMemo=function(e){return hi(e)===_I};pt.isPortal=function(e){return hi(e)===Xw};pt.isProfiler=function(e){return hi(e)===TI};pt.isStrictMode=function(e){return hi(e)===jI};pt.isSuspense=function(e){return hi(e)===GI};pt.isSuspenseList=function(e){return hi(e)===PI};pt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===NI||e===TI||e===jI||e===GI||e===PI||e===Wne||typeof e=="object"&&e!==null&&(e.$$typeof===MI||e.$$typeof===_I||e.$$typeof===EI||e.$$typeof===RI||e.$$typeof===OI||e.$$typeof===DZ||e.getModuleId!==void 0)};pt.typeOf=hi;WZ.exports=pt;var Dne=WZ.exports,$ne=os,Xne=ss,Fne="[object Number]";function Kne(e){return typeof e=="number"||Xne(e)&&$ne(e)==Fne}var $Z=Kne;const Vne=ht($Z);var zne=$Z;function Yne(e){return zne(e)&&e!=+e}var Une=Yne;const af=ht(Une);var ri=function(t){return t===0?0:t>0?1:-1},Ea=function(t){return sf(t)&&t.indexOf("%")===t.length-1},pe=function(t){return Vne(t)&&!af(t)},ur=function(t){return pe(t)||sf(t)},Jne=0,ZI=function(t){var r=++Jne;return"".concat(t||"").concat(r)},cn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!pe(t)&&!sf(t))return n;var o;if(Ea(t)){var s=t.indexOf("%");o=r*parseFloat(t.slice(0,s))/100}else o=+t;return af(o)&&(o=n),i&&o>r&&(o=r),o},Nl=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Qne=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},x2=function(t,r){return pe(t)&&pe(r)?function(n){return t+n*(r-t)}:function(){return r}};function sb(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Pi(n,t))===r})}function ab(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function lb(e){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lb(e)}var qne=["viewBox","children"],eie=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],A2=["points","pathLength"],FC={svg:qne,polygon:A2,polyline:A2},Fw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Op=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(b.isValidElement(t)&&(n=t.props),!gu(n))return null;var i={};return Object.keys(n).forEach(function(o){Fw.includes(o)&&(i[o]=r||function(s){return n[o](n,s)})}),i},tie=function(t,r,n){return function(i){return t(r,n,i),null}},HI=function(t,r,n){if(!gu(t)||lb(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(o){var s=t[o];Fw.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=tie(s,r,n))}),i},rie=["children"],nie=["children"];function w2(e,t){if(e==null)return{};var r=iie(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var S2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Lo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},k2=null,KC=null,Kw=function e(t){if(t===k2&&Array.isArray(KC))return KC;var r=[];return b.Children.forEach(t,function(n){qe(n)||(Dne.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),KC=r,k2=t,r};function lo(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return Lo(i)}):n=[Lo(t)],Kw(e).forEach(function(i){var o=Pi(i,"type.displayName")||Pi(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function Kn(e,t){var r=lo(e,t);return r&&r[0]}var B2=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!pe(n)||n<=0||!pe(i)||i<=0)},oie=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sie=function(t){return t&&t.type&&sf(t.type)&&oie.indexOf(t.type)>=0},aie=function(t,r,n,i){var o,s=(o=FC==null?void 0:FC[i])!==null&&o!==void 0?o:[];return r.startsWith("data-")||!Fe(t)&&(i&&s.includes(r)||eie.includes(r))||n&&Fw.includes(r)},De=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(b.isValidElement(t)&&(i=t.props),!gu(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;aie((a=i)===null||a===void 0?void 0:a[s],s,r,n)&&(o[s]=i[s])}),o},cb=function e(t,r){if(t===r)return!0;var n=b.Children.count(t);if(n!==b.Children.count(r))return!1;if(n===0)return!0;if(n===1)return N2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var o=t[i],s=r[i];if(Array.isArray(o)||Array.isArray(s)){if(!e(o,s))return!1}else if(!N2(o,s))return!1}return!0},N2=function(t,r){if(qe(t)&&qe(r))return!0;if(!qe(t)&&!qe(r)){var n=t.props||{},i=n.children,o=w2(n,rie),s=r.props||{},a=s.children,c=w2(s,nie);return i&&a?ab(o,c)&&cb(i,a):!i&&!a?ab(o,c):!1}return!1},j2=function(t,r){var n=[],i={};return Kw(t).forEach(function(o,s){if(sie(o))n.push(o);else if(o){var a=Lo(o.type),c=r[a]||{},u=c.handler,d=c.once;if(u&&(!d||!i[a])){var g=u(o,a,s);n.push(g),i[a]=!0}}}),n},lie=function(t){var r=t&&t.type;return r&&S2[r]?S2[r]:null},cie=function(t,r){return Kw(r).indexOf(t)},uie=["children","width","height","viewBox","className","style","title","desc"];function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ub.apply(this,arguments)}function die(e,t){if(e==null)return{};var r=gie(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function db(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,o=e.className,s=e.style,a=e.title,c=e.desc,u=die(e,uie),d=i||{width:r,height:n,x:0,y:0},g=rt("recharts-surface",o);return H.createElement("svg",ub({},De(u,!0,"svg"),{className:g,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),H.createElement("title",null,a),H.createElement("desc",null,c),t)}var fie=["children","className"];function gb(){return gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gb.apply(this,arguments)}function hie(e,t){if(e==null)return{};var r=pie(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ut=H.forwardRef(function(e,t){var r=e.children,n=e.className,i=hie(e,fie),o=rt("recharts-layer",n);return H.createElement("g",gb({className:o},De(i,!0),{ref:t}),r)}),Wo=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function mie(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}var Iie=mie,yie=Iie;function Cie(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:yie(e,t,r)}var vie=Cie,bie="\\ud800-\\udfff",xie="\\u0300-\\u036f",Aie="\\ufe20-\\ufe2f",wie="\\u20d0-\\u20ff",Sie=xie+Aie+wie,kie="\\ufe0e\\ufe0f",Bie="\\u200d",Nie=RegExp("["+Bie+bie+Sie+kie+"]");function jie(e){return Nie.test(e)}var XZ=jie;function Tie(e){return e.split("")}var Eie=Tie,FZ="\\ud800-\\udfff",Rie="\\u0300-\\u036f",Oie="\\ufe20-\\ufe2f",Gie="\\u20d0-\\u20ff",Pie=Rie+Oie+Gie,_ie="\\ufe0e\\ufe0f",Mie="["+FZ+"]",fb="["+Pie+"]",hb="\\ud83c[\\udffb-\\udfff]",Zie="(?:"+fb+"|"+hb+")",KZ="[^"+FZ+"]",VZ="(?:\\ud83c[\\udde6-\\uddff]){2}",zZ="[\\ud800-\\udbff][\\udc00-\\udfff]",Hie="\\u200d",YZ=Zie+"?",UZ="["+_ie+"]?",Lie="(?:"+Hie+"(?:"+[KZ,VZ,zZ].join("|")+")"+UZ+YZ+")*",Wie=UZ+YZ+Lie,Die="(?:"+[KZ+fb+"?",fb,VZ,zZ,Mie].join("|")+")",$ie=RegExp(hb+"(?="+hb+")|"+Die+Wie,"g");function Xie(e){return e.match($ie)||[]}var Fie=Xie,Kie=Eie,Vie=XZ,zie=Fie;function Yie(e){return Vie(e)?zie(e):Kie(e)}var Uie=Yie,Jie=vie,Qie=XZ,qie=Uie,eoe=ZZ;function toe(e){return function(t){t=eoe(t);var r=Qie(t)?qie(t):void 0,n=r?r[0]:t.charAt(0),i=r?Jie(r,1).join(""):t.slice(1);return n[e]()+i}}var roe=toe,noe=roe,ioe=noe("toUpperCase"),ooe=ioe;const LI=ht(ooe);function wt(e){return function(){return e}}const JZ=Math.cos,Gp=Math.sin,$i=Math.sqrt,Pp=Math.PI,WI=2*Pp,pb=Math.PI,mb=2*pb,ba=1e-6,soe=mb-ba;function QZ(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function aoe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return QZ;const r=10**t;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class loe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?QZ:aoe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,o,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,r,n,i,o){if(t=+t,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=n-t,u=i-r,d=s-t,g=a-r,f=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>ba)if(!(Math.abs(g*c-u*d)>ba)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,v=i-a,p=c*c+u*u,I=m*m+v*v,h=Math.sqrt(p),y=Math.sqrt(f),C=o*Math.tan((pb-Math.acos((p+f-I)/(2*h*y)))/2),x=C/y,A=C/h;Math.abs(x-1)>ba&&this._append`L${t+x*d},${r+x*g}`,this._append`A${o},${o},0,0,${+(g*m>d*v)},${this._x1=t+A*c},${this._y1=r+A*u}`}}arc(t,r,n,i,o,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),c=n*Math.sin(i),u=t+a,d=r+c,g=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ba||Math.abs(this._y1-d)>ba)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%mb+mb),f>soe?this._append`A${n},${n},0,1,${g},${t-a},${r-c}A${n},${n},0,1,${g},${this._x1=u},${this._y1=d}`:f>ba&&this._append`A${n},${n},0,${+(f>=pb)},${g},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Vw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new loe(t)}function zw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qZ(e){this._context=e}qZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function DI(e){return new qZ(e)}function eH(e){return e[0]}function tH(e){return e[1]}function rH(e,t){var r=wt(!0),n=null,i=DI,o=null,s=Vw(a);e=typeof e=="function"?e:e===void 0?eH:wt(e),t=typeof t=="function"?t:t===void 0?tH:wt(t);function a(c){var u,d=(c=zw(c)).length,g,f=!1,m;for(n==null&&(o=i(m=s())),u=0;u<=d;++u)!(u<d&&r(g=c[u],u,c))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(g,u,c),+t(g,u,c));if(m)return o=null,m+""||null}return a.x=function(c){return arguments.length?(e=typeof c=="function"?c:wt(+c),a):e},a.y=function(c){return arguments.length?(t=typeof c=="function"?c:wt(+c),a):t},a.defined=function(c){return arguments.length?(r=typeof c=="function"?c:wt(!!c),a):r},a.curve=function(c){return arguments.length?(i=c,n!=null&&(o=i(n)),a):i},a.context=function(c){return arguments.length?(c==null?n=o=null:o=i(n=c),a):n},a}function Qf(e,t,r){var n=null,i=wt(!0),o=null,s=DI,a=null,c=Vw(u);e=typeof e=="function"?e:e===void 0?eH:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?tH:wt(+r);function u(g){var f,m,v,p=(g=zw(g)).length,I,h=!1,y,C=new Array(p),x=new Array(p);for(o==null&&(a=s(y=c())),f=0;f<=p;++f){if(!(f<p&&i(I=g[f],f,g))===h)if(h=!h)m=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),v=f-1;v>=m;--v)a.point(C[v],x[v]);a.lineEnd(),a.areaEnd()}h&&(C[f]=+e(I,f,g),x[f]=+t(I,f,g),a.point(n?+n(I,f,g):C[f],r?+r(I,f,g):x[f]))}if(y)return a=null,y+""||null}function d(){return rH().defined(i).curve(s).context(o)}return u.x=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),n=null,u):e},u.x0=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),u):e},u.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:wt(+g),u):n},u.y=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),r=null,u):t},u.y0=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),u):t},u.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:wt(+g),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(g){return arguments.length?(i=typeof g=="function"?g:wt(!!g),u):i},u.curve=function(g){return arguments.length?(s=g,o!=null&&(a=s(o)),u):s},u.context=function(g){return arguments.length?(g==null?o=a=null:a=s(o=g),u):o},u}class nH{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function coe(e){return new nH(e,!0)}function uoe(e){return new nH(e,!1)}const Yw={draw(e,t){const r=$i(t/Pp);e.moveTo(r,0),e.arc(0,0,r,0,WI)}},doe={draw(e,t){const r=$i(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},iH=$i(1/3),goe=iH*2,foe={draw(e,t){const r=$i(t/goe),n=r*iH;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},hoe={draw(e,t){const r=$i(t),n=-r/2;e.rect(n,n,r,r)}},poe=.8908130915292852,oH=Gp(Pp/10)/Gp(7*Pp/10),moe=Gp(WI/10)*oH,Ioe=-JZ(WI/10)*oH,yoe={draw(e,t){const r=$i(t*poe),n=moe*r,i=Ioe*r;e.moveTo(0,-r),e.lineTo(n,i);for(let o=1;o<5;++o){const s=WI*o/5,a=JZ(s),c=Gp(s);e.lineTo(c*r,-a*r),e.lineTo(a*n-c*i,c*n+a*i)}e.closePath()}},VC=$i(3),Coe={draw(e,t){const r=-$i(t/(VC*3));e.moveTo(0,r*2),e.lineTo(-VC*r,-r),e.lineTo(VC*r,-r),e.closePath()}},Dn=-.5,$n=$i(3)/2,Ib=1/$i(12),voe=(Ib/2+1)*3,boe={draw(e,t){const r=$i(t/voe),n=r/2,i=r*Ib,o=n,s=r*Ib+r,a=-o,c=s;e.moveTo(n,i),e.lineTo(o,s),e.lineTo(a,c),e.lineTo(Dn*n-$n*i,$n*n+Dn*i),e.lineTo(Dn*o-$n*s,$n*o+Dn*s),e.lineTo(Dn*a-$n*c,$n*a+Dn*c),e.lineTo(Dn*n+$n*i,Dn*i-$n*n),e.lineTo(Dn*o+$n*s,Dn*s-$n*o),e.lineTo(Dn*a+$n*c,Dn*c-$n*a),e.closePath()}};function xoe(e,t){let r=null,n=Vw(i);e=typeof e=="function"?e:wt(e||Yw),t=typeof t=="function"?t:wt(t===void 0?64:+t);function i(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:wt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:wt(+o),i):t},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function _p(){}function Mp(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function sH(e){this._context=e}sH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Aoe(e){return new sH(e)}function aH(e){this._context=e}aH.prototype={areaStart:_p,areaEnd:_p,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function woe(e){return new aH(e)}function lH(e){this._context=e}lH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Mp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Soe(e){return new lH(e)}function cH(e){this._context=e}cH.prototype={areaStart:_p,areaEnd:_p,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function koe(e){return new cH(e)}function T2(e){return e<0?-1:1}function E2(e,t,r){var n=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),a=(o*i+s*n)/(n+i);return(T2(o)+T2(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function R2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function zC(e,t,r){var n=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-n)/3;e._context.bezierCurveTo(n+a,i+a*t,o-a,s-a*r,o,s)}function Zp(e){this._context=e}Zp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zC(this,this._t0,R2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zC(this,R2(this,r=E2(this,e,t)),r);break;default:zC(this,this._t0,r=E2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function uH(e){this._context=new dH(e)}(uH.prototype=Object.create(Zp.prototype)).point=function(e,t){Zp.prototype.point.call(this,t,e)};function dH(e){this._context=e}dH.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,o){this._context.bezierCurveTo(t,e,n,r,o,i)}};function Boe(e){return new Zp(e)}function Noe(e){return new uH(e)}function gH(e){this._context=e}gH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=O2(e),i=O2(t),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function O2(e){var t,r=e.length-1,n,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function joe(e){return new gH(e)}function $I(e,t){this._context=e,this._t=t}$I.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Toe(e){return new $I(e,.5)}function Eoe(e){return new $I(e,0)}function Roe(e){return new $I(e,1)}function Gc(e,t){if((s=e.length)>1)for(var r=1,n,i,o=e[t[0]],s,a=o.length;r<s;++r)for(i=o,o=e[t[r]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function yb(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Ooe(e,t){return e[t]}function Goe(e){const t=[];return t.key=e,t}function Poe(){var e=wt([]),t=yb,r=Gc,n=Ooe;function i(o){var s=Array.from(e.apply(this,arguments),Goe),a,c=s.length,u=-1,d;for(const g of o)for(a=0,++u;a<c;++a)(s[a][u]=[0,+n(g,s[a].key,u,o)]).data=g;for(a=0,d=zw(t(s));a<c;++a)s[d[a]].index=a;return r(s,d),s}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:wt(Array.from(o)),i):e},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:wt(+o),i):n},i.order=function(o){return arguments.length?(t=o==null?yb:typeof o=="function"?o:wt(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(r=o??Gc,i):r},i}function _oe(e,t){if((n=e.length)>0){for(var r,n,i=0,o=e[0].length,s;i<o;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}Gc(e,t)}}function Moe(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,o=n.length;r<o;++r){for(var s=0,a=0;s<i;++s)a+=e[s][r][1]||0;n[r][1]+=n[r][0]=-a/2}Gc(e,t)}}function Zoe(e,t){if(!(!((s=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,o,s;n<o;++n){for(var a=0,c=0,u=0;a<s;++a){for(var d=e[t[a]],g=d[n][1]||0,f=d[n-1][1]||0,m=(g-f)/2,v=0;v<a;++v){var p=e[t[v]],I=p[n][1]||0,h=p[n-1][1]||0;m+=I-h}c+=g,u+=m*g}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Gc(e,t)}}function tg(e){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tg(e)}var Hoe=["type","size","sizeType"];function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(this,arguments)}function G2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function P2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(r),!0).forEach(function(n){Loe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Loe(e,t,r){return t=Woe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Woe(e){var t=Doe(e,"string");return tg(t)=="symbol"?t:t+""}function Doe(e,t){if(tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $oe(e,t){if(e==null)return{};var r=Xoe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xoe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fH={symbolCircle:Yw,symbolCross:doe,symbolDiamond:foe,symbolSquare:hoe,symbolStar:yoe,symbolTriangle:Coe,symbolWye:boe},Foe=Math.PI/180,Koe=function(t){var r="symbol".concat(LI(t));return fH[r]||Yw},Voe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*Foe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},zoe=function(t,r){fH["symbol".concat(LI(t))]=r},Uw=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,o=i===void 0?64:i,s=t.sizeType,a=s===void 0?"area":s,c=$oe(t,Hoe),u=P2(P2({},c),{},{type:n,size:o,sizeType:a}),d=function(){var I=Koe(n),h=xoe().type(I).size(Voe(o,a,n));return h()},g=u.className,f=u.cx,m=u.cy,v=De(u,!0);return f===+f&&m===+m&&o===+o?H.createElement("path",Cb({},v,{className:rt("recharts-symbols",g),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};Uw.registerSymbol=zoe;function Pc(e){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(e)}function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vb.apply(this,arguments)}function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yoe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){rg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Joe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pH(n.key),n)}}function Qoe(e,t,r){return t&&Joe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qoe(e,t,r){return t=Hp(t),ese(e,hH()?Reflect.construct(t,r||[],Hp(e).constructor):t.apply(e,r))}function ese(e,t){if(t&&(Pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tse(e)}function tse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!e})()}function Hp(e){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hp(e)}function rse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bb(e,t)}function bb(e,t){return bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bb(e,t)}function rg(e,t,r){return t=pH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pH(e){var t=nse(e,"string");return Pc(t)=="symbol"?t:t+""}function nse(e,t){if(Pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xn=32,Jw=function(e){function t(){return Uoe(this,t),qoe(this,t,arguments)}return rse(t,e),Qoe(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,o=Xn/2,s=Xn/6,a=Xn/3,c=n.inactive?i:n.color;if(n.type==="plainline")return H.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Xn,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return H.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(Xn,"M").concat(2*a,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return H.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Xn/8,"h").concat(Xn,"v").concat(Xn*3/4,"h").concat(-Xn,"z"),className:"recharts-legend-icon"});if(H.isValidElement(n.legendIcon)){var u=Yoe({},n);return delete u.legendIcon,H.cloneElement(n.legendIcon,u)}return H.createElement(Uw,{fill:c,cx:o,cy:o,size:Xn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,o=i.payload,s=i.iconSize,a=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Xn,height:Xn},g={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(m,v){var p=m.formatter||c,I=rt(rg(rg({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var h=Fe(m.value)?null:m.value;Wo(!Fe(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?u:m.color;return H.createElement("li",vb({className:I,style:g,key:"legend-item-".concat(v)},HI(n.props,m,v)),H.createElement(db,{width:s,height:s,viewBox:d,style:f},n.renderIcon(m)),H.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(h,m,v):h))})}},{key:"render",value:function(){var n=this.props,i=n.payload,o=n.layout,s=n.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:o==="horizontal"?s:"left"};return H.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(b.PureComponent);rg(Jw,"displayName","Legend");rg(Jw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ise=SI;function ose(){this.__data__=new ise,this.size=0}var sse=ose;function ase(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var lse=ase;function cse(e){return this.__data__.get(e)}var use=cse;function dse(e){return this.__data__.has(e)}var gse=dse,fse=SI,hse=Zw,pse=Hw,mse=200;function Ise(e,t){var r=this.__data__;if(r instanceof fse){var n=r.__data__;if(!hse||n.length<mse-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new pse(n)}return r.set(e,t),this.size=r.size,this}var yse=Ise,Cse=SI,vse=sse,bse=lse,xse=use,Ase=gse,wse=yse;function mu(e){var t=this.__data__=new Cse(e);this.size=t.size}mu.prototype.clear=vse;mu.prototype.delete=bse;mu.prototype.get=xse;mu.prototype.has=Ase;mu.prototype.set=wse;var mH=mu,Sse="__lodash_hash_undefined__";function kse(e){return this.__data__.set(e,Sse),this}var Bse=kse;function Nse(e){return this.__data__.has(e)}var jse=Nse,Tse=Hw,Ese=Bse,Rse=jse;function Lp(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Tse;++t<r;)this.add(e[t])}Lp.prototype.add=Lp.prototype.push=Ese;Lp.prototype.has=Rse;var IH=Lp;function Ose(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var yH=Ose;function Gse(e,t){return e.has(t)}var CH=Gse,Pse=IH,_se=yH,Mse=CH,Zse=1,Hse=2;function Lse(e,t,r,n,i,o){var s=r&Zse,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var g=-1,f=!0,m=r&Hse?new Pse:void 0;for(o.set(e,t),o.set(t,e);++g<a;){var v=e[g],p=t[g];if(n)var I=s?n(p,v,g,t,e,o):n(v,p,g,e,t,o);if(I!==void 0){if(I)continue;f=!1;break}if(m){if(!_se(t,function(h,y){if(!Mse(m,y)&&(v===h||i(v,h,r,n,o)))return m.push(y)})){f=!1;break}}else if(!(v===p||i(v,p,r,n,o))){f=!1;break}}return o.delete(e),o.delete(t),f}var vH=Lse,Wse=yo,Dse=Wse.Uint8Array,$se=Dse;function Xse(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var Fse=Xse;function Kse(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Qw=Kse,M2=of,Z2=$se,Vse=Mw,zse=vH,Yse=Fse,Use=Qw,Jse=1,Qse=2,qse="[object Boolean]",eae="[object Date]",tae="[object Error]",rae="[object Map]",nae="[object Number]",iae="[object RegExp]",oae="[object Set]",sae="[object String]",aae="[object Symbol]",lae="[object ArrayBuffer]",cae="[object DataView]",H2=M2?M2.prototype:void 0,YC=H2?H2.valueOf:void 0;function uae(e,t,r,n,i,o,s){switch(r){case cae:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case lae:return!(e.byteLength!=t.byteLength||!o(new Z2(e),new Z2(t)));case qse:case eae:case nae:return Vse(+e,+t);case tae:return e.name==t.name&&e.message==t.message;case iae:case sae:return e==t+"";case rae:var a=Yse;case oae:var c=n&Jse;if(a||(a=Use),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=Qse,s.set(e,t);var d=zse(a(e),a(t),n,i,o,s);return s.delete(e),d;case aae:if(YC)return YC.call(e)==YC.call(t)}return!1}var dae=uae;function gae(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var bH=gae,fae=bH,hae=Cn;function pae(e,t,r){var n=t(e);return hae(e)?n:fae(n,r(e))}var mae=pae;function Iae(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}var yae=Iae;function Cae(){return[]}var vae=Cae,bae=yae,xae=vae,Aae=Object.prototype,wae=Aae.propertyIsEnumerable,L2=Object.getOwnPropertySymbols,Sae=L2?function(e){return e==null?[]:(e=Object(e),bae(L2(e),function(t){return wae.call(e,t)}))}:xae,kae=Sae;function Bae(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Nae=Bae,jae=os,Tae=ss,Eae="[object Arguments]";function Rae(e){return Tae(e)&&jae(e)==Eae}var Oae=Rae,W2=Oae,Gae=ss,xH=Object.prototype,Pae=xH.hasOwnProperty,_ae=xH.propertyIsEnumerable,Mae=W2(function(){return arguments}())?W2:function(e){return Gae(e)&&Pae.call(e,"callee")&&!_ae.call(e,"callee")},qw=Mae,Wp={exports:{}};function Zae(){return!1}var Hae=Zae;Wp.exports;(function(e,t){var r=yo,n=Hae,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s?r.Buffer:void 0,c=a?a.isBuffer:void 0,u=c||n;e.exports=u})(Wp,Wp.exports);var AH=Wp.exports,Lae=9007199254740991,Wae=/^(?:0|[1-9]\d*)$/;function Dae(e,t){var r=typeof e;return t=t??Lae,!!t&&(r=="number"||r!="symbol"&&Wae.test(e))&&e>-1&&e%1==0&&e<t}var e1=Dae,$ae=9007199254740991;function Xae(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=$ae}var t1=Xae,Fae=os,Kae=t1,Vae=ss,zae="[object Arguments]",Yae="[object Array]",Uae="[object Boolean]",Jae="[object Date]",Qae="[object Error]",qae="[object Function]",ele="[object Map]",tle="[object Number]",rle="[object Object]",nle="[object RegExp]",ile="[object Set]",ole="[object String]",sle="[object WeakMap]",ale="[object ArrayBuffer]",lle="[object DataView]",cle="[object Float32Array]",ule="[object Float64Array]",dle="[object Int8Array]",gle="[object Int16Array]",fle="[object Int32Array]",hle="[object Uint8Array]",ple="[object Uint8ClampedArray]",mle="[object Uint16Array]",Ile="[object Uint32Array]",Gt={};Gt[cle]=Gt[ule]=Gt[dle]=Gt[gle]=Gt[fle]=Gt[hle]=Gt[ple]=Gt[mle]=Gt[Ile]=!0;Gt[zae]=Gt[Yae]=Gt[ale]=Gt[Uae]=Gt[lle]=Gt[Jae]=Gt[Qae]=Gt[qae]=Gt[ele]=Gt[tle]=Gt[rle]=Gt[nle]=Gt[ile]=Gt[ole]=Gt[sle]=!1;function yle(e){return Vae(e)&&Kae(e.length)&&!!Gt[Fae(e)]}var Cle=yle;function vle(e){return function(t){return e(t)}}var wH=vle,Dp={exports:{}};Dp.exports;(function(e,t){var r=RZ,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,s=o&&r.process,a=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=a})(Dp,Dp.exports);var ble=Dp.exports,xle=Cle,Ale=wH,D2=ble,$2=D2&&D2.isTypedArray,wle=$2?Ale($2):xle,SH=wle,Sle=Nae,kle=qw,Ble=Cn,Nle=AH,jle=e1,Tle=SH,Ele=Object.prototype,Rle=Ele.hasOwnProperty;function Ole(e,t){var r=Ble(e),n=!r&&kle(e),i=!r&&!n&&Nle(e),o=!r&&!n&&!i&&Tle(e),s=r||n||i||o,a=s?Sle(e.length,String):[],c=a.length;for(var u in e)(t||Rle.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||jle(u,c)))&&a.push(u);return a}var Gle=Ole,Ple=Object.prototype;function _le(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Ple;return e===r}var Mle=_le;function Zle(e,t){return function(r){return e(t(r))}}var kH=Zle,Hle=kH,Lle=Hle(Object.keys,Object),Wle=Lle,Dle=Mle,$le=Wle,Xle=Object.prototype,Fle=Xle.hasOwnProperty;function Kle(e){if(!Dle(e))return $le(e);var t=[];for(var r in Object(e))Fle.call(e,r)&&r!="constructor"&&t.push(r);return t}var Vle=Kle,zle=_w,Yle=t1;function Ule(e){return e!=null&&Yle(e.length)&&!zle(e)}var XI=Ule,Jle=Gle,Qle=Vle,qle=XI;function ece(e){return qle(e)?Jle(e):Qle(e)}var r1=ece,tce=mae,rce=kae,nce=r1;function ice(e){return tce(e,nce,rce)}var oce=ice,X2=oce,sce=1,ace=Object.prototype,lce=ace.hasOwnProperty;function cce(e,t,r,n,i,o){var s=r&sce,a=X2(e),c=a.length,u=X2(t),d=u.length;if(c!=d&&!s)return!1;for(var g=c;g--;){var f=a[g];if(!(s?f in t:lce.call(t,f)))return!1}var m=o.get(e),v=o.get(t);if(m&&v)return m==t&&v==e;var p=!0;o.set(e,t),o.set(t,e);for(var I=s;++g<c;){f=a[g];var h=e[f],y=t[f];if(n)var C=s?n(y,h,f,t,e,o):n(h,y,f,e,t,o);if(!(C===void 0?h===y||i(h,y,r,n,o):C)){p=!1;break}I||(I=f=="constructor")}if(p&&!I){var x=e.constructor,A=t.constructor;x!=A&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof A=="function"&&A instanceof A)&&(p=!1)}return o.delete(e),o.delete(t),p}var uce=cce,dce=dl,gce=yo,fce=dce(gce,"DataView"),hce=fce,pce=dl,mce=yo,Ice=pce(mce,"Promise"),yce=Ice,Cce=dl,vce=yo,bce=Cce(vce,"Set"),BH=bce,xce=dl,Ace=yo,wce=xce(Ace,"WeakMap"),Sce=wce,xb=hce,Ab=Zw,wb=yce,Sb=BH,kb=Sce,NH=os,Iu=GZ,F2="[object Map]",kce="[object Object]",K2="[object Promise]",V2="[object Set]",z2="[object WeakMap]",Y2="[object DataView]",Bce=Iu(xb),Nce=Iu(Ab),jce=Iu(wb),Tce=Iu(Sb),Ece=Iu(kb),xa=NH;(xb&&xa(new xb(new ArrayBuffer(1)))!=Y2||Ab&&xa(new Ab)!=F2||wb&&xa(wb.resolve())!=K2||Sb&&xa(new Sb)!=V2||kb&&xa(new kb)!=z2)&&(xa=function(e){var t=NH(e),r=t==kce?e.constructor:void 0,n=r?Iu(r):"";if(n)switch(n){case Bce:return Y2;case Nce:return F2;case jce:return K2;case Tce:return V2;case Ece:return z2}return t});var Rce=xa,UC=mH,Oce=vH,Gce=dae,Pce=uce,U2=Rce,J2=Cn,Q2=AH,_ce=SH,Mce=1,q2="[object Arguments]",ej="[object Array]",qf="[object Object]",Zce=Object.prototype,tj=Zce.hasOwnProperty;function Hce(e,t,r,n,i,o){var s=J2(e),a=J2(t),c=s?ej:U2(e),u=a?ej:U2(t);c=c==q2?qf:c,u=u==q2?qf:u;var d=c==qf,g=u==qf,f=c==u;if(f&&Q2(e)){if(!Q2(t))return!1;s=!0,d=!1}if(f&&!d)return o||(o=new UC),s||_ce(e)?Oce(e,t,r,n,i,o):Gce(e,t,c,r,n,i,o);if(!(r&Mce)){var m=d&&tj.call(e,"__wrapped__"),v=g&&tj.call(t,"__wrapped__");if(m||v){var p=m?e.value():e,I=v?t.value():t;return o||(o=new UC),i(p,I,r,n,o)}}return f?(o||(o=new UC),Pce(e,t,r,n,i,o)):!1}var Lce=Hce,Wce=Lce,rj=ss;function jH(e,t,r,n,i){return e===t?!0:e==null||t==null||!rj(e)&&!rj(t)?e!==e&&t!==t:Wce(e,t,r,n,jH,i)}var n1=jH,Dce=mH,$ce=n1,Xce=1,Fce=2;function Kce(e,t,r,n){var i=r.length,o=i,s=!n;if(e==null)return!o;for(e=Object(e);i--;){var a=r[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=r[i];var c=a[0],u=e[c],d=a[1];if(s&&a[2]){if(u===void 0&&!(c in e))return!1}else{var g=new Dce;if(n)var f=n(u,d,c,e,t,g);if(!(f===void 0?$ce(d,u,Xce|Fce,n,g):f))return!1}}return!0}var Vce=Kce,zce=la;function Yce(e){return e===e&&!zce(e)}var TH=Yce,Uce=TH,Jce=r1;function Qce(e){for(var t=Jce(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Uce(i)]}return t}var qce=Qce;function eue(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var EH=eue,tue=Vce,rue=qce,nue=EH;function iue(e){var t=rue(e);return t.length==1&&t[0][2]?nue(t[0][0],t[0][1]):function(r){return r===e||tue(r,e,t)}}var oue=iue;function sue(e,t){return e!=null&&t in Object(e)}var aue=sue,lue=HZ,cue=qw,uue=Cn,due=e1,gue=t1,fue=BI;function hue(e,t,r){t=lue(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var s=fue(t[n]);if(!(o=e!=null&&r(e,s)))break;e=e[s]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&gue(i)&&due(s,i)&&(uue(e)||cue(e)))}var pue=hue,mue=aue,Iue=pue;function yue(e,t){return e!=null&&Iue(e,t,mue)}var Cue=yue,vue=n1,bue=LZ,xue=Cue,Aue=Pw,wue=TH,Sue=EH,kue=BI,Bue=1,Nue=2;function jue(e,t){return Aue(e)&&wue(t)?Sue(kue(e),t):function(r){var n=bue(r,e);return n===void 0&&n===t?xue(r,e):vue(t,n,Bue|Nue)}}var Tue=jue;function Eue(e){return e}var yu=Eue;function Rue(e){return function(t){return t==null?void 0:t[e]}}var Oue=Rue,Gue=Dw;function Pue(e){return function(t){return Gue(t,e)}}var _ue=Pue,Mue=Oue,Zue=_ue,Hue=Pw,Lue=BI;function Wue(e){return Hue(e)?Mue(Lue(e)):Zue(e)}var Due=Wue,$ue=oue,Xue=Tue,Fue=yu,Kue=Cn,Vue=Due;function zue(e){return typeof e=="function"?e:e==null?Fue:typeof e=="object"?Kue(e)?Xue(e[0],e[1]):$ue(e):Vue(e)}var ca=zue;function Yue(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var Uue=Yue;function Jue(e){return e!==e}var Que=Jue;function que(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var ede=que,tde=Uue,rde=Que,nde=ede;function ide(e,t,r){return t===t?nde(e,t,r):tde(e,rde,r)}var ode=ide,sde=ode;function ade(e,t){var r=e==null?0:e.length;return!!r&&sde(e,t,0)>-1}var lde=ade;function cde(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var ude=cde;function dde(){}var gde=dde,JC=BH,fde=gde,hde=Qw,pde=1/0,mde=JC&&1/hde(new JC([,-0]))[1]==pde?function(e){return new JC(e)}:fde,Ide=mde,yde=IH,Cde=lde,vde=ude,bde=CH,xde=Ide,Ade=Qw,wde=200;function Sde(e,t,r){var n=-1,i=Cde,o=e.length,s=!0,a=[],c=a;if(r)s=!1,i=vde;else if(o>=wde){var u=t?null:xde(e);if(u)return Ade(u);s=!1,i=bde,c=new yde}else c=t?[]:a;e:for(;++n<o;){var d=e[n],g=t?t(d):d;if(d=r||d!==0?d:0,s&&g===g){for(var f=c.length;f--;)if(c[f]===g)continue e;t&&c.push(g),a.push(d)}else i(c,g,r)||(c!==a&&c.push(g),a.push(d))}return a}var kde=Sde,Bde=ca,Nde=kde;function jde(e,t){return e&&e.length?Nde(e,Bde(t)):[]}var Tde=jde;const nj=ht(Tde);function RH(e,t,r){return t===!0?nj(e,r):Fe(t)?nj(e,t):e}function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}var Ede=["ref"];function ij(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ij(Object(r),!0).forEach(function(n){FI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ij(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GH(n.key),n)}}function Ode(e,t,r){return t&&oj(e.prototype,t),r&&oj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gde(e,t,r){return t=$p(t),Pde(e,OH()?Reflect.construct(t,r||[],$p(e).constructor):t.apply(e,r))}function Pde(e,t){if(t&&(_c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _de(e)}function _de(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OH=function(){return!!e})()}function $p(e){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$p(e)}function Mde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bb(e,t)}function Bb(e,t){return Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Bb(e,t)}function FI(e,t,r){return t=GH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GH(e){var t=Zde(e,"string");return _c(t)=="symbol"?t:t+""}function Zde(e,t){if(_c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Hde(e,t){if(e==null)return{};var r=Lde(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Lde(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Wde(e){return e.value}function Dde(e,t){if(H.isValidElement(e))return H.cloneElement(e,t);if(typeof e=="function")return H.createElement(e,t);t.ref;var r=Hde(t,Ede);return H.createElement(Jw,r)}var sj=1,Da=function(e){function t(){var r;Rde(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=Gde(this,t,[].concat(i)),FI(r,"lastBoundingBox",{width:-1,height:-1}),r}return Mde(t,e),Ode(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>sj||Math.abs(i.height-this.lastBoundingBox.height)>sj)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?vo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,o=i.layout,s=i.align,a=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,g,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&o==="vertical"){var m=this.getBBoxSnapshot();g={left:((u||0)-m.width)/2}}else g=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(a==="middle"){var v=this.getBBoxSnapshot();f={top:((d||0)-v.height)/2}}else f=a==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return vo(vo({},g),f)}},{key:"render",value:function(){var n=this,i=this.props,o=i.content,s=i.width,a=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,g=vo(vo({position:"absolute",width:s||"auto",height:a||"auto"},this.getDefaultPosition(c)),c);return H.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:function(m){n.wrapperNode=m}},Dde(o,vo(vo({},this.props),{},{payload:RH(d,u,Wde)})))}}],[{key:"getWithHeight",value:function(n,i){var o=vo(vo({},this.defaultProps),n.props),s=o.layout;return s==="vertical"&&pe(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])}(b.PureComponent);FI(Da,"displayName","Legend");FI(Da,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var aj=of,$de=qw,Xde=Cn,lj=aj?aj.isConcatSpreadable:void 0;function Fde(e){return Xde(e)||$de(e)||!!(lj&&e&&e[lj])}var Kde=Fde,Vde=bH,zde=Kde;function PH(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=zde),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?PH(a,t-1,r,n,i):Vde(i,a):n||(i[i.length]=a)}return i}var _H=PH;function Yde(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(r(o[c],c,o)===!1)break}return t}}var Ude=Yde,Jde=Ude,Qde=Jde(),qde=Qde,ege=qde,tge=r1;function rge(e,t){return e&&ege(e,t,tge)}var MH=rge,nge=XI;function ige(e,t){return function(r,n){if(r==null)return r;if(!nge(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Object(r);(t?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var oge=ige,sge=MH,age=oge,lge=age(sge),i1=lge,cge=i1,uge=XI;function dge(e,t){var r=-1,n=uge(e)?Array(e.length):[];return cge(e,function(i,o,s){n[++r]=t(i,o,s)}),n}var ZH=dge;function gge(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var fge=gge,cj=du;function hge(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,o=cj(e),s=t!==void 0,a=t===null,c=t===t,u=cj(t);if(!a&&!u&&!o&&e>t||o&&s&&c&&!a&&!u||n&&s&&c||!r&&c||!i)return 1;if(!n&&!o&&!u&&e<t||u&&r&&i&&!n&&!o||a&&r&&i||!s&&i||!c)return-1}return 0}var pge=hge,mge=pge;function Ige(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var c=mge(i[n],o[n]);if(c){if(n>=a)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var yge=Ige,QC=Ww,Cge=Dw,vge=ca,bge=ZH,xge=fge,Age=wH,wge=yge,Sge=yu,kge=Cn;function Bge(e,t,r){t.length?t=QC(t,function(o){return kge(o)?function(s){return Cge(s,o.length===1?o[0]:o)}:o}):t=[Sge];var n=-1;t=QC(t,Age(vge));var i=bge(e,function(o,s,a){var c=QC(t,function(u){return u(o)});return{criteria:c,index:++n,value:o}});return xge(i,function(o,s){return wge(o,s,r)})}var Nge=Bge;function jge(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Tge=jge,Ege=Tge,uj=Math.max;function Rge(e,t,r){return t=uj(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=uj(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),Ege(e,this,a)}}var Oge=Rge;function Gge(e){return function(){return e}}var Pge=Gge,_ge=dl,Mge=function(){try{var e=_ge(Object,"defineProperty");return e({},"",{}),e}catch{}}(),HH=Mge,Zge=Pge,dj=HH,Hge=yu,Lge=dj?function(e,t){return dj(e,"toString",{configurable:!0,enumerable:!1,value:Zge(t),writable:!0})}:Hge,Wge=Lge,Dge=800,$ge=16,Xge=Date.now;function Fge(e){var t=0,r=0;return function(){var n=Xge(),i=$ge-(n-r);if(r=n,i>0){if(++t>=Dge)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Kge=Fge,Vge=Wge,zge=Kge,Yge=zge(Vge),Uge=Yge,Jge=yu,Qge=Oge,qge=Uge;function efe(e,t){return qge(Qge(e,t,Jge),e+"")}var tfe=efe,rfe=Mw,nfe=XI,ife=e1,ofe=la;function sfe(e,t,r){if(!ofe(r))return!1;var n=typeof t;return(n=="number"?nfe(r)&&ife(t,r.length):n=="string"&&t in r)?rfe(r[t],e):!1}var KI=sfe,afe=_H,lfe=Nge,cfe=tfe,gj=KI,ufe=cfe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&gj(e,t[0],t[1])?t=[]:r>2&&gj(t[0],t[1],t[2])&&(t=[t[0]]),lfe(e,afe(t,1),[])}),dfe=ufe;const o1=ht(dfe);function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nb.apply(this,arguments)}function gfe(e,t){return mfe(e)||pfe(e,t)||hfe(e,t)||ffe()}function ffe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hfe(e,t){if(e){if(typeof e=="string")return fj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fj(e,t)}}function fj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function mfe(e){if(Array.isArray(e))return e}function hj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hj(Object(r),!0).forEach(function(n){Ife(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ife(e,t,r){return t=yfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yfe(e){var t=Cfe(e,"string");return ng(t)=="symbol"?t:t+""}function Cfe(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vfe(e){return Array.isArray(e)&&ur(e[0])&&ur(e[1])?e.join(" ~ "):e}var bfe=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,o=i===void 0?{}:i,s=t.itemStyle,a=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,g=t.formatter,f=t.itemSorter,m=t.wrapperClassName,v=t.labelClassName,p=t.label,I=t.labelFormatter,h=t.accessibilityLayer,y=h===void 0?!1:h,C=function(){if(d&&d.length){var O={padding:0,margin:0},P=(f?o1(d,f):d).map(function(N,B){if(N.type==="none")return null;var E=qC({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},a),M=N.formatter||g||vfe,G=N.value,T=N.name,L=G,W=T;if(M&&L!=null&&W!=null){var X=M(G,T,N,B,d);if(Array.isArray(X)){var V=gfe(X,2);L=V[0],W=V[1]}else L=X}return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:E},ur(W)?H.createElement("span",{className:"recharts-tooltip-item-name"},W):null,ur(W)?H.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,H.createElement("span",{className:"recharts-tooltip-item-value"},L),H.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:O},P)}return null},x=qC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),A=qC({margin:0},u),w=!qe(p),S=w?p:"",k=rt("recharts-default-tooltip",m),R=rt("recharts-tooltip-label",v);w&&I&&d!==void 0&&d!==null&&(S=I(p,d));var j=y?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",Nb({className:k,style:x},j),H.createElement("p",{className:R,style:A},H.isValidElement(S)?S:"".concat(S)),C())};function ig(e){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(e)}function eh(e,t,r){return t=xfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xfe(e){var t=Afe(e,"string");return ig(t)=="symbol"?t:t+""}function Afe(e,t){if(ig(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mu="recharts-tooltip-wrapper",wfe={visibility:"hidden"};function Sfe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return rt(Mu,eh(eh(eh(eh({},"".concat(Mu,"-right"),pe(r)&&t&&pe(t.x)&&r>=t.x),"".concat(Mu,"-left"),pe(r)&&t&&pe(t.x)&&r<t.x),"".concat(Mu,"-bottom"),pe(n)&&t&&pe(t.y)&&n>=t.y),"".concat(Mu,"-top"),pe(n)&&t&&pe(t.y)&&n<t.y))}function pj(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,o=e.position,s=e.reverseDirection,a=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(o&&pe(o[n]))return o[n];var d=r[n]-a-i,g=r[n]+i;if(t[n])return s[n]?d:g;if(s[n]){var f=d,m=c[n];return f<m?Math.max(g,c[n]):Math.max(d,c[n])}var v=g+a,p=c[n]+u;return v>p?Math.max(d,c[n]):Math.max(g,c[n])}function kfe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Bfe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipBox,a=e.useTranslate3d,c=e.viewBox,u,d,g;return s.height>0&&s.width>0&&r?(d=pj({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),g=pj({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=kfe({translateX:d,translateY:g,useTranslate3d:a})):u=wfe,{cssProperties:u,cssClasses:Sfe({translateX:d,translateY:g,coordinate:r})}}function Mc(e){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(e)}function mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ij(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mj(Object(r),!0).forEach(function(n){Tb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WH(n.key),n)}}function Tfe(e,t,r){return t&&jfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Efe(e,t,r){return t=Xp(t),Rfe(e,LH()?Reflect.construct(t,r||[],Xp(e).constructor):t.apply(e,r))}function Rfe(e,t){if(t&&(Mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ofe(e)}function Ofe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LH=function(){return!!e})()}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xp(e)}function Gfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jb(e,t)}function jb(e,t){return jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},jb(e,t)}function Tb(e,t,r){return t=WH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WH(e){var t=Pfe(e,"string");return Mc(t)=="symbol"?t:t+""}function Pfe(e,t){if(Mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yj=1,_fe=function(e){function t(){var r;Nfe(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=Efe(this,t,[].concat(i)),Tb(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Tb(r,"handleKeyDown",function(s){if(s.key==="Escape"){var a,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&a!==void 0?a:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Gfe(t,e),Tfe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>yj||Math.abs(n.height-this.state.lastBoundingBox.height)>yj)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,g=i.hasPayload,f=i.isAnimationActive,m=i.offset,v=i.position,p=i.reverseDirection,I=i.useTranslate3d,h=i.viewBox,y=i.wrapperStyle,C=Bfe({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:m,position:v,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:I,viewBox:h}),x=C.cssClasses,A=C.cssProperties,w=Ij(Ij({transition:f&&o?"transform ".concat(a,"ms ").concat(c):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&g?"visible":"hidden",position:"absolute",top:0,left:0},y);return H.createElement("div",{tabIndex:-1,className:x,style:w,ref:function(k){n.wrapperNode=k}},u)}}])}(b.PureComponent),Mfe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},VI={isSsr:Mfe()};function Zc(e){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(e)}function Cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cj(Object(r),!0).forEach(function(n){s1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$H(n.key),n)}}function Lfe(e,t,r){return t&&Hfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wfe(e,t,r){return t=Fp(t),Dfe(e,DH()?Reflect.construct(t,r||[],Fp(e).constructor):t.apply(e,r))}function Dfe(e,t){if(t&&(Zc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $fe(e)}function $fe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DH=function(){return!!e})()}function Fp(e){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fp(e)}function Xfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eb(e,t)}function Eb(e,t){return Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Eb(e,t)}function s1(e,t,r){return t=$H(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $H(e){var t=Ffe(e,"string");return Zc(t)=="symbol"?t:t+""}function Ffe(e,t){if(Zc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Kfe(e){return e.dataKey}function Vfe(e,t){return H.isValidElement(e)?H.cloneElement(e,t):typeof e=="function"?H.createElement(e,t):H.createElement(bfe,t)}var Ki=function(e){function t(){return Zfe(this,t),Wfe(this,t,arguments)}return Xfe(t,e),Lfe(t,[{key:"render",value:function(){var n=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,g=i.filterNull,f=i.isAnimationActive,m=i.offset,v=i.payload,p=i.payloadUniqBy,I=i.position,h=i.reverseDirection,y=i.useTranslate3d,C=i.viewBox,x=i.wrapperStyle,A=v??[];g&&A.length&&(A=RH(v.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),p,Kfe));var w=A.length>0;return H.createElement(_fe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:c,isAnimationActive:f,active:o,coordinate:d,hasPayload:w,offset:m,position:I,reverseDirection:h,useTranslate3d:y,viewBox:C,wrapperStyle:x},Vfe(u,vj(vj({},this.props),{},{payload:A})))}}])}(b.PureComponent);s1(Ki,"displayName","Tooltip");s1(Ki,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!VI.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zfe=yo,Yfe=function(){return zfe.Date.now()},Ufe=Yfe,Jfe=/\s/;function Qfe(e){for(var t=e.length;t--&&Jfe.test(e.charAt(t)););return t}var qfe=Qfe,ehe=qfe,the=/^\s+/;function rhe(e){return e&&e.slice(0,ehe(e)+1).replace(the,"")}var nhe=rhe,ihe=nhe,bj=la,ohe=du,xj=NaN,she=/^[-+]0x[0-9a-f]+$/i,ahe=/^0b[01]+$/i,lhe=/^0o[0-7]+$/i,che=parseInt;function uhe(e){if(typeof e=="number")return e;if(ohe(e))return xj;if(bj(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=bj(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ihe(e);var r=ahe.test(e);return r||lhe.test(e)?che(e.slice(2),r?2:8):she.test(e)?xj:+e}var XH=uhe,dhe=la,ev=Ufe,Aj=XH,ghe="Expected a function",fhe=Math.max,hhe=Math.min;function phe(e,t,r){var n,i,o,s,a,c,u=0,d=!1,g=!1,f=!0;if(typeof e!="function")throw new TypeError(ghe);t=Aj(t)||0,dhe(r)&&(d=!!r.leading,g="maxWait"in r,o=g?fhe(Aj(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f);function m(w){var S=n,k=i;return n=i=void 0,u=w,s=e.apply(k,S),s}function v(w){return u=w,a=setTimeout(h,t),d?m(w):s}function p(w){var S=w-c,k=w-u,R=t-S;return g?hhe(R,o-k):R}function I(w){var S=w-c,k=w-u;return c===void 0||S>=t||S<0||g&&k>=o}function h(){var w=ev();if(I(w))return y(w);a=setTimeout(h,p(w))}function y(w){return a=void 0,f&&n?m(w):(n=i=void 0,s)}function C(){a!==void 0&&clearTimeout(a),u=0,n=c=i=a=void 0}function x(){return a===void 0?s:y(ev())}function A(){var w=ev(),S=I(w);if(n=arguments,i=this,c=w,S){if(a===void 0)return v(c);if(g)return clearTimeout(a),a=setTimeout(h,t),m(c)}return a===void 0&&(a=setTimeout(h,t)),s}return A.cancel=C,A.flush=x,A}var mhe=phe,Ihe=mhe,yhe=la,Che="Expected a function";function vhe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Che);return yhe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ihe(e,t,{leading:n,maxWait:t,trailing:i})}var bhe=vhe;const FH=ht(bhe);function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function th(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wj(Object(r),!0).forEach(function(n){xhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xhe(e,t,r){return t=Ahe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ahe(e){var t=whe(e,"string");return og(t)=="symbol"?t:t+""}function whe(e,t){if(og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function She(e,t){return jhe(e)||Nhe(e,t)||Bhe(e,t)||khe()}function khe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bhe(e,t){if(e){if(typeof e=="string")return Sj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sj(e,t)}}function Sj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Nhe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function jhe(e){if(Array.isArray(e))return e}var The=b.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=e.width,s=o===void 0?"100%":o,a=e.height,c=a===void 0?"100%":a,u=e.minWidth,d=u===void 0?0:u,g=e.minHeight,f=e.maxHeight,m=e.children,v=e.debounce,p=v===void 0?0:v,I=e.id,h=e.className,y=e.onResize,C=e.style,x=C===void 0?{}:C,A=b.useRef(null),w=b.useRef();w.current=y,b.useImperativeHandle(t,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var S=b.useState({containerWidth:i.width,containerHeight:i.height}),k=She(S,2),R=k[0],j=k[1],_=b.useCallback(function(P,N){j(function(B){var E=Math.round(P),M=Math.round(N);return B.containerWidth===E&&B.containerHeight===M?B:{containerWidth:E,containerHeight:M}})},[]);b.useEffect(function(){var P=function(T){var L,W=T[0].contentRect,X=W.width,V=W.height;_(X,V),(L=w.current)===null||L===void 0||L.call(w,X,V)};p>0&&(P=FH(P,p,{trailing:!0,leading:!1}));var N=new ResizeObserver(P),B=A.current.getBoundingClientRect(),E=B.width,M=B.height;return _(E,M),N.observe(A.current),function(){N.disconnect()}},[_,p]);var O=b.useMemo(function(){var P=R.containerWidth,N=R.containerHeight;if(P<0||N<0)return null;Wo(Ea(s)||Ea(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Wo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var B=Ea(s)?P:s,E=Ea(c)?N:c;r&&r>0&&(B?E=B/r:E&&(B=E*r),f&&E>f&&(E=f)),Wo(B>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,E,s,c,d,g,r);var M=!Array.isArray(m)&&Lo(m.type).endsWith("Chart");return H.Children.map(m,function(G){return H.isValidElement(G)?b.cloneElement(G,th({width:B,height:E},M?{style:th({height:"100%",width:"100%",maxHeight:E,maxWidth:B},G.props.style)}:{})):G})},[r,m,c,f,g,d,R,s]);return H.createElement("div",{id:I?"".concat(I):void 0,className:rt("recharts-responsive-container",h),style:th(th({},x),{},{width:s,height:c,minWidth:d,minHeight:g,maxHeight:f}),ref:A},O)}),a1=function(t){return null};a1.displayName="Cell";function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(r),!0).forEach(function(n){Ehe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ehe(e,t,r){return t=Rhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rhe(e){var t=Ohe(e,"string");return sg(t)=="symbol"?t:t+""}function Ohe(e,t){if(sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xl={widthCache:{},cacheCount:0},Ghe=2e3,Phe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Bj="recharts_measurement_span";function _he(e){var t=Rb({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Nj=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||VI.isSsr)return{width:0,height:0};var n=_he(r),i=JSON.stringify({text:t,copyStyle:n});if(xl.widthCache[i])return xl.widthCache[i];try{var o=document.getElementById(Bj);o||(o=document.createElement("span"),o.setAttribute("id",Bj),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=Rb(Rb({},Phe),n);Object.assign(o.style,s),o.textContent="".concat(t);var a=o.getBoundingClientRect(),c={width:a.width,height:a.height};return xl.widthCache[i]=c,++xl.cacheCount>Ghe&&(xl.cacheCount=0,xl.widthCache={}),c}catch{return{width:0,height:0}}},Mhe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function ag(e){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(e)}function Kp(e,t){return Whe(e)||Lhe(e,t)||Hhe(e,t)||Zhe()}function Zhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hhe(e,t){if(e){if(typeof e=="string")return jj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jj(e,t)}}function jj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lhe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Whe(e){if(Array.isArray(e))return e}function Dhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xhe(n.key),n)}}function $he(e,t,r){return t&&Tj(e.prototype,t),r&&Tj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xhe(e){var t=Fhe(e,"string");return ag(t)=="symbol"?t:t+""}function Fhe(e,t){if(ag(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ej=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Khe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Vhe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zhe=Object.keys(KH),Wl="NaN";function Yhe(e,t){return e*KH[t]}var rh=function(){function e(t,r){Dhe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Khe.test(r)&&(this.num=NaN,this.unit=""),zhe.includes(r)&&(this.num=Yhe(t,r),this.unit="px")}return $he(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=Vhe.exec(r))!==null&&n!==void 0?n:[],o=Kp(i,3),s=o[1],a=o[2];return new e(parseFloat(s),a??"")}}])}();function VH(e){if(e.includes(Wl))return Wl;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Ej.exec(t))!==null&&r!==void 0?r:[],i=Kp(n,4),o=i[1],s=i[2],a=i[3],c=rh.parse(o??""),u=rh.parse(a??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Wl;t=t.replace(Ej,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var g,f=(g=Rj.exec(t))!==null&&g!==void 0?g:[],m=Kp(f,4),v=m[1],p=m[2],I=m[3],h=rh.parse(v??""),y=rh.parse(I??""),C=p==="+"?h.add(y):h.subtract(y);if(C.isNaN())return Wl;t=t.replace(Rj,C.toString())}return t}var Oj=/\(([^()]*)\)/;function Uhe(e){for(var t=e;t.includes("(");){var r=Oj.exec(t),n=Kp(r,2),i=n[1];t=t.replace(Oj,VH(i))}return t}function Jhe(e){var t=e.replace(/\s+/g,"");return t=Uhe(t),t=VH(t),t}function Qhe(e){try{return Jhe(e)}catch{return Wl}}function tv(e){var t=Qhe(e.slice(5,-1));return t===Wl?"":t}var qhe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],epe=["dx","dy","angle","className","breakAll"];function Ob(){return Ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ob.apply(this,arguments)}function Gj(e,t){if(e==null)return{};var r=tpe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tpe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Pj(e,t){return ope(e)||ipe(e,t)||npe(e,t)||rpe()}function rpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function npe(e,t){if(e){if(typeof e=="string")return _j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _j(e,t)}}function _j(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ipe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function ope(e){if(Array.isArray(e))return e}var zH=/[ \f\n\r\t\v\u2028\u2029]+/,YH=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var o=[];qe(r)||(n?o=r.toString().split(""):o=r.toString().split(zH));var s=o.map(function(c){return{word:c,width:Nj(c,i).width}}),a=n?0:Nj("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},spe=function(t,r,n,i,o){var s=t.maxLines,a=t.children,c=t.style,u=t.breakAll,d=pe(s),g=a,f=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(E,M){var G=M.word,T=M.width,L=E[E.length-1];if(L&&(i==null||o||L.width+T+n<Number(i)))L.words.push(G),L.width+=T+n;else{var W={words:[G],width:T};E.push(W)}return E},[])},m=f(r),v=function(B){return B.reduce(function(E,M){return E.width>M.width?E:M})};if(!d)return m;for(var p="",I=function(B){var E=g.slice(0,B),M=YH({breakAll:u,style:c,children:E+p}).wordsWithComputedWidth,G=f(M),T=G.length>s||v(G).width>Number(i);return[T,G]},h=0,y=g.length-1,C=0,x;h<=y&&C<=g.length-1;){var A=Math.floor((h+y)/2),w=A-1,S=I(w),k=Pj(S,2),R=k[0],j=k[1],_=I(A),O=Pj(_,1),P=O[0];if(!R&&!P&&(h=A+1),R&&P&&(y=A-1),!R&&P){x=j;break}C++}return x||m},Mj=function(t){var r=qe(t)?[]:t.toString().split(zH);return[{words:r}]},ape=function(t){var r=t.width,n=t.scaleToFit,i=t.children,o=t.style,s=t.breakAll,a=t.maxLines;if((r||n)&&!VI.isSsr){var c,u,d=YH({breakAll:s,children:i,style:o});if(d){var g=d.wordsWithComputedWidth,f=d.spaceWidth;c=g,u=f}else return Mj(i);return spe({breakAll:s,children:i,maxLines:a,style:o},c,u,r,n)}return Mj(i)},Zj="#808080",Hc=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,o=i===void 0?0:i,s=t.lineHeight,a=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,g=d===void 0?!1:d,f=t.textAnchor,m=f===void 0?"start":f,v=t.verticalAnchor,p=v===void 0?"end":v,I=t.fill,h=I===void 0?Zj:I,y=Gj(t,qhe),C=b.useMemo(function(){return ape({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:g,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,g,y.style,y.width]),x=y.dx,A=y.dy,w=y.angle,S=y.className,k=y.breakAll,R=Gj(y,epe);if(!ur(n)||!ur(o))return null;var j=n+(pe(x)?x:0),_=o+(pe(A)?A:0),O;switch(p){case"start":O=tv("calc(".concat(u,")"));break;case"middle":O=tv("calc(".concat((C.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:O=tv("calc(".concat(C.length-1," * -").concat(a,")"));break}var P=[];if(g){var N=C[0].width,B=y.width;P.push("scale(".concat((pe(B)?B/N:1)/N,")"))}return w&&P.push("rotate(".concat(w,", ").concat(j,", ").concat(_,")")),P.length&&(R.transform=P.join(" ")),H.createElement("text",Ob({},De(R,!0),{x:j,y:_,className:rt("recharts-text",S),textAnchor:m,fill:h.includes("url")?Zj:h}),C.map(function(E,M){var G=E.words.join(k?"":" ");return H.createElement("tspan",{x:j,dy:M===0?O:a,key:"".concat(G,"-").concat(M)},G)}))};function Fs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lpe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function l1(e){let t,r,n;e.length!==2?(t=Fs,r=(a,c)=>Fs(e(a),c),n=(a,c)=>e(a)-c):(t=e===Fs||e===lpe?e:cpe,r=e,n=e);function i(a,c,u=0,d=a.length){if(u<d){if(t(c,c)!==0)return d;do{const g=u+d>>>1;r(a[g],c)<0?u=g+1:d=g}while(u<d)}return u}function o(a,c,u=0,d=a.length){if(u<d){if(t(c,c)!==0)return d;do{const g=u+d>>>1;r(a[g],c)<=0?u=g+1:d=g}while(u<d)}return u}function s(a,c,u=0,d=a.length){const g=i(a,c,u,d-1);return g>u&&n(a[g-1],c)>-n(a[g],c)?g-1:g}return{left:i,center:s,right:o}}function cpe(){return 0}function UH(e){return e===null?NaN:+e}function*upe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const dpe=l1(Fs),lf=dpe.right;l1(UH).center;class Hj extends Map{constructor(t,r=hpe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(Lj(this,t))}has(t){return super.has(Lj(this,t))}set(t,r){return super.set(gpe(this,t),r)}delete(t){return super.delete(fpe(this,t))}}function Lj({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function gpe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function fpe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function hpe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ppe(e=Fs){if(e===Fs)return JH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function JH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const mpe=Math.sqrt(50),Ipe=Math.sqrt(10),ype=Math.sqrt(2);function Vp(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),s=o>=mpe?10:o>=Ipe?5:o>=ype?2:1;let a,c,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),c=Math.round(t*u),a/u<e&&++a,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),c=Math.round(t/u),a*u<e&&++a,c*u>t&&--c),c<a&&.5<=r&&r<2?Vp(e,t,r*2):[a,c,u]}function Gb(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,o,s]=n?Vp(t,e,r):Vp(e,t,r);if(!(o>=i))return[];const a=o-i+1,c=new Array(a);if(n)if(s<0)for(let u=0;u<a;++u)c[u]=(o-u)/-s;else for(let u=0;u<a;++u)c[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)c[u]=(i+u)/-s;else for(let u=0;u<a;++u)c[u]=(i+u)*s;return c}function Pb(e,t,r){return t=+t,e=+e,r=+r,Vp(e,t,r)[2]}function _b(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Pb(t,e,r):Pb(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function Wj(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Dj(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function QH(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?JH:ppe(i);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),g=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*g*(c-g)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*g/c+f)),v=Math.min(n,Math.floor(t+(c-u)*g/c+f));QH(e,t,m,v,i)}const o=e[t];let s=r,a=n;for(Zu(e,r,t),i(e[n],o)>0&&Zu(e,r,n);s<a;){for(Zu(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[r],o)===0?Zu(e,r,a):(++a,Zu(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function Zu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Cpe(e,t,r){if(e=Float64Array.from(upe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Dj(e);if(t>=1)return Wj(e);var n,i=(n-1)*t,o=Math.floor(i),s=Wj(QH(e,o).subarray(0,o+1)),a=Dj(e.subarray(o+1));return s+(a-s)*(i-o)}}function vpe(e,t,r=UH){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,o=Math.floor(i),s=+r(e[o],o,e),a=+r(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function bpe(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(i);++n<i;)o[n]=e+n*r;return o}function pi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function as(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Mb=Symbol("implicit");function c1(){var e=new Hj,t=[],r=[],n=Mb;function i(o){let s=e.get(o);if(s===void 0){if(n!==Mb)return n;e.set(o,s=t.push(o)-1)}return r[s%r.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Hj;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return c1(t,r).unknown(n)},pi.apply(i,arguments),i}function lg(){var e=c1().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,o,s,a=!1,c=0,u=0,d=.5;delete e.unknown;function g(){var f=t().length,m=i<n,v=m?i:n,p=m?n:i;o=(p-v)/Math.max(1,f-c+u*2),a&&(o=Math.floor(o)),v+=(p-v-o*(f-c))*d,s=o*(1-c),a&&(v=Math.round(v),s=Math.round(s));var I=bpe(f).map(function(h){return v+o*h});return r(m?I.reverse():I)}return e.domain=function(f){return arguments.length?(t(f),g()):t()},e.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,g()):[n,i]},e.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,a=!0,g()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(f){return arguments.length?(a=!!f,g()):a},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),g()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),g()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,g()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),g()):d},e.copy=function(){return lg(t(),[n,i]).round(a).paddingInner(c).paddingOuter(u).align(d)},pi.apply(g(),arguments)}function qH(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return qH(t())},e}function gd(){return qH(lg.apply(null,arguments).paddingInner(1))}function u1(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function eL(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function cf(){}var cg=.7,zp=1/cg,sc="\\s*([+-]?\\d+)\\s*",ug="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",co="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xpe=/^#([0-9a-f]{3,8})$/,Ape=new RegExp(`^rgb\\(${sc},${sc},${sc}\\)$`),wpe=new RegExp(`^rgb\\(${co},${co},${co}\\)$`),Spe=new RegExp(`^rgba\\(${sc},${sc},${sc},${ug}\\)$`),kpe=new RegExp(`^rgba\\(${co},${co},${co},${ug}\\)$`),Bpe=new RegExp(`^hsl\\(${ug},${co},${co}\\)$`),Npe=new RegExp(`^hsla\\(${ug},${co},${co},${ug}\\)$`),$j={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};u1(cf,dg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xj,formatHex:Xj,formatHex8:jpe,formatHsl:Tpe,formatRgb:Fj,toString:Fj});function Xj(){return this.rgb().formatHex()}function jpe(){return this.rgb().formatHex8()}function Tpe(){return tL(this).formatHsl()}function Fj(){return this.rgb().formatRgb()}function dg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=xpe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Kj(t):r===3?new un(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?nh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?nh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ape.exec(e))?new un(t[1],t[2],t[3],1):(t=wpe.exec(e))?new un(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Spe.exec(e))?nh(t[1],t[2],t[3],t[4]):(t=kpe.exec(e))?nh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bpe.exec(e))?Yj(t[1],t[2]/100,t[3]/100,1):(t=Npe.exec(e))?Yj(t[1],t[2]/100,t[3]/100,t[4]):$j.hasOwnProperty(e)?Kj($j[e]):e==="transparent"?new un(NaN,NaN,NaN,0):null}function Kj(e){return new un(e>>16&255,e>>8&255,e&255,1)}function nh(e,t,r,n){return n<=0&&(e=t=r=NaN),new un(e,t,r,n)}function Epe(e){return e instanceof cf||(e=dg(e)),e?(e=e.rgb(),new un(e.r,e.g,e.b,e.opacity)):new un}function Zb(e,t,r,n){return arguments.length===1?Epe(e):new un(e,t,r,n??1)}function un(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}u1(un,Zb,eL(cf,{brighter(e){return e=e==null?zp:Math.pow(zp,e),new un(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cg:Math.pow(cg,e),new un(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new un($a(this.r),$a(this.g),$a(this.b),Yp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vj,formatHex:Vj,formatHex8:Rpe,formatRgb:zj,toString:zj}));function Vj(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}`}function Rpe(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}${Ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function zj(){const e=Yp(this.opacity);return`${e===1?"rgb(":"rgba("}${$a(this.r)}, ${$a(this.g)}, ${$a(this.b)}${e===1?")":`, ${e})`}`}function Yp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $a(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ra(e){return e=$a(e),(e<16?"0":"")+e.toString(16)}function Yj(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ni(e,t,r,n)}function tL(e){if(e instanceof Ni)return new Ni(e.h,e.s,e.l,e.opacity);if(e instanceof cf||(e=dg(e)),!e)return new Ni;if(e instanceof Ni)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=NaN,a=o-i,c=(o+i)/2;return a?(t===o?s=(r-n)/a+(r<n)*6:r===o?s=(n-t)/a+2:s=(t-r)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Ni(s,a,c,e.opacity)}function Ope(e,t,r,n){return arguments.length===1?tL(e):new Ni(e,t,r,n??1)}function Ni(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}u1(Ni,Ope,eL(cf,{brighter(e){return e=e==null?zp:Math.pow(zp,e),new Ni(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cg:Math.pow(cg,e),new Ni(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new un(rv(e>=240?e-240:e+120,i,n),rv(e,i,n),rv(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Ni(Uj(this.h),ih(this.s),ih(this.l),Yp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yp(this.opacity);return`${e===1?"hsl(":"hsla("}${Uj(this.h)}, ${ih(this.s)*100}%, ${ih(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Uj(e){return e=(e||0)%360,e<0?e+360:e}function ih(e){return Math.max(0,Math.min(1,e||0))}function rv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const d1=e=>()=>e;function Gpe(e,t){return function(r){return e+r*t}}function Ppe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function _pe(e){return(e=+e)==1?rL:function(t,r){return r-t?Ppe(t,r,e):d1(isNaN(t)?r:t)}}function rL(e,t){var r=t-e;return r?Gpe(e,r):d1(isNaN(e)?t:e)}const Jj=function e(t){var r=_pe(t);function n(i,o){var s=r((i=Zb(i)).r,(o=Zb(o)).r),a=r(i.g,o.g),c=r(i.b,o.b),u=rL(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=c(d),i.opacity=u(d),i+""}}return n.gamma=e,n}(1);function Mpe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function Zpe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Hpe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),o=new Array(r),s;for(s=0;s<n;++s)i[s]=Cu(e[s],t[s]);for(;s<r;++s)o[s]=t[s];return function(a){for(s=0;s<n;++s)o[s]=i[s](a);return o}}function Lpe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Up(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Wpe(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Cu(e[i],t[i]):n[i]=t[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var Hb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nv=new RegExp(Hb.source,"g");function Dpe(e){return function(){return e}}function $pe(e){return function(t){return e(t)+""}}function Xpe(e,t){var r=Hb.lastIndex=nv.lastIndex=0,n,i,o,s=-1,a=[],c=[];for(e=e+"",t=t+"";(n=Hb.exec(e))&&(i=nv.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:Up(n,i)})),r=nv.lastIndex;return r<t.length&&(o=t.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?$pe(c[0].x):Dpe(t):(t=c.length,function(u){for(var d=0,g;d<t;++d)a[(g=c[d]).i]=g.x(u);return a.join("")})}function Cu(e,t){var r=typeof t,n;return t==null||r==="boolean"?d1(t):(r==="number"?Up:r==="string"?(n=dg(t))?(t=n,Jj):Xpe:t instanceof dg?Jj:t instanceof Date?Lpe:Zpe(t)?Mpe:Array.isArray(t)?Hpe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wpe:Up)(e,t)}function g1(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Fpe(e,t){t===void 0&&(t=e,e=Cu);for(var r=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(i,i=t[++r]);return function(s){var a=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return o[a](s-a)}}function Kpe(e){return function(){return e}}function Jp(e){return+e}var Qj=[0,1];function Yr(e){return e}function Lb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Kpe(isNaN(t)?NaN:.5)}function Vpe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function zpe(e,t,r){var n=e[0],i=e[1],o=t[0],s=t[1];return i<n?(n=Lb(i,n),o=r(s,o)):(n=Lb(n,i),o=r(o,s)),function(a){return o(n(a))}}function Ype(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=Lb(e[s],e[s+1]),o[s]=r(t[s],t[s+1]);return function(a){var c=lf(e,a,1,n)-1;return o[c](i[c](a))}}function uf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function zI(){var e=Qj,t=Qj,r=Cu,n,i,o,s=Yr,a,c,u;function d(){var f=Math.min(e.length,t.length);return s!==Yr&&(s=Vpe(e[0],e[f-1])),a=f>2?Ype:zpe,c=u=null,g}function g(f){return f==null||isNaN(f=+f)?o:(c||(c=a(e.map(n),t,r)))(n(s(f)))}return g.invert=function(f){return s(i((u||(u=a(t,e.map(n),Up)))(f)))},g.domain=function(f){return arguments.length?(e=Array.from(f,Jp),d()):e.slice()},g.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},g.rangeRound=function(f){return t=Array.from(f),r=g1,d()},g.clamp=function(f){return arguments.length?(s=f?!0:Yr,d()):s!==Yr},g.interpolate=function(f){return arguments.length?(r=f,d()):r},g.unknown=function(f){return arguments.length?(o=f,g):o},function(f,m){return n=f,i=m,d()}}function f1(){return zI()(Yr,Yr)}function Upe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qp(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Lc(e){return e=Qp(Math.abs(e)),e?e[1]:NaN}function Jpe(e,t){return function(r,n){for(var i=r.length,o=[],s=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>n&&(a=Math.max(1,n-c)),o.push(r.substring(i-=a,i+a)),!((c+=a+1)>n));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function Qpe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var qpe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gg(e){if(!(t=qpe.exec(e)))throw new Error("invalid format: "+e);var t;return new h1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gg.prototype=h1.prototype;function h1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}h1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eme(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var qp;function tme(e,t){var r=Qp(e,t);if(!r)return qp=void 0,e.toPrecision(t);var n=r[0],i=r[1],o=i-(qp=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Qp(e,Math.max(0,t+o-1))[0]}function qj(e,t){var r=Qp(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const eT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Upe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qj(e*100,t),r:qj,s:tme,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tT(e){return e}var rT=Array.prototype.map,nT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rme(e){var t=e.grouping===void 0||e.thousands===void 0?tT:Jpe(rT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?tT:Qpe(rT.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(g,f){g=gg(g);var m=g.fill,v=g.align,p=g.sign,I=g.symbol,h=g.zero,y=g.width,C=g.comma,x=g.precision,A=g.trim,w=g.type;w==="n"?(C=!0,w="g"):eT[w]||(x===void 0&&(x=12),A=!0,w="g"),(h||m==="0"&&v==="=")&&(h=!0,m="0",v="=");var S=(f&&f.prefix!==void 0?f.prefix:"")+(I==="$"?r:I==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),k=(I==="$"?n:/[%p]/.test(w)?s:"")+(f&&f.suffix!==void 0?f.suffix:""),R=eT[w],j=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function _(O){var P=S,N=k,B,E,M;if(w==="c")N=R(O)+N,O="";else{O=+O;var G=O<0||1/O<0;if(O=isNaN(O)?c:R(Math.abs(O),x),A&&(O=eme(O)),G&&+O==0&&p!=="+"&&(G=!1),P=(G?p==="("?p:a:p==="-"||p==="("?"":p)+P,N=(w==="s"&&!isNaN(O)&&qp!==void 0?nT[8+qp/3]:"")+N+(G&&p==="("?")":""),j){for(B=-1,E=O.length;++B<E;)if(M=O.charCodeAt(B),48>M||M>57){N=(M===46?i+O.slice(B+1):O.slice(B))+N,O=O.slice(0,B);break}}}C&&!h&&(O=t(O,1/0));var T=P.length+O.length+N.length,L=T<y?new Array(y-T+1).join(m):"";switch(C&&h&&(O=t(L+O,L.length?y-N.length:1/0),L=""),v){case"<":O=P+O+N+L;break;case"=":O=P+L+O+N;break;case"^":O=L.slice(0,T=L.length>>1)+P+O+N+L.slice(T);break;default:O=L+P+O+N;break}return o(O)}return _.toString=function(){return g+""},_}function d(g,f){var m=Math.max(-8,Math.min(8,Math.floor(Lc(f)/3)))*3,v=Math.pow(10,-m),p=u((g=gg(g),g.type="f",g),{suffix:nT[8+m/3]});return function(I){return p(v*I)}}return{format:u,formatPrefix:d}}var oh,p1,nL;nme({thousands:",",grouping:[3],currency:["$",""]});function nme(e){return oh=rme(e),p1=oh.format,nL=oh.formatPrefix,oh}function ime(e){return Math.max(0,-Lc(Math.abs(e)))}function ome(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lc(t)/3)))*3-Lc(Math.abs(e)))}function sme(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lc(t)-Lc(e))+1}function iL(e,t,r,n){var i=_b(e,t,r),o;switch(n=gg(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=ome(i,s))&&(n.precision=o),nL(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=sme(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=ime(i))&&(n.precision=o-(n.type==="%")*2);break}}return p1(n)}function ua(e){var t=e.domain;return e.ticks=function(r){var n=t();return Gb(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return iL(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,o=n.length-1,s=n[i],a=n[o],c,u,d=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);d-- >0;){if(u=Pb(s,a,r),u===c)return n[i]=s,n[o]=a,t(n);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;c=u}return e},e}function em(){var e=f1();return e.copy=function(){return uf(e,em())},pi.apply(e,arguments),ua(e)}function oL(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Jp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return oL(e).unknown(t)},e=arguments.length?Array.from(e,Jp):[0,1],ua(r)}function sL(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],o=e[n],s;return o<i&&(s=r,r=n,n=s,s=i,i=o,o=s),e[r]=t.floor(i),e[n]=t.ceil(o),e}function iT(e){return Math.log(e)}function oT(e){return Math.exp(e)}function ame(e){return-Math.log(-e)}function lme(e){return-Math.exp(-e)}function cme(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ume(e){return e===10?cme:e===Math.E?Math.exp:t=>Math.pow(e,t)}function dme(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function sT(e){return(t,r)=>-e(-t,r)}function m1(e){const t=e(iT,oT),r=t.domain;let n=10,i,o;function s(){return i=dme(n),o=ume(n),r()[0]<0?(i=sT(i),o=sT(o),e(ame,lme)):e(iT,oT),t}return t.base=function(a){return arguments.length?(n=+a,s()):n},t.domain=function(a){return arguments.length?(r(a),s()):r()},t.ticks=a=>{const c=r();let u=c[0],d=c[c.length-1];const g=d<u;g&&([u,d]=[d,u]);let f=i(u),m=i(d),v,p;const I=a==null?10:+a;let h=[];if(!(n%1)&&m-f<I){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(v=1;v<n;++v)if(p=f<0?v/o(-f):v*o(f),!(p<u)){if(p>d)break;h.push(p)}}else for(;f<=m;++f)for(v=n-1;v>=1;--v)if(p=f>0?v/o(-f):v*o(f),!(p<u)){if(p>d)break;h.push(p)}h.length*2<I&&(h=Gb(u,d,I))}else h=Gb(f,m,Math.min(m-f,I)).map(o);return g?h.reverse():h},t.tickFormat=(a,c)=>{if(a==null&&(a=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=gg(c)).precision==null&&(c.trim=!0),c=p1(c)),a===1/0)return c;const u=Math.max(1,n*a/t.ticks().length);return d=>{let g=d/o(Math.round(i(d)));return g*n<n-.5&&(g*=n),g<=u?c(d):""}},t.nice=()=>r(sL(r(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function aL(){const e=m1(zI()).domain([1,10]);return e.copy=()=>uf(e,aL()).base(e.base()),pi.apply(e,arguments),e}function aT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function I1(e){var t=1,r=e(aT(t),lT(t));return r.constant=function(n){return arguments.length?e(aT(t=+n),lT(t)):t},ua(r)}function lL(){var e=I1(zI());return e.copy=function(){return uf(e,lL()).constant(e.constant())},pi.apply(e,arguments)}function cT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gme(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fme(e){return e<0?-e*e:e*e}function y1(e){var t=e(Yr,Yr),r=1;function n(){return r===1?e(Yr,Yr):r===.5?e(gme,fme):e(cT(r),cT(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},ua(t)}function C1(){var e=y1(zI());return e.copy=function(){return uf(e,C1()).exponent(e.exponent())},pi.apply(e,arguments),e}function hme(){return C1.apply(null,arguments).exponent(.5)}function uT(e){return Math.sign(e)*e*e}function pme(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function cL(){var e=f1(),t=[0,1],r=!1,n;function i(o){var s=pme(e(o));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(o){return e.invert(uT(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,Jp)).map(uT)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return cL(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},pi.apply(i,arguments),ua(i)}function uL(){var e=[],t=[],r=[],n;function i(){var s=0,a=Math.max(1,t.length);for(r=new Array(a-1);++s<a;)r[s-1]=vpe(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?n:t[lf(r,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Fs),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(n=s,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return uL().domain(e).range(t).unknown(n)},pi.apply(o,arguments)}function dL(){var e=0,t=1,r=1,n=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[lf(n,c,0,r)]:o}function a(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,a()):[e,t]},s.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,a()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return dL().domain([e,t]).range(i).unknown(o)},pi.apply(ua(s),arguments)}function gL(){var e=[.5],t=[0,1],r,n=1;function i(o){return o!=null&&o<=o?t[lf(e,o,0,n)]:r}return i.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return gL().domain(e).range(t).unknown(r)},pi.apply(i,arguments)}const iv=new Date,ov=new Date;function dr(e,t,r,n){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const c=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return c;let u;do c.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return c},i.filter=o=>dr(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),r&&(i.count=(o,s)=>(iv.setTime(+o),ov.setTime(+s),e(iv),e(ov),Math.floor(r(iv,ov))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?s=>n(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const tm=dr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);tm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):tm);tm.range;const Po=1e3,ni=Po*60,_o=ni*60,qo=_o*24,v1=qo*7,dT=qo*30,sv=qo*365,Oa=dr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Po)},(e,t)=>(t-e)/Po,e=>e.getUTCSeconds());Oa.range;const b1=dr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Po)},(e,t)=>{e.setTime(+e+t*ni)},(e,t)=>(t-e)/ni,e=>e.getMinutes());b1.range;const x1=dr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ni)},(e,t)=>(t-e)/ni,e=>e.getUTCMinutes());x1.range;const A1=dr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Po-e.getMinutes()*ni)},(e,t)=>{e.setTime(+e+t*_o)},(e,t)=>(t-e)/_o,e=>e.getHours());A1.range;const w1=dr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_o)},(e,t)=>(t-e)/_o,e=>e.getUTCHours());w1.range;const df=dr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ni)/qo,e=>e.getDate()-1);df.range;const YI=dr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qo,e=>e.getUTCDate()-1);YI.range;const fL=dr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qo,e=>Math.floor(e/qo));fL.range;function gl(e){return dr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ni)/v1)}const UI=gl(0),rm=gl(1),mme=gl(2),Ime=gl(3),Wc=gl(4),yme=gl(5),Cme=gl(6);UI.range;rm.range;mme.range;Ime.range;Wc.range;yme.range;Cme.range;function fl(e){return dr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/v1)}const JI=fl(0),nm=fl(1),vme=fl(2),bme=fl(3),Dc=fl(4),xme=fl(5),Ame=fl(6);JI.range;nm.range;vme.range;bme.range;Dc.range;xme.range;Ame.range;const S1=dr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());S1.range;const k1=dr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());k1.range;const es=dr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());es.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});es.range;const ts=dr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ts.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ts.range;function hL(e,t,r,n,i,o){const s=[[Oa,1,Po],[Oa,5,5*Po],[Oa,15,15*Po],[Oa,30,30*Po],[o,1,ni],[o,5,5*ni],[o,15,15*ni],[o,30,30*ni],[i,1,_o],[i,3,3*_o],[i,6,6*_o],[i,12,12*_o],[n,1,qo],[n,2,2*qo],[r,1,v1],[t,1,dT],[t,3,3*dT],[e,1,sv]];function a(u,d,g){const f=d<u;f&&([u,d]=[d,u]);const m=g&&typeof g.range=="function"?g:c(u,d,g),v=m?m.range(u,+d+1):[];return f?v.reverse():v}function c(u,d,g){const f=Math.abs(d-u)/g,m=l1(([,,I])=>I).right(s,f);if(m===s.length)return e.every(_b(u/sv,d/sv,g));if(m===0)return tm.every(Math.max(_b(u,d,g),1));const[v,p]=s[f/s[m-1][2]<s[m][2]/f?m-1:m];return v.every(p)}return[a,c]}const[wme,Sme]=hL(ts,k1,JI,fL,w1,x1),[kme,Bme]=hL(es,S1,UI,df,A1,b1);function av(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function lv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Nme(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,c=e.shortMonths,u=Lu(i),d=Wu(i),g=Lu(o),f=Wu(o),m=Lu(s),v=Wu(s),p=Lu(a),I=Wu(a),h=Lu(c),y=Wu(c),C={a:M,A:G,b:T,B:L,c:null,d:IT,e:IT,f:Jme,g:aIe,G:cIe,H:zme,I:Yme,j:Ume,L:pL,m:Qme,M:qme,p:W,q:X,Q:vT,s:bT,S:eIe,u:tIe,U:rIe,V:nIe,w:iIe,W:oIe,x:null,X:null,y:sIe,Y:lIe,Z:uIe,"%":CT},x={a:V,A:z,b:ee,B:D,c:null,d:yT,e:yT,f:hIe,g:wIe,G:kIe,H:dIe,I:gIe,j:fIe,L:IL,m:pIe,M:mIe,p:F,q:Z,Q:vT,s:bT,S:IIe,u:yIe,U:CIe,V:vIe,w:bIe,W:xIe,x:null,X:null,y:AIe,Y:SIe,Z:BIe,"%":CT},A={a:j,A:_,b:O,B:P,c:N,d:pT,e:pT,f:Xme,g:hT,G:fT,H:mT,I:mT,j:Lme,L:$me,m:Hme,M:Wme,p:R,q:Zme,Q:Kme,s:Vme,S:Dme,u:Ome,U:Gme,V:Pme,w:Rme,W:_me,x:B,X:E,y:hT,Y:fT,Z:Mme,"%":Fme};C.x=w(r,C),C.X=w(n,C),C.c=w(t,C),x.x=w(r,x),x.X=w(n,x),x.c=w(t,x);function w($,J){return function(U){var K=[],re=-1,ce=0,Me=$.length,Ee,Ke,Nt;for(U instanceof Date||(U=new Date(+U));++re<Me;)$.charCodeAt(re)===37&&(K.push($.slice(ce,re)),(Ke=gT[Ee=$.charAt(++re)])!=null?Ee=$.charAt(++re):Ke=Ee==="e"?" ":"0",(Nt=J[Ee])&&(Ee=Nt(U,Ke)),K.push(Ee),ce=re+1);return K.push($.slice(ce,re)),K.join("")}}function S($,J){return function(U){var K=Hu(1900,void 0,1),re=k(K,$,U+="",0),ce,Me;if(re!=U.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(J&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(ce=lv(Hu(K.y,0,1)),Me=ce.getUTCDay(),ce=Me>4||Me===0?nm.ceil(ce):nm(ce),ce=YI.offset(ce,(K.V-1)*7),K.y=ce.getUTCFullYear(),K.m=ce.getUTCMonth(),K.d=ce.getUTCDate()+(K.w+6)%7):(ce=av(Hu(K.y,0,1)),Me=ce.getDay(),ce=Me>4||Me===0?rm.ceil(ce):rm(ce),ce=df.offset(ce,(K.V-1)*7),K.y=ce.getFullYear(),K.m=ce.getMonth(),K.d=ce.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),Me="Z"in K?lv(Hu(K.y,0,1)).getUTCDay():av(Hu(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(Me+5)%7:K.w+K.U*7-(Me+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,lv(K)):av(K)}}function k($,J,U,K){for(var re=0,ce=J.length,Me=U.length,Ee,Ke;re<ce;){if(K>=Me)return-1;if(Ee=J.charCodeAt(re++),Ee===37){if(Ee=J.charAt(re++),Ke=A[Ee in gT?J.charAt(re++):Ee],!Ke||(K=Ke($,U,K))<0)return-1}else if(Ee!=U.charCodeAt(K++))return-1}return K}function R($,J,U){var K=u.exec(J.slice(U));return K?($.p=d.get(K[0].toLowerCase()),U+K[0].length):-1}function j($,J,U){var K=m.exec(J.slice(U));return K?($.w=v.get(K[0].toLowerCase()),U+K[0].length):-1}function _($,J,U){var K=g.exec(J.slice(U));return K?($.w=f.get(K[0].toLowerCase()),U+K[0].length):-1}function O($,J,U){var K=h.exec(J.slice(U));return K?($.m=y.get(K[0].toLowerCase()),U+K[0].length):-1}function P($,J,U){var K=p.exec(J.slice(U));return K?($.m=I.get(K[0].toLowerCase()),U+K[0].length):-1}function N($,J,U){return k($,t,J,U)}function B($,J,U){return k($,r,J,U)}function E($,J,U){return k($,n,J,U)}function M($){return s[$.getDay()]}function G($){return o[$.getDay()]}function T($){return c[$.getMonth()]}function L($){return a[$.getMonth()]}function W($){return i[+($.getHours()>=12)]}function X($){return 1+~~($.getMonth()/3)}function V($){return s[$.getUTCDay()]}function z($){return o[$.getUTCDay()]}function ee($){return c[$.getUTCMonth()]}function D($){return a[$.getUTCMonth()]}function F($){return i[+($.getUTCHours()>=12)]}function Z($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var J=w($+="",C);return J.toString=function(){return $},J},parse:function($){var J=S($+="",!1);return J.toString=function(){return $},J},utcFormat:function($){var J=w($+="",x);return J.toString=function(){return $},J},utcParse:function($){var J=S($+="",!0);return J.toString=function(){return $},J}}}var gT={"-":"",_:" ",0:"0"},vr=/^\s*\d+/,jme=/^%/,Tme=/[\\^$*+?|[\]().{}]/g;function lt(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(t)+i:i)}function Eme(e){return e.replace(Tme,"\\$&")}function Lu(e){return new RegExp("^(?:"+e.map(Eme).join("|")+")","i")}function Wu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Rme(e,t,r){var n=vr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Ome(e,t,r){var n=vr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Gme(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Pme(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function _me(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function fT(e,t,r){var n=vr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function hT(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Mme(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Zme(e,t,r){var n=vr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Hme(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function pT(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Lme(e,t,r){var n=vr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function mT(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Wme(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Dme(e,t,r){var n=vr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function $me(e,t,r){var n=vr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Xme(e,t,r){var n=vr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Fme(e,t,r){var n=jme.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Kme(e,t,r){var n=vr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Vme(e,t,r){var n=vr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function IT(e,t){return lt(e.getDate(),t,2)}function zme(e,t){return lt(e.getHours(),t,2)}function Yme(e,t){return lt(e.getHours()%12||12,t,2)}function Ume(e,t){return lt(1+df.count(es(e),e),t,3)}function pL(e,t){return lt(e.getMilliseconds(),t,3)}function Jme(e,t){return pL(e,t)+"000"}function Qme(e,t){return lt(e.getMonth()+1,t,2)}function qme(e,t){return lt(e.getMinutes(),t,2)}function eIe(e,t){return lt(e.getSeconds(),t,2)}function tIe(e){var t=e.getDay();return t===0?7:t}function rIe(e,t){return lt(UI.count(es(e)-1,e),t,2)}function mL(e){var t=e.getDay();return t>=4||t===0?Wc(e):Wc.ceil(e)}function nIe(e,t){return e=mL(e),lt(Wc.count(es(e),e)+(es(e).getDay()===4),t,2)}function iIe(e){return e.getDay()}function oIe(e,t){return lt(rm.count(es(e)-1,e),t,2)}function sIe(e,t){return lt(e.getFullYear()%100,t,2)}function aIe(e,t){return e=mL(e),lt(e.getFullYear()%100,t,2)}function lIe(e,t){return lt(e.getFullYear()%1e4,t,4)}function cIe(e,t){var r=e.getDay();return e=r>=4||r===0?Wc(e):Wc.ceil(e),lt(e.getFullYear()%1e4,t,4)}function uIe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+lt(t/60|0,"0",2)+lt(t%60,"0",2)}function yT(e,t){return lt(e.getUTCDate(),t,2)}function dIe(e,t){return lt(e.getUTCHours(),t,2)}function gIe(e,t){return lt(e.getUTCHours()%12||12,t,2)}function fIe(e,t){return lt(1+YI.count(ts(e),e),t,3)}function IL(e,t){return lt(e.getUTCMilliseconds(),t,3)}function hIe(e,t){return IL(e,t)+"000"}function pIe(e,t){return lt(e.getUTCMonth()+1,t,2)}function mIe(e,t){return lt(e.getUTCMinutes(),t,2)}function IIe(e,t){return lt(e.getUTCSeconds(),t,2)}function yIe(e){var t=e.getUTCDay();return t===0?7:t}function CIe(e,t){return lt(JI.count(ts(e)-1,e),t,2)}function yL(e){var t=e.getUTCDay();return t>=4||t===0?Dc(e):Dc.ceil(e)}function vIe(e,t){return e=yL(e),lt(Dc.count(ts(e),e)+(ts(e).getUTCDay()===4),t,2)}function bIe(e){return e.getUTCDay()}function xIe(e,t){return lt(nm.count(ts(e)-1,e),t,2)}function AIe(e,t){return lt(e.getUTCFullYear()%100,t,2)}function wIe(e,t){return e=yL(e),lt(e.getUTCFullYear()%100,t,2)}function SIe(e,t){return lt(e.getUTCFullYear()%1e4,t,4)}function kIe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Dc(e):Dc.ceil(e),lt(e.getUTCFullYear()%1e4,t,4)}function BIe(){return"+0000"}function CT(){return"%"}function vT(e){return+e}function bT(e){return Math.floor(+e/1e3)}var Al,CL,vL;NIe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function NIe(e){return Al=Nme(e),CL=Al.format,Al.parse,vL=Al.utcFormat,Al.utcParse,Al}function jIe(e){return new Date(e)}function TIe(e){return e instanceof Date?+e:+new Date(+e)}function B1(e,t,r,n,i,o,s,a,c,u){var d=f1(),g=d.invert,f=d.domain,m=u(".%L"),v=u(":%S"),p=u("%I:%M"),I=u("%I %p"),h=u("%a %d"),y=u("%b %d"),C=u("%B"),x=u("%Y");function A(w){return(c(w)<w?m:a(w)<w?v:s(w)<w?p:o(w)<w?I:n(w)<w?i(w)<w?h:y:r(w)<w?C:x)(w)}return d.invert=function(w){return new Date(g(w))},d.domain=function(w){return arguments.length?f(Array.from(w,TIe)):f().map(jIe)},d.ticks=function(w){var S=f();return e(S[0],S[S.length-1],w??10)},d.tickFormat=function(w,S){return S==null?A:u(S)},d.nice=function(w){var S=f();return(!w||typeof w.range!="function")&&(w=t(S[0],S[S.length-1],w??10)),w?f(sL(S,w)):d},d.copy=function(){return uf(d,B1(e,t,r,n,i,o,s,a,c,u))},d}function EIe(){return pi.apply(B1(kme,Bme,es,S1,UI,df,A1,b1,Oa,CL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RIe(){return pi.apply(B1(wme,Sme,ts,k1,JI,YI,w1,x1,Oa,vL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function QI(){var e=0,t=1,r,n,i,o,s=Yr,a=!1,c;function u(g){return g==null||isNaN(g=+g)?c:s(i===0?.5:(g=(o(g)-r)*i,a?Math.max(0,Math.min(1,g)):g))}u.domain=function(g){return arguments.length?([e,t]=g,r=o(e=+e),n=o(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(g){return arguments.length?(a=!!g,u):a},u.interpolator=function(g){return arguments.length?(s=g,u):s};function d(g){return function(f){var m,v;return arguments.length?([m,v]=f,s=g(m,v),u):[s(0),s(1)]}}return u.range=d(Cu),u.rangeRound=d(g1),u.unknown=function(g){return arguments.length?(c=g,u):c},function(g){return o=g,r=g(e),n=g(t),i=r===n?0:1/(n-r),u}}function da(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function bL(){var e=ua(QI()(Yr));return e.copy=function(){return da(e,bL())},as.apply(e,arguments)}function xL(){var e=m1(QI()).domain([1,10]);return e.copy=function(){return da(e,xL()).base(e.base())},as.apply(e,arguments)}function AL(){var e=I1(QI());return e.copy=function(){return da(e,AL()).constant(e.constant())},as.apply(e,arguments)}function N1(){var e=y1(QI());return e.copy=function(){return da(e,N1()).exponent(e.exponent())},as.apply(e,arguments)}function OIe(){return N1.apply(null,arguments).exponent(.5)}function wL(){var e=[],t=Yr;function r(n){if(n!=null&&!isNaN(n=+n))return t((lf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Fs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>Cpe(e,o/n))},r.copy=function(){return wL(t).domain(e)},as.apply(r,arguments)}function qI(){var e=0,t=.5,r=1,n=1,i,o,s,a,c,u=Yr,d,g=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+d(p))-o)*(n*p<n*o?a:c),u(g?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,r]=p,i=d(e=+e),o=d(t=+t),s=d(r=+r),a=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),n=o<i?-1:1,m):[e,t,r]},m.clamp=function(p){return arguments.length?(g=!!p,m):g},m.interpolator=function(p){return arguments.length?(u=p,m):u};function v(p){return function(I){var h,y,C;return arguments.length?([h,y,C]=I,u=Fpe(p,[h,y,C]),m):[u(0),u(.5),u(1)]}}return m.range=v(Cu),m.rangeRound=v(g1),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return d=p,i=p(e),o=p(t),s=p(r),a=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),n=o<i?-1:1,m}}function SL(){var e=ua(qI()(Yr));return e.copy=function(){return da(e,SL())},as.apply(e,arguments)}function kL(){var e=m1(qI()).domain([.1,1,10]);return e.copy=function(){return da(e,kL()).base(e.base())},as.apply(e,arguments)}function BL(){var e=I1(qI());return e.copy=function(){return da(e,BL()).constant(e.constant())},as.apply(e,arguments)}function j1(){var e=y1(qI());return e.copy=function(){return da(e,j1()).exponent(e.exponent())},as.apply(e,arguments)}function GIe(){return j1.apply(null,arguments).exponent(.5)}const xT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lg,scaleDiverging:SL,scaleDivergingLog:kL,scaleDivergingPow:j1,scaleDivergingSqrt:GIe,scaleDivergingSymlog:BL,scaleIdentity:oL,scaleImplicit:Mb,scaleLinear:em,scaleLog:aL,scaleOrdinal:c1,scalePoint:gd,scalePow:C1,scaleQuantile:uL,scaleQuantize:dL,scaleRadial:cL,scaleSequential:bL,scaleSequentialLog:xL,scaleSequentialPow:N1,scaleSequentialQuantile:wL,scaleSequentialSqrt:OIe,scaleSequentialSymlog:AL,scaleSqrt:hme,scaleSymlog:lL,scaleThreshold:gL,scaleTime:EIe,scaleUtc:RIe,tickFormat:iL},Symbol.toStringTag,{value:"Module"}));var PIe=du;function _Ie(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],s=t(o);if(s!=null&&(a===void 0?s===s&&!PIe(s):r(s,a)))var a=s,c=o}return c}var ey=_Ie;function MIe(e,t){return e>t}var NL=MIe,ZIe=ey,HIe=NL,LIe=yu;function WIe(e){return e&&e.length?ZIe(e,LIe,HIe):void 0}var DIe=WIe;const ty=ht(DIe);function $Ie(e,t){return e<t}var jL=$Ie,XIe=ey,FIe=jL,KIe=yu;function VIe(e){return e&&e.length?XIe(e,KIe,FIe):void 0}var zIe=VIe;const ry=ht(zIe);var YIe=Ww,UIe=ca,JIe=ZH,QIe=Cn;function qIe(e,t){var r=QIe(e)?YIe:JIe;return r(e,UIe(t))}var eye=qIe,tye=_H,rye=eye;function nye(e,t){return tye(rye(e,t),1)}var iye=nye;const oye=ht(iye);var sye=n1;function aye(e,t){return sye(e,t)}var lye=aye;const T1=ht(lye);var vu=1e9,cye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},R1,Ht=!0,li="[DecimalError] ",Xa=li+"Invalid argument: ",E1=li+"Exponent out of range: ",bu=Math.floor,Aa=Math.pow,uye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,kn,hr=1e7,Pt=7,TL=9007199254740991,im=bu(TL/Pt),ye={};ye.absoluteValue=ye.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ye.comparedTo=ye.cmp=function(e){var t,r,n,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};ye.decimalPlaces=ye.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Pt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ye.dividedBy=ye.div=function(e){return Do(this,new this.constructor(e))};ye.dividedToIntegerBy=ye.idiv=function(e){var t=this,r=t.constructor;return Ct(Do(t,new r(e),0,1),r.precision)};ye.equals=ye.eq=function(e){return!this.cmp(e)};ye.exponent=function(){return ir(this)};ye.greaterThan=ye.gt=function(e){return this.cmp(e)>0};ye.greaterThanOrEqualTo=ye.gte=function(e){return this.cmp(e)>=0};ye.isInteger=ye.isint=function(){return this.e>this.d.length-2};ye.isNegative=ye.isneg=function(){return this.s<0};ye.isPositive=ye.ispos=function(){return this.s>0};ye.isZero=function(){return this.s===0};ye.lessThan=ye.lt=function(e){return this.cmp(e)<0};ye.lessThanOrEqualTo=ye.lte=function(e){return this.cmp(e)<1};ye.logarithm=ye.log=function(e){var t,r=this,n=r.constructor,i=n.precision,o=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(kn))throw Error(li+"NaN");if(r.s<1)throw Error(li+(r.s?"NaN":"-Infinity"));return r.eq(kn)?new n(0):(Ht=!1,t=Do(fg(r,o),fg(e,o),o),Ht=!0,Ct(t,i))};ye.minus=ye.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?OL(t,e):EL(t,(e.s=-e.s,e))};ye.modulo=ye.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(li+"NaN");return r.s?(Ht=!1,t=Do(r,e,0,1).times(e),Ht=!0,r.minus(t)):Ct(new n(r),i)};ye.naturalExponential=ye.exp=function(){return RL(this)};ye.naturalLogarithm=ye.ln=function(){return fg(this)};ye.negated=ye.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ye.plus=ye.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EL(t,e):OL(t,(e.s=-e.s,e))};ye.precision=ye.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Xa+e);if(t=ir(i)+1,n=i.d.length-1,r=n*Pt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ye.squareRoot=ye.sqrt=function(){var e,t,r,n,i,o,s,a=this,c=a.constructor;if(a.s<1){if(!a.s)return new c(0);throw Error(li+"NaN")}for(e=ir(a),Ht=!1,i=Math.sqrt(+a),i==0||i==1/0?(t=to(a.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=bu((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(i.toString()),r=c.precision,i=s=r+3;;)if(o=n,n=o.plus(Do(a,o,s+2)).times(.5),to(o.d).slice(0,s)===(t=to(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(Ct(o,r+1,0),o.times(o).eq(a)){n=o;break}}else if(t!="9999")break;s+=4}return Ht=!0,Ct(n,r)};ye.times=ye.mul=function(e){var t,r,n,i,o,s,a,c,u,d=this,g=d.constructor,f=d.d,m=(e=new g(e)).d;if(!d.s||!e.s)return new g(0);for(e.s*=d.s,r=d.e+e.e,c=f.length,u=m.length,c<u&&(o=f,f=m,m=o,s=c,c=u,u=s),o=[],s=c+u,n=s;n--;)o.push(0);for(n=u;--n>=0;){for(t=0,i=c+n;i>n;)a=o[i]+m[n]*f[i-n-1]+t,o[i--]=a%hr|0,t=a/hr|0;o[i]=(o[i]+t)%hr|0}for(;!o[--s];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,Ht?Ct(e,g.precision):e};ye.toDecimalPlaces=ye.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ho(e,0,vu),t===void 0?t=n.rounding:ho(t,0,8),Ct(r,e+ir(r)+1,t))};ye.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=nl(n,!0):(ho(e,0,vu),t===void 0?t=i.rounding:ho(t,0,8),n=Ct(new i(n),e+1,t),r=nl(n,!0,e+1)),r};ye.toFixed=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?nl(i):(ho(e,0,vu),t===void 0?t=o.rounding:ho(t,0,8),n=Ct(new o(i),e+ir(i)+1,t),r=nl(n.abs(),!1,e+ir(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};ye.toInteger=ye.toint=function(){var e=this,t=e.constructor;return Ct(new t(e),ir(e)+1,t.rounding)};ye.toNumber=function(){return+this};ye.toPower=ye.pow=function(e){var t,r,n,i,o,s,a=this,c=a.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(kn);if(a=new c(a),!a.s){if(e.s<1)throw Error(li+"Infinity");return a}if(a.eq(kn))return a;if(n=c.precision,e.eq(kn))return Ct(a,n);if(t=e.e,r=e.d.length-1,s=t>=r,o=a.s,s){if((r=d<0?-d:d)<=TL){for(i=new c(kn),t=Math.ceil(n/Pt+4),Ht=!1;r%2&&(i=i.times(a),wT(i.d,t)),r=bu(r/2),r!==0;)a=a.times(a),wT(a.d,t);return Ht=!0,e.s<0?new c(kn).div(i):Ct(i,n)}}else if(o<0)throw Error(li+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,a.s=1,Ht=!1,i=e.times(fg(a,n+u)),Ht=!0,i=RL(i),i.s=o,i};ye.toPrecision=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?(r=ir(i),n=nl(i,r<=o.toExpNeg||r>=o.toExpPos)):(ho(e,1,vu),t===void 0?t=o.rounding:ho(t,0,8),i=Ct(new o(i),e,t),r=ir(i),n=nl(i,e<=r||r<=o.toExpNeg,e)),n};ye.toSignificantDigits=ye.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ho(e,1,vu),t===void 0?t=n.rounding:ho(t,0,8)),Ct(new n(r),e,t)};ye.toString=ye.valueOf=ye.val=ye.toJSON=ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ir(e),r=e.constructor;return nl(e,t<=r.toExpNeg||t>=r.toExpPos)};function EL(e,t){var r,n,i,o,s,a,c,u,d=e.constructor,g=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ht?Ct(t,g):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),o=s-i,o){for(o<0?(n=c,o=-o,a=u.length):(n=u,i=s,a=c.length),s=Math.ceil(g/Pt),a=s>a?s+1:a+1,o>a&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(a=c.length,o=u.length,a-o<0&&(o=a,n=u,u=c,c=n),r=0;o;)r=(c[--o]=c[o]+u[o]+r)/hr|0,c[o]%=hr;for(r&&(c.unshift(r),++i),a=c.length;c[--a]==0;)c.pop();return t.d=c,t.e=i,Ht?Ct(t,g):t}function ho(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Xa+e)}function to(e){var t,r,n,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)n=e[t]+"",r=Pt-n.length,r&&(o+=vs(r)),o+=n;s=e[t],n=s+"",r=Pt-n.length,r&&(o+=vs(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Do=function(){function e(n,i){var o,s=0,a=n.length;for(n=n.slice();a--;)o=n[a]*i+s,n[a]=o%hr|0,s=o/hr|0;return s&&n.unshift(s),n}function t(n,i,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(n[a]!=i[a]){c=n[a]>i[a]?1:-1;break}return c}function r(n,i,o){for(var s=0;o--;)n[o]-=s,s=n[o]<i[o]?1:0,n[o]=s*hr+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,s){var a,c,u,d,g,f,m,v,p,I,h,y,C,x,A,w,S,k,R=n.constructor,j=n.s==i.s?1:-1,_=n.d,O=i.d;if(!n.s)return new R(n);if(!i.s)throw Error(li+"Division by zero");for(c=n.e-i.e,S=O.length,A=_.length,m=new R(j),v=m.d=[],u=0;O[u]==(_[u]||0);)++u;if(O[u]>(_[u]||0)&&--c,o==null?y=o=R.precision:s?y=o+(ir(n)-ir(i))+1:y=o,y<0)return new R(0);if(y=y/Pt+2|0,u=0,S==1)for(d=0,O=O[0],y++;(u<A||d)&&y--;u++)C=d*hr+(_[u]||0),v[u]=C/O|0,d=C%O|0;else{for(d=hr/(O[0]+1)|0,d>1&&(O=e(O,d),_=e(_,d),S=O.length,A=_.length),x=S,p=_.slice(0,S),I=p.length;I<S;)p[I++]=0;k=O.slice(),k.unshift(0),w=O[0],O[1]>=hr/2&&++w;do d=0,a=t(O,p,S,I),a<0?(h=p[0],S!=I&&(h=h*hr+(p[1]||0)),d=h/w|0,d>1?(d>=hr&&(d=hr-1),g=e(O,d),f=g.length,I=p.length,a=t(g,p,f,I),a==1&&(d--,r(g,S<f?k:O,f))):(d==0&&(a=d=1),g=O.slice()),f=g.length,f<I&&g.unshift(0),r(p,g,I),a==-1&&(I=p.length,a=t(O,p,S,I),a<1&&(d++,r(p,S<I?k:O,I))),I=p.length):a===0&&(d++,p=[0]),v[u++]=d,a&&p[0]?p[I++]=_[x]||0:(p=[_[x]],I=1);while((x++<A||p[0]!==void 0)&&y--)}return v[0]||v.shift(),m.e=c,Ct(m,s?o+ir(m)+1:o)}}();function RL(e,t){var r,n,i,o,s,a,c=0,u=0,d=e.constructor,g=d.precision;if(ir(e)>16)throw Error(E1+ir(e));if(!e.s)return new d(kn);for(Ht=!1,a=g,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(Aa(2,u))/Math.LN10*2+5|0,a+=n,r=i=o=new d(kn),d.precision=a;;){if(i=Ct(i.times(e),a),r=r.times(++c),s=o.plus(Do(i,r,a)),to(s.d).slice(0,a)===to(o.d).slice(0,a)){for(;u--;)o=Ct(o.times(o),a);return d.precision=g,t==null?(Ht=!0,Ct(o,g)):o}o=s}}function ir(e){for(var t=e.e*Pt,r=e.d[0];r>=10;r/=10)t++;return t}function cv(e,t,r){if(t>e.LN10.sd())throw Ht=!0,r&&(e.precision=r),Error(li+"LN10 precision limit exceeded");return Ct(new e(e.LN10),t)}function vs(e){for(var t="";e--;)t+="0";return t}function fg(e,t){var r,n,i,o,s,a,c,u,d,g=1,f=10,m=e,v=m.d,p=m.constructor,I=p.precision;if(m.s<1)throw Error(li+(m.s?"NaN":"-Infinity"));if(m.eq(kn))return new p(0);if(t==null?(Ht=!1,u=I):u=t,m.eq(10))return t==null&&(Ht=!0),cv(p,u);if(u+=f,p.precision=u,r=to(v),n=r.charAt(0),o=ir(m),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=to(m.d),n=r.charAt(0),g++;o=ir(m),n>1?(m=new p("0."+r),o++):m=new p(n+"."+r.slice(1))}else return c=cv(p,u+2,I).times(o+""),m=fg(new p(n+"."+r.slice(1)),u-f).plus(c),p.precision=I,t==null?(Ht=!0,Ct(m,I)):m;for(a=s=m=Do(m.minus(kn),m.plus(kn),u),d=Ct(m.times(m),u),i=3;;){if(s=Ct(s.times(d),u),c=a.plus(Do(s,new p(i),u)),to(c.d).slice(0,u)===to(a.d).slice(0,u))return a=a.times(2),o!==0&&(a=a.plus(cv(p,u+2,I).times(o+""))),a=Do(a,new p(g),u),p.precision=I,t==null?(Ht=!0,Ct(a,I)):a;a=c,i+=2}}function AT(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=bu(r/Pt),e.d=[],n=(r+1)%Pt,r<0&&(n+=Pt),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Pt;n<i;)e.d.push(+t.slice(n,n+=Pt));t=t.slice(n),n=Pt-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Ht&&(e.e>im||e.e<-im))throw Error(E1+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ct(e,t,r){var n,i,o,s,a,c,u,d,g=e.d;for(s=1,o=g[0];o>=10;o/=10)s++;if(n=t-s,n<0)n+=Pt,i=t,u=g[d=0];else{if(d=Math.ceil((n+1)/Pt),o=g.length,d>=o)return e;for(u=o=g[d],s=1;o>=10;o/=10)s++;n%=Pt,i=n-Pt+s}if(r!==void 0&&(o=Aa(10,s-i-1),a=u/o%10|0,c=t<0||g[d+1]!==void 0||u%o,c=r<4?(a||c)&&(r==0||r==(e.s<0?3:2)):a>5||a==5&&(r==4||c||r==6&&(n>0?i>0?u/Aa(10,s-i):0:g[d-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return c?(o=ir(e),g.length=1,t=t-o-1,g[0]=Aa(10,(Pt-t%Pt)%Pt),e.e=bu(-t/Pt)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=d,o=1,d--):(g.length=d+1,o=Aa(10,Pt-n),g[d]=i>0?(u/Aa(10,s-i)%Aa(10,i)|0)*o:0),c)for(;;)if(d==0){(g[0]+=o)==hr&&(g[0]=1,++e.e);break}else{if(g[d]+=o,g[d]!=hr)break;g[d--]=0,o=1}for(n=g.length;g[--n]===0;)g.pop();if(Ht&&(e.e>im||e.e<-im))throw Error(E1+ir(e));return e}function OL(e,t){var r,n,i,o,s,a,c,u,d,g,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Ht?Ct(t,m):t;if(c=e.d,g=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,a=g.length):(r=g,n=u,a=c.length),i=Math.max(Math.ceil(m/Pt),a)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=c.length,a=g.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(c[i]!=g[i]){d=c[i]<g[i];break}s=0}for(d&&(r=c,c=g,g=r,t.s=-t.s),a=c.length,i=g.length-a;i>0;--i)c[a++]=0;for(i=g.length;i>s;){if(c[--i]<g[i]){for(o=i;o&&c[--o]===0;)c[o]=hr-1;--c[o],c[i]+=hr}c[i]-=g[i]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ht?Ct(t,m):t):new f(0)}function nl(e,t,r){var n,i=ir(e),o=to(e.d),s=o.length;return t?(r&&(n=r-s)>0?o=o.charAt(0)+"."+o.slice(1)+vs(n):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+vs(-i-1)+o,r&&(n=r-s)>0&&(o+=vs(n))):i>=s?(o+=vs(i+1-s),r&&(n=r-i-1)>0&&(o=o+"."+vs(n))):((n=i+1)<s&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(o+="."),o+=vs(n))),e.s<0?"-"+o:o}function wT(e,t){if(e.length>t)return e.length=t,!0}function GL(e){var t,r,n;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Xa+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return AT(s,o.toString())}else if(typeof o!="string")throw Error(Xa+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,uye.test(o))AT(s,o);else throw Error(Xa+o)}if(i.prototype=ye,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=GL,i.config=i.set=dye,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function dye(e){if(!e||typeof e!="object")throw Error(li+"Object expected");var t,r,n,i=["precision",1,vu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(bu(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Xa+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Xa+r+": "+n);return this}var R1=GL(cye);kn=new R1(1);const mt=R1;function gye(e){return mye(e)||pye(e)||hye(e)||fye()}function fye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hye(e,t){if(e){if(typeof e=="string")return Wb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wb(e,t)}}function pye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function mye(e){if(Array.isArray(e))return Wb(e)}function Wb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Iye=function(t){return t},PL={},_L=function(t){return t===PL},ST=function(t){return function r(){return arguments.length===0||arguments.length===1&&_L(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},yye=function e(t,r){return t===1?r:ST(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==PL}).length;return s>=t?r.apply(void 0,i):e(t-s,ST(function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];var d=i.map(function(g){return _L(g)?c.shift():g});return r.apply(void 0,gye(d).concat(c))}))})},ny=function(t){return yye(t.length,t)},Db=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},Cye=ny(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),vye=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Iye;var i=r.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,c){return c(a)},o.apply(void 0,arguments))}},$b=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},ML=function(t){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r&&o.every(function(a,c){return a===r[c]})||(r=o,n=t.apply(void 0,o)),n}};function bye(e){var t;return e===0?t=1:t=Math.floor(new mt(e).abs().log(10).toNumber())+1,t}function xye(e,t,r){for(var n=new mt(e),i=0,o=[];n.lt(t)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var Aye=ny(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),wye=ny(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),Sye=ny(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const iy={rangeStep:xye,getDigitCount:bye,interpolateNumber:Aye,uninterpolateNumber:wye,uninterpolateTruncation:Sye};function Xb(e){return Nye(e)||Bye(e)||ZL(e)||kye()}function kye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Nye(e){if(Array.isArray(e))return Fb(e)}function hg(e,t){return Eye(e)||Tye(e,t)||ZL(e,t)||jye()}function jye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZL(e,t){if(e){if(typeof e=="string")return Fb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fb(e,t)}}function Fb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tye(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,o=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function Eye(e){if(Array.isArray(e))return e}function HL(e){var t=hg(e,2),r=t[0],n=t[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function LL(e,t,r){if(e.lte(0))return new mt(0);var n=iy.getDigitCount(e.toNumber()),i=new mt(10).pow(n),o=e.div(i),s=n!==1?.05:.1,a=new mt(Math.ceil(o.div(s).toNumber())).add(r).mul(s),c=a.mul(i);return t?c:new mt(Math.ceil(c))}function Rye(e,t,r){var n=1,i=new mt(e);if(!i.isint()&&r){var o=Math.abs(e);o<1?(n=new mt(10).pow(iy.getDigitCount(e)-1),i=new mt(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new mt(Math.floor(e)))}else e===0?i=new mt(Math.floor((t-1)/2)):r||(i=new mt(Math.floor(e)));var s=Math.floor((t-1)/2),a=vye(Cye(function(c){return i.add(new mt(c-s).mul(n)).toNumber()}),Db);return a(0,t)}function WL(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var o=LL(new mt(t).sub(e).div(r-1),n,i),s;e<=0&&t>=0?s=new mt(0):(s=new mt(e).add(t).div(2),s=s.sub(new mt(s).mod(o)));var a=Math.ceil(s.sub(e).div(o).toNumber()),c=Math.ceil(new mt(t).sub(s).div(o).toNumber()),u=a+c+1;return u>r?WL(e,t,r,n,i+1):(u<r&&(c=t>0?c+(r-u):c,a=t>0?a:a+(r-u)),{step:o,tickMin:s.sub(new mt(a).mul(o)),tickMax:s.add(new mt(c).mul(o))})}function Oye(e){var t=hg(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=HL([r,n]),c=hg(a,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var g=d===1/0?[u].concat(Xb(Db(0,i-1).map(function(){return 1/0}))):[].concat(Xb(Db(0,i-1).map(function(){return-1/0})),[d]);return r>n?$b(g):g}if(u===d)return Rye(u,i,o);var f=WL(u,d,s,o),m=f.step,v=f.tickMin,p=f.tickMax,I=iy.rangeStep(v,p.add(new mt(.1).mul(m)),m);return r>n?$b(I):I}function Gye(e,t){var r=hg(e,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=HL([n,i]),a=hg(s,2),c=a[0],u=a[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var d=Math.max(t,2),g=LL(new mt(u).sub(c).div(d-1),o,0),f=[].concat(Xb(iy.rangeStep(new mt(c),new mt(u).sub(new mt(.99).mul(g)),g)),[u]);return n>i?$b(f):f}var Pye=ML(Oye),_ye=ML(Gye),Mye="Invariant failed";function $c(e,t){throw new Error(Mye)}var Zye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Xc(e){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xc(e)}function om(){return om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},om.apply(this,arguments)}function Hye(e,t){return $ye(e)||Dye(e,t)||Wye(e,t)||Lye()}function Lye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wye(e,t){if(e){if(typeof e=="string")return kT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kT(e,t)}}function kT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function $ye(e){if(Array.isArray(e))return e}function Xye(e,t){if(e==null)return{};var r=Fye(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Kye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XL(n.key),n)}}function zye(e,t,r){return t&&Vye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yye(e,t,r){return t=sm(t),Uye(e,DL()?Reflect.construct(t,r||[],sm(e).constructor):t.apply(e,r))}function Uye(e,t){if(t&&(Xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jye(e)}function Jye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DL=function(){return!!e})()}function sm(e){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sm(e)}function Qye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kb(e,t)}function Kb(e,t){return Kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Kb(e,t)}function $L(e,t,r){return t=XL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XL(e){var t=qye(e,"string");return Xc(t)=="symbol"?t:t+""}function qye(e,t){if(Xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var O1=function(e){function t(){return Kye(this,t),Yye(this,t,arguments)}return Qye(t,e),zye(t,[{key:"render",value:function(){var n=this.props,i=n.offset,o=n.layout,s=n.width,a=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,g=n.yAxis,f=Xye(n,Zye),m=De(f,!1);this.props.direction==="x"&&d.type!=="number"&&$c();var v=c.map(function(p){var I=u(p,a),h=I.x,y=I.y,C=I.value,x=I.errorVal;if(!x)return null;var A=[],w,S;if(Array.isArray(x)){var k=Hye(x,2);w=k[0],S=k[1]}else w=S=x;if(o==="vertical"){var R=d.scale,j=y+i,_=j+s,O=j-s,P=R(C-w),N=R(C+S);A.push({x1:N,y1:_,x2:N,y2:O}),A.push({x1:P,y1:j,x2:N,y2:j}),A.push({x1:P,y1:_,x2:P,y2:O})}else if(o==="horizontal"){var B=g.scale,E=h+i,M=E-s,G=E+s,T=B(C-w),L=B(C+S);A.push({x1:M,y1:L,x2:G,y2:L}),A.push({x1:E,y1:T,x2:E,y2:L}),A.push({x1:M,y1:T,x2:G,y2:T})}return H.createElement(Ut,om({className:"recharts-errorBar",key:"bar-".concat(A.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},m),A.map(function(W){return H.createElement("line",om({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return H.createElement(Ut,{className:"recharts-errorBars"},v)}}])}(H.Component);$L(O1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});$L(O1,"displayName","ErrorBar");function pg(e){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pg(e)}function BT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(r),!0).forEach(function(n){eCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eCe(e,t,r){return t=tCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tCe(e){var t=rCe(e,"string");return pg(t)=="symbol"?t:t+""}function rCe(e,t){if(pg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FL=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,o=t.legendContent,s=Kn(r,Da);if(!s)return null;var a=Da.defaultProps,c=a!==void 0?ma(ma({},a),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:o==="children"?u=(n||[]).reduce(function(d,g){var f=g.item,m=g.props,v=m.sectors||m.data||[];return d.concat(v.map(function(p){return{type:s.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var g=d.item,f=g.type.defaultProps,m=f!==void 0?ma(ma({},f),g.props):{},v=m.dataKey,p=m.name,I=m.legendType,h=m.hide;return{inactive:h,dataKey:v,type:c.iconType||I||"square",color:G1(g),value:p||v,payload:m}}),ma(ma(ma({},c),Da.getWithHeight(s,i)),{},{payload:u,item:s})};function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function NT(e){return sCe(e)||oCe(e)||iCe(e)||nCe()}function nCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iCe(e,t){if(e){if(typeof e=="string")return Vb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vb(e,t)}}function oCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sCe(e){if(Array.isArray(e))return Vb(e)}function Vb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(r),!0).forEach(function(n){ac(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ac(e,t,r){return t=aCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aCe(e){var t=lCe(e,"string");return mg(t)=="symbol"?t:t+""}function lCe(e,t){if(mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bn(e,t,r){return qe(e)||qe(t)?r:ur(t)?Pi(e,t,r):Fe(t)?t(e):r}function fd(e,t,r,n){var i=oye(e,function(a){return Bn(a,t)});if(r==="number"){var o=i.filter(function(a){return pe(a)||parseFloat(a)});return o.length?[ry(o),ty(o)]:[1/0,-1/0]}var s=n?i.filter(function(a){return!qe(a)}):i;return s.map(function(a){return ur(a)||a instanceof Date?a:""})}var cCe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var c=o.range,u=0;u<a;u++){var d=u>0?i[u-1].coordinate:i[a-1].coordinate,g=i[u].coordinate,f=u>=a-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(ri(g-d)!==ri(f-g)){var v=[];if(ri(f-g)===ri(c[1]-c[0])){m=f;var p=g+c[1]-c[0];v[0]=Math.min(p,(p+d)/2),v[1]=Math.max(p,(p+d)/2)}else{m=d;var I=f+c[1]-c[0];v[0]=Math.min(g,(I+g)/2),v[1]=Math.max(g,(I+g)/2)}var h=[Math.min(g,(m+g)/2),Math.max(g,(m+g)/2)];if(t>h[0]&&t<=h[1]||t>=v[0]&&t<=v[1]){s=i[u].index;break}}else{var y=Math.min(d,f),C=Math.max(d,f);if(t>(y+g)/2&&t<=(C+g)/2){s=i[u].index;break}}}else for(var x=0;x<a;x++)if(x===0&&t<=(n[x].coordinate+n[x+1].coordinate)/2||x>0&&x<a-1&&t>(n[x].coordinate+n[x-1].coordinate)/2&&t<=(n[x].coordinate+n[x+1].coordinate)/2||x===a-1&&t>(n[x].coordinate+n[x-1].coordinate)/2){s=n[x].index;break}return s},G1=function(t){var r,n=t,i=n.type.displayName,o=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Yt(Yt({},t.type.defaultProps),t.props):t.props,s=o.stroke,a=o.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:a;break;default:c=a;break}return c},uCe=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var s={},a=Object.keys(o),c=0,u=a.length;c<u;c++)for(var d=o[a[c]].stackGroups,g=Object.keys(d),f=0,m=g.length;f<m;f++){var v=d[g[f]],p=v.items,I=v.cateAxisId,h=p.filter(function(S){return Lo(S.type).indexOf("Bar")>=0});if(h&&h.length){var y=h[0].type.defaultProps,C=y!==void 0?Yt(Yt({},y),h[0].props):h[0].props,x=C.barSize,A=C[I];s[A]||(s[A]=[]);var w=qe(x)?r:x;s[A].push({item:h[0],stackList:h.slice(1),barSize:qe(w)?void 0:cn(w,n,0)})}}return s},dCe=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,o=t.sizeList,s=o===void 0?[]:o,a=t.maxBarSize,c=s.length;if(c<1)return null;var u=cn(r,i,0,!0),d,g=[];if(s[0].barSize===+s[0].barSize){var f=!1,m=i/c,v=s.reduce(function(x,A){return x+A.barSize||0},0);v+=(c-1)*u,v>=i&&(v-=(c-1)*u,u=0),v>=i&&m>0&&(f=!0,m*=.9,v=c*m);var p=(i-v)/2>>0,I={offset:p-u,size:0};d=s.reduce(function(x,A){var w={item:A.item,position:{offset:I.offset+I.size+u,size:f?m:A.barSize}},S=[].concat(NT(x),[w]);return I=S[S.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(k){S.push({item:k,position:I})}),S},g)}else{var h=cn(n,i,0,!0);i-2*h-(c-1)*u<=0&&(u=0);var y=(i-2*h-(c-1)*u)/c;y>1&&(y>>=0);var C=a===+a?Math.min(y,a):y;d=s.reduce(function(x,A,w){var S=[].concat(NT(x),[{item:A.item,position:{offset:h+(y+u)*w+(y-C)/2,size:C}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(k){S.push({item:k,position:S[S.length-1].position})}),S},g)}return d},gCe=function(t,r,n,i){var o=n.children,s=n.width,a=n.margin,c=s-(a.left||0)-(a.right||0),u=FL({children:o,legendWidth:c});if(u){var d=i||{},g=d.width,f=d.height,m=u.align,v=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&v==="middle")&&m!=="center"&&pe(t[m]))return Yt(Yt({},t),{},ac({},m,t[m]+(g||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&v!=="middle"&&pe(t[v]))return Yt(Yt({},t),{},ac({},v,t[v]+(f||0)))}return t},fCe=function(t,r,n){return qe(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},KL=function(t,r,n,i,o){var s=r.props.children,a=lo(s,O1).filter(function(u){return fCe(i,o,u.props.direction)});if(a&&a.length){var c=a.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var g=Bn(d,n);if(qe(g))return u;var f=Array.isArray(g)?[ry(g),ty(g)]:[g,g],m=c.reduce(function(v,p){var I=Bn(d,p,0),h=f[0]-Math.abs(Array.isArray(I)?I[0]:I),y=f[1]+Math.abs(Array.isArray(I)?I[1]:I);return[Math.min(h,v[0]),Math.max(y,v[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},hCe=function(t,r,n,i,o){var s=r.map(function(a){return KL(t,a,n,o,i)}).filter(function(a){return!qe(a)});return s&&s.length?s.reduce(function(a,c){return[Math.min(a[0],c[0]),Math.max(a[1],c[1])]},[1/0,-1/0]):null},VL=function(t,r,n,i,o){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&KL(t,c,u,i)||fd(t,u,n,o)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var a={};return s.reduce(function(c,u){for(var d=0,g=u.length;d<g;d++)a[u[d]]||(a[u[d]]=!0,c.push(u[d]));return c},[])},zL=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},Qu=function(t,r,n){if(!t)return null;var i=t.scale,o=t.duplicateDomain,s=t.type,a=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?ri(a[0]-a[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(g){var f=o?o.indexOf(g):g;return{coordinate:i(f)+u,value:g,offset:u}});return d.filter(function(g){return!af(g.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(g,f){return{coordinate:i(g)+u,value:g,index:f,offset:u}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(g){return{coordinate:i(g)+u,value:g,offset:u}}):i.domain().map(function(g,f){return{coordinate:i(g)+u,value:o?o[g]:g,index:f,offset:u}})},uv=new WeakMap,sh=function(t,r){if(typeof r!="function")return t;uv.has(t)||uv.set(t,new WeakMap);var n=uv.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},pCe=function(t,r,n){var i=t.scale,o=t.type,s=t.layout,a=t.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:lg(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:em(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0)?{scale:gd(),realScaleType:"point"}:o==="category"?{scale:lg(),realScaleType:"band"}:{scale:em(),realScaleType:"linear"};if(sf(i)){var c="scale".concat(LI(i));return{scale:(xT[c]||gd)(),realScaleType:xT[c]?c:"point"}}return Fe(i)?{scale:i}:{scale:gd(),realScaleType:"point"}},TT=1e-4,mCe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),o=Math.min(i[0],i[1])-TT,s=Math.max(i[0],i[1])+TT,a=t(r[0]),c=t(r[n-1]);(a<o||a>s||c<o||c>s)&&t.domain([r[0],r[n-1]])}},ICe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var o=0,s=0,a=0;a<r;++a){var c=af(t[a][n][1])?t[a][n][0]:t[a][n][1];c>=0?(t[a][n][0]=o,t[a][n][1]=o+c,o=t[a][n][1]):(t[a][n][0]=s,t[a][n][1]=s+c,s=t[a][n][1])}},yCe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var o=0,s=0;s<r;++s){var a=af(t[s][n][1])?t[s][n][0]:t[s][n][1];a>=0?(t[s][n][0]=o,t[s][n][1]=o+a,o=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},CCe={sign:ICe,expand:_oe,none:Gc,silhouette:Moe,wiggle:Zoe,positive:yCe},vCe=function(t,r,n){var i=r.map(function(a){return a.props.dataKey}),o=CCe[n],s=Poe().keys(i).value(function(a,c){return+Bn(a,c,0)}).order(yb).offset(o);return s(t)},bCe=function(t,r,n,i,o,s){if(!t)return null;var a=s?r.reverse():r,c={},u=a.reduce(function(g,f){var m,v=(m=f.type)!==null&&m!==void 0&&m.defaultProps?Yt(Yt({},f.type.defaultProps),f.props):f.props,p=v.stackId,I=v.hide;if(I)return g;var h=v[n],y=g[h]||{hasStack:!1,stackGroups:{}};if(ur(p)){var C=y.stackGroups[p]||{numericAxisId:n,cateAxisId:i,items:[]};C.items.push(f),y.hasStack=!0,y.stackGroups[p]=C}else y.stackGroups[ZI("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[f]};return Yt(Yt({},g),{},ac({},h,y))},c),d={};return Object.keys(u).reduce(function(g,f){var m=u[f];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,I){var h=m.stackGroups[I];return Yt(Yt({},p),{},ac({},I,{numericAxisId:n,cateAxisId:i,items:h.items,stackedData:vCe(t,h.items,o)}))},v)}return Yt(Yt({},g),{},ac({},f,m))},d)},xCe=function(t,r){var n=r.realScaleType,i=r.type,o=r.tickCount,s=r.originalDomain,a=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=Pye(u,o,a);return t.domain([ry(d),ty(d)]),{niceTicks:d}}if(o&&i==="number"){var g=t.domain(),f=_ye(g,o,a);return{niceTicks:f}}return null},ACe=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Yt(Yt({},t.type.defaultProps),t.props):t.props,o=i.stackId;if(ur(o)){var s=r[o];if(s){var a=s.items.indexOf(t);return a>=0?s.stackedData[a]:null}}return null},wCe=function(t){return t.reduce(function(r,n){return[ry(n.concat([r[0]]).filter(pe)),ty(n.concat([r[1]]).filter(pe))]},[1/0,-1/0])},YL=function(t,r,n){return Object.keys(t).reduce(function(i,o){var s=t[o],a=s.stackedData,c=a.reduce(function(u,d){var g=wCe(d.slice(r,n+1));return[Math.min(u[0],g[0]),Math.max(u[1],g[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},ET=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zb=function(t,r,n){if(Fe(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(pe(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(ET.test(t[0])){var o=+ET.exec(t[0])[1];i[0]=r[0]-o}else Fe(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(pe(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(RT.test(t[1])){var s=+RT.exec(t[1])[1];i[1]=r[1]+s}else Fe(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},Yb=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var o=o1(r,function(g){return g.coordinate}),s=1/0,a=1,c=o.length;a<c;a++){var u=o[a],d=o[a-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},OT=function(t,r,n){return!t||!t.length||T1(t,Pi(n,"type.defaultProps.domain"))?r:t},SCe=function(t,r){var n=t.type.defaultProps?Yt(Yt({},t.type.defaultProps),t.props):t.props,i=n.dataKey,o=n.name,s=n.unit,a=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Yt(Yt({},De(t,!1)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:G1(t),value:Bn(r,i),type:c,payload:r,chartType:u,hide:d})};function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function GT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GT(Object(r),!0).forEach(function(n){UL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UL(e,t,r){return t=kCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kCe(e){var t=BCe(e,"string");return Ig(t)=="symbol"?t:t+""}function BCe(e,t){if(Ig(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NCe(e,t){return RCe(e)||ECe(e,t)||TCe(e,t)||jCe()}function jCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TCe(e,t){if(e){if(typeof e=="string")return PT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PT(e,t)}}function PT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ECe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function RCe(e){if(Array.isArray(e))return e}var am=Math.PI/180,OCe=function(t){return t*180/Math.PI},Bt=function(t,r,n,i){return{x:t+Math.cos(-am*i)*n,y:r+Math.sin(-am*i)*n}},JL=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},GCe=function(t,r,n,i,o){var s=t.width,a=t.height,c=t.startAngle,u=t.endAngle,d=cn(t.cx,s,s/2),g=cn(t.cy,a,a/2),f=JL(s,a,n),m=cn(t.innerRadius,f,0),v=cn(t.outerRadius,f,f*.8),p=Object.keys(r);return p.reduce(function(I,h){var y=r[h],C=y.domain,x=y.reversed,A;if(qe(y.range))i==="angleAxis"?A=[c,u]:i==="radiusAxis"&&(A=[m,v]),x&&(A=[A[1],A[0]]);else{A=y.range;var w=A,S=NCe(w,2);c=S[0],u=S[1]}var k=pCe(y,o),R=k.realScaleType,j=k.scale;j.domain(C).range(A),mCe(j);var _=xCe(j,Ao(Ao({},y),{},{realScaleType:R})),O=Ao(Ao(Ao({},y),_),{},{range:A,radius:v,realScaleType:R,scale:j,cx:d,cy:g,innerRadius:m,outerRadius:v,startAngle:c,endAngle:u});return Ao(Ao({},I),{},UL({},h,O))},{})},PCe=function(t,r){var n=t.x,i=t.y,o=r.x,s=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-s,2))},_Ce=function(t,r){var n=t.x,i=t.y,o=r.cx,s=r.cy,a=PCe({x:n,y:i},{x:o,y:s});if(a<=0)return{radius:a};var c=(n-o)/a,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:a,angle:OCe(u),angleInRadian:u}},MCe=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),s=Math.min(i,o);return{startAngle:r-s*360,endAngle:n-s*360}},ZCe=function(t,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(o,s);return t+a*360},_T=function(t,r){var n=t.x,i=t.y,o=_Ce({x:n,y:i},r),s=o.radius,a=o.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=MCe(r),g=d.startAngle,f=d.endAngle,m=a,v;if(g<=f){for(;m>f;)m-=360;for(;m<g;)m+=360;v=m>=g&&m<=f}else{for(;m>g;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=g}return v?Ao(Ao({},r),{},{radius:s,angle:ZCe(m,r)}):null},QL=function(t){return!b.isValidElement(t)&&!Fe(t)&&typeof t!="boolean"?t.className:""};function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}var HCe=["offset"];function LCe(e){return XCe(e)||$Ce(e)||DCe(e)||WCe()}function WCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DCe(e,t){if(e){if(typeof e=="string")return Ub(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ub(e,t)}}function $Ce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XCe(e){if(Array.isArray(e))return Ub(e)}function Ub(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FCe(e,t){if(e==null)return{};var r=KCe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function KCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(r),!0).forEach(function(n){VCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VCe(e,t,r){return t=zCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zCe(e){var t=YCe(e,"string");return yg(t)=="symbol"?t:t+""}function YCe(e,t){if(yg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cg.apply(this,arguments)}var UCe=function(t){var r=t.value,n=t.formatter,i=qe(t.children)?r:t.children;return Fe(n)?n(i):i},JCe=function(t,r){var n=ri(r-t),i=Math.min(Math.abs(r-t),360);return n*i},QCe=function(t,r,n){var i=t.position,o=t.viewBox,s=t.offset,a=t.className,c=o,u=c.cx,d=c.cy,g=c.innerRadius,f=c.outerRadius,m=c.startAngle,v=c.endAngle,p=c.clockWise,I=(g+f)/2,h=JCe(m,v),y=h>=0?1:-1,C,x;i==="insideStart"?(C=m+y*s,x=p):i==="insideEnd"?(C=v-y*s,x=!p):i==="end"&&(C=v+y*s,x=p),x=h<=0?x:!x;var A=Bt(u,d,I,C),w=Bt(u,d,I,C+(x?1:-1)*359),S="M".concat(A.x,",").concat(A.y,`
    A`).concat(I,",").concat(I,",0,1,").concat(x?0:1,`,
    `).concat(w.x,",").concat(w.y),k=qe(t.id)?ZI("recharts-radial-line-"):t.id;return H.createElement("text",Cg({},n,{dominantBaseline:"central",className:rt("recharts-radial-bar-label",a)}),H.createElement("defs",null,H.createElement("path",{id:k,d:S})),H.createElement("textPath",{xlinkHref:"#".concat(k)},r))},qCe=function(t){var r=t.viewBox,n=t.offset,i=t.position,o=r,s=o.cx,a=o.cy,c=o.innerRadius,u=o.outerRadius,d=o.startAngle,g=o.endAngle,f=(d+g)/2;if(i==="outside"){var m=Bt(s,a,u+n,f),v=m.x,p=m.y;return{x:v,y:p,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var I=(c+u)/2,h=Bt(s,a,I,f),y=h.x,C=h.y;return{x:y,y:C,textAnchor:"middle",verticalAnchor:"middle"}},eve=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,o=t.position,s=r,a=s.x,c=s.y,u=s.width,d=s.height,g=d>=0?1:-1,f=g*i,m=g>0?"end":"start",v=g>0?"start":"end",p=u>=0?1:-1,I=p*i,h=p>0?"end":"start",y=p>0?"start":"end";if(o==="top"){var C={x:a+u/2,y:c-g*i,textAnchor:"middle",verticalAnchor:m};return or(or({},C),n?{height:Math.max(c-n.y,0),width:u}:{})}if(o==="bottom"){var x={x:a+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:v};return or(or({},x),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(o==="left"){var A={x:a-I,y:c+d/2,textAnchor:h,verticalAnchor:"middle"};return or(or({},A),n?{width:Math.max(A.x-n.x,0),height:d}:{})}if(o==="right"){var w={x:a+u+I,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return or(or({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:d}:{})}var S=n?{width:u,height:d}:{};return o==="insideLeft"?or({x:a+I,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},S):o==="insideRight"?or({x:a+u-I,y:c+d/2,textAnchor:h,verticalAnchor:"middle"},S):o==="insideTop"?or({x:a+u/2,y:c+f,textAnchor:"middle",verticalAnchor:v},S):o==="insideBottom"?or({x:a+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},S):o==="insideTopLeft"?or({x:a+I,y:c+f,textAnchor:y,verticalAnchor:v},S):o==="insideTopRight"?or({x:a+u-I,y:c+f,textAnchor:h,verticalAnchor:v},S):o==="insideBottomLeft"?or({x:a+I,y:c+d-f,textAnchor:y,verticalAnchor:m},S):o==="insideBottomRight"?or({x:a+u-I,y:c+d-f,textAnchor:h,verticalAnchor:m},S):gu(o)&&(pe(o.x)||Ea(o.x))&&(pe(o.y)||Ea(o.y))?or({x:a+cn(o.x,u),y:c+cn(o.y,d),textAnchor:"end",verticalAnchor:"end"},S):or({x:a+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},tve=function(t){return"cx"in t&&pe(t.cx)};function Br(e){var t=e.offset,r=t===void 0?5:t,n=FCe(e,HCe),i=or({offset:r},n),o=i.viewBox,s=i.position,a=i.value,c=i.children,u=i.content,d=i.className,g=d===void 0?"":d,f=i.textBreakAll;if(!o||qe(a)&&qe(c)&&!b.isValidElement(u)&&!Fe(u))return null;if(b.isValidElement(u))return b.cloneElement(u,i);var m;if(Fe(u)){if(m=b.createElement(u,i),b.isValidElement(m))return m}else m=UCe(i);var v=tve(o),p=De(i,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return QCe(i,m,p);var I=v?qCe(i):eve(i);return H.createElement(Hc,Cg({className:rt("recharts-label",g)},p,I,{breakAll:f}),m)}Br.displayName="Label";var qL=function(t){var r=t.cx,n=t.cy,i=t.angle,o=t.startAngle,s=t.endAngle,a=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,g=t.x,f=t.y,m=t.top,v=t.left,p=t.width,I=t.height,h=t.clockWise,y=t.labelViewBox;if(y)return y;if(pe(p)&&pe(I)){if(pe(g)&&pe(f))return{x:g,y:f,width:p,height:I};if(pe(m)&&pe(v))return{x:m,y:v,width:p,height:I}}return pe(g)&&pe(f)?{x:g,y:f,width:0,height:0}:pe(r)&&pe(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||c||a||0,clockWise:h}:t.viewBox?t.viewBox:{}},rve=function(t,r){return t?t===!0?H.createElement(Br,{key:"label-implicit",viewBox:r}):ur(t)?H.createElement(Br,{key:"label-implicit",viewBox:r,value:t}):b.isValidElement(t)?t.type===Br?b.cloneElement(t,{key:"label-implicit",viewBox:r}):H.createElement(Br,{key:"label-implicit",content:t,viewBox:r}):Fe(t)?H.createElement(Br,{key:"label-implicit",content:t,viewBox:r}):gu(t)?H.createElement(Br,Cg({viewBox:r},t,{key:"label-implicit"})):null:null},nve=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,o=qL(t),s=lo(i,Br).map(function(c,u){return b.cloneElement(c,{viewBox:r||o,key:"label-".concat(u)})});if(!n)return s;var a=rve(t.label,r||o);return[a].concat(LCe(s))};Br.parseViewBox=qL;Br.renderCallByParent=nve;function ive(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var ove=ive;const sve=ht(ove);function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}var ave=["valueAccessor"],lve=["data","dataKey","clockWise","id","textBreakAll"];function cve(e){return fve(e)||gve(e)||dve(e)||uve()}function uve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dve(e,t){if(e){if(typeof e=="string")return Jb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jb(e,t)}}function gve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fve(e){if(Array.isArray(e))return Jb(e)}function Jb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lm.apply(this,arguments)}function ZT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(r),!0).forEach(function(n){hve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hve(e,t,r){return t=pve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pve(e){var t=mve(e,"string");return vg(t)=="symbol"?t:t+""}function mve(e,t){if(vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LT(e,t){if(e==null)return{};var r=Ive(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ive(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var yve=function(t){return Array.isArray(t.value)?sve(t.value):t.value};function Fa(e){var t=e.valueAccessor,r=t===void 0?yve:t,n=LT(e,ave),i=n.data,o=n.dataKey,s=n.clockWise,a=n.id,c=n.textBreakAll,u=LT(n,lve);return!i||!i.length?null:H.createElement(Ut,{className:"recharts-label-list"},i.map(function(d,g){var f=qe(o)?r(d,g):Bn(d&&d.payload,o),m=qe(a)?{}:{id:"".concat(a,"-").concat(g)};return H.createElement(Br,lm({},De(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:Br.parseViewBox(qe(s)?d:HT(HT({},d),{},{clockWise:s})),key:"label-".concat(g),index:g}))}))}Fa.displayName="LabelList";function Cve(e,t){return e?e===!0?H.createElement(Fa,{key:"labelList-implicit",data:t}):H.isValidElement(e)||Fe(e)?H.createElement(Fa,{key:"labelList-implicit",data:t,content:e}):gu(e)?H.createElement(Fa,lm({data:t},e,{key:"labelList-implicit"})):null:null}function vve(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=lo(n,Fa).map(function(s,a){return b.cloneElement(s,{data:t,key:"labelList-".concat(a)})});if(!r)return i;var o=Cve(e.label,t);return[o].concat(cve(i))}Fa.renderCallByParent=vve;function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qb.apply(this,arguments)}function WT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function DT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WT(Object(r),!0).forEach(function(n){bve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bve(e,t,r){return t=xve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xve(e){var t=Ave(e,"string");return bg(t)=="symbol"?t:t+""}function Ave(e,t){if(bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wve=function(t,r){var n=ri(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},ah=function(t){var r=t.cx,n=t.cy,i=t.radius,o=t.angle,s=t.sign,a=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(a?1:-1)+i,g=Math.asin(c/d)/am,f=u?o:o+s*g,m=Bt(r,n,d,f),v=Bt(r,n,i,f),p=u?o-s*g:o,I=Bt(r,n,d*Math.cos(g*am),p);return{center:m,circleTangency:v,lineTangency:I,theta:g}},eW=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,o=t.outerRadius,s=t.startAngle,a=t.endAngle,c=wve(s,a),u=s+c,d=Bt(r,n,o,s),g=Bt(r,n,o,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(g.x,",").concat(g.y,`
  `);if(i>0){var m=Bt(r,n,i,s),v=Bt(r,n,i,u);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},Sve=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,o=t.outerRadius,s=t.cornerRadius,a=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,g=ri(d-u),f=ah({cx:r,cy:n,radius:o,angle:u,sign:g,cornerRadius:s,cornerIsExternal:c}),m=f.circleTangency,v=f.lineTangency,p=f.theta,I=ah({cx:r,cy:n,radius:o,angle:d,sign:-g,cornerRadius:s,cornerIsExternal:c}),h=I.circleTangency,y=I.lineTangency,C=I.theta,x=c?Math.abs(u-d):Math.abs(u-d)-p-C;if(x<0)return a?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):eW({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:u,endAngle:d});var A="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(g<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(x>180),",").concat(+(g<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(g<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var w=ah({cx:r,cy:n,radius:i,angle:u,sign:g,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),S=w.circleTangency,k=w.lineTangency,R=w.theta,j=ah({cx:r,cy:n,radius:i,angle:d,sign:-g,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),_=j.circleTangency,O=j.lineTangency,P=j.theta,N=c?Math.abs(u-d):Math.abs(u-d)-R-P;if(N<0&&s===0)return"".concat(A,"L").concat(r,",").concat(n,"Z");A+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(g<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(g>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(g<0),",").concat(k.x,",").concat(k.y,"Z")}else A+="L".concat(r,",").concat(n,"Z");return A},kve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tW=function(t){var r=DT(DT({},kve),t),n=r.cx,i=r.cy,o=r.innerRadius,s=r.outerRadius,a=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,g=r.endAngle,f=r.className;if(s<o||d===g)return null;var m=rt("recharts-sector",f),v=s-o,p=cn(a,v,0,!0),I;return p>0&&Math.abs(d-g)<360?I=Sve({cx:n,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(p,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:g}):I=eW({cx:n,cy:i,innerRadius:o,outerRadius:s,startAngle:d,endAngle:g}),H.createElement("path",Qb({},De(r,!0),{className:m,d:I,role:"img"}))};function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qb.apply(this,arguments)}function $T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$T(Object(r),!0).forEach(function(n){Bve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$T(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bve(e,t,r){return t=Nve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nve(e){var t=jve(e,"string");return xg(t)=="symbol"?t:t+""}function jve(e,t){if(xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FT={curveBasisClosed:woe,curveBasisOpen:Soe,curveBasis:Aoe,curveBumpX:coe,curveBumpY:uoe,curveLinearClosed:koe,curveLinear:DI,curveMonotoneX:Boe,curveMonotoneY:Noe,curveNatural:joe,curveStep:Toe,curveStepAfter:Roe,curveStepBefore:Eoe},lh=function(t){return t.x===+t.x&&t.y===+t.y},Du=function(t){return t.x},$u=function(t){return t.y},Tve=function(t,r){if(Fe(t))return t;var n="curve".concat(LI(t));return(n==="curveMonotone"||n==="curveBump")&&r?FT["".concat(n).concat(r==="vertical"?"Y":"X")]:FT[n]||DI},Eve=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,o=i===void 0?[]:i,s=t.baseLine,a=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=Tve(n,a),g=u?o.filter(function(p){return lh(p)}):o,f;if(Array.isArray(s)){var m=u?s.filter(function(p){return lh(p)}):s,v=g.map(function(p,I){return XT(XT({},p),{},{base:m[I]})});return a==="vertical"?f=Qf().y($u).x1(Du).x0(function(p){return p.base.x}):f=Qf().x(Du).y1($u).y0(function(p){return p.base.y}),f.defined(lh).curve(d),f(v)}return a==="vertical"&&pe(s)?f=Qf().y($u).x1(Du).x0(s):pe(s)?f=Qf().x(Du).y1($u).y0(s):f=rH().x(Du).y($u),f.defined(lh).curve(d),f(g)},ex=function(t){var r=t.className,n=t.points,i=t.path,o=t.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?Eve(t):i;return b.createElement("path",qb({},De(t,!1),Op(t),{className:rt("recharts-curve",r),d:s,ref:o}))},rW={exports:{}},Rve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ove=Rve,Gve=Ove;function nW(){}function iW(){}iW.resetWarningCache=nW;var Pve=function(){function e(n,i,o,s,a,c){if(c!==Gve){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:iW,resetWarningCache:nW};return r.PropTypes=r,r};rW.exports=Pve();var _ve=rW.exports;const dt=ht(_ve),{getOwnPropertyNames:Mve,getOwnPropertySymbols:Zve}=Object,{hasOwnProperty:Hve}=Object.prototype;function dv(e,t){return function(n,i,o){return e(n,i,o)&&t(n,i,o)}}function ch(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);const{cache:o}=i,s=o.get(r),a=o.get(n);if(s&&a)return s===n&&a===r;o.set(r,n),o.set(n,r);const c=e(r,n,i);return o.delete(r),o.delete(n),c}}function Lve(e){return e!=null?e[Symbol.toStringTag]:void 0}function KT(e){return Mve(e).concat(Zve(e))}const Wve=Object.hasOwn||((e,t)=>Hve.call(e,t));function hl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Dve="__v",$ve="__o",Xve="_owner",{getOwnPropertyDescriptor:VT,keys:zT}=Object;function Fve(e,t){return e.byteLength===t.byteLength&&cm(new Uint8Array(e),new Uint8Array(t))}function Kve(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Vve(e,t){return e.byteLength===t.byteLength&&cm(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function zve(e,t){return hl(e.getTime(),t.getTime())}function Yve(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Uve(e,t){return e===t}function YT(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const i=new Array(n),o=e.entries();let s,a,c=0;for(;(s=o.next())&&!s.done;){const u=t.entries();let d=!1,g=0;for(;(a=u.next())&&!a.done;){if(i[g]){g++;continue}const f=s.value,m=a.value;if(r.equals(f[0],m[0],c,g,e,t,r)&&r.equals(f[1],m[1],f[0],m[0],e,t,r)){d=i[g]=!0;break}g++}if(!d)return!1;c++}return!0}const Jve=hl;function Qve(e,t,r){const n=zT(e);let i=n.length;if(zT(t).length!==i)return!1;for(;i-- >0;)if(!oW(e,t,r,n[i]))return!1;return!0}function Xu(e,t,r){const n=KT(e);let i=n.length;if(KT(t).length!==i)return!1;let o,s,a;for(;i-- >0;)if(o=n[i],!oW(e,t,r,o)||(s=VT(e,o),a=VT(t,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function qve(e,t){return hl(e.valueOf(),t.valueOf())}function e0e(e,t){return e.source===t.source&&e.flags===t.flags}function UT(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const i=new Array(n),o=e.values();let s,a;for(;(s=o.next())&&!s.done;){const c=t.values();let u=!1,d=0;for(;(a=c.next())&&!a.done;){if(!i[d]&&r.equals(s.value,a.value,s.value,a.value,e,t,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function cm(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function t0e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function oW(e,t,r,n){return(n===Xve||n===$ve||n===Dve)&&(e.$$typeof||t.$$typeof)?!0:Wve(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const r0e="[object ArrayBuffer]",n0e="[object Arguments]",i0e="[object Boolean]",o0e="[object DataView]",s0e="[object Date]",a0e="[object Error]",l0e="[object Map]",c0e="[object Number]",u0e="[object Object]",d0e="[object RegExp]",g0e="[object Set]",f0e="[object String]",h0e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},p0e="[object URL]",m0e=Object.prototype.toString;function I0e({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:s,areNumbersEqual:a,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:g,areTypedArraysEqual:f,areUrlsEqual:m,unknownTagComparators:v}){return function(I,h,y){if(I===h)return!0;if(I==null||h==null)return!1;const C=typeof I;if(C!==typeof h)return!1;if(C!=="object")return C==="number"?a(I,h,y):C==="function"?o(I,h,y):!1;const x=I.constructor;if(x!==h.constructor)return!1;if(x===Object)return c(I,h,y);if(Array.isArray(I))return t(I,h,y);if(x===Date)return n(I,h,y);if(x===RegExp)return d(I,h,y);if(x===Map)return s(I,h,y);if(x===Set)return g(I,h,y);const A=m0e.call(I);if(A===s0e)return n(I,h,y);if(A===d0e)return d(I,h,y);if(A===l0e)return s(I,h,y);if(A===g0e)return g(I,h,y);if(A===u0e)return typeof I.then!="function"&&typeof h.then!="function"&&c(I,h,y);if(A===p0e)return m(I,h,y);if(A===a0e)return i(I,h,y);if(A===n0e)return c(I,h,y);if(h0e[A])return f(I,h,y);if(A===r0e)return e(I,h,y);if(A===o0e)return r(I,h,y);if(A===i0e||A===c0e||A===f0e)return u(I,h,y);if(v){let w=v[A];if(!w){const S=Lve(I);S&&(w=v[S])}if(w)return w(I,h,y)}return!1}}function y0e({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:Fve,areArraysEqual:r?Xu:Kve,areDataViewsEqual:Vve,areDatesEqual:zve,areErrorsEqual:Yve,areFunctionsEqual:Uve,areMapsEqual:r?dv(YT,Xu):YT,areNumbersEqual:Jve,areObjectsEqual:r?Xu:Qve,arePrimitiveWrappersEqual:qve,areRegExpsEqual:e0e,areSetsEqual:r?dv(UT,Xu):UT,areTypedArraysEqual:r?dv(cm,Xu):cm,areUrlsEqual:t0e,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const i=ch(n.areArraysEqual),o=ch(n.areMapsEqual),s=ch(n.areObjectsEqual),a=ch(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:a})}return n}function C0e(e){return function(t,r,n,i,o,s,a){return e(t,r,a)}}function v0e({circular:e,comparator:t,createState:r,equals:n,strict:i}){if(r)return function(a,c){const{cache:u=e?new WeakMap:void 0,meta:d}=r();return t(a,c,{cache:u,equals:n,meta:d,strict:i})};if(e)return function(a,c){return t(a,c,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const o={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,c){return t(a,c,o)}}const b0e=ga();ga({strict:!0});ga({circular:!0});ga({circular:!0,strict:!0});ga({createInternalComparator:()=>hl});ga({strict:!0,createInternalComparator:()=>hl});ga({circular:!0,createInternalComparator:()=>hl});ga({circular:!0,createInternalComparator:()=>hl,strict:!0});function ga(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:i=!1}=e,o=y0e(e),s=I0e(o),a=r?r(s):C0e(s);return v0e({circular:t,comparator:s,createState:n,equals:a,strict:i})}function x0e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function JT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>t?(e(o),r=-1):x0e(i)};requestAnimationFrame(n)}function tx(e){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(e)}function A0e(e){return B0e(e)||k0e(e)||S0e(e)||w0e()}function w0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S0e(e,t){if(e){if(typeof e=="string")return QT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QT(e,t)}}function QT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B0e(e){if(Array.isArray(e))return e}function N0e(){var e={},t=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var s=o,a=A0e(s),c=a[0],u=a.slice(1);if(typeof c=="number"){JT(i.bind(null,u),c);return}i(c),JT(i.bind(null,u));return}tx(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}function qT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qT(Object(r),!0).forEach(function(n){sW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sW(e,t,r){return t=j0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j0e(e){var t=T0e(e,"string");return Ag(t)==="symbol"?t:String(t)}function T0e(e,t){if(Ag(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ag(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E0e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},R0e=function(t){return t},O0e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},hd=function(t,r){return Object.keys(r).reduce(function(n,i){return eE(eE({},n),{},sW({},i,t(i,r[i])))},{})},tE=function(t,r,n){return t.map(function(i){return"".concat(O0e(i)," ").concat(r,"ms ").concat(n)}).join(",")};function G0e(e,t){return M0e(e)||_0e(e,t)||aW(e,t)||P0e()}function P0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function M0e(e){if(Array.isArray(e))return e}function Z0e(e){return W0e(e)||L0e(e)||aW(e)||H0e()}function H0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aW(e,t){if(e){if(typeof e=="string")return rx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rx(e,t)}}function L0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function W0e(e){if(Array.isArray(e))return rx(e)}function rx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var um=1e-4,lW=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},cW=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},rE=function(t,r){return function(n){var i=lW(t,r);return cW(i,n)}},D0e=function(t,r){return function(n){var i=lW(t,r),o=[].concat(Z0e(i.map(function(s,a){return s*a}).slice(1)),[0]);return cW(o,n)}},nE=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],o=r[1],s=r[2],a=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(I){return parseFloat(I)}),d=G0e(u,4);i=d[0],o=d[1],s=d[2],a=d[3]}}}var g=rE(i,s),f=rE(o,a),m=D0e(i,s),v=function(h){return h>1?1:h<0?0:h},p=function(h){for(var y=h>1?1:h,C=y,x=0;x<8;++x){var A=g(C)-y,w=m(C);if(Math.abs(A-y)<um||w<um)return f(C);C=v(C-A/w)}return f(C)};return p.isStepper=!1,p},$0e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,o=i===void 0?8:i,s=t.dt,a=s===void 0?17:s,c=function(d,g,f){var m=-(d-g)*n,v=f*o,p=f+(m-v)*a/1e3,I=f*a/1e3+d;return Math.abs(I-g)<um&&Math.abs(p)<um?[g,0]:[I,p]};return c.isStepper=!0,c.dt=a,c},X0e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return nE(i);case"spring":return $0e();default:if(i.split("(")[0]==="cubic-bezier")return nE(i)}return typeof i=="function"?i:null};function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function iE(e){return V0e(e)||K0e(e)||uW(e)||F0e()}function F0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V0e(e){if(Array.isArray(e))return ix(e)}function oE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oE(Object(r),!0).forEach(function(n){nx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nx(e,t,r){return t=z0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z0e(e){var t=Y0e(e,"string");return wg(t)==="symbol"?t:String(t)}function Y0e(e,t){if(wg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U0e(e,t){return q0e(e)||Q0e(e,t)||uW(e,t)||J0e()}function J0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uW(e,t){if(e){if(typeof e=="string")return ix(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ix(e,t)}}function ix(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function q0e(e){if(Array.isArray(e))return e}var dm=function(t,r,n){return t+(r-t)*n},ox=function(t){var r=t.from,n=t.to;return r!==n},ebe=function e(t,r,n){var i=hd(function(o,s){if(ox(s)){var a=t(s.from,s.to,s.velocity),c=U0e(a,2),u=c[0],d=c[1];return Sr(Sr({},s),{},{from:u,velocity:d})}return s},r);return n<1?hd(function(o,s){return ox(s)?Sr(Sr({},s),{},{velocity:dm(s.velocity,i[o].velocity,n),from:dm(s.from,i[o].from,n)}):s},r):e(t,i,n-1)};const tbe=function(e,t,r,n,i){var o=E0e(e,t),s=o.reduce(function(I,h){return Sr(Sr({},I),{},nx({},h,[e[h],t[h]]))},{}),a=o.reduce(function(I,h){return Sr(Sr({},I),{},nx({},h,{from:e[h],velocity:0,to:t[h]}))},{}),c=-1,u,d,g=function(){return null},f=function(){return hd(function(h,y){return y.from},a)},m=function(){return!Object.values(a).filter(ox).length},v=function(h){u||(u=h);var y=h-u,C=y/r.dt;a=ebe(r,a,C),i(Sr(Sr(Sr({},e),t),f())),u=h,m()||(c=requestAnimationFrame(g))},p=function(h){d||(d=h);var y=(h-d)/n,C=hd(function(A,w){return dm.apply(void 0,iE(w).concat([r(y)]))},s);if(i(Sr(Sr(Sr({},e),t),C)),y<1)c=requestAnimationFrame(g);else{var x=hd(function(A,w){return dm.apply(void 0,iE(w).concat([r(1)]))},s);i(Sr(Sr(Sr({},e),t),x))}};return g=r.isStepper?v:p,function(){return requestAnimationFrame(g),function(){cancelAnimationFrame(c)}}};function Fc(e){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fc(e)}var rbe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function nbe(e,t){if(e==null)return{};var r=ibe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ibe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function gv(e){return lbe(e)||abe(e)||sbe(e)||obe()}function obe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sbe(e,t){if(e){if(typeof e=="string")return sx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sx(e,t)}}function abe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lbe(e){if(Array.isArray(e))return sx(e)}function sx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(r),!0).forEach(function(n){qu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qu(e,t,r){return t=dW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ube(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dW(n.key),n)}}function dbe(e,t,r){return t&&ube(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dW(e){var t=gbe(e,"string");return Fc(t)==="symbol"?t:String(t)}function gbe(e,t){if(Fc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ax(e,t)}function ax(e,t){return ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ax(e,t)}function hbe(e){var t=pbe();return function(){var n=gm(e),i;if(t){var o=gm(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return lx(this,i)}}function lx(e,t){if(t&&(Fc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cx(e)}function cx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gm(e){return gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gm(e)}var ta=function(e){fbe(r,e);var t=hbe(r);function r(n,i){var o;cbe(this,r),o=t.call(this,n,i);var s=o.props,a=s.isActive,c=s.attributeName,u=s.from,d=s.to,g=s.steps,f=s.children,m=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(cx(o)),o.changeStyle=o.changeStyle.bind(cx(o)),!a||m<=0)return o.state={style:{}},typeof f=="function"&&(o.state={style:d}),lx(o);if(g&&g.length)o.state={style:g[0].style};else if(u){if(typeof f=="function")return o.state={style:u},lx(o);o.state={style:c?qu({},c,u):u}}else o.state={style:{}};return o}return dbe(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,c=o.attributeName,u=o.shouldReAnimate,d=o.to,g=o.from,f=this.state.style;if(a){if(!s){var m={style:c?qu({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(b0e(i.to,d)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=v||u?g:i.to;if(this.state&&f){var I={style:c?qu({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(I)}this.runAnimation(vi(vi({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,c=i.duration,u=i.easing,d=i.begin,g=i.onAnimationEnd,f=i.onAnimationStart,m=tbe(s,a,X0e(u),c,this.changeStyle),v=function(){o.stopJSAnimation=m()};this.manager.start([f,d,v,c,g])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,c=i.onAnimationStart,u=s[0],d=u.style,g=u.duration,f=g===void 0?0:g,m=function(p,I,h){if(h===0)return p;var y=I.duration,C=I.easing,x=C===void 0?"ease":C,A=I.style,w=I.properties,S=I.onAnimationEnd,k=h>0?s[h-1]:I,R=w||Object.keys(A);if(typeof x=="function"||x==="spring")return[].concat(gv(p),[o.runJSAnimation.bind(o,{from:k.style,to:A,duration:y,easing:x}),y]);var j=tE(R,y,x),_=vi(vi(vi({},k.style),A),{},{transition:j});return[].concat(gv(p),[_,y,S]).filter(R0e)};return this.manager.start([c].concat(gv(s.reduce(m,[d,Math.max(f,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=N0e());var o=i.begin,s=i.duration,a=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,g=i.onAnimationEnd,f=i.steps,m=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var p=a?qu({},a,c):c,I=tE(Object.keys(p),s,u);v.start([d,o,vi(vi({},p),{},{transition:I}),s,g])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=nbe(i,rbe),u=b.Children.count(o),d=this.state.style;if(typeof o=="function")return o(d);if(!a||u===0||s<=0)return o;var g=function(m){var v=m.props,p=v.style,I=p===void 0?{}:p,h=v.className,y=b.cloneElement(m,vi(vi({},c),{},{style:vi(vi({},I),d),className:h}));return y};return u===1?g(b.Children.only(o)):H.createElement("div",null,b.Children.map(o,function(f){return g(f)}))}}]),r}(b.PureComponent);ta.displayName="Animate";ta.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ta.propTypes={from:dt.oneOfType([dt.object,dt.string]),to:dt.oneOfType([dt.object,dt.string]),attributeName:dt.string,duration:dt.number,begin:dt.number,easing:dt.oneOfType([dt.string,dt.func]),steps:dt.arrayOf(dt.shape({duration:dt.number.isRequired,style:dt.object.isRequired,easing:dt.oneOfType([dt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),dt.func]),properties:dt.arrayOf("string"),onAnimationEnd:dt.func})),children:dt.oneOfType([dt.node,dt.func]),isActive:dt.bool,canBegin:dt.bool,onAnimationEnd:dt.func,shouldReAnimate:dt.bool,onAnimationStart:dt.func,onAnimationReStart:dt.func};function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fm.apply(this,arguments)}function mbe(e,t){return vbe(e)||Cbe(e,t)||ybe(e,t)||Ibe()}function Ibe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ybe(e,t){if(e){if(typeof e=="string")return aE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aE(e,t)}}function aE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function vbe(e){if(Array.isArray(e))return e}function lE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lE(Object(r),!0).forEach(function(n){bbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bbe(e,t,r){return t=xbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xbe(e){var t=Abe(e,"string");return Sg(t)=="symbol"?t:t+""}function Abe(e,t){if(Sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uE=function(t,r,n,i,o){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(s>0&&o instanceof Array){for(var g=[0,0,0,0],f=0,m=4;f<m;f++)g[f]=o[f]>s?s:o[f];d="M".concat(t,",").concat(r+a*g[0]),g[0]>0&&(d+="A ".concat(g[0],",").concat(g[0],",0,0,").concat(u,",").concat(t+c*g[0],",").concat(r)),d+="L ".concat(t+n-c*g[1],",").concat(r),g[1]>0&&(d+="A ".concat(g[1],",").concat(g[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+a*g[1])),d+="L ".concat(t+n,",").concat(r+i-a*g[2]),g[2]>0&&(d+="A ".concat(g[2],",").concat(g[2],",0,0,").concat(u,`,
        `).concat(t+n-c*g[2],",").concat(r+i)),d+="L ".concat(t+c*g[3],",").concat(r+i),g[3]>0&&(d+="A ".concat(g[3],",").concat(g[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-a*g[3])),d+="Z"}else if(s>0&&o===+o&&o>0){var v=Math.min(s,o);d="M ".concat(t,",").concat(r+a*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n,",").concat(r+a*v,`
            L `).concat(t+n,",").concat(r+i-a*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n-c*v,",").concat(r+i,`
            L `).concat(t+c*v,",").concat(r+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+i-a*v," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},wbe=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,o=r.x,s=r.y,a=r.width,c=r.height;if(Math.abs(a)>0&&Math.abs(c)>0){var u=Math.min(o,o+a),d=Math.max(o,o+a),g=Math.min(s,s+c),f=Math.max(s,s+c);return n>=u&&n<=d&&i>=g&&i<=f}return!1},Sbe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},P1=function(t){var r=cE(cE({},Sbe),t),n=b.useRef(),i=b.useState(-1),o=mbe(i,2),s=o[0],a=o[1];b.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&a(x)}catch{}},[]);var c=r.x,u=r.y,d=r.width,g=r.height,f=r.radius,m=r.className,v=r.animationEasing,p=r.animationDuration,I=r.animationBegin,h=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||g!==+g||d===0||g===0)return null;var C=rt("recharts-rectangle",m);return y?H.createElement(ta,{canBegin:s>0,from:{width:d,height:g,x:c,y:u},to:{width:d,height:g,x:c,y:u},duration:p,animationEasing:v,isActive:y},function(x){var A=x.width,w=x.height,S=x.x,k=x.y;return H.createElement(ta,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:I,duration:p,isActive:h,easing:v},H.createElement("path",fm({},De(r,!0),{className:C,d:uE(S,k,A,w,f),ref:n})))}):H.createElement("path",fm({},De(r,!0),{className:C,d:uE(c,u,d,g,f)}))},kbe=["points","className","baseLinePoints","connectNulls"];function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dl.apply(this,arguments)}function Bbe(e,t){if(e==null)return{};var r=Nbe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dE(e){return Rbe(e)||Ebe(e)||Tbe(e)||jbe()}function jbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tbe(e,t){if(e){if(typeof e=="string")return ux(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ux(e,t)}}function Ebe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rbe(e){if(Array.isArray(e))return ux(e)}function ux(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gE=function(t){return t&&t.x===+t.x&&t.y===+t.y},Obe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){gE(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),gE(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},pd=function(t,r){var n=Obe(t);r&&(n=[n.reduce(function(o,s){return[].concat(dE(o),dE(s))},[])]);var i=n.map(function(o){return o.reduce(function(s,a,c){return"".concat(s).concat(c===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},Gbe=function(t,r,n){var i=pd(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(pd(r.reverse(),n).slice(1))},Pbe=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,o=t.connectNulls,s=Bbe(t,kbe);if(!r||!r.length)return null;var a=rt("recharts-polygon",n);if(i&&i.length){var c=s.stroke&&s.stroke!=="none",u=Gbe(r,i,o);return H.createElement("g",{className:a},H.createElement("path",Dl({},De(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?H.createElement("path",Dl({},De(s,!0),{fill:"none",d:pd(r,o)})):null,c?H.createElement("path",Dl({},De(s,!0),{fill:"none",d:pd(i,o)})):null)}var d=pd(r,o);return H.createElement("path",Dl({},De(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:a,d}))};function dx(){return dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dx.apply(this,arguments)}var _1=function(t){var r=t.cx,n=t.cy,i=t.r,o=t.className,s=rt("recharts-dot",o);return r===+r&&n===+n&&i===+i?b.createElement("circle",dx({},De(t,!1),Op(t),{className:s,cx:r,cy:n,r:i})):null};function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}var _be=["x","y","top","left","width","height","className"];function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gx.apply(this,arguments)}function fE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mbe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(r),!0).forEach(function(n){Zbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zbe(e,t,r){return t=Hbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hbe(e){var t=Lbe(e,"string");return kg(t)=="symbol"?t:t+""}function Lbe(e,t){if(kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wbe(e,t){if(e==null)return{};var r=Dbe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var $be=function(t,r,n,i,o,s){return"M".concat(t,",").concat(o,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},Xbe=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,o=i===void 0?0:i,s=t.top,a=s===void 0?0:s,c=t.left,u=c===void 0?0:c,d=t.width,g=d===void 0?0:d,f=t.height,m=f===void 0?0:f,v=t.className,p=Wbe(t,_be),I=Mbe({x:n,y:o,top:a,left:u,width:g,height:m},p);return!pe(n)||!pe(o)||!pe(g)||!pe(m)||!pe(a)||!pe(u)?null:H.createElement("path",gx({},De(I,!0),{className:rt("recharts-cross",v),d:$be(n,o,g,m,a,u)}))},Fbe=ey,Kbe=NL,Vbe=ca;function zbe(e,t){return e&&e.length?Fbe(e,Vbe(t),Kbe):void 0}var Ybe=zbe;const Ube=ht(Ybe);var Jbe=ey,Qbe=ca,qbe=jL;function exe(e,t){return e&&e.length?Jbe(e,Qbe(t),qbe):void 0}var txe=exe;const rxe=ht(txe);var nxe=["cx","cy","angle","ticks","axisLine"],ixe=["ticks","tick","angle","tickFormatter","stroke"];function Kc(e){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(e)}function md(){return md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},md.apply(this,arguments)}function hE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(r),!0).forEach(function(n){oy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pE(e,t){if(e==null)return{};var r=oxe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fW(n.key),n)}}function axe(e,t,r){return t&&mE(e.prototype,t),r&&mE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lxe(e,t,r){return t=hm(t),cxe(e,gW()?Reflect.construct(t,r||[],hm(e).constructor):t.apply(e,r))}function cxe(e,t){if(t&&(Kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uxe(e)}function uxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gW=function(){return!!e})()}function hm(e){return hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hm(e)}function dxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fx(e,t)}function fx(e,t){return fx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fx(e,t)}function oy(e,t,r){return t=fW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fW(e){var t=gxe(e,"string");return Kc(t)=="symbol"?t:t+""}function gxe(e,t){if(Kc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sy=function(e){function t(){return sxe(this,t),lxe(this,t,arguments)}return dxe(t,e),axe(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,o=this.props,s=o.angle,a=o.cx,c=o.cy;return Bt(a,c,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,o=n.cy,s=n.angle,a=n.ticks,c=Ube(a,function(d){return d.coordinate||0}),u=rxe(a,function(d){return d.coordinate||0});return{cx:i,cy:o,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,o=n.cy,s=n.angle,a=n.ticks,c=n.axisLine,u=pE(n,nxe),d=a.reduce(function(v,p){return[Math.min(v[0],p.coordinate),Math.max(v[1],p.coordinate)]},[1/0,-1/0]),g=Bt(i,o,d[0],s),f=Bt(i,o,d[1],s),m=Ia(Ia(Ia({},De(u,!1)),{},{fill:"none"},De(c,!1)),{},{x1:g.x,y1:g.y,x2:f.x,y2:f.y});return H.createElement("line",md({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,i=this.props,o=i.ticks,s=i.tick,a=i.angle,c=i.tickFormatter,u=i.stroke,d=pE(i,ixe),g=this.getTickTextAnchor(),f=De(d,!1),m=De(s,!1),v=o.map(function(p,I){var h=n.getTickValueCoord(p),y=Ia(Ia(Ia(Ia({textAnchor:g,transform:"rotate(".concat(90-a,", ").concat(h.x,", ").concat(h.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:I},h),{},{payload:p});return H.createElement(Ut,md({className:rt("recharts-polar-radius-axis-tick",QL(s)),key:"tick-".concat(p.coordinate)},HI(n.props,p,I)),t.renderTickItem(s,y,c?c(p.value,I):p.value))});return H.createElement(Ut,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,i=n.ticks,o=n.axisLine,s=n.tick;return!i||!i.length?null:H.createElement(Ut,{className:rt("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),s&&this.renderTicks(),Br.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,o){var s;return H.isValidElement(n)?s=H.cloneElement(n,i):Fe(n)?s=n(i):s=H.createElement(Hc,md({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),s}}])}(b.PureComponent);oy(sy,"displayName","PolarRadiusAxis");oy(sy,"axisType","radiusAxis");oy(sy,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Vc(e){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vc(e)}function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ba.apply(this,arguments)}function IE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(r),!0).forEach(function(n){ay(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pW(n.key),n)}}function hxe(e,t,r){return t&&yE(e.prototype,t),r&&yE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pxe(e,t,r){return t=pm(t),mxe(e,hW()?Reflect.construct(t,r||[],pm(e).constructor):t.apply(e,r))}function mxe(e,t){if(t&&(Vc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ixe(e)}function Ixe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hW=function(){return!!e})()}function pm(e){return pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pm(e)}function yxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hx(e,t)}function hx(e,t){return hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hx(e,t)}function ay(e,t,r){return t=pW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pW(e){var t=Cxe(e,"string");return Vc(t)=="symbol"?t:t+""}function Cxe(e,t){if(Vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vxe=Math.PI/180,CE=1e-5,ly=function(e){function t(){return fxe(this,t),pxe(this,t,arguments)}return yxe(t,e),hxe(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,o=i.cx,s=i.cy,a=i.radius,c=i.orientation,u=i.tickSize,d=u||8,g=Bt(o,s,a,n.coordinate),f=Bt(o,s,a+(c==="inner"?-1:1)*d,n.coordinate);return{x1:g.x,y1:g.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,o=Math.cos(-n.coordinate*vxe),s;return o>CE?s=i==="outer"?"start":"end":o<-CE?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,o=n.cy,s=n.radius,a=n.axisLine,c=n.axisLineType,u=ya(ya({},De(this.props,!1)),{},{fill:"none"},De(a,!1));if(c==="circle")return H.createElement(_1,Ba({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:o,r:s}));var d=this.props.ticks,g=d.map(function(f){return Bt(i,o,s,f.coordinate)});return H.createElement(Pbe,Ba({className:"recharts-polar-angle-axis-line"},u,{points:g}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,o=i.ticks,s=i.tick,a=i.tickLine,c=i.tickFormatter,u=i.stroke,d=De(this.props,!1),g=De(s,!1),f=ya(ya({},d),{},{fill:"none"},De(a,!1)),m=o.map(function(v,p){var I=n.getTickLineCoord(v),h=n.getTickTextAnchor(v),y=ya(ya(ya({textAnchor:h},d),{},{stroke:"none",fill:u},g),{},{index:p,payload:v,x:I.x2,y:I.y2});return H.createElement(Ut,Ba({className:rt("recharts-polar-angle-axis-tick",QL(s)),key:"tick-".concat(v.coordinate)},HI(n.props,v,p)),a&&H.createElement("line",Ba({className:"recharts-polar-angle-axis-tick-line"},f,I)),s&&t.renderTickItem(s,y,c?c(v.value,p):v.value))});return H.createElement(Ut,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,o=n.radius,s=n.axisLine;return o<=0||!i||!i.length?null:H.createElement(Ut,{className:rt("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,o){var s;return H.isValidElement(n)?s=H.cloneElement(n,i):Fe(n)?s=n(i):s=H.createElement(Hc,Ba({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),s}}])}(b.PureComponent);ay(ly,"displayName","PolarAngleAxis");ay(ly,"axisType","angleAxis");ay(ly,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var bxe=kH,xxe=bxe(Object.getPrototypeOf,Object),Axe=xxe,wxe=os,Sxe=Axe,kxe=ss,Bxe="[object Object]",Nxe=Function.prototype,jxe=Object.prototype,mW=Nxe.toString,Txe=jxe.hasOwnProperty,Exe=mW.call(Object);function Rxe(e){if(!kxe(e)||wxe(e)!=Bxe)return!1;var t=Sxe(e);if(t===null)return!0;var r=Txe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&mW.call(r)==Exe}var Oxe=Rxe;const Gxe=ht(Oxe);var Pxe=os,_xe=ss,Mxe="[object Boolean]";function Zxe(e){return e===!0||e===!1||_xe(e)&&Pxe(e)==Mxe}var Hxe=Zxe;const Lxe=ht(Hxe);function Bg(e){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bg(e)}function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mm.apply(this,arguments)}function Wxe(e,t){return Fxe(e)||Xxe(e,t)||$xe(e,t)||Dxe()}function Dxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $xe(e,t){if(e){if(typeof e=="string")return vE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vE(e,t)}}function vE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xxe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Fxe(e){if(Array.isArray(e))return e}function bE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(r),!0).forEach(function(n){Kxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kxe(e,t,r){return t=Vxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vxe(e){var t=zxe(e,"string");return Bg(t)=="symbol"?t:t+""}function zxe(e,t){if(Bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AE=function(t,r,n,i,o){var s=n-i,a;return a="M ".concat(t,",").concat(r),a+="L ".concat(t+n,",").concat(r),a+="L ".concat(t+n-s/2,",").concat(r+o),a+="L ".concat(t+n-s/2-i,",").concat(r+o),a+="L ".concat(t,",").concat(r," Z"),a},Yxe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uxe=function(t){var r=xE(xE({},Yxe),t),n=b.useRef(),i=b.useState(-1),o=Wxe(i,2),s=o[0],a=o[1];b.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&a(C)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,g=r.lowerWidth,f=r.height,m=r.className,v=r.animationEasing,p=r.animationDuration,I=r.animationBegin,h=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||g!==+g||f!==+f||d===0&&g===0||f===0)return null;var y=rt("recharts-trapezoid",m);return h?H.createElement(ta,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:g,height:f,x:c,y:u},duration:p,animationEasing:v,isActive:h},function(C){var x=C.upperWidth,A=C.lowerWidth,w=C.height,S=C.x,k=C.y;return H.createElement(ta,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:I,duration:p,easing:v},H.createElement("path",mm({},De(r,!0),{className:y,d:AE(S,k,x,A,w),ref:n})))}):H.createElement("g",null,H.createElement("path",mm({},De(r,!0),{className:y,d:AE(c,u,d,g,f)})))},Jxe=["option","shapeType","propTransformer","activeClassName","isActive"];function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function Qxe(e,t){if(e==null)return{};var r=qxe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function wE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(r),!0).forEach(function(n){eAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eAe(e,t,r){return t=tAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tAe(e){var t=rAe(e,"string");return Ng(t)=="symbol"?t:t+""}function rAe(e,t){if(Ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nAe(e,t){return Im(Im({},t),e)}function iAe(e,t){return e==="symbols"}function SE(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return H.createElement(P1,r);case"trapezoid":return H.createElement(Uxe,r);case"sector":return H.createElement(tW,r);case"symbols":if(iAe(t))return H.createElement(Uw,r);break;default:return null}}function oAe(e){return b.isValidElement(e)?e.props:e}function sAe(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?nAe:n,o=e.activeClassName,s=o===void 0?"recharts-active-shape":o,a=e.isActive,c=Qxe(e,Jxe),u;if(b.isValidElement(t))u=b.cloneElement(t,Im(Im({},c),oAe(t)));else if(Fe(t))u=t(c);else if(Gxe(t)&&!Lxe(t)){var d=i(t,c);u=H.createElement(SE,{shapeType:r,elementProps:d})}else{var g=c;u=H.createElement(SE,{shapeType:r,elementProps:g})}return a?H.createElement(Ut,{className:s},u):u}function cy(e,t){return t!=null&&"trapezoids"in e.props}function uy(e,t){return t!=null&&"sectors"in e.props}function jg(e,t){return t!=null&&"points"in e.props}function aAe(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,o=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&o}function lAe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function cAe(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function uAe(e,t){var r;return cy(e,t)?r=aAe:uy(e,t)?r=lAe:jg(e,t)&&(r=cAe),r}function dAe(e,t){var r;return cy(e,t)?r="trapezoids":uy(e,t)?r="sectors":jg(e,t)&&(r="points"),r}function gAe(e,t){if(cy(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(uy(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return jg(e,t)?t.payload:{}}function fAe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=dAe(r,t),o=gAe(r,t),s=n.filter(function(c,u){var d=T1(o,c),g=r.props[i].filter(function(v){var p=uAe(r,t);return p(v,t)}),f=r.props[i].indexOf(g[g.length-1]),m=u===f;return d&&m}),a=n.indexOf(s[s.length-1]);return a}var Eh;function zc(e){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zc(e)}function $l(){return $l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$l.apply(this,arguments)}function kE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(r),!0).forEach(function(n){ei(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yW(n.key),n)}}function pAe(e,t,r){return t&&BE(e.prototype,t),r&&BE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mAe(e,t,r){return t=ym(t),IAe(e,IW()?Reflect.construct(t,r||[],ym(e).constructor):t.apply(e,r))}function IAe(e,t){if(t&&(zc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yAe(e)}function yAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IW=function(){return!!e})()}function ym(e){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ym(e)}function CAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&px(e,t)}function px(e,t){return px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},px(e,t)}function ei(e,t,r){return t=yW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yW(e){var t=vAe(e,"string");return zc(t)=="symbol"?t:t+""}function vAe(e,t){if(zc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ls=function(e){function t(r){var n;return hAe(this,t),n=mAe(this,t,[r]),ei(n,"pieRef",null),ei(n,"sectorRefs",[]),ei(n,"id",ZI("recharts-pie-")),ei(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Fe(i)&&i()}),ei(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Fe(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return CAe(t,e),pAe(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.label,a=o.labelLine,c=o.dataKey,u=o.valueKey,d=De(this.props,!1),g=De(s,!1),f=De(a,!1),m=s&&s.offsetRadius||20,v=n.map(function(p,I){var h=(p.startAngle+p.endAngle)/2,y=Bt(p.cx,p.cy,p.outerRadius+m,h),C=At(At(At(At({},d),p),{},{stroke:"none"},g),{},{index:I,textAnchor:t.getTextAnchor(y.x,p.cx)},y),x=At(At(At(At({},d),p),{},{fill:"none",stroke:p.fill},f),{},{index:I,points:[Bt(p.cx,p.cy,p.outerRadius,h),y]}),A=c;return qe(c)&&qe(u)?A="value":qe(c)&&(A=u),H.createElement(Ut,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(I)},a&&t.renderLabelLineItem(a,x,"line"),t.renderLabelItem(s,C,Bn(p,A)))});return H.createElement(Ut,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var i=this,o=this.props,s=o.activeShape,a=o.blendStroke,c=o.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var g=i.isActiveIndex(d),f=c&&i.hasActiveIndex()?c:null,m=g?s:f,v=At(At({},u),{},{stroke:a?u.fill:u.stroke,tabIndex:-1});return H.createElement(Ut,$l({ref:function(I){I&&!i.sectorRefs.includes(I)&&i.sectorRefs.push(I)},tabIndex:-1,className:"recharts-pie-sector"},HI(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),H.createElement(sAe,$l({option:m,isActive:g,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,o=i.sectors,s=i.isAnimationActive,a=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,g=this.state,f=g.prevSectors,m=g.prevIsAnimationActive;return H.createElement(ta,{begin:a,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var p=v.t,I=[],h=o&&o[0],y=h.startAngle;return o.forEach(function(C,x){var A=f&&f[x],w=x>0?Pi(C,"paddingAngle",0):0;if(A){var S=x2(A.endAngle-A.startAngle,C.endAngle-C.startAngle),k=At(At({},C),{},{startAngle:y+w,endAngle:y+S(p)+w});I.push(k),y=k.endAngle}else{var R=C.endAngle,j=C.startAngle,_=x2(0,R-j),O=_(p),P=At(At({},C),{},{startAngle:y+w,endAngle:y+O+w});I.push(P),y=P.endAngle}}),H.createElement(Ut,null,n.renderSectorsStatically(I))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var a=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,o=n.isAnimationActive,s=this.state.prevSectors;return o&&i&&i.length&&(!s||!T1(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,o=i.hide,s=i.sectors,a=i.className,c=i.label,u=i.cx,d=i.cy,g=i.innerRadius,f=i.outerRadius,m=i.isAnimationActive,v=this.state.isAnimationFinished;if(o||!s||!s.length||!pe(u)||!pe(d)||!pe(g)||!pe(f))return null;var p=rt("recharts-pie",a);return H.createElement(Ut,{tabIndex:this.props.rootTabIndex,className:p,ref:function(h){n.pieRef=h}},this.renderSectors(),c&&this.renderLabels(s),Br.renderCallByParent(this.props,null,!1),(!m||v)&&Fa.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,o){if(H.isValidElement(n))return H.cloneElement(n,i);if(Fe(n))return n(i);var s=rt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return H.createElement(ex,$l({},i,{key:o,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,i,o){if(H.isValidElement(n))return H.cloneElement(n,i);var s=o;if(Fe(n)&&(s=n(i),H.isValidElement(s)))return s;var a=rt("recharts-pie-label-text",typeof n!="boolean"&&!Fe(n)?n.className:"");return H.createElement(Hc,$l({},i,{alignmentBaseline:"middle",className:a}),s)}}])}(b.PureComponent);Eh=ls;ei(ls,"displayName","Pie");ei(ls,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!VI.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ei(ls,"parseDeltaAngle",function(e,t){var r=ri(t-e),n=Math.min(Math.abs(t-e),360);return r*n});ei(ls,"getRealPieData",function(e){var t=e.data,r=e.children,n=De(e,!1),i=lo(r,a1);return t&&t.length?t.map(function(o,s){return At(At(At({payload:o},n),o),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(o){return At(At({},n),o.props)}):[]});ei(ls,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,o=t.height,s=JL(i,o),a=n+cn(e.cx,i,i/2),c=r+cn(e.cy,o,o/2),u=cn(e.innerRadius,s,0),d=cn(e.outerRadius,s,s*.8),g=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:a,cy:c,innerRadius:u,outerRadius:d,maxRadius:g}});ei(ls,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?At(At({},t.type.defaultProps),t.props):t.props,i=Eh.getRealPieData(n);if(!i||!i.length)return null;var o=n.cornerRadius,s=n.startAngle,a=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,g=n.valueKey,f=n.tooltipType,m=Math.abs(n.minAngle),v=Eh.parseCoordinateOfPie(n,r),p=Eh.parseDeltaAngle(s,a),I=Math.abs(p),h=u;qe(u)&&qe(g)?(Wo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),h="value"):qe(u)&&(Wo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),h=g);var y=i.filter(function(k){return Bn(k,h,0)!==0}).length,C=(I>=360?y:y-1)*c,x=I-y*m-C,A=i.reduce(function(k,R){var j=Bn(R,h,0);return k+(pe(j)?j:0)},0),w;if(A>0){var S;w=i.map(function(k,R){var j=Bn(k,h,0),_=Bn(k,d,R),O=(pe(j)?j:0)/A,P;R?P=S.endAngle+ri(p)*c*(j!==0?1:0):P=s;var N=P+ri(p)*((j!==0?m:0)+O*x),B=(P+N)/2,E=(v.innerRadius+v.outerRadius)/2,M=[{name:_,value:j,payload:k,dataKey:h,type:f}],G=Bt(v.cx,v.cy,E,B);return S=At(At(At({percent:O,cornerRadius:o,name:_,tooltipPayload:M,midAngle:B,middleRadius:E,tooltipPosition:G},k),v),{},{value:Bn(k,h),startAngle:P,endAngle:N,payload:k,paddingAngle:ri(p)*c}),S})}return At(At({},v),{},{sectors:w,data:i})});var bAe=Math.ceil,xAe=Math.max;function AAe(e,t,r,n){for(var i=-1,o=xAe(bAe((t-e)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=e,e+=r;return s}var wAe=AAe,SAe=XH,NE=1/0,kAe=17976931348623157e292;function BAe(e){if(!e)return e===0?e:0;if(e=SAe(e),e===NE||e===-NE){var t=e<0?-1:1;return t*kAe}return e===e?e:0}var NAe=BAe,jAe=wAe,TAe=KI,fv=NAe;function EAe(e){return function(t,r,n){return n&&typeof n!="number"&&TAe(t,r,n)&&(r=n=void 0),t=fv(t),r===void 0?(r=t,t=0):r=fv(r),n=n===void 0?t<r?1:-1:fv(n),jAe(t,r,n,e)}}var RAe=EAe,OAe=RAe,GAe=OAe(),PAe=GAe;const Cm=ht(PAe);function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}function jE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function TE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(r),!0).forEach(function(n){CW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CW(e,t,r){return t=_Ae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ae(e){var t=MAe(e,"string");return Tg(t)=="symbol"?t:t+""}function MAe(e,t){if(Tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZAe=["Webkit","Moz","O","ms"],HAe=function(t,r){var n=t.replace(/(\w)/,function(o){return o.toUpperCase()}),i=ZAe.reduce(function(o,s){return TE(TE({},o),{},CW({},s+n,r))},{});return i[t]=r,i};function Yc(e){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yc(e)}function vm(){return vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vm.apply(this,arguments)}function EE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(r),!0).forEach(function(n){xn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bW(n.key),n)}}function WAe(e,t,r){return t&&RE(e.prototype,t),r&&RE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DAe(e,t,r){return t=bm(t),$Ae(e,vW()?Reflect.construct(t,r||[],bm(e).constructor):t.apply(e,r))}function $Ae(e,t){if(t&&(Yc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XAe(e)}function XAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vW=function(){return!!e})()}function bm(e){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bm(e)}function FAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mx(e,t)}function mx(e,t){return mx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mx(e,t)}function xn(e,t,r){return t=bW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bW(e){var t=KAe(e,"string");return Yc(t)=="symbol"?t:t+""}function KAe(e,t){if(Yc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VAe=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,o=t.x,s=t.width,a=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=gd().domain(Cm(0,c)).range([o,o+s-a]),d=u.domain().map(function(g){return u(g)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},OE=function(t){return t.changedTouches&&!!t.changedTouches.length},Uc=function(e){function t(r){var n;return LAe(this,t),n=DAe(this,t,[r]),xn(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),xn(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),xn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,o=i.endIndex,s=i.onDragEnd,a=i.startIndex;s==null||s({endIndex:o,startIndex:a})}),n.detachDragEndListener()}),xn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),xn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),xn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),xn(n,"handleSlideDragStart",function(i){var o=OE(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return FAe(t,e),WAe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,o=n.endX,s=this.state.scaleValues,a=this.props,c=a.gap,u=a.data,d=u.length-1,g=Math.min(i,o),f=Math.max(i,o),m=t.getIndexInRange(s,g),v=t.getIndexInRange(s,f);return{startIndex:m-m%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,o=i.data,s=i.tickFormatter,a=i.dataKey,c=Bn(o[n],a,n);return Fe(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,o=i.slideMoveStartX,s=i.startX,a=i.endX,c=this.props,u=c.x,d=c.width,g=c.travellerWidth,f=c.startIndex,m=c.endIndex,v=c.onChange,p=n.pageX-o;p>0?p=Math.min(p,u+d-g-a,u+d-g-s):p<0&&(p=Math.max(p,u-s,u-a));var I=this.getIndex({startX:s+p,endX:a+p});(I.startIndex!==f||I.endIndex!==m)&&v&&v(I),this.setState({startX:s+p,endX:a+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var o=OE(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,o=i.brushMoveStartX,s=i.movingTravellerId,a=i.endX,c=i.startX,u=this.state[s],d=this.props,g=d.x,f=d.width,m=d.travellerWidth,v=d.onChange,p=d.gap,I=d.data,h={startX:this.state.startX,endX:this.state.endX},y=n.pageX-o;y>0?y=Math.min(y,g+f-m-u):y<0&&(y=Math.max(y,g-u)),h[s]=u+y;var C=this.getIndex(h),x=C.startIndex,A=C.endIndex,w=function(){var k=I.length-1;return s==="startX"&&(a>c?x%p===0:A%p===0)||a<c&&A===k||s==="endX"&&(a>c?A%p===0:x%p===0)||a>c&&A===k};this.setState(xn(xn({},s,u+y),"brushMoveStartX",n.pageX),function(){v&&w()&&v(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var o=this,s=this.state,a=s.scaleValues,c=s.startX,u=s.endX,d=this.state[i],g=a.indexOf(d);if(g!==-1){var f=g+n;if(!(f===-1||f>=a.length)){var m=a[f];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(xn({},i,m),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,o=n.y,s=n.width,a=n.height,c=n.fill,u=n.stroke;return H.createElement("rect",{stroke:u,fill:c,x:i,y:o,width:s,height:a})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,o=n.y,s=n.width,a=n.height,c=n.data,u=n.children,d=n.padding,g=b.Children.only(u);return g?H.cloneElement(g,{x:i,y:o,width:s,height:a,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var o,s,a=this,c=this.props,u=c.y,d=c.travellerWidth,g=c.height,f=c.traveller,m=c.ariaLabel,v=c.data,p=c.startIndex,I=c.endIndex,h=Math.max(n,this.props.x),y=hv(hv({},De(this.props,!1)),{},{x:h,y:u,width:d,height:g}),C=m||"Min value: ".concat((o=v[p])===null||o===void 0?void 0:o.name,", Max value: ").concat((s=v[I])===null||s===void 0?void 0:s.name);return H.createElement(Ut,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),a.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,y))}},{key:"renderSlide",value:function(n,i){var o=this.props,s=o.y,a=o.height,c=o.stroke,u=o.travellerWidth,d=Math.min(n,i)+u,g=Math.max(Math.abs(i-n)-u,0);return H.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:g,height:a})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,o=n.endIndex,s=n.y,a=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,g=d.startX,f=d.endX,m=5,v={pointerEvents:"none",fill:u};return H.createElement(Ut,{className:"recharts-brush-texts"},H.createElement(Hc,vm({textAnchor:"end",verticalAnchor:"middle",x:Math.min(g,f)-m,y:s+a/2},v),this.getTextOfTick(i)),H.createElement(Hc,vm({textAnchor:"start",verticalAnchor:"middle",x:Math.max(g,f)+c+m,y:s+a/2},v),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,i=n.data,o=n.className,s=n.children,a=n.x,c=n.y,u=n.width,d=n.height,g=n.alwaysShowText,f=this.state,m=f.startX,v=f.endX,p=f.isTextActive,I=f.isSlideMoving,h=f.isTravellerMoving,y=f.isTravellerFocused;if(!i||!i.length||!pe(a)||!pe(c)||!pe(u)||!pe(d)||u<=0||d<=0)return null;var C=rt("recharts-brush",o),x=H.Children.count(s)===1,A=HAe("userSelect","none");return H.createElement(Ut,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(p||I||h||y||g)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,o=n.y,s=n.width,a=n.height,c=n.stroke,u=Math.floor(o+a/2)-1;return H.createElement(H.Fragment,null,H.createElement("rect",{x:i,y:o,width:s,height:a,fill:c,stroke:"none"}),H.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),H.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var o;return H.isValidElement(n)?o=H.cloneElement(n,i):Fe(n)?o=n(i):o=t.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(n,i){var o=n.data,s=n.width,a=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,g=n.endIndex;if(o!==i.prevData||u!==i.prevUpdateId)return hv({prevData:o,prevTravellerWidth:c,prevUpdateId:u,prevX:a,prevWidth:s},o&&o.length?VAe({data:o,width:s,x:a,travellerWidth:c,startIndex:d,endIndex:g}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||a!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([a,a+s-c]);var f=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:o,prevTravellerWidth:c,prevUpdateId:u,prevX:a,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,i){for(var o=n.length,s=0,a=o-1;a-s>1;){var c=Math.floor((s+a)/2);n[c]>i?a=c:s=c}return i>=n[a]?a:s}}])}(b.PureComponent);xn(Uc,"displayName","Brush");xn(Uc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var zAe=i1;function YAe(e,t){var r;return zAe(e,function(n,i,o){return r=t(n,i,o),!r}),!!r}var UAe=YAe,JAe=yH,QAe=ca,qAe=UAe,ewe=Cn,twe=KI;function rwe(e,t,r){var n=ewe(e)?JAe:qAe;return r&&twe(e,t,r)&&(t=void 0),n(e,QAe(t))}var nwe=rwe;const iwe=ht(nwe);var uo=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},GE=HH;function owe(e,t,r){t=="__proto__"&&GE?GE(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var swe=owe,awe=swe,lwe=MH,cwe=ca;function uwe(e,t){var r={};return t=cwe(t),lwe(e,function(n,i,o){awe(r,i,t(n,i,o))}),r}var dwe=uwe;const gwe=ht(dwe);function fwe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var hwe=fwe,pwe=i1;function mwe(e,t){var r=!0;return pwe(e,function(n,i,o){return r=!!t(n,i,o),r}),r}var Iwe=mwe,ywe=hwe,Cwe=Iwe,vwe=ca,bwe=Cn,xwe=KI;function Awe(e,t,r){var n=bwe(e)?ywe:Cwe;return r&&xwe(e,t,r)&&(t=void 0),n(e,vwe(t))}var wwe=Awe;const Swe=ht(wwe);function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function kwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xW(n.key),n)}}function Bwe(e,t,r){return t&&PE(e.prototype,t),r&&PE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_E(Object(r),!0).forEach(function(n){M1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M1(e,t,r){return t=xW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xW(e){var t=Nwe(e,"string");return Eg(t)=="symbol"?t:t+""}function Nwe(e,t){if(Eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AW=function(t,r){var n=t.x,i=t.y,o=r.x,s=r.y;return{x:Math.min(n,o),y:Math.min(i,s),width:Math.abs(o-n),height:Math.abs(s-i)}},jwe=function(t){var r=t.x1,n=t.y1,i=t.x2,o=t.y2;return AW({x:r,y:n},{x:i,y:o})},wW=function(){function e(t){kwe(this,e),this.scale=t}return Bwe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(r)+a}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();M1(wW,"EPS",1e-4);var Z1=function(t){var r=Object.keys(t).reduce(function(n,i){return uh(uh({},n),{},M1({},i,wW.create(t[i])))},{});return uh(uh({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return gwe(i,function(c,u){return r[u].apply(c,{bandAware:s,position:a})})},isInRange:function(i){return Swe(i,function(o,s){return r[s].isInRange(o)})}})},Twe=nne(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),SW=b.createContext(void 0),kW=b.createContext(void 0),BW=b.createContext(void 0),Ewe=b.createContext({}),NW=b.createContext(void 0),Rwe=b.createContext(0),Owe=b.createContext(0),ME=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,o=r.offset,s=t.clipPathId,a=t.children,c=t.width,u=t.height,d=Twe(o);return H.createElement(SW.Provider,{value:n},H.createElement(kW.Provider,{value:i},H.createElement(Ewe.Provider,{value:o},H.createElement(BW.Provider,{value:d},H.createElement(NW.Provider,{value:s},H.createElement(Rwe.Provider,{value:u},H.createElement(Owe.Provider,{value:c},a)))))))},Gwe=function(){return b.useContext(NW)},Pwe=function(t){var r=b.useContext(SW);r==null&&$c();var n=r[t];return n==null&&$c(),n},_we=function(t){var r=b.useContext(kW);r==null&&$c();var n=r[t];return n==null&&$c(),n},Mwe=function(){var t=b.useContext(BW);return t};function Jc(e){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jc(e)}function Zwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hwe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TW(n.key),n)}}function Lwe(e,t,r){return t&&Hwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wwe(e,t,r){return t=xm(t),Dwe(e,jW()?Reflect.construct(t,r||[],xm(e).constructor):t.apply(e,r))}function Dwe(e,t){if(t&&(Jc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $we(e)}function $we(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jW=function(){return!!e})()}function xm(e){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xm(e)}function Xwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ix(e,t)}function Ix(e,t){return Ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ix(e,t)}function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(n){H1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H1(e,t,r){return t=TW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=Fwe(e,"string");return Jc(t)=="symbol"?t:t+""}function Fwe(e,t){if(Jc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Kwe(e,t){return Uwe(e)||Ywe(e,t)||zwe(e,t)||Vwe()}function Vwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zwe(e,t){if(e){if(typeof e=="string")return LE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LE(e,t)}}function LE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ywe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Uwe(e){if(Array.isArray(e))return e}function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx.apply(this,arguments)}var Jwe=function(t,r){var n;return H.isValidElement(t)?n=H.cloneElement(t,r):Fe(t)?n=t(r):n=H.createElement("line",yx({},r,{className:"recharts-reference-line-line"})),n},Qwe=function(t,r,n,i,o,s,a,c,u){var d=o.x,g=o.y,f=o.width,m=o.height;if(n){var v=u.y,p=t.y.apply(v,{position:s});if(uo(u,"discard")&&!t.y.isInRange(p))return null;var I=[{x:d+f,y:p},{x:d,y:p}];return c==="left"?I.reverse():I}if(r){var h=u.x,y=t.x.apply(h,{position:s});if(uo(u,"discard")&&!t.x.isInRange(y))return null;var C=[{x:y,y:g+m},{x:y,y:g}];return a==="top"?C.reverse():C}if(i){var x=u.segment,A=x.map(function(w){return t.apply(w,{position:s})});return uo(u,"discard")&&iwe(A,function(w){return!t.isInRange(w)})?null:A}return null};function qwe(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,o=e.yAxisId,s=e.shape,a=e.className,c=e.alwaysShow,u=Gwe(),d=Pwe(i),g=_we(o),f=Mwe();if(!u||!f)return null;Wo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Z1({x:d.scale,y:g.scale}),v=ur(t),p=ur(r),I=n&&n.length===2,h=Qwe(m,v,p,I,f,e.position,d.orientation,g.orientation,e);if(!h)return null;var y=Kwe(h,2),C=y[0],x=C.x,A=C.y,w=y[1],S=w.x,k=w.y,R=uo(e,"hidden")?"url(#".concat(u,")"):void 0,j=HE(HE({clipPath:R},De(e,!0)),{},{x1:x,y1:A,x2:S,y2:k});return H.createElement(Ut,{className:rt("recharts-reference-line",a)},Jwe(s,j),Br.renderCallByParent(e,jwe({x1:x,y1:A,x2:S,y2:k})))}var L1=function(e){function t(){return Zwe(this,t),Wwe(this,t,arguments)}return Xwe(t,e),Lwe(t,[{key:"render",value:function(){return H.createElement(qwe,this.props)}}])}(H.Component);H1(L1,"displayName","ReferenceLine");H1(L1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Cx(){return Cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cx.apply(this,arguments)}function Qc(e){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(e)}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function DE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(n){dy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RW(n.key),n)}}function r1e(e,t,r){return t&&t1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n1e(e,t,r){return t=Am(t),i1e(e,EW()?Reflect.construct(t,r||[],Am(e).constructor):t.apply(e,r))}function i1e(e,t){if(t&&(Qc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o1e(e)}function o1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EW=function(){return!!e})()}function Am(e){return Am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Am(e)}function s1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vx(e,t)}function vx(e,t){return vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},vx(e,t)}function dy(e,t,r){return t=RW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RW(e){var t=a1e(e,"string");return Qc(t)=="symbol"?t:t+""}function a1e(e,t){if(Qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var l1e=function(t){var r=t.x,n=t.y,i=t.xAxis,o=t.yAxis,s=Z1({x:i.scale,y:o.scale}),a=s.apply({x:r,y:n},{bandAware:!0});return uo(t,"discard")&&!s.isInRange(a)?null:a},gy=function(e){function t(){return e1e(this,t),n1e(this,t,arguments)}return s1e(t,e),r1e(t,[{key:"render",value:function(){var n=this.props,i=n.x,o=n.y,s=n.r,a=n.alwaysShow,c=n.clipPathId,u=ur(i),d=ur(o);if(Wo(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var g=l1e(this.props);if(!g)return null;var f=g.x,m=g.y,v=this.props,p=v.shape,I=v.className,h=uo(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=DE(DE({clipPath:h},De(this.props,!0)),{},{cx:f,cy:m});return H.createElement(Ut,{className:rt("recharts-reference-dot",I)},t.renderDot(p,y),Br.renderCallByParent(this.props,{x:f-s,y:m-s,width:2*s,height:2*s}))}}])}(H.Component);dy(gy,"displayName","ReferenceDot");dy(gy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});dy(gy,"renderDot",function(e,t){var r;return H.isValidElement(e)?r=H.cloneElement(e,t):Fe(e)?r=e(t):r=H.createElement(_1,Cx({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function bx(){return bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bx.apply(this,arguments)}function qc(e){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(e)}function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(n){fy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GW(n.key),n)}}function d1e(e,t,r){return t&&u1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function g1e(e,t,r){return t=wm(t),f1e(e,OW()?Reflect.construct(t,r||[],wm(e).constructor):t.apply(e,r))}function f1e(e,t){if(t&&(qc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h1e(e)}function h1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OW=function(){return!!e})()}function wm(e){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wm(e)}function p1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xx(e,t)}function xx(e,t){return xx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},xx(e,t)}function fy(e,t,r){return t=GW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GW(e){var t=m1e(e,"string");return qc(t)=="symbol"?t:t+""}function m1e(e,t){if(qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var I1e=function(t,r,n,i,o){var s=o.x1,a=o.x2,c=o.y1,u=o.y2,d=o.xAxis,g=o.yAxis;if(!d||!g)return null;var f=Z1({x:d.scale,y:g.scale}),m={x:t?f.x.apply(s,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(c,{position:"start"}):f.y.rangeMin},v={x:r?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return uo(o,"discard")&&(!f.isInRange(m)||!f.isInRange(v))?null:AW(m,v)},hy=function(e){function t(){return c1e(this,t),g1e(this,t,arguments)}return p1e(t,e),d1e(t,[{key:"render",value:function(){var n=this.props,i=n.x1,o=n.x2,s=n.y1,a=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Wo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=ur(i),f=ur(o),m=ur(s),v=ur(a),p=this.props.shape;if(!g&&!f&&!m&&!v&&!p)return null;var I=I1e(g,f,m,v,this.props);if(!I&&!p)return null;var h=uo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return H.createElement(Ut,{className:rt("recharts-reference-area",c)},t.renderRect(p,XE(XE({clipPath:h},De(this.props,!0)),I)),Br.renderCallByParent(this.props,I))}}])}(H.Component);fy(hy,"displayName","ReferenceArea");fy(hy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});fy(hy,"renderRect",function(e,t){var r;return H.isValidElement(e)?r=H.cloneElement(e,t):Fe(e)?r=e(t):r=H.createElement(P1,bx({},t,{className:"recharts-reference-area-rect"})),r});function FE(e){return b1e(e)||v1e(e)||C1e(e)||y1e()}function y1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C1e(e,t){if(e){if(typeof e=="string")return Ax(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ax(e,t)}}function v1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function b1e(e){if(Array.isArray(e))return Ax(e)}function Ax(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wx=function(t,r,n,i,o){var s=lo(t,L1),a=lo(t,gy),c=[].concat(FE(s),FE(a)),u=lo(t,hy),d="".concat(i,"Id"),g=i[0],f=r;if(c.length&&(f=c.reduce(function(p,I){if(I.props[d]===n&&uo(I.props,"extendDomain")&&pe(I.props[g])){var h=I.props[g];return[Math.min(p[0],h),Math.max(p[1],h)]}return p},f)),u.length){var m="".concat(g,"1"),v="".concat(g,"2");f=u.reduce(function(p,I){if(I.props[d]===n&&uo(I.props,"extendDomain")&&pe(I.props[m])&&pe(I.props[v])){var h=I.props[m],y=I.props[v];return[Math.min(p[0],h,y),Math.max(p[1],h,y)]}return p},f)}return o&&o.length&&(f=o.reduce(function(p,I){return pe(I)?[Math.min(p[0],I),Math.max(p[1],I)]:p},f)),f},PW={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function o(c,u,d,g,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,g||c,f),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,g;if(this._eventsCount===0)return u;for(g in d=this._events)t.call(d,g)&&u.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=r?r+u:u,g=this._events[d];if(!g)return[];if(g.fn)return[g.fn];for(var f=0,m=g.length,v=new Array(m);f<m;f++)v[f]=g[f].fn;return v},a.prototype.listenerCount=function(u){var d=r?r+u:u,g=this._events[d];return g?g.fn?1:g.length:0},a.prototype.emit=function(u,d,g,f,m,v){var p=r?r+u:u;if(!this._events[p])return!1;var I=this._events[p],h=arguments.length,y,C;if(I.fn){switch(I.once&&this.removeListener(u,I.fn,void 0,!0),h){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,d),!0;case 3:return I.fn.call(I.context,d,g),!0;case 4:return I.fn.call(I.context,d,g,f),!0;case 5:return I.fn.call(I.context,d,g,f,m),!0;case 6:return I.fn.call(I.context,d,g,f,m,v),!0}for(C=1,y=new Array(h-1);C<h;C++)y[C-1]=arguments[C];I.fn.apply(I.context,y)}else{var x=I.length,A;for(C=0;C<x;C++)switch(I[C].once&&this.removeListener(u,I[C].fn,void 0,!0),h){case 1:I[C].fn.call(I[C].context);break;case 2:I[C].fn.call(I[C].context,d);break;case 3:I[C].fn.call(I[C].context,d,g);break;case 4:I[C].fn.call(I[C].context,d,g,f);break;default:if(!y)for(A=1,y=new Array(h-1);A<h;A++)y[A-1]=arguments[A];I[C].fn.apply(I[C].context,y)}}return!0},a.prototype.on=function(u,d,g){return o(this,u,d,g,!1)},a.prototype.once=function(u,d,g){return o(this,u,d,g,!0)},a.prototype.removeListener=function(u,d,g,f){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return s(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!f||v.once)&&(!g||v.context===g)&&s(this,m);else{for(var p=0,I=[],h=v.length;p<h;p++)(v[p].fn!==d||f&&!v[p].once||g&&v[p].context!==g)&&I.push(v[p]);I.length?this._events[m]=I.length===1?I[0]:I:s(this,m)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(PW);var x1e=PW.exports;const A1e=ht(x1e);var pv=new A1e,mv="recharts.syncMouseEvents";function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function w1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_W(n.key),n)}}function k1e(e,t,r){return t&&S1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Iv(e,t,r){return t=_W(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _W(e){var t=B1e(e,"string");return Rg(t)=="symbol"?t:t+""}function B1e(e,t){if(Rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var N1e=function(){function e(){w1e(this,e),Iv(this,"activeIndex",0),Iv(this,"coordinateList",[]),Iv(this,"layout","horizontal")}return k1e(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,o=i===void 0?null:i,s=r.container,a=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,d=r.offset,g=d===void 0?null:d,f=r.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=g??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,g=o+c+u,f=s+this.offset.top+a/2+d;this.mouseHandlerCallback({pageX:g,pageY:f})}}}])}();function j1e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&pe(n)&&pe(i))return!0}return!1}function T1e(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function MW(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,o=e.endAngle,s=Bt(t,r,n,i),a=Bt(t,r,n,o);return{points:[s,a],cx:t,cy:r,radius:n,startAngle:i,endAngle:o}}function E1e(e,t,r){var n,i,o,s;if(e==="horizontal")n=t.x,o=n,i=r.top,s=r.top+r.height;else if(e==="vertical")i=t.y,s=i,n=r.left,o=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var a=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,g=t.angle,f=Bt(a,c,u,g),m=Bt(a,c,d,g);n=f.x,i=f.y,o=m.x,s=m.y}else return MW(t);return[{x:n,y:i},{x:o,y:s}]}function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}function KE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(r),!0).forEach(function(n){R1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R1e(e,t,r){return t=O1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O1e(e){var t=G1e(e,"string");return Og(t)=="symbol"?t:t+""}function G1e(e,t){if(Og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P1e(e){var t,r,n=e.element,i=e.tooltipEventType,o=e.isActive,s=e.activeCoordinate,a=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,g=e.layout,f=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!o||!s||f!=="ScatterChart"&&i!=="axis")return null;var v,p=ex;if(f==="ScatterChart")v=s,p=Xbe;else if(f==="BarChart")v=T1e(g,s,c,d),p=P1;else if(g==="radial"){var I=MW(s),h=I.cx,y=I.cy,C=I.radius,x=I.startAngle,A=I.endAngle;v={cx:h,cy:y,startAngle:x,endAngle:A,innerRadius:C,outerRadius:C},p=tW}else v={points:E1e(g,s,c)},p=ex;var w=dh(dh(dh(dh({stroke:"#ccc",pointerEvents:"none"},c),v),De(m,!1)),{},{payload:a,payloadIndex:u,className:rt("recharts-tooltip-cursor",m.className)});return b.isValidElement(m)?b.cloneElement(m,w):b.createElement(p,w)}var _1e=["item"],M1e=["children","className","width","height","style","compact","title","desc"];function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function Xl(){return Xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xl.apply(this,arguments)}function VE(e,t){return L1e(e)||H1e(e,t)||HW(e,t)||Z1e()}function Z1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function L1e(e){if(Array.isArray(e))return e}function zE(e,t){if(e==null)return{};var r=W1e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function W1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function D1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LW(n.key),n)}}function X1e(e,t,r){return t&&$1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function F1e(e,t,r){return t=Sm(t),K1e(e,ZW()?Reflect.construct(t,r||[],Sm(e).constructor):t.apply(e,r))}function K1e(e,t){if(t&&(eu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V1e(e)}function V1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZW=function(){return!!e})()}function Sm(e){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sm(e)}function z1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sx(e,t)}function Sx(e,t){return Sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Sx(e,t)}function tu(e){return J1e(e)||U1e(e)||HW(e)||Y1e()}function Y1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HW(e,t){if(e){if(typeof e=="string")return kx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kx(e,t)}}function U1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function J1e(e){if(Array.isArray(e))return kx(e)}function kx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ne(e,t,r){return t=LW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LW(e){var t=Q1e(e,"string");return eu(t)=="symbol"?t:t+""}function Q1e(e,t){if(eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q1e={xAxis:["bottom","top"],yAxis:["left","right"]},eSe={width:"100%",height:"100%"},WW={x:0,y:0};function gh(e){return e}var tSe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},rSe=function(t,r,n,i){var o=r.find(function(d){return d&&d.index===n});if(o){if(t==="horizontal")return{x:o.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:o.coordinate};if(t==="centric"){var s=o.coordinate,a=i.radius;return Q(Q(Q({},i),Bt(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var c=o.coordinate,u=i.angle;return Q(Q(Q({},i),Bt(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return WW},py=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,o=r.dataEndIndex,s=(n??[]).reduce(function(a,c){var u=c.props.data;return u&&u.length?[].concat(tu(a),tu(u)):a},[]);return s.length>0?s:t&&t.length&&pe(i)&&pe(o)?t.slice(i,o+1):[]};function DW(e){return e==="number"?[0,"auto"]:void 0}var Bx=function(t,r,n,i){var o=t.graphicalItems,s=t.tooltipAxis,a=py(r,t);return n<0||!o||!o.length||n>=a.length?null:o.reduce(function(c,u){var d,g=(d=u.props.data)!==null&&d!==void 0?d:r;g&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(g=g.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(s.dataKey&&!s.allowDuplicatedCategory){var m=g===void 0?a:g;f=sb(m,s.dataKey,i)}else f=g&&g[n]||a[n];return f?[].concat(tu(c),[SCe(u,f)]):c},[])},UE=function(t,r,n,i){var o=i||{x:t.chartX,y:t.chartY},s=tSe(o,n),a=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=cCe(s,a,u,c);if(d>=0&&u){var g=u[d]&&u[d].value,f=Bx(t,r,d,g),m=rSe(n,a,d,o);return{activeTooltipIndex:d,activeLabel:g,activePayload:f,activeCoordinate:m}}return null},nSe=function(t,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,g=t.children,f=t.stackOffset,m=zL(d,o);return n.reduce(function(v,p){var I,h=p.type.defaultProps!==void 0?Q(Q({},p.type.defaultProps),p.props):p.props,y=h.type,C=h.dataKey,x=h.allowDataOverflow,A=h.allowDuplicatedCategory,w=h.scale,S=h.ticks,k=h.includeHidden,R=h[s];if(v[R])return v;var j=py(t.data,{graphicalItems:i.filter(function(X){var V,z=s in X.props?X.props[s]:(V=X.type.defaultProps)===null||V===void 0?void 0:V[s];return z===R}),dataStartIndex:c,dataEndIndex:u}),_=j.length,O,P,N;j1e(h.domain,x,y)&&(O=zb(h.domain,null,x),m&&(y==="number"||w!=="auto")&&(N=fd(j,C,"category")));var B=DW(y);if(!O||O.length===0){var E,M=(E=h.domain)!==null&&E!==void 0?E:B;if(C){if(O=fd(j,C,y),y==="category"&&m){var G=Qne(O);A&&G?(P=O,O=Cm(0,_)):A||(O=OT(M,O,p).reduce(function(X,V){return X.indexOf(V)>=0?X:[].concat(tu(X),[V])},[]))}else if(y==="category")A?O=O.filter(function(X){return X!==""&&!qe(X)}):O=OT(M,O,p).reduce(function(X,V){return X.indexOf(V)>=0||V===""||qe(V)?X:[].concat(tu(X),[V])},[]);else if(y==="number"){var T=hCe(j,i.filter(function(X){var V,z,ee=s in X.props?X.props[s]:(V=X.type.defaultProps)===null||V===void 0?void 0:V[s],D="hide"in X.props?X.props.hide:(z=X.type.defaultProps)===null||z===void 0?void 0:z.hide;return ee===R&&(k||!D)}),C,o,d);T&&(O=T)}m&&(y==="number"||w!=="auto")&&(N=fd(j,C,"category"))}else m?O=Cm(0,_):a&&a[R]&&a[R].hasStack&&y==="number"?O=f==="expand"?[0,1]:YL(a[R].stackGroups,c,u):O=VL(j,i.filter(function(X){var V=s in X.props?X.props[s]:X.type.defaultProps[s],z="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return V===R&&(k||!z)}),y,d,!0);if(y==="number")O=wx(g,O,R,o,S),M&&(O=zb(M,O,x));else if(y==="category"&&M){var L=M,W=O.every(function(X){return L.indexOf(X)>=0});W&&(O=L)}}return Q(Q({},v),{},Ne({},R,Q(Q({},h),{},{axisType:o,domain:O,categoricalDomain:N,duplicateDomain:P,originalDomain:(I=h.domain)!==null&&I!==void 0?I:B,isCategorical:m,layout:d})))},{})},iSe=function(t,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,g=t.children,f=py(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=f.length,v=zL(d,o),p=-1;return n.reduce(function(I,h){var y=h.type.defaultProps!==void 0?Q(Q({},h.type.defaultProps),h.props):h.props,C=y[s],x=DW("number");if(!I[C]){p++;var A;return v?A=Cm(0,m):a&&a[C]&&a[C].hasStack?(A=YL(a[C].stackGroups,c,u),A=wx(g,A,C,o)):(A=zb(x,VL(f,n.filter(function(w){var S,k,R=s in w.props?w.props[s]:(S=w.type.defaultProps)===null||S===void 0?void 0:S[s],j="hide"in w.props?w.props.hide:(k=w.type.defaultProps)===null||k===void 0?void 0:k.hide;return R===C&&!j}),"number",d),i.defaultProps.allowDataOverflow),A=wx(g,A,C,o)),Q(Q({},I),{},Ne({},C,Q(Q({axisType:o},i.defaultProps),{},{hide:!0,orientation:Pi(q1e,"".concat(o,".").concat(p%2),null),domain:A,originalDomain:x,isCategorical:v,layout:d})))}return I},{})},oSe=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,s=r.graphicalItems,a=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,g="".concat(i,"Id"),f=lo(d,o),m={};return f&&f.length?m=nSe(t,{axes:f,graphicalItems:s,axisType:i,axisIdKey:g,stackGroups:a,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(m=iSe(t,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:g,stackGroups:a,dataStartIndex:c,dataEndIndex:u})),m},sSe=function(t){var r=Nl(t),n=Qu(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:o1(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Yb(r,n)}},JE=function(t){var r=t.children,n=t.defaultShowTooltip,i=Kn(r,Uc),o=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},aSe=function(t){return!t||!t.length?!1:t.some(function(r){var n=Lo(r&&r.type);return n&&n.indexOf("Bar")>=0})},QE=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},lSe=function(t,r){var n=t.props,i=t.graphicalItems,o=t.xAxisMap,s=o===void 0?{}:o,a=t.yAxisMap,c=a===void 0?{}:a,u=n.width,d=n.height,g=n.children,f=n.margin||{},m=Kn(g,Uc),v=Kn(g,Da),p=Object.keys(c).reduce(function(A,w){var S=c[w],k=S.orientation;return!S.mirror&&!S.hide?Q(Q({},A),{},Ne({},k,A[k]+S.width)):A},{left:f.left||0,right:f.right||0}),I=Object.keys(s).reduce(function(A,w){var S=s[w],k=S.orientation;return!S.mirror&&!S.hide?Q(Q({},A),{},Ne({},k,Pi(A,"".concat(k))+S.height)):A},{top:f.top||0,bottom:f.bottom||0}),h=Q(Q({},I),p),y=h.bottom;m&&(h.bottom+=m.props.height||Uc.defaultProps.height),v&&r&&(h=gCe(h,i,n,r));var C=u-h.left-h.right,x=d-h.top-h.bottom;return Q(Q({brushBottom:y},h),{},{width:Math.max(C,0),height:Math.max(x,0)})},cSe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},uSe=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,o=i===void 0?"axis":i,s=t.validateTooltipEventTypes,a=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,g=t.defaultProps,f=function(h,y){var C=y.graphicalItems,x=y.stackGroups,A=y.offset,w=y.updateId,S=y.dataStartIndex,k=y.dataEndIndex,R=h.barSize,j=h.layout,_=h.barGap,O=h.barCategoryGap,P=h.maxBarSize,N=QE(j),B=N.numericAxisName,E=N.cateAxisName,M=aSe(C),G=[];return C.forEach(function(T,L){var W=py(h.data,{graphicalItems:[T],dataStartIndex:S,dataEndIndex:k}),X=T.type.defaultProps!==void 0?Q(Q({},T.type.defaultProps),T.props):T.props,V=X.dataKey,z=X.maxBarSize,ee=X["".concat(B,"Id")],D=X["".concat(E,"Id")],F={},Z=c.reduce(function(Ze,se){var ae=y["".concat(se.axisType,"Map")],He=X["".concat(se.axisType,"Id")];ae&&ae[He]||se.axisType==="zAxis"||$c();var Ue=ae[He];return Q(Q({},Ze),{},Ne(Ne({},se.axisType,Ue),"".concat(se.axisType,"Ticks"),Qu(Ue)))},F),$=Z[E],J=Z["".concat(E,"Ticks")],U=x&&x[ee]&&x[ee].hasStack&&ACe(T,x[ee].stackGroups),K=Lo(T.type).indexOf("Bar")>=0,re=Yb($,J),ce=[],Me=M&&uCe({barSize:R,stackGroups:x,totalSize:cSe(Z,E)});if(K){var Ee,Ke,Nt=qe(z)?P:z,te=(Ee=(Ke=Yb($,J,!0))!==null&&Ke!==void 0?Ke:Nt)!==null&&Ee!==void 0?Ee:0;ce=dCe({barGap:_,barCategoryGap:O,bandSize:te!==re?te:re,sizeList:Me[D],maxBarSize:Nt}),te!==re&&(ce=ce.map(function(Ze){return Q(Q({},Ze),{},{position:Q(Q({},Ze.position),{},{offset:Ze.position.offset-te/2})})}))}var he=T&&T.type&&T.type.getComposedData;he&&G.push({props:Q(Q({},he(Q(Q({},Z),{},{displayedData:W,props:h,dataKey:V,item:T,bandSize:re,barPosition:ce,offset:A,stackedData:U,layout:j,dataStartIndex:S,dataEndIndex:k}))),{},Ne(Ne(Ne({key:T.key||"item-".concat(L)},B,Z[B]),E,Z[E]),"animationId",w)),childIndex:cie(T,h.children),item:T})}),G},m=function(h,y){var C=h.props,x=h.dataStartIndex,A=h.dataEndIndex,w=h.updateId;if(!B2({props:C}))return null;var S=C.children,k=C.layout,R=C.stackOffset,j=C.data,_=C.reverseStackOrder,O=QE(k),P=O.numericAxisName,N=O.cateAxisName,B=lo(S,n),E=bCe(j,B,"".concat(P,"Id"),"".concat(N,"Id"),R,_),M=c.reduce(function(X,V){var z="".concat(V.axisType,"Map");return Q(Q({},X),{},Ne({},z,oSe(C,Q(Q({},V),{},{graphicalItems:B,stackGroups:V.axisType===P&&E,dataStartIndex:x,dataEndIndex:A}))))},{}),G=lSe(Q(Q({},M),{},{props:C,graphicalItems:B}),y==null?void 0:y.legendBBox);Object.keys(M).forEach(function(X){M[X]=d(C,M[X],G,X.replace("Map",""),r)});var T=M["".concat(N,"Map")],L=sSe(T),W=f(C,Q(Q({},M),{},{dataStartIndex:x,dataEndIndex:A,updateId:w,graphicalItems:B,stackGroups:E,offset:G}));return Q(Q({formattedGraphicalItems:W,graphicalItems:B,offset:G,stackGroups:E},L),M)},v=function(I){function h(y){var C,x,A;return D1e(this,h),A=F1e(this,h,[y]),Ne(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ne(A,"accessibilityManager",new N1e),Ne(A,"handleLegendBBoxUpdate",function(w){if(w){var S=A.state,k=S.dataStartIndex,R=S.dataEndIndex,j=S.updateId;A.setState(Q({legendBBox:w},m({props:A.props,dataStartIndex:k,dataEndIndex:R,updateId:j},Q(Q({},A.state),{},{legendBBox:w}))))}}),Ne(A,"handleReceiveSyncEvent",function(w,S,k){if(A.props.syncId===w){if(k===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(S)}}),Ne(A,"handleBrushChange",function(w){var S=w.startIndex,k=w.endIndex;if(S!==A.state.dataStartIndex||k!==A.state.dataEndIndex){var R=A.state.updateId;A.setState(function(){return Q({dataStartIndex:S,dataEndIndex:k},m({props:A.props,dataStartIndex:S,dataEndIndex:k,updateId:R},A.state))}),A.triggerSyncEvent({dataStartIndex:S,dataEndIndex:k})}}),Ne(A,"handleMouseEnter",function(w){var S=A.getMouseInfo(w);if(S){var k=Q(Q({},S),{},{isTooltipActive:!0});A.setState(k),A.triggerSyncEvent(k);var R=A.props.onMouseEnter;Fe(R)&&R(k,w)}}),Ne(A,"triggeredAfterMouseMove",function(w){var S=A.getMouseInfo(w),k=S?Q(Q({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(k),A.triggerSyncEvent(k);var R=A.props.onMouseMove;Fe(R)&&R(k,w)}),Ne(A,"handleItemMouseEnter",function(w){A.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),Ne(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Ne(A,"handleMouseMove",function(w){w.persist(),A.throttleTriggeredAfterMouseMove(w)}),Ne(A,"handleMouseLeave",function(w){A.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};A.setState(S),A.triggerSyncEvent(S);var k=A.props.onMouseLeave;Fe(k)&&k(S,w)}),Ne(A,"handleOuterEvent",function(w){var S=lie(w),k=Pi(A.props,"".concat(S));if(S&&Fe(k)){var R,j;/.*touch.*/i.test(S)?j=A.getMouseInfo(w.changedTouches[0]):j=A.getMouseInfo(w),k((R=j)!==null&&R!==void 0?R:{},w)}}),Ne(A,"handleClick",function(w){var S=A.getMouseInfo(w);if(S){var k=Q(Q({},S),{},{isTooltipActive:!0});A.setState(k),A.triggerSyncEvent(k);var R=A.props.onClick;Fe(R)&&R(k,w)}}),Ne(A,"handleMouseDown",function(w){var S=A.props.onMouseDown;if(Fe(S)){var k=A.getMouseInfo(w);S(k,w)}}),Ne(A,"handleMouseUp",function(w){var S=A.props.onMouseUp;if(Fe(S)){var k=A.getMouseInfo(w);S(k,w)}}),Ne(A,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),Ne(A,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&A.handleMouseDown(w.changedTouches[0])}),Ne(A,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&A.handleMouseUp(w.changedTouches[0])}),Ne(A,"handleDoubleClick",function(w){var S=A.props.onDoubleClick;if(Fe(S)){var k=A.getMouseInfo(w);S(k,w)}}),Ne(A,"handleContextMenu",function(w){var S=A.props.onContextMenu;if(Fe(S)){var k=A.getMouseInfo(w);S(k,w)}}),Ne(A,"triggerSyncEvent",function(w){A.props.syncId!==void 0&&pv.emit(mv,A.props.syncId,w,A.eventEmitterSymbol)}),Ne(A,"applySyncEvent",function(w){var S=A.props,k=S.layout,R=S.syncMethod,j=A.state.updateId,_=w.dataStartIndex,O=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)A.setState(Q({dataStartIndex:_,dataEndIndex:O},m({props:A.props,dataStartIndex:_,dataEndIndex:O,updateId:j},A.state)));else if(w.activeTooltipIndex!==void 0){var P=w.chartX,N=w.chartY,B=w.activeTooltipIndex,E=A.state,M=E.offset,G=E.tooltipTicks;if(!M)return;if(typeof R=="function")B=R(G,w);else if(R==="value"){B=-1;for(var T=0;T<G.length;T++)if(G[T].value===w.activeLabel){B=T;break}}var L=Q(Q({},M),{},{x:M.left,y:M.top}),W=Math.min(P,L.x+L.width),X=Math.min(N,L.y+L.height),V=G[B]&&G[B].value,z=Bx(A.state,A.props.data,B),ee=G[B]?{x:k==="horizontal"?G[B].coordinate:W,y:k==="horizontal"?X:G[B].coordinate}:WW;A.setState(Q(Q({},w),{},{activeLabel:V,activeCoordinate:ee,activePayload:z,activeTooltipIndex:B}))}else A.setState(w)}),Ne(A,"renderCursor",function(w){var S,k=A.state,R=k.isTooltipActive,j=k.activeCoordinate,_=k.activePayload,O=k.offset,P=k.activeTooltipIndex,N=k.tooltipAxisBandSize,B=A.getTooltipEventType(),E=(S=w.props.active)!==null&&S!==void 0?S:R,M=A.props.layout,G=w.key||"_recharts-cursor";return H.createElement(P1e,{key:G,activeCoordinate:j,activePayload:_,activeTooltipIndex:P,chartName:r,element:w,isActive:E,layout:M,offset:O,tooltipAxisBandSize:N,tooltipEventType:B})}),Ne(A,"renderPolarAxis",function(w,S,k){var R=Pi(w,"type.axisType"),j=Pi(A.state,"".concat(R,"Map")),_=w.type.defaultProps,O=_!==void 0?Q(Q({},_),w.props):w.props,P=j&&j[O["".concat(R,"Id")]];return b.cloneElement(w,Q(Q({},P),{},{className:rt(R,P.className),key:w.key||"".concat(S,"-").concat(k),ticks:Qu(P,!0)}))}),Ne(A,"renderPolarGrid",function(w){var S=w.props,k=S.radialLines,R=S.polarAngles,j=S.polarRadius,_=A.state,O=_.radiusAxisMap,P=_.angleAxisMap,N=Nl(O),B=Nl(P),E=B.cx,M=B.cy,G=B.innerRadius,T=B.outerRadius;return b.cloneElement(w,{polarAngles:Array.isArray(R)?R:Qu(B,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(j)?j:Qu(N,!0).map(function(L){return L.coordinate}),cx:E,cy:M,innerRadius:G,outerRadius:T,key:w.key||"polar-grid",radialLines:k})}),Ne(A,"renderLegend",function(){var w=A.state.formattedGraphicalItems,S=A.props,k=S.children,R=S.width,j=S.height,_=A.props.margin||{},O=R-(_.left||0)-(_.right||0),P=FL({children:k,formattedGraphicalItems:w,legendWidth:O,legendContent:u});if(!P)return null;var N=P.item,B=zE(P,_1e);return b.cloneElement(N,Q(Q({},B),{},{chartWidth:R,chartHeight:j,margin:_,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Ne(A,"renderTooltip",function(){var w,S=A.props,k=S.children,R=S.accessibilityLayer,j=Kn(k,Ki);if(!j)return null;var _=A.state,O=_.isTooltipActive,P=_.activeCoordinate,N=_.activePayload,B=_.activeLabel,E=_.offset,M=(w=j.props.active)!==null&&w!==void 0?w:O;return b.cloneElement(j,{viewBox:Q(Q({},E),{},{x:E.left,y:E.top}),active:M,label:B,payload:M?N:[],coordinate:P,accessibilityLayer:R})}),Ne(A,"renderBrush",function(w){var S=A.props,k=S.margin,R=S.data,j=A.state,_=j.offset,O=j.dataStartIndex,P=j.dataEndIndex,N=j.updateId;return b.cloneElement(w,{key:w.key||"_recharts-brush",onChange:sh(A.handleBrushChange,w.props.onChange),data:R,x:pe(w.props.x)?w.props.x:_.left,y:pe(w.props.y)?w.props.y:_.top+_.height+_.brushBottom-(k.bottom||0),width:pe(w.props.width)?w.props.width:_.width,startIndex:O,endIndex:P,updateId:"brush-".concat(N)})}),Ne(A,"renderReferenceElement",function(w,S,k){if(!w)return null;var R=A,j=R.clipPathId,_=A.state,O=_.xAxisMap,P=_.yAxisMap,N=_.offset,B=w.type.defaultProps||{},E=w.props,M=E.xAxisId,G=M===void 0?B.xAxisId:M,T=E.yAxisId,L=T===void 0?B.yAxisId:T;return b.cloneElement(w,{key:w.key||"".concat(S,"-").concat(k),xAxis:O[G],yAxis:P[L],viewBox:{x:N.left,y:N.top,width:N.width,height:N.height},clipPathId:j})}),Ne(A,"renderActivePoints",function(w){var S=w.item,k=w.activePoint,R=w.basePoint,j=w.childIndex,_=w.isRange,O=[],P=S.props.key,N=S.item.type.defaultProps!==void 0?Q(Q({},S.item.type.defaultProps),S.item.props):S.item.props,B=N.activeDot,E=N.dataKey,M=Q(Q({index:j,dataKey:E,cx:k.x,cy:k.y,r:4,fill:G1(S.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},De(B,!1)),Op(B));return O.push(h.renderActiveDot(B,M,"".concat(P,"-activePoint-").concat(j))),R?O.push(h.renderActiveDot(B,Q(Q({},M),{},{cx:R.x,cy:R.y}),"".concat(P,"-basePoint-").concat(j))):_&&O.push(null),O}),Ne(A,"renderGraphicChild",function(w,S,k){var R=A.filterFormatItem(w,S,k);if(!R)return null;var j=A.getTooltipEventType(),_=A.state,O=_.isTooltipActive,P=_.tooltipAxis,N=_.activeTooltipIndex,B=_.activeLabel,E=A.props.children,M=Kn(E,Ki),G=R.props,T=G.points,L=G.isRange,W=G.baseLine,X=R.item.type.defaultProps!==void 0?Q(Q({},R.item.type.defaultProps),R.item.props):R.item.props,V=X.activeDot,z=X.hide,ee=X.activeBar,D=X.activeShape,F=!!(!z&&O&&M&&(V||ee||D)),Z={};j!=="axis"&&M&&M.props.trigger==="click"?Z={onClick:sh(A.handleItemMouseEnter,w.props.onClick)}:j!=="axis"&&(Z={onMouseLeave:sh(A.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:sh(A.handleItemMouseEnter,w.props.onMouseEnter)});var $=b.cloneElement(w,Q(Q({},R.props),Z));function J(se){return typeof P.dataKey=="function"?P.dataKey(se.payload):null}if(F)if(N>=0){var U,K;if(P.dataKey&&!P.allowDuplicatedCategory){var re=typeof P.dataKey=="function"?J:"payload.".concat(P.dataKey.toString());U=sb(T,re,B),K=L&&W&&sb(W,re,B)}else U=T==null?void 0:T[N],K=L&&W&&W[N];if(D||ee){var ce=w.props.activeIndex!==void 0?w.props.activeIndex:N;return[b.cloneElement(w,Q(Q(Q({},R.props),Z),{},{activeIndex:ce})),null,null]}if(!qe(U))return[$].concat(tu(A.renderActivePoints({item:R,activePoint:U,basePoint:K,childIndex:N,isRange:L})))}else{var Me,Ee=(Me=A.getItemByXY(A.state.activeCoordinate))!==null&&Me!==void 0?Me:{graphicalItem:$},Ke=Ee.graphicalItem,Nt=Ke.item,te=Nt===void 0?w:Nt,he=Ke.childIndex,Ze=Q(Q(Q({},R.props),Z),{},{activeIndex:he});return[b.cloneElement(te,Ze),null,null]}return L?[$,null,null]:[$,null]}),Ne(A,"renderCustomized",function(w,S,k){return b.cloneElement(w,Q(Q({key:"recharts-customized-".concat(k)},A.props),A.state))}),Ne(A,"renderMap",{CartesianGrid:{handler:gh,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:gh},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:gh},YAxis:{handler:gh},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((C=y.id)!==null&&C!==void 0?C:ZI("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=FH(A.triggeredAfterMouseMove,(x=y.throttleDelay)!==null&&x!==void 0?x:1e3/60),A.state={},A}return z1e(h,I),X1e(h,[{key:"componentDidMount",value:function(){var C,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,x=C.children,A=C.data,w=C.height,S=C.layout,k=Kn(x,Ki);if(k){var R=k.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var j=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,_=Bx(this.state,A,R,j),O=this.state.tooltipTicks[R].coordinate,P=(this.state.offset.top+w)/2,N=S==="horizontal",B=N?{x:O,y:P}:{y:O,x:P},E=this.state.formattedGraphicalItems.find(function(G){var T=G.item;return T.type.name==="Scatter"});E&&(B=Q(Q({},B),E.props.points[R].tooltipPosition),_=E.props.points[R].tooltipPayload);var M={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:j,activePayload:_,activeCoordinate:B};this.setState(M),this.renderCursor(k),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var A,w;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(C){cb([Kn(C.children,Ki)],[Kn(this.props.children,Ki)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Kn(this.props.children,Ki);if(C&&typeof C.props.shared=="boolean"){var x=C.props.shared?"axis":"item";return a.indexOf(x)>=0?x:o}return o}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var x=this.container,A=x.getBoundingClientRect(),w=Mhe(A),S={chartX:Math.round(C.pageX-w.left),chartY:Math.round(C.pageY-w.top)},k=A.width/x.offsetWidth||1,R=this.inRange(S.chartX,S.chartY,k);if(!R)return null;var j=this.state,_=j.xAxisMap,O=j.yAxisMap,P=this.getTooltipEventType(),N=UE(this.state,this.props.data,this.props.layout,R);if(P!=="axis"&&_&&O){var B=Nl(_).scale,E=Nl(O).scale,M=B&&B.invert?B.invert(S.chartX):null,G=E&&E.invert?E.invert(S.chartY):null;return Q(Q({},S),{},{xValue:M,yValue:G},N)}return N?Q(Q({},S),N):null}},{key:"inRange",value:function(C,x){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,S=C/A,k=x/A;if(w==="horizontal"||w==="vertical"){var R=this.state.offset,j=S>=R.left&&S<=R.left+R.width&&k>=R.top&&k<=R.top+R.height;return j?{x:S,y:k}:null}var _=this.state,O=_.angleAxisMap,P=_.radiusAxisMap;if(O&&P){var N=Nl(O);return _T({x:S,y:k},N)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,x=this.getTooltipEventType(),A=Kn(C,Ki),w={};A&&x==="axis"&&(A.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Op(this.props,this.handleOuterEvent);return Q(Q({},S),w)}},{key:"addListener",value:function(){pv.on(mv,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){pv.removeListener(mv,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,x,A){for(var w=this.state.formattedGraphicalItems,S=0,k=w.length;S<k;S++){var R=w[S];if(R.item===C||R.props.key===C.key||x===Lo(R.item.type)&&A===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,x=this.state.offset,A=x.left,w=x.top,S=x.height,k=x.width;return H.createElement("defs",null,H.createElement("clipPath",{id:C},H.createElement("rect",{x:A,y:w,height:S,width:k})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(x,A){var w=VE(A,2),S=w[0],k=w[1];return Q(Q({},x),{},Ne({},S,k.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(x,A){var w=VE(A,2),S=w[0],k=w[1];return Q(Q({},x),{},Ne({},S,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[C])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(C){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[C])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(C){var x=this.state,A=x.formattedGraphicalItems,w=x.activeItem;if(A&&A.length)for(var S=0,k=A.length;S<k;S++){var R=A[S],j=R.props,_=R.item,O=_.type.defaultProps!==void 0?Q(Q({},_.type.defaultProps),_.props):_.props,P=Lo(_.type);if(P==="Bar"){var N=(j.data||[]).find(function(G){return wbe(C,G)});if(N)return{graphicalItem:R,payload:N}}else if(P==="RadialBar"){var B=(j.data||[]).find(function(G){return _T(C,G)});if(B)return{graphicalItem:R,payload:B}}else if(cy(R,w)||uy(R,w)||jg(R,w)){var E=fAe({graphicalItem:R,activeTooltipItem:w,itemData:O.data}),M=O.activeIndex===void 0?E:O.activeIndex;return{graphicalItem:Q(Q({},R),{},{childIndex:M}),payload:jg(R,w)?O.data[E]:R.props.data[E]}}}return null}},{key:"render",value:function(){var C=this;if(!B2(this))return null;var x=this.props,A=x.children,w=x.className,S=x.width,k=x.height,R=x.style,j=x.compact,_=x.title,O=x.desc,P=zE(x,M1e),N=De(P,!1);if(j)return H.createElement(ME,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement(db,Xl({},N,{width:S,height:k,title:_,desc:O}),this.renderClipPath(),j2(A,this.renderMap)));if(this.props.accessibilityLayer){var B,E;N.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,N.role=(E=this.props.role)!==null&&E!==void 0?E:"application",N.onKeyDown=function(G){C.accessibilityManager.keyboardEvent(G)},N.onFocus=function(){C.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return H.createElement(ME,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement("div",Xl({className:rt("recharts-wrapper",w),style:Q({position:"relative",cursor:"default",width:S,height:k},R)},M,{ref:function(T){C.container=T}}),H.createElement(db,Xl({},N,{width:S,height:k,title:_,desc:O,style:eSe}),this.renderClipPath(),j2(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);Ne(v,"displayName",r),Ne(v,"defaultProps",Q({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},g)),Ne(v,"getDerivedStateFromProps",function(I,h){var y=I.dataKey,C=I.data,x=I.children,A=I.width,w=I.height,S=I.layout,k=I.stackOffset,R=I.margin,j=h.dataStartIndex,_=h.dataEndIndex;if(h.updateId===void 0){var O=JE(I);return Q(Q(Q({},O),{},{updateId:0},m(Q(Q({props:I},O),{},{updateId:0}),h)),{},{prevDataKey:y,prevData:C,prevWidth:A,prevHeight:w,prevLayout:S,prevStackOffset:k,prevMargin:R,prevChildren:x})}if(y!==h.prevDataKey||C!==h.prevData||A!==h.prevWidth||w!==h.prevHeight||S!==h.prevLayout||k!==h.prevStackOffset||!ab(R,h.prevMargin)){var P=JE(I),N={chartX:h.chartX,chartY:h.chartY,isTooltipActive:h.isTooltipActive},B=Q(Q({},UE(h,C,S)),{},{updateId:h.updateId+1}),E=Q(Q(Q({},P),N),B);return Q(Q(Q({},E),m(Q({props:I},E),h)),{},{prevDataKey:y,prevData:C,prevWidth:A,prevHeight:w,prevLayout:S,prevStackOffset:k,prevMargin:R,prevChildren:x})}if(!cb(x,h.prevChildren)){var M,G,T,L,W=Kn(x,Uc),X=W&&(M=(G=W.props)===null||G===void 0?void 0:G.startIndex)!==null&&M!==void 0?M:j,V=W&&(T=(L=W.props)===null||L===void 0?void 0:L.endIndex)!==null&&T!==void 0?T:_,z=X!==j||V!==_,ee=!qe(C),D=ee&&!z?h.updateId:h.updateId+1;return Q(Q({updateId:D},m(Q(Q({props:I},h),{},{updateId:D,dataStartIndex:X,dataEndIndex:V}),h)),{},{prevChildren:x,dataStartIndex:X,dataEndIndex:V})}return null}),Ne(v,"renderActiveDot",function(I,h,y){var C;return b.isValidElement(I)?C=b.cloneElement(I,h):Fe(I)?C=I(h):C=H.createElement(_1,h),H.createElement(Ut,{className:"recharts-active-dot",key:y},C)});var p=b.forwardRef(function(h,y){return H.createElement(v,Xl({},h,{ref:y}))});return p.displayName=v.displayName,p},qE=uSe({chartName:"PieChart",GraphicalChild:ls,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ly},{axisType:"radiusAxis",AxisComp:sy}],formatAxisMap:GCe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const eR=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#F97316","#EC4899","#84CC16","#6366F1","#14B8A6","#F43F5E"],dSe=({balances:e,formatCurrency:t})=>{const r=b.useMemo(()=>e.filter(s=>s.usdValue&&s.usdValue>0).map((s,a)=>({name:`${s.currency} (${s.exchange})`,value:s.total,usdValue:s.usdValue||0,percentage:s.percentage||0,currency:s.currency,exchange:s.exchange,walletType:s.walletType,color:eR[a%eR.length]})).sort((s,a)=>a.usdValue-s.usdValue),[e]);b.useMemo(()=>r.reduce((o,s)=>o+s.usdValue,0),[r]);const n=({active:o,payload:s})=>{if(o&&s&&s.length){const a=s[0].payload;return l.jsxs("div",{className:"bg-terminal-bg border border-terminal-border rounded-lg p-3 shadow-lg",children:[l.jsx("p",{className:"font-medium text-terminal-text",children:a.currency}),l.jsxs("p",{className:"text-xs text-terminal-muted",children:[a.exchange,"  ",a.walletType.toUpperCase()]}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("p",{className:"text-sm text-terminal-text",children:["Amount: ",t(a.value,a.currency)]}),l.jsxs("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:["USD Value: $",t(a.usdValue,"USD")]}),l.jsxs("p",{className:"text-sm text-terminal-muted",children:["Share: ",a.percentage.toFixed(2),"%"]})]})]})}return null},i=({payload:o})=>l.jsx("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:o.map((s,a)=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),l.jsx("span",{className:"text-xs text-terminal-text",children:s.value})]},a))});return r.length?l.jsx("div",{className:"h-full w-full",children:l.jsx(The,{width:"100%",height:"100%",children:l.jsxs(qE,{children:[l.jsx(ls,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({percentage:o})=>`${o.toFixed(1)}%`,outerRadius:120,fill:"#8884d8",dataKey:"usdValue",children:r.map((o,s)=>l.jsx(a1,{fill:o.color},`cell-${s}`))}),l.jsx(Ki,{content:l.jsx(n,{})}),l.jsx(Da,{content:l.jsx(i,{})})]})})}):l.jsx("div",{className:"h-full flex items-center justify-center text-terminal-muted",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-terminal-muted/20 flex items-center justify-center mb-2 mx-auto",children:l.jsx(qE,{className:"w-6 h-6"})}),l.jsx("p",{children:"No data available for pie chart"})]})})},gSe=({widgetId:e})=>{var f;const{users:t,activeUserId:r}=ct(),{initializeBalanceData:n,updateBalance:i}=ut(),[o,s]=b.useState(!1),a=t.find(m=>m.id===r),c=((f=a==null?void 0:a.accounts)==null?void 0:f.filter(m=>m.key&&m.privateKey))||[],u=c.length>0,d=b.useCallback((m,v)=>{const p={timestamp:Date.now(),balances:[],info:{}};i(m,p,v)},[i]),g=b.useCallback(async()=>{if(!(!u||o)){s(!0),console.log(` [USER-BALANCES-WIDGET-REFRESH] Starting balance refresh for ${c.length} accounts`);try{console.log(" [USER-BALANCES-WIDGET-REFRESH] Clearing existing balance data...");for(const m of c)d(m.id,"trading"),d(m.id,"funding"),console.log(` [USER-BALANCES-WIDGET-REFRESH] Cleared balances for account ${m.id} (${m.exchange})`);await new Promise(m=>setTimeout(m,100)),console.log(" [USER-BALANCES-WIDGET-REFRESH] Fetching fresh balance data...");for(const m of c){if(!m.key||!m.privateKey){console.log(` [USER-BALANCES-WIDGET-REFRESH] Skipping account ${m.exchange} (${m.email}) - no API keys`);continue}try{console.log(` [USER-BALANCES-WIDGET-REFRESH] Fetching balances for account ${m.id} (${m.exchange}:${m.email})`),await n(m.id,"trading"),await n(m.id,"funding"),console.log(` [USER-BALANCES-WIDGET-REFRESH] Fetched balances for account ${m.id} (${m.exchange})`)}catch(v){console.error(` [USER-BALANCES-WIDGET-REFRESH] Failed to fetch balances for account ${m.id} (${m.exchange}):`,v)}}console.log(" [USER-BALANCES-WIDGET-REFRESH] Refresh completed for User Balances")}catch(m){console.error(" [USER-BALANCES-WIDGET-REFRESH] Refresh failed:",m)}finally{s(!1)}}},[u,o,c,n,d]);return l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("button",{onClick:g,className:"p-1 rounded-sm hover:bg-terminal-widget/50 transition-colors",title:o?"Refreshing...":"Refresh balances",disabled:!u||o,children:l.jsx(Ri,{size:14,className:`text-terminal-muted hover:text-terminal-text transition-colors ${o?"animate-spin":""}`})})})},fSe=({dashboardId:e="default",widgetId:t="user-balances-widget"})=>{const{subscribe:r,unsubscribe:n,initializeBalanceData:i,getBalance:o,getActiveSubscriptionsList:s,getOrderBook:a,getTickerWithRefresh:c}=ut(),{users:u,activeUserId:d}=ct(),g=u.find(D=>D.id===d),{getWidget:f}=EZ(),m=f(t).settings;b.useEffect(()=>{console.log(" [UserBalances] User state:",{usersCount:u.length,activeUserId:d,activeUser:g?{id:g.id,email:g.email,accountsCount:g.accounts.length,accounts:g.accounts.map(D=>({id:D.id,exchange:D.exchange,email:D.email,hasKeys:!!(D.key&&D.privateKey)}))}:null})},[u,d,g]);const[v,p]=b.useState(new Map),[I,h]=b.useState(""),[y,C]=b.useState("total"),[x,A]=b.useState("desc"),[w,S]=b.useState(new Set),[k,R]=b.useState(new Map),{theme:j}=rw(),O=(()=>{if(!(g!=null&&g.accounts))return[];const D=[];return g.accounts.forEach(F=>{!F.key||!F.privateKey||["trading","funding"].forEach(Z=>{const $=o(F.id,Z);$!=null&&$.balances&&$.balances.length>0&&D.push({accountId:F.id,exchange:F.exchange,email:F.email,walletType:Z,balances:$.balances,timestamp:$.timestamp})})}),D})();b.useEffect(()=>{var D,F;console.log(` [UserBalances-${t}] Balance data updated:`,{widgetId:t,activeUserId:d,totalAccounts:((D=g==null?void 0:g.accounts)==null?void 0:D.length)||0,accountsWithKeys:((F=g==null?void 0:g.accounts)==null?void 0:F.filter(Z=>Z.key&&Z.privateKey).length)||0,balanceGroups:O.length,totalBalances:O.reduce((Z,$)=>Z+$.balances.length,0),lastUpdates:O.map(Z=>({accountId:Z.accountId,exchange:Z.exchange,walletType:Z.walletType,balancesCount:Z.balances.length,timestamp:Z.timestamp}))})},[O,t,d,g==null?void 0:g.accounts]);const P=b.useCallback((D,F,Z,$)=>{if(new Set(["USDT","USDC","DAI","USDP","TUSD","PYUSD","BUSD","SUSD","EURC","EURS","EURT","AEUR","EURCV","VEUR","GBPT","TGBP","POUNDTOKEN","GYEN","JPYC","CJPY","CNHT","CNHC","TCNH","VCHF","CCHF","TAUD","AUDN","QCAD","ECAD","TRUECAD","BRL1","BBRL","USD"]).has(D))return{value:F,rate:"1:1",loading:!1};const U=`${Z}:${D}:${F}`,K=k.get(U);return K||(N(D,F,Z,$),{value:void 0,loading:!0})},[k]),N=b.useCallback(async(D,F,Z,$)=>{const J=`${Z}:${D}:${F}`;if(!k.has(J)){R(U=>new Map(U).set(J,{loading:!0}));try{const U=`${D}/USDT`,K=await c(Z,U,"spot",!1);if(K!=null&&K.bid&&K.bid>0){const ce=F*K.bid;R(Me=>new Map(Me).set(J,{value:ce,rate:`${K.bid.toFixed(6)} USDT`,loading:!1}));return}const re=["USDC","USD","BUSD"];for(const ce of re){const Me=`${D}/${ce}`,Ee=await c(Z,Me,"spot",!1);if(Ee!=null&&Ee.bid&&Ee.bid>0){const Ke=F*Ee.bid;R(Nt=>new Map(Nt).set(J,{value:Ke,rate:`${Ee.bid.toFixed(6)} ${ce}`,loading:!1}));return}}R(ce=>new Map(ce).set(J,{value:void 0,loading:!1}))}catch(U){console.warn(` [USD Calc] Failed to fetch price for ${Z}:${D}:`,U),R(K=>new Map(K).set(J,{value:void 0,loading:!1}))}}},[c,k]),B=b.useMemo(()=>{let D=[];if(O.forEach(Z=>{Z.balances.forEach($=>{const J=P($.currency,$.total,Z.exchange,Z.accountId);D.push({...$,accountId:Z.accountId,exchange:Z.exchange,email:Z.email,walletType:Z.walletType,timestamp:Z.timestamp,usdValue:J.value,usdRate:J.rate,priceLoading:J.loading})})}),I.trim()){const Z=I.toLowerCase().trim();D=D.filter($=>$.currency.toLowerCase().includes(Z)||$.exchange.toLowerCase().includes(Z)||$.email.toLowerCase().includes(Z))}D=D.filter(Z=>Z.total>0),m.hideSmallAmounts&&(D=D.filter(Z=>!Z.usdValue||Z.usdValue>=m.smallAmountThreshold));const F=D.reduce((Z,$)=>Z+($.usdValue||0),0);return D=D.map(Z=>({...Z,percentage:F>0&&Z.usdValue?Z.usdValue/F*100:0})),D.sort((Z,$)=>{let J=0;switch(y){case"currency":J=Z.currency.localeCompare($.currency);break;case"total":J=$.total-Z.total;break;case"free":J=$.free-Z.free;break;case"used":J=$.used-Z.used;break;case"account":J=Z.exchange.localeCompare($.exchange)||Z.email.localeCompare($.email);break;case"walletType":J=Z.walletType.localeCompare($.walletType);break;case"percentage":J=($.percentage||0)-(Z.percentage||0);break;default:J=$.total-Z.total}return x==="desc"?-J:J}),D},[O,I,y,x,P,m.hideSmallAmounts,m.smallAmountThreshold]),E=b.useCallback((D,F)=>D===0?"0":D<.001?D.toFixed(8):D<1?D.toFixed(6):D<1e3?D.toFixed(4):D.toFixed(2),[]);b.useCallback(async D=>{try{console.log(` [UserBalances] Fetching wallet addresses for ${D}...`)}catch(F){console.warn(` [UserBalances] Could not fetch wallet addresses for ${D}:`,F)}},[]);const M=b.useCallback(async()=>{if(!(g!=null&&g.accounts)){console.log(" [UserBalances] No active user or accounts available");return}console.log(` [UserBalances] Starting balance fetch for ${g.accounts.length} accounts:`,g.accounts.map(D=>({exchange:D.exchange,email:D.email,hasKeys:!!(D.key&&D.privateKey)})));for(const D of g.accounts){if(!D.key||!D.privateKey){console.log(` [UserBalances] Skipping account ${D.exchange} (${D.email}) - no API keys`);continue}try{console.log(` [UserBalances] Fetching balances for account ${D.id} (${D.exchange}:${D.email})`),await i(D.id,"trading"),await i(D.id,"funding"),console.log(` [UserBalances] Fetched balances for account ${D.id} (${D.exchange})`)}catch(F){console.error(` [UserBalances] Failed to fetch balances for account ${D.id} (${D.exchange}):`,F)}}},[g==null?void 0:g.accounts,i]),G=D=>{y===D?A(x==="asc"?"desc":"asc"):(C(D),A("desc"))};b.useEffect(()=>{g!=null&&g.accounts&&g.accounts.length>0&&M()},[g==null?void 0:g.accounts,M]);const T=(g==null?void 0:g.accounts.filter(D=>D.key&&D.privateKey))||[],L=T.length>0,W=b.useMemo(()=>B.reduce((D,F)=>D+(F.usdValue||0),0),[B]),X=()=>m.showTotal?l.jsxs("div",{className:"p-3 border-t border-terminal-border bg-terminal-background/30",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-terminal-text",children:"Total Portfolio Value"}),l.jsxs("span",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:["$",E(W,"USD")]})]}),l.jsxs("div",{className:"text-xs text-terminal-muted mt-1",children:[B.length," assets  ",T.length," accounts"]})]}):null,V=H.useRef(null),z=Hi({count:B.length,getScrollElement:()=>V.current,estimateSize:()=>50,overscan:5}),ee=b.useCallback((D,F,Z)=>l.jsxs("div",{className:`flex items-center py-2 px-3 text-sm border-b border-terminal-border/30 hover:bg-terminal-accent/10 ${F%2===0?"bg-terminal-background/50":""}`,style:Z,children:[l.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[l.jsx("span",{className:"font-medium text-terminal-text truncate",children:D.currency}),l.jsxs("span",{className:"text-xs text-terminal-muted truncate",children:[D.exchange,"  ",D.email]})]}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:l.jsx("div",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${D.walletType==="funding"?"bg-blue-100 text-blue-800 dark:bg-blue-950 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-200"}`,children:D.walletType.toUpperCase()})}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text truncate",children:E(D.free,D.currency)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Free"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text truncate",children:E(D.used,D.currency)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Locked"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"font-medium text-terminal-text truncate",children:E(D.total,D.currency)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Total"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"font-medium truncate text-emerald-600 dark:text-emerald-400 flex items-center justify-end gap-1",children:D.priceLoading?l.jsx(Um,{className:"h-3 w-3 animate-spin"}):D.usdValue!==void 0?`$${E(D.usdValue,"USD")}`:"-"}),l.jsx("div",{className:"text-xs text-terminal-muted",children:D.usdRate?`(${D.usdRate})`:"USD"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"font-medium text-terminal-text truncate",children:D.percentage!==void 0&&D.percentage>0?`${D.percentage.toFixed(2)}%`:"-"}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Share"})]})]},`${D.accountId}-${D.currency}-${D.walletType}`),[E]);return g?L?l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"p-3 border-b border-terminal-border",children:l.jsxs("div",{className:"relative",children:[l.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-terminal-text/80"}),l.jsx(Pe,{type:"text",placeholder:"Search currencies, exchanges, or accounts...",value:I,onChange:D=>h(D.target.value),className:"pl-10 bg-terminal-bg border-terminal-border text-terminal-text placeholder-terminal-muted focus:outline-none focus:border-terminal-accent"})]})}),m.displayType==="table"&&l.jsxs("div",{className:"flex items-center py-2 px-3 text-xs font-medium text-terminal-muted border-b border-terminal-border bg-terminal-background/50",children:[l.jsxs("button",{onClick:()=>G("account"),className:"flex items-center gap-1 min-w-0 flex-1 hover:text-terminal-text",children:["Account",y==="account"&&(x==="asc"?l.jsx(mr,{className:"h-3 w-3 text-terminal-text/80"}):l.jsx(Ui,{className:"h-3 w-3 text-terminal-text/80"}))]}),l.jsxs("button",{onClick:()=>G("walletType"),className:"flex items-center gap-1 justify-center text-center min-w-0 flex-1 hover:text-terminal-text",children:["Wallet Type",y==="walletType"&&(x==="asc"?l.jsx(mr,{className:"h-3 w-3 text-terminal-text/80"}):l.jsx(Ui,{className:"h-3 w-3 text-terminal-text/80"}))]}),l.jsxs("button",{onClick:()=>G("free"),className:"flex items-center gap-1 justify-end text-right min-w-0 flex-1 hover:text-terminal-text",children:["Free",y==="free"&&(x==="asc"?l.jsx(mr,{className:"h-3 w-3 text-terminal-text/80"}):l.jsx(Ui,{className:"h-3 w-3 text-terminal-text/80"}))]}),l.jsxs("button",{onClick:()=>G("used"),className:"flex items-center gap-1 justify-end text-right min-w-0 flex-1 hover:text-terminal-text",children:["Locked",y==="used"&&(x==="asc"?l.jsx(mr,{className:"h-3 w-3 text-terminal-text/80"}):l.jsx(Ui,{className:"h-3 w-3 text-terminal-text/80"}))]}),l.jsxs("button",{onClick:()=>G("total"),className:"flex items-center gap-1 justify-end text-right min-w-0 flex-1 hover:text-terminal-text",children:["Total",y==="total"&&(x==="asc"?l.jsx(mr,{className:"h-3 w-3 text-terminal-text/80"}):l.jsx(Ui,{className:"h-3 w-3 text-terminal-text/80"}))]}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"USD Value"}),l.jsxs("button",{onClick:()=>G("percentage"),className:"flex items-center gap-1 justify-end text-right min-w-0 flex-1 hover:text-terminal-text",children:["%",y==="percentage"&&(x==="asc"?l.jsx(mr,{className:"h-3 w-3 text-terminal-text/80"}):l.jsx(Ui,{className:"h-3 w-3 text-terminal-text/80"}))]})]}),l.jsx("div",{className:`${m.showTotal,"flex-1"} overflow-hidden`,children:B.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[l.jsx(Os,{className:"h-8 w-8 text-terminal-text/80 mb-2"}),l.jsx("p",{className:"text-terminal-muted",children:I?"No matching balances found":"No balances available"}),l.jsx("p",{className:"text-xs text-terminal-muted mt-1",children:g.email})]}):m.displayType==="pie"?l.jsx("div",{className:"h-full p-4",children:l.jsx(dSe,{balances:B,formatCurrency:E})}):B.length>50?l.jsx("div",{ref:V,className:"h-full overflow-auto",children:l.jsx("div",{style:{height:`${z.getTotalSize()}px`,width:"100%",position:"relative"},children:z.getVirtualItems().map(D=>{const F=B[D.index];return ee(F,D.index,{position:"absolute",top:0,left:0,width:"100%",height:`${D.size}px`,transform:`translateY(${D.start}px)`})})})}):l.jsx("div",{className:"overflow-auto",children:B.map((D,F)=>ee(D,F))})}),l.jsx(X,{})]}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[l.jsx(Os,{className:"h-12 w-12 text-terminal-text/80 mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-terminal-text mb-2",children:"No API Keys Configured"}),l.jsx("p",{className:"text-terminal-muted mb-4",children:"Add API keys to your exchange accounts to view balances"}),l.jsxs("div",{className:"text-sm text-terminal-muted",children:[l.jsxs("p",{children:["Current user: ",g.email]}),l.jsxs("p",{children:["Accounts: ",g.accounts.length]}),l.jsxs("p",{children:["With API keys: ",T.length]})]})]}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[l.jsx(Tn,{className:"h-12 w-12 text-terminal-text/80 mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-terminal-text mb-2",children:"No Active User"}),l.jsx("p",{className:"text-terminal-muted",children:"Please select or create a user account to view balances"})]})},hSe={activeTab:"trades",selectedAccountId:"all",showZeroPositions:!1,showClosedOrders:!1,tradesLimit:100},tR=e=>({widgetId:e,settings:{...hSe}}),km=ui()(cl((e,t)=>({widgets:new Map,getWidget:r=>{const n=t().widgets.get(r);if(!n){const i=tR(r);return e(o=>({widgets:new Map(o.widgets).set(r,i)})),i}return n},updateWidget:(r,n)=>{e(i=>{const o=new Map(i.widgets),s=o.get(r)||tR(r);return o.set(r,{...s,settings:{...s.settings,...n}}),{widgets:o}})},setWidgetSettings:(r,n)=>{t().updateWidget(r,n)}}),{name:"user-trading-data-widget-store",partialize:e=>({widgets:Array.from(e.widgets.entries())}),onRehydrateStorage:()=>e=>{e&&Array.isArray(e.widgets)&&(e.widgets=new Map(e.widgets))}}));var yv="rovingFocusGroup.onEntryFocus",pSe={bubbles:!1,cancelable:!0},gf="RovingFocusGroup",[Nx,$W,mSe]=RA(gf),[ISe,XW]=Wi(gf,[mSe]),[ySe,CSe]=ISe(gf),FW=b.forwardRef((e,t)=>l.jsx(Nx.Provider,{scope:e.__scopeRovingFocusGroup,children:l.jsx(Nx.Slot,{scope:e.__scopeRovingFocusGroup,children:l.jsx(vSe,{...e,ref:t})})}));FW.displayName=gf;var vSe=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...g}=e,f=b.useRef(null),m=Ye(t,f),v=II(o),[p,I]=Ys({prop:s,defaultProp:a??null,onChange:c,caller:gf}),[h,y]=b.useState(!1),C=nr(u),x=$W(r),A=b.useRef(!1),[w,S]=b.useState(0);return b.useEffect(()=>{const k=f.current;if(k)return k.addEventListener(yv,C),()=>k.removeEventListener(yv,C)},[C]),l.jsx(ySe,{scope:r,orientation:n,dir:v,loop:i,currentTabStopId:p,onItemFocus:b.useCallback(k=>I(k),[I]),onItemShiftTab:b.useCallback(()=>y(!0),[]),onFocusableItemAdd:b.useCallback(()=>S(k=>k+1),[]),onFocusableItemRemove:b.useCallback(()=>S(k=>k-1),[]),children:l.jsx(Te.div,{tabIndex:h||w===0?-1:0,"data-orientation":n,...g,ref:m,style:{outline:"none",...e.style},onMouseDown:we(e.onMouseDown,()=>{A.current=!0}),onFocus:we(e.onFocus,k=>{const R=!A.current;if(k.target===k.currentTarget&&R&&!h){const j=new CustomEvent(yv,pSe);if(k.currentTarget.dispatchEvent(j),!j.defaultPrevented){const _=x().filter(E=>E.focusable),O=_.find(E=>E.active),P=_.find(E=>E.id===p),B=[O,P,..._].filter(Boolean).map(E=>E.ref.current);zW(B,d)}}A.current=!1}),onBlur:we(e.onBlur,()=>y(!1))})})}),KW="RovingFocusGroupItem",VW=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:o,children:s,...a}=e,c=$s(),u=o||c,d=CSe(KW,r),g=d.currentTabStopId===u,f=$W(r),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:p}=d;return b.useEffect(()=>{if(n)return m(),()=>v()},[n,m,v]),l.jsx(Nx.ItemSlot,{scope:r,id:u,focusable:n,active:i,children:l.jsx(Te.span,{tabIndex:g?0:-1,"data-orientation":d.orientation,...a,ref:t,onMouseDown:we(e.onMouseDown,I=>{n?d.onItemFocus(u):I.preventDefault()}),onFocus:we(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:we(e.onKeyDown,I=>{if(I.key==="Tab"&&I.shiftKey){d.onItemShiftTab();return}if(I.target!==I.currentTarget)return;const h=ASe(I,d.orientation,d.dir);if(h!==void 0){if(I.metaKey||I.ctrlKey||I.altKey||I.shiftKey)return;I.preventDefault();let C=f().filter(x=>x.focusable).map(x=>x.ref.current);if(h==="last")C.reverse();else if(h==="prev"||h==="next"){h==="prev"&&C.reverse();const x=C.indexOf(I.currentTarget);C=d.loop?wSe(C,x+1):C.slice(x+1)}setTimeout(()=>zW(C))}}),children:typeof s=="function"?s({isCurrentTabStop:g,hasTabStop:p!=null}):s})})});VW.displayName=KW;var bSe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xSe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ASe(e,t,r){const n=xSe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return bSe[n]}function zW(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function wSe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var SSe=FW,kSe=VW,my="Tabs",[BSe]=Wi(my,[XW]),YW=XW(),[NSe,W1]=BSe(my),UW=b.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:o,orientation:s="horizontal",dir:a,activationMode:c="automatic",...u}=e,d=II(a),[g,f]=Ys({prop:n,onChange:i,defaultProp:o??"",caller:my});return l.jsx(NSe,{scope:r,baseId:$s(),value:g,onValueChange:f,orientation:s,dir:d,activationMode:c,children:l.jsx(Te.div,{dir:d,"data-orientation":s,...u,ref:t})})});UW.displayName=my;var JW="TabsList",QW=b.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,o=W1(JW,r),s=YW(r);return l.jsx(SSe,{asChild:!0,...s,orientation:o.orientation,dir:o.dir,loop:n,children:l.jsx(Te.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});QW.displayName=JW;var qW="TabsTrigger",eD=b.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...o}=e,s=W1(qW,r),a=YW(r),c=nD(s.baseId,n),u=iD(s.baseId,n),d=n===s.value;return l.jsx(kSe,{asChild:!0,...a,focusable:!i,active:d,children:l.jsx(Te.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...o,ref:t,onMouseDown:we(e.onMouseDown,g=>{!i&&g.button===0&&g.ctrlKey===!1?s.onValueChange(n):g.preventDefault()}),onKeyDown:we(e.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&s.onValueChange(n)}),onFocus:we(e.onFocus,()=>{const g=s.activationMode!=="manual";!d&&!i&&g&&s.onValueChange(n)})})})});eD.displayName=qW;var tD="TabsContent",rD=b.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:o,...s}=e,a=W1(tD,r),c=nD(a.baseId,n),u=iD(a.baseId,n),d=n===a.value,g=b.useRef(d);return b.useEffect(()=>{const f=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(f)},[]),l.jsx(ci,{present:i||d,children:({present:f})=>l.jsx(Te.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:f&&o})})});rD.displayName=tD;function nD(e,t){return`${e}-trigger-${t}`}function iD(e,t){return`${e}-content-${t}`}var jSe=UW,oD=QW,sD=eD,aD=rD;const TSe=jSe,lD=b.forwardRef(({className:e,...t},r)=>l.jsx(oD,{ref:r,className:de("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));lD.displayName=oD.displayName;const Rh=b.forwardRef(({className:e,...t},r)=>l.jsx(sD,{ref:r,className:de("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Rh.displayName=sD.displayName;const Oh=b.forwardRef(({className:e,...t},r)=>l.jsx(aD,{ref:r,className:de("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Oh.displayName=aD.displayName;const ESe=({widgetId:e,accounts:t,settings:r})=>{const[n,i]=b.useState([]),[o,s]=b.useState(!1),[a,c]=b.useState(null),u=ut(),d=b.useCallback(async()=>{if(t.length){s(!0),c(null);try{console.log(` Loading trades for ${t.length} account(s)`);const I=[];for(const h of t)try{console.log(` Fetching trades for account ${h.id} (${h.exchange})`);const y=await u.fetchMyTrades(h.id,void 0,void 0,r.tradesLimit),C=y.map(x=>({...x,accountId:h.id,exchange:h.exchange||"Unknown",email:h.email||"Unknown"}));I.push(...C),console.log(` Loaded ${y.length} trades for account ${h.id}`)}catch(y){console.error(` Failed to load trades for account ${h.id}:`,y)}I.sort((h,y)=>y.timestamp-h.timestamp),i(I),console.log(` Total trades loaded: ${I.length}`)}catch(I){console.error(" Failed to load trades:",I),c(I instanceof Error?I.message:"Failed to load trades")}finally{s(!1)}}},[t,r.tradesLimit]);b.useEffect(()=>{r.activeTab==="trades"&&d()},[d,r.activeTab]);const g=b.useCallback((I,h)=>I===0?"0":I<.001?I.toFixed(8):I<1?I.toFixed(6):I<1e3?I.toFixed(4):I.toFixed(2),[]),f=b.useCallback(I=>new Date(I).toLocaleString(),[]),m=H.useRef(null),v=Hi({count:n.length,getScrollElement:()=>m.current,estimateSize:()=>60,overscan:5}),p=b.useCallback((I,h,y)=>l.jsxs("div",{className:`flex items-center py-3 px-3 text-sm border-b border-terminal-border/30 hover:bg-terminal-accent/10 ${h%2===0?"bg-terminal-background/50":""}`,style:y,children:[l.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(io,{className:"w-3 h-3 text-terminal-muted"}),l.jsx("span",{className:"text-xs text-terminal-muted",children:f(I.timestamp)})]}),l.jsxs("span",{className:"text-xs text-terminal-muted truncate",children:[I.exchange,"  ",I.email]})]}),l.jsxs("div",{className:"text-center min-w-0 flex-1",children:[l.jsx("div",{className:"font-medium text-terminal-text",children:I.symbol}),l.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${I.side==="buy"?"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-200"}`,children:[I.side==="buy"?l.jsx(mr,{className:"w-3 h-3"}):l.jsx(Ui,{className:"w-3 h-3"}),I.side.toUpperCase()]})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:g(I.amount)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Amount"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:g(I.price)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Price"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"font-medium text-terminal-text",children:g(I.cost)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Total"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:I.fee?g(I.fee.cost):"-"}),l.jsx("div",{className:"text-xs text-terminal-muted",children:I.fee?I.fee.currency:"Fee"})]})]},I.id),[g,f]);return o?l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(mr,{className:"w-8 h-8 text-terminal-text/80 mb-2 animate-pulse mx-auto"}),l.jsx("p",{className:"text-terminal-muted",children:"Loading trades..."})]})}):a?l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ui,{className:"w-8 h-8 text-red-500 mb-2 mx-auto"}),l.jsxs("p",{className:"text-red-500",children:["Error: ",a]}),l.jsx("button",{onClick:d,className:"mt-2 px-3 py-1 bg-terminal-accent/20 hover:bg-terminal-accent/30 rounded text-xs",children:"Retry"})]})}):n.length?l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center py-2 px-3 text-xs font-medium text-terminal-muted border-b border-terminal-border bg-terminal-background/50",children:[l.jsx("div",{className:"min-w-0 flex-1",children:"Time / Account"}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:"Symbol / Side"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Amount"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Price"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Total"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Fee"})]}),l.jsx("div",{className:"flex-1 overflow-hidden",children:n.length>50?l.jsx("div",{ref:m,className:"h-full overflow-auto",children:l.jsx("div",{style:{height:`${v.getTotalSize()}px`,width:"100%",position:"relative"},children:v.getVirtualItems().map(I=>{const h=n[I.index];return p(h,I.index,{position:"absolute",top:0,left:0,width:"100%",height:`${I.size}px`,transform:`translateY(${I.start}px)`})})})}):l.jsx("div",{className:"overflow-auto",children:n.map((I,h)=>p(I,h))})})]}):l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(mr,{className:"w-8 h-8 text-terminal-text/80 mb-2 mx-auto"}),l.jsx("p",{className:"text-terminal-muted",children:"No trades found"})]})})},RSe=({widgetId:e,accounts:t,settings:r})=>{const[n,i]=b.useState([]),[o,s]=b.useState(!1),[a,c]=b.useState(null),u=ut(),d=b.useCallback(async()=>{if(t.length){s(!0),c(null);try{console.log(` Loading positions for ${t.length} account(s)`);const I=[];for(const h of t)try{console.log(` Fetching positions for account ${h.id} (${h.exchange})`);const y=await u.fetchPositions(h.id,void 0),C=y.map(x=>({...x,accountId:h.id,exchange:h.exchange||"Unknown",email:h.email||"Unknown"})).filter(x=>r.showZeroPositions||Math.abs(x.amount)>1e-8);I.push(...C),console.log(` Loaded ${y.length} positions for account ${h.id}`)}catch(y){console.error(` Failed to load positions for account ${h.id}:`,y)}I.sort((h,y)=>Math.abs(y.notional)-Math.abs(h.notional)),i(I),console.log(` Total positions loaded: ${I.length}`)}catch(I){console.error(" Failed to load positions:",I),c(I instanceof Error?I.message:"Failed to load positions")}finally{s(!1)}}},[t,r.showZeroPositions]);b.useEffect(()=>{r.activeTab==="positions"&&d()},[d,r.activeTab]);const g=b.useCallback((I,h)=>I===0?"0":Math.abs(I)<.001?I.toFixed(8):Math.abs(I)<1?I.toFixed(6):Math.abs(I)<1e3?I.toFixed(4):I.toFixed(2),[]),f=b.useCallback(I=>{const h=I>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return{value:`${I>=0?"+":""}${g(I)}`,color:h}},[g]),m=H.useRef(null),v=Hi({count:n.length,getScrollElement:()=>m.current,estimateSize:()=>70,overscan:5}),p=b.useCallback((I,h,y)=>{const C=f(I.unrealizedPnl);return l.jsxs("div",{className:`flex items-center py-3 px-3 text-sm border-b border-terminal-border/30 hover:bg-terminal-accent/10 ${h%2===0?"bg-terminal-background/50":""}`,style:y,children:[l.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[l.jsx("div",{className:"font-medium text-terminal-text",children:I.symbol}),l.jsxs("span",{className:"text-xs text-terminal-muted truncate",children:[I.exchange,"  ",I.email]})]}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:l.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${I.side==="long"?"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-200"}`,children:[I.side==="long"?l.jsx(mr,{className:"w-3 h-3"}):l.jsx(Ui,{className:"w-3 h-3"}),I.side.toUpperCase()]})}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:g(I.amount)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Size"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:g(I.entryPrice)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Entry"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:g(I.markPrice)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Mark"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"font-medium text-terminal-text",children:g(I.notional)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Notional"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:`font-medium ${C.color}`,children:C.value}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"PnL"})]})]},I.id)},[g,f]);return o?l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(_d,{className:"w-8 h-8 text-terminal-text/80 mb-2 animate-pulse mx-auto"}),l.jsx("p",{className:"text-terminal-muted",children:"Loading positions..."})]})}):a?l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Qa,{className:"w-8 h-8 text-red-500 mb-2 mx-auto"}),l.jsxs("p",{className:"text-red-500",children:["Error: ",a]}),l.jsx("button",{onClick:d,className:"mt-2 px-3 py-1 bg-terminal-accent/20 hover:bg-terminal-accent/30 rounded text-xs",children:"Retry"})]})}):n.length?l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center py-2 px-3 text-xs font-medium text-terminal-muted border-b border-terminal-border bg-terminal-background/50",children:[l.jsx("div",{className:"min-w-0 flex-1",children:"Symbol / Exchange"}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:"Side"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Size"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Entry"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Mark"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Notional"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"PnL"})]}),l.jsx("div",{className:"flex-1 overflow-hidden",children:n.length>50?l.jsx("div",{ref:m,className:"h-full overflow-auto",children:l.jsx("div",{style:{height:`${v.getTotalSize()}px`,width:"100%",position:"relative"},children:v.getVirtualItems().map(I=>{const h=n[I.index];return p(h,I.index,{position:"absolute",top:0,left:0,width:"100%",height:`${I.size}px`,transform:`translateY(${I.start}px)`})})})}):l.jsx("div",{className:"overflow-auto",children:n.map((I,h)=>p(I,h))})})]}):l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(_d,{className:"w-8 h-8 text-terminal-text/80 mb-2 mx-auto"}),l.jsx("p",{className:"text-terminal-muted",children:"No positions found"})]})})},OSe=({widgetId:e,accounts:t,settings:r})=>{console.log(" [UserOrdersTab] Component mounted/re-rendered:",{widgetId:e,accountsLength:t.length,accounts:t.map(h=>({id:h.id,exchange:h.exchange,email:h.email,hasKey:!!h.key,hasPrivateKey:!!h.privateKey})),settings:r});const[n,i]=b.useState([]),[o,s]=b.useState(!1),[a,c]=b.useState(null),u=ut(),d=b.useCallback(async()=>{var h,y;if(console.log(` [UserOrdersTab] Starting loadOrders. Accounts length: ${t.length}`),console.log(" [UserOrdersTab] Settings:",{showClosedOrders:r.showClosedOrders}),console.log(" [UserOrdersTab] Accounts:",t.map(C=>({id:C.id,exchange:C.exchange,email:C.email,hasKey:!!C.key,hasPrivateKey:!!C.privateKey}))),!t.length){console.log(" [UserOrdersTab] No accounts found, returning early");return}s(!0),c(null);try{console.log(` [UserOrdersTab] Loading orders for ${t.length} account(s)`);const C=[];for(const x of t)try{console.log(` [UserOrdersTab] Fetching orders for account ${x.id} (${x.exchange})`),console.log(" [UserOrdersTab] Account details:",{id:x.id,exchange:x.exchange,email:x.email,hasKey:!!x.key,hasPrivateKey:!!x.privateKey,keyLength:((h=x.key)==null?void 0:h.length)||0,privateKeyLength:((y=x.privateKey)==null?void 0:y.length)||0});let A=[];if(r.showClosedOrders){console.log(` [UserOrdersTab] Fetching ALL orders (open + closed) for account ${x.id}`);try{A=await u.fetchOrders(x.id,void 0,void 0,100)}catch(S){console.warn(` [UserOrdersTab] fetchOrders failed for ${x.id}, falling back to fetchOpenOrders:`,S.message),A=await u.fetchOpenOrders(x.id,void 0)}}else console.log(` [UserOrdersTab] Fetching OPEN orders only for account ${x.id}`),A=await u.fetchOpenOrders(x.id,void 0);console.log(` [UserOrdersTab] Raw orders received for account ${x.id}:`,A);const w=A.map(S=>({...S,accountId:x.id,exchange:x.exchange||"Unknown",email:x.email||"Unknown"}));console.log(" [UserOrdersTab] Orders with account info:",w),C.push(...w),console.log(` [UserOrdersTab] Loaded ${A.length} orders for account ${x.id}`)}catch(A){console.error(` [UserOrdersTab] Failed to load orders for account ${x.id}:`,A),console.error(" [UserOrdersTab] Error details:",{message:A instanceof Error?A.message:"Unknown error",stack:A instanceof Error?A.stack:void 0,accountId:x.id,exchange:x.exchange})}C.sort((x,A)=>A.timestamp-x.timestamp),console.log(` [UserOrdersTab] Before setOrders - allOrders length: ${C.length}`),console.log(" [UserOrdersTab] Before setOrders - allOrders:",C),i(C),console.log(` [UserOrdersTab] Total orders loaded: ${C.length}`),console.log(" [UserOrdersTab] Final orders:",C)}catch(C){console.error(" [UserOrdersTab] Failed to load orders:",C),c(C instanceof Error?C.message:"Failed to load orders")}finally{s(!1)}},[t,r.showClosedOrders]);b.useEffect(()=>{r.activeTab==="orders"&&d()},[d,r.activeTab]),b.useEffect(()=>{console.log(" [UserOrdersTab] Orders state changed:",{ordersLength:n.length,orders:n,loading:o,error:a})},[n,o,a]);const g=b.useCallback((h,y)=>h===0?"0":h<.001?h.toFixed(8):h<1?h.toFixed(6):h<1e3?h.toFixed(4):h.toFixed(2),[]),f=b.useCallback(h=>new Date(h).toLocaleString(),[]),m=b.useCallback(h=>{switch(h){case"open":return{icon:io,color:"text-blue-600 dark:text-blue-400"};case"closed":return{icon:Fg,color:"text-green-600 dark:text-green-400"};case"canceled":return{icon:Jl,color:"text-red-600 dark:text-red-400"};case"expired":return{icon:op,color:"text-orange-600 dark:text-orange-400"};case"rejected":return{icon:Jl,color:"text-red-600 dark:text-red-400"};default:return{icon:io,color:"text-terminal-muted"}}},[]),v=H.useRef(null),p=Hi({count:n.length,getScrollElement:()=>v.current,estimateSize:()=>70,overscan:5}),I=b.useCallback((h,y,C)=>{const x=m(h.status),A=x.icon,w=h.amount>0?h.filled/h.amount*100:0;return l.jsxs("div",{className:`flex items-center py-3 px-3 text-sm border-b border-terminal-border/30 hover:bg-terminal-accent/10 ${y%2===0?"bg-terminal-background/50":""}`,style:C,children:[l.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(io,{className:"w-3 h-3 text-terminal-muted"}),l.jsx("span",{className:"text-xs text-terminal-muted",children:f(h.timestamp)})]}),l.jsxs("span",{className:"text-xs text-terminal-muted truncate",children:[h.exchange,"  ",h.email]})]}),l.jsxs("div",{className:"text-center min-w-0 flex-1",children:[l.jsx("div",{className:"font-medium text-terminal-text",children:h.symbol}),l.jsx("div",{className:"text-xs text-terminal-muted",children:h.type.toUpperCase()})]}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:l.jsx("div",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${h.side==="buy"?"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-200"}`,children:h.side.toUpperCase()})}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:g(h.amount)}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Amount"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:h.price?g(h.price):"Market"}),l.jsx("div",{className:"text-xs text-terminal-muted",children:"Price"})]}),l.jsxs("div",{className:"text-right min-w-0 flex-1",children:[l.jsx("div",{className:"text-terminal-text",children:g(h.filled)}),l.jsxs("div",{className:"text-xs text-terminal-muted",children:[w.toFixed(1),"%"]})]}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsx(A,{className:`w-3 h-3 ${x.color}`}),l.jsx("span",{className:`text-xs font-medium ${x.color}`,children:h.status.toUpperCase()})]})})]},h.id)},[g,f,m]);return o?l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(y0,{className:"w-8 h-8 text-terminal-text/80 mb-2 animate-pulse mx-auto"}),l.jsx("p",{className:"text-terminal-muted",children:"Loading orders..."})]})}):a?l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Jl,{className:"w-8 h-8 text-red-500 mb-2 mx-auto"}),l.jsxs("p",{className:"text-red-500",children:["Error: ",a]}),l.jsx("button",{onClick:d,className:"mt-2 px-3 py-1 bg-terminal-accent/20 hover:bg-terminal-accent/30 rounded text-xs",children:"Retry"})]})}):n.length?l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center py-2 px-3 text-xs font-medium text-terminal-muted border-b border-terminal-border bg-terminal-background/50",children:[l.jsx("div",{className:"min-w-0 flex-1",children:"Time / Exchange"}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:"Symbol"}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:"Side"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Amount"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Price"}),l.jsx("div",{className:"text-right min-w-0 flex-1",children:"Filled"}),l.jsx("div",{className:"text-center min-w-0 flex-1",children:"Status"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:d,disabled:o,className:"px-2 py-1 bg-terminal-accent/20 hover:bg-terminal-accent/30 disabled:opacity-50 rounded text-xs",title:"Refresh orders",children:o?"...":""})})]}),l.jsx("div",{className:"flex-1 overflow-hidden",children:n.length>50?l.jsx("div",{ref:v,className:"h-full overflow-auto",children:l.jsx("div",{style:{height:`${p.getTotalSize()}px`,width:"100%",position:"relative"},children:p.getVirtualItems().map(h=>{const y=n[h.index];return I(y,h.index,{position:"absolute",top:0,left:0,width:"100%",height:`${h.size}px`,transform:`translateY(${h.start}px)`})})})}):l.jsx("div",{className:"overflow-auto",children:n.map((h,y)=>I(h,y))})})]}):l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(y0,{className:"w-8 h-8 text-terminal-text/80 mb-2 mx-auto"}),l.jsx("p",{className:"text-terminal-muted",children:"No orders found"})]})})},GSe=({widgetId:e})=>{const{getWidget:t}=km(),{users:r,activeUserId:n}=ct(),[i,o]=b.useState(!1),s=t(e).settings,a=r.find(f=>f.id===n),c=b.useMemo(()=>!(a!=null&&a.accounts)||!Array.isArray(a.accounts)?[]:a.accounts.filter(f=>f.key&&f.privateKey),[a==null?void 0:a.accounts]),u=c.length>0,d=b.useMemo(()=>{if(!u)return[];if(s.selectedAccountId==="all")return c;const f=c.find(m=>m.id===s.selectedAccountId);return f?[f]:c},[s.selectedAccountId,c,u]),g=async()=>{if(!(!u||i)){o(!0),console.log(` Refreshing ${s.activeTab} for ${d.length} account(s)`);try{const f=s.activeTab,{updateWidget:m}=km.getState();m(e,{activeTab:f==="trades"?"positions":"trades"}),await new Promise(v=>{setTimeout(()=>{m(e,{activeTab:f}),setTimeout(()=>{v(void 0)},200)},50)}),console.log(` Refresh completed for ${s.activeTab}`)}catch(f){console.error(" Refresh failed:",f)}finally{o(!1)}}};return l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("button",{onClick:g,className:"p-1 rounded-sm hover:bg-terminal-widget/50 transition-colors",title:i?"Refreshing...":"Refresh data",disabled:!u||i,children:l.jsx(Ri,{size:14,className:`text-terminal-muted hover:text-terminal-text transition-colors ${i?"animate-spin":""}`})})})},PSe=({dashboardId:e="default",widgetId:t="user-trading-data-widget"})=>{const{getWidget:r,updateWidget:n}=km(),i=r(t).settings,{users:o,activeUserId:s}=ct(),a=o.find(f=>f.id===s);ut(),b.useRef(null),b.useRef(null),b.useRef(null);const c=b.useMemo(()=>{var m,v;if(console.log(" [UserTradingDataWidget] Computing accountsWithKeys:",{activeUser:a?{id:a.id,email:a.email,accountsLength:((m=a.accounts)==null?void 0:m.length)||0}:null,allAccounts:((v=a==null?void 0:a.accounts)==null?void 0:v.map(p=>{var I,h;return{id:p.id,exchange:p.exchange,email:p.email,hasKey:!!p.key,hasPrivateKey:!!p.privateKey,keyLength:((I=p.key)==null?void 0:I.length)||0,privateKeyLength:((h=p.privateKey)==null?void 0:h.length)||0}}))||[]}),!(a!=null&&a.accounts)||!Array.isArray(a.accounts))return console.log(" [UserTradingDataWidget] No accounts found or not array"),[];const f=a.accounts.filter(p=>p.key&&p.privateKey);return console.log(` [UserTradingDataWidget] Filtered accounts with keys: ${f.length}`,f.map(p=>({id:p.id,exchange:p.exchange,email:p.email}))),f},[a==null?void 0:a.accounts]),u=c.length>0,d=b.useMemo(()=>{if(console.log(" [UserTradingDataWidget] Computing selectedAccounts:",{hasValidAccounts:u,accountsWithKeysLength:c.length,selectedAccountId:i.selectedAccountId,accountsWithKeys:c.map(v=>({id:v.id,exchange:v.exchange,email:v.email,hasKey:!!v.key,hasPrivateKey:!!v.privateKey}))}),!u)return[];if(i.selectedAccountId==="all")return console.log(` [UserTradingDataWidget] Returning all accounts: ${c.length}`),c;const f=c.find(v=>v.id===i.selectedAccountId),m=f?[f]:c;return console.log(` [UserTradingDataWidget] Returning selected accounts: ${m.length}`,m.map(v=>({id:v.id,exchange:v.exchange,email:v.email}))),m},[i.selectedAccountId,c,u]),g=f=>{n(t,{activeTab:f})};return a?u?l.jsx("div",{className:"h-full flex flex-col",children:l.jsxs(TSe,{value:i.activeTab,onValueChange:f=>g(f),className:"h-full flex flex-col",children:[l.jsxs(lD,{className:"grid w-full grid-cols-3 bg-terminal-background border-b border-terminal-border rounded-none h-10",children:[l.jsxs(Rh,{value:"trades",className:"flex items-center gap-2 data-[state=active]:bg-terminal-accent/60",children:[l.jsx(mr,{className:"w-3 h-3"}),"Trades"]}),l.jsxs(Rh,{value:"positions",className:"flex items-center gap-2 data-[state=active]:bg-terminal-accent/60",children:[l.jsx(_d,{className:"w-3 h-3"}),"Positions"]}),l.jsxs(Rh,{value:"orders",className:"flex items-center gap-2 data-[state=active]:bg-terminal-accent/60",children:[l.jsx(y0,{className:"w-3 h-3"}),"Orders"]})]}),l.jsx(Oh,{value:"trades",className:"flex-1 overflow-hidden m-0",children:l.jsx(ESe,{widgetId:t,accounts:d,settings:i})}),l.jsx(Oh,{value:"positions",className:"flex-1 overflow-hidden m-0",children:l.jsx(RSe,{widgetId:t,accounts:d,settings:i})}),l.jsx(Oh,{value:"orders",className:"flex-1 overflow-hidden m-0",children:l.jsx(OSe,{widgetId:t,accounts:d,settings:i})})]})}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[l.jsx(_d,{className:"h-12 w-12 text-terminal-text/80 mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-terminal-text mb-2",children:"No API Keys Configured"}),l.jsx("p",{className:"text-terminal-muted mb-4",children:"Add API keys to your exchange accounts to view trading data"}),l.jsxs("div",{className:"text-sm text-terminal-muted",children:[l.jsxs("p",{children:["Current user: ",a.email]}),l.jsxs("p",{children:["Accounts: ",a.accounts.length]}),l.jsxs("p",{children:["With API keys: ",c.length]})]})]}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[l.jsx(Tn,{className:"h-12 w-12 text-terminal-text/80 mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-terminal-text mb-2",children:"No Active User"}),l.jsx("p",{className:"text-terminal-muted",children:"Please select or create a user account to view trading data"})]})},jx={symbol:"",side:"buy",type:"market",amount:0,price:void 0,stopPrice:void 0,takeProfitPrice:void 0,stopLossPrice:void 0,timeInForce:"GTC",reduceOnly:!1,postOnly:!1,clientOrderId:void 0},_Se={stopLoss:{enabled:!1,price:void 0,percentage:void 0,trailing:!1,trailingAmount:void 0},takeProfit:{enabled:!1,price:void 0,percentage:void 0},icebergQty:void 0,quoteOrderQty:void 0},fs={formData:{...jx},selectedGroupId:null,isAdvancedMode:!1,validationErrors:[],orderEstimate:null,validationRules:null,isLoading:!1,isSubmitting:!1,lastOrderResponse:null,advancedOptions:{..._Se}},MSe=ui()(Yg((e,t)=>({widgets:{},getWidget:r=>t().widgets[r]||{...fs},initializeWidget:(r,n)=>{e(i=>{i.widgets[r]={...fs,selectedGroupId:n||null}})},removeWidget:r=>{e(n=>{delete n.widgets[r]})},updateFormData:(r,n)=>{e(i=>{i.widgets[r]||(i.widgets[r]={...fs}),Object.assign(i.widgets[r].formData,n),i.widgets[r].validationErrors=[],i.widgets[r].orderEstimate=null}),setTimeout(()=>{t().validateOrder(r),t().calculateEstimate(r)},100)},resetForm:r=>{e(n=>{n.widgets[r]&&(n.widgets[r].formData={...jx},n.widgets[r].validationErrors=[],n.widgets[r].orderEstimate=null,n.widgets[r].lastOrderResponse=null)})},toggleAdvancedMode:r=>{e(n=>{n.widgets[r]||(n.widgets[r]={...fs}),n.widgets[r].isAdvancedMode=!n.widgets[r].isAdvancedMode})},updateAdvancedOptions:(r,n)=>{e(i=>{i.widgets[r]||(i.widgets[r]={...fs}),Object.assign(i.widgets[r].advancedOptions,n)})},validateOrder:async r=>{const n=t().getWidget(r),{formData:i,validationRules:o}=n,s=[];if(i.symbol||s.push({field:"symbol",message:"Symbol is required"}),i.amount<=0&&s.push({field:"amount",message:"Amount must be greater than 0"}),i.type==="limit"&&(!i.price||i.price<=0)&&s.push({field:"price",message:"Price is required for limit orders"}),i.type==="stop_loss"&&(!i.stopPrice||i.stopPrice<=0)&&s.push({field:"stopPrice",message:"Stop price is required for stop loss orders"}),o){const{symbol:a,balance:c}=o;i.amount<a.minQty&&s.push({field:"amount",message:`Minimum quantity is ${a.minQty}`}),i.amount>a.maxQty&&s.push({field:"amount",message:`Maximum quantity is ${a.maxQty}`}),i.price&&i.price<a.minPrice&&s.push({field:"price",message:`Minimum price is ${a.minPrice}`}),i.price&&i.price>a.maxPrice&&s.push({field:"price",message:`Maximum price is ${a.maxPrice}`}),(i.type==="market"?i.amount*(a.maxPrice||1):(i.price||0)*i.amount)>c.available&&s.push({field:"amount",message:`Insufficient balance. Available: ${c.available} ${c.currency}`})}return e(a=>{a.widgets[r]&&(a.widgets[r].validationErrors=s)}),s},calculateEstimate:async r=>{const n=t().getWidget(r),{formData:i,validationRules:o}=n;if(!o||!i.symbol||i.amount<=0)return null;const{symbol:s,balance:a}=o,c=i.type==="market"?s.maxPrice:i.price||s.maxPrice,u=c*i.amount,d=u*.001,g={estimatedCost:u,commission:d,commissionCurrency:a.currency,available:a.available,maxAmount:Math.min(s.maxQty,a.available/c),minAmount:s.minQty,priceStep:s.tickSize,amountStep:s.stepSize};return e(f=>{f.widgets[r]&&(f.widgets[r].orderEstimate=g)}),g},updateValidationRules:(r,n)=>{e(i=>{i.widgets[r]||(i.widgets[r]={...fs}),i.widgets[r].validationRules=n})},placeOrder:async r=>{const n=t().getWidget(r),i=await t().validateOrder(r);if(i.length>0){const o={success:!1,error:`Validation failed: ${i.map(s=>s.message).join(", ")}`};return e(s=>{s.widgets[r]&&(s.widgets[r].lastOrderResponse=o)}),o}t().setSubmitting(r,!0);try{const{useGroupStore:o}=await $t(async()=>{const{useGroupStore:g}=await Promise.resolve().then(()=>r4);return{useGroupStore:g}},void 0),s=o.getState(),a=n.selectedGroupId?s.getGroupById(n.selectedGroupId):null;if(!(a!=null&&a.account)||!(a!=null&&a.exchange)||!(a!=null&&a.market))throw new Error("No trading account selected. Please select an account through the group selector.");const c={...n.formData,exchange:a.exchange,accountId:a.account,market:a.market},{executeOrder:u}=await $t(async()=>{const{executeOrder:g}=await Promise.resolve().then(()=>HSe);return{executeOrder:g}},void 0),d=await u(c,n.advancedOptions);return e(g=>{g.widgets[r]&&(g.widgets[r].lastOrderResponse=d,d.success&&(g.widgets[r].formData={...jx}))}),d}catch(o){const s={success:!1,error:o instanceof Error?o.message:"Unknown error occurred"};return e(a=>{a.widgets[r]&&(a.widgets[r].lastOrderResponse=s)}),s}finally{t().setSubmitting(r,!1)}},setLoading:(r,n)=>{e(i=>{i.widgets[r]||(i.widgets[r]={...fs}),i.widgets[r].isLoading=n})},setSubmitting:(r,n)=>{e(i=>{i.widgets[r]||(i.widgets[r]={...fs}),i.widgets[r].isSubmitting=n})},clearLastResponse:r=>{e(n=>{n.widgets[r]&&(n.widgets[r].lastOrderResponse=null)})}})));async function ZSe(e,t){var r,n,i,o,s,a,c,u,d;try{console.log(" [OrderExecution] Executing order:",e);const g=ct.getState(),f=g.users.find(P=>P.accounts.some(N=>N.id===e.accountId));if(!f)throw new Error(`User not found for account ${e.accountId}`);if(g.isLocked)throw new Error("Store is locked. Please unlock with master password first.");const m=await g.getDecryptedAccount(f.id,e.accountId);if(!m||!m.key||!m.privateKey)throw new Error(`Account ${e.accountId} not found or missing API keys`);const p=ut.getState().getProviderForExchange(e.exchange);if(!p||p.type!=="ccxt-browser")throw new Error(`No CCXT browser provider found for exchange ${e.exchange}`);const h=await Yd(p).getTradingInstance(f.id,e.accountId,e.exchange,e.market,"regular",{apiKey:m.key,secret:m.privateKey,password:m.password,sandbox:!1});console.log(" [OrderExecution] CCXT instance capabilities:",{createOrder:(r=h.has)==null?void 0:r.createOrder,createMarketOrder:(n=h.has)==null?void 0:n.createMarketOrder,createLimitOrder:(i=h.has)==null?void 0:i.createLimitOrder,createStopOrder:(o=h.has)==null?void 0:o.createStopOrder,defaultType:(s=h.options)==null?void 0:s.defaultType});const{symbol:y,side:C,type:x,amount:A,price:w,stopPrice:S}=e;let k,R={};switch(x){case"market":k="market";break;case"limit":if(k="limit",!w)throw new Error("Price is required for limit orders");break;case"stop_loss":if(k="stop",!S)throw new Error("Stop price is required for stop loss orders");R.stopPrice=S;break;case"take_profit":if(k="take_profit",!w)throw new Error("Price is required for take profit orders");break;case"stop_limit":if(k="stop_limit",!w||!S)throw new Error("Both price and stop price are required for stop limit orders");R.stopPrice=S;break;default:throw new Error(`Unsupported order type: ${x}`)}e.timeInForce&&e.timeInForce!=="GTC"&&(R.timeInForce=e.timeInForce),e.reduceOnly&&(R.reduceOnly=!0),e.postOnly&&(R.postOnly=!0),e.clientOrderId&&(R.clientOrderId=e.clientOrderId),console.log(` [OrderExecution] Placing ${k} ${C} order:`,{symbol:y,amount:A,price:w,params:R});let j;try{j=await h.createOrder(y,k,C,A,w,R)}catch(P){console.error(" [OrderExecution] Failed to create order:",P);let N=P.message||"Unknown error";throw N.toLowerCase().includes("insufficient")?N="Insufficient balance to place order":N.toLowerCase().includes("minimum")?N="Order amount below minimum required":N.toLowerCase().includes("maximum")?N="Order amount exceeds maximum allowed":N.toLowerCase().includes("invalid symbol")?N="Trading pair not found or not tradeable":N.toLowerCase().includes("market closed")&&(N="Market is currently closed for trading"),new Error(N)}console.log(" [OrderExecution] Order placed successfully:",j);const _=[];if((a=t==null?void 0:t.stopLoss)!=null&&a.enabled&&t.stopLoss.price)try{const P=await h.createOrder(y,"stop",C==="buy"?"sell":"buy",A,void 0,{stopPrice:t.stopLoss.price,reduceOnly:!0});_.push(P),console.log(" [OrderExecution] Stop loss order placed:",P)}catch(P){console.warn(" [OrderExecution] Failed to place stop loss:",P)}if((c=t==null?void 0:t.takeProfit)!=null&&c.enabled&&t.takeProfit.price)try{const P=await h.createOrder(y,"limit",C==="buy"?"sell":"buy",A,t.takeProfit.price,{reduceOnly:!0});_.push(P),console.log(" [OrderExecution] Take profit order placed:",P)}catch(P){console.warn(" [OrderExecution] Failed to place take profit:",P)}return{success:!0,orderId:j.id,order:{id:j.id,clientOrderId:j.clientOrderId,symbol:j.symbol,side:j.side,type:j.type,amount:j.amount,price:j.price,status:j.status,timestamp:j.timestamp||Date.now(),info:{main:j.info,stopLoss:(u=_.find(P=>P.type==="stop"))==null?void 0:u.info,takeProfit:(d=_.find(P=>P.type==="limit"))==null?void 0:d.info}}}}catch(g){return console.error(" [OrderExecution] Order execution failed:",g),{success:!1,error:g instanceof Error?g.message:"Unknown error occurred while placing order"}}}async function cD(e,t,r="spot"){var n,i,o,s,a,c,u,d,g,f,m,v;try{const I=ut.getState().getProviderForExchange(e);if(!I||I.type!=="ccxt-browser")throw new Error(`No CCXT browser provider found for exchange ${e}`);const y=await Yd(I).getMetadataInstance(e,r);if(!y.markets||!y.markets[t])throw new Error(`Symbol ${t} not found on ${e}`);const C=y.markets[t];return{minNotional:((i=(n=C.limits)==null?void 0:n.cost)==null?void 0:i.min)||0,minQty:((s=(o=C.limits)==null?void 0:o.amount)==null?void 0:s.min)||0,maxQty:((c=(a=C.limits)==null?void 0:a.amount)==null?void 0:c.max)||1/0,stepSize:((u=C.precision)==null?void 0:u.amount)||1e-8,tickSize:((d=C.precision)==null?void 0:d.price)||1e-8,maxPrice:((f=(g=C.limits)==null?void 0:g.price)==null?void 0:f.max)||1/0,minPrice:((v=(m=C.limits)==null?void 0:m.price)==null?void 0:v.min)||0,active:C.active,fees:{maker:C.maker||.001,taker:C.taker||.001}}}catch(p){throw console.error(" [OrderExecution] Failed to get market constraints:",p),p}}const HSe=Object.freeze(Object.defineProperty({__proto__:null,executeOrder:ZSe,getMarketConstraints:cD},Symbol.toStringTag,{value:"Module"})),LSe=({widgetId:e="order-form-widget",dashboardId:t="default",selectedGroupId:r})=>{var K,re,ce,Me,Ee,Ke,Nt,te,he,Ze;console.log(" [OrderForm] Widget mounted:",{widgetId:e,dashboardId:t,selectedGroupId:r});const{getWidget:n,initializeWidget:i,updateFormData:o,toggleAdvancedMode:s,updateAdvancedOptions:a,validateOrder:c,calculateEstimate:u,updateValidationRules:d,placeOrder:g,setLoading:f,clearLastResponse:m}=MSe(),{getGroupById:v,selectedGroupId:p}=zr(),{getProviderForExchange:I}=ut(),{users:h,activeUserId:y}=ct(),C=n(e),{formData:x,isAdvancedMode:A,validationErrors:w,orderEstimate:S,validationRules:k,isLoading:R,isSubmitting:j,lastOrderResponse:_,advancedOptions:O}=C,P=r||p,N=P?v(P):null,B=N&&N.account&&N.exchange&&N.market&&N.tradingPair,E=(N==null?void 0:N.exchange)||"",M=(N==null?void 0:N.tradingPair)||"",G=(N==null?void 0:N.market)||"spot",T=(N==null?void 0:N.account)||"";console.log(" [OrderForm] Current instrument:",{isInstrumentSelected:B,exchange:E,symbol:M,market:G,accountId:T,hasGroup:!!N}),b.useEffect(()=>{i(e,P||void 0)},[i,e,P]),b.useEffect(()=>{B&&M!==x.symbol&&(o(e,{symbol:M}),console.log(` [OrderForm] Updated symbol to: ${M}`))},[B,M,x.symbol,o,e]),b.useEffect(()=>{if(!B)return;let se=!1;return(async()=>{try{f(e,!0),console.log(` [OrderForm] Loading constraints for ${E}:${M}:${G}`);const He=await cD(E,M,G);if(se)return;const Ue=h.find(bt=>bt.id===y),vt=Ue==null?void 0:Ue.accounts.find(bt=>bt.id===T);d(e,{symbol:He,balance:{available:1e3,currency:"USDT"},leverage:G==="futures"?1:void 0,marginMode:G==="futures"?"isolated":void 0}),console.log(" [OrderForm] Loaded constraints:",He)}catch(He){console.error(" [OrderForm] Failed to load constraints:",He)}finally{se||f(e,!1)}})(),()=>{se=!0}},[B,E,M,G,T,f,d,e,h,y]);const L=b.useCallback(se=>{o(e,{type:se})},[o,e]);b.useCallback(se=>{o(e,{side:se})},[o,e]);const W=b.useCallback(se=>{const ae=parseFloat(se.target.value)||0;o(e,{amount:ae})},[o,e]),X=b.useCallback(se=>{const ae=parseFloat(se.target.value)||0;o(e,{price:ae})},[o,e]),V=b.useCallback(se=>{const ae=parseFloat(se.target.value)||0;o(e,{stopPrice:ae})},[o,e]),z=b.useCallback(se=>{var Ue;const ae=((Ue=k==null?void 0:k.symbol)==null?void 0:Ue.stepSize)||1e-8,He=Math.max(0,x.amount+se*ae);o(e,{amount:He})},[x.amount,k,o,e]),ee=b.useCallback(async se=>{j||(o(e,{side:se}),setTimeout(async()=>{const ae=await g(e);console.log(" [OrderForm] Order response:",ae)},100))},[j,o,g,e]),D=b.useCallback(se=>{var ae;return(ae=w.find(He=>He.field===se))==null?void 0:ae.message},[w]),F=w.length===0,Z=M.split("/")[0]||"",$=M.split("/")[1]||"",J=b.useMemo(()=>S?S.estimatedCost:0,[S]),U=b.useMemo(()=>S?S.commission:0,[S]);return B?l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"mb-4 flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center px-4 py-2 bg-terminal-accent/30 rounded-md flex-1",children:[l.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center text-sm mr-2 text-white",children:Z.charAt(0)}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-medium",children:M}),l.jsxs("span",{className:"text-xs flex items-center text-terminal-muted",children:[E,"  ",G]})]})]})}),R?l.jsx("div",{className:"bg-terminal-accent/30 p-3 rounded-md mb-4",children:l.jsx("div",{className:"text-sm text-terminal-muted",children:"Loading market data..."})}):k?null:l.jsx("div",{className:"bg-terminal-accent/30 p-3 rounded-md mb-4",children:l.jsx("div",{className:"text-sm text-terminal-muted",children:"Market data unavailable"})}),l.jsx("div",{className:"mb-4",children:l.jsx("div",{className:"flex border-b border-terminal-border",children:["market","limit","stop_loss"].map(se=>l.jsx("button",{className:`flex-1 py-2 text-sm font-medium ${x.type===se?"border-b-2 border-blue-500 text-blue-400":"text-terminal-muted hover:text-terminal-text"}`,onClick:()=>L(se),children:se==="stop_loss"?"Stop":se.charAt(0).toUpperCase()+se.slice(1)},se))})}),l.jsxs("form",{className:"space-y-4 flex-grow overflow-y-auto",children:[(x.type==="limit"||x.type==="stop_loss")&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-terminal-muted mb-1",children:x.type==="stop_loss"?"Stop Price":"Execution Price"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"number",step:((K=k==null?void 0:k.symbol)==null?void 0:K.tickSize)||1e-8,className:`w-full bg-terminal-accent/30 border rounded-md py-2 px-3 text-sm ${D(x.type==="stop_loss"?"stopPrice":"price")?"border-red-500":"border-terminal-border"}`,value:x.type==="stop_loss"?x.stopPrice||"":x.price||"",onChange:x.type==="stop_loss"?V:X,placeholder:`Enter ${x.type==="stop_loss"?"stop":"limit"} price`})}),D(x.type==="stop_loss"?"stopPrice":"price")&&l.jsx("p",{className:"text-xs text-red-500 mt-1",children:D(x.type==="stop_loss"?"stopPrice":"price")})]}),x.type==="market"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-terminal-muted mb-1",children:"Execution Price"}),l.jsx("div",{className:"w-full bg-terminal-accent/20 border border-terminal-border rounded-md py-2 px-3 text-sm",children:"Market Price"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsx("label",{className:"text-sm text-terminal-muted",children:"Quantity"}),l.jsxs("div",{className:"flex items-center",children:[l.jsxs("span",{className:"text-xs mr-1",children:["",((re=k==null?void 0:k.symbol)==null?void 0:re.stepSize)||1]}),l.jsx(Vr,{size:14,className:"text-terminal-muted"})]})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx("input",{type:"number",step:((ce=k==null?void 0:k.symbol)==null?void 0:ce.stepSize)||1e-8,className:`w-full bg-terminal-accent/30 border rounded-md py-2 px-3 pr-16 text-sm ${D("amount")?"border-red-500":"border-terminal-border"}`,value:x.amount||"",onChange:W,placeholder:`Min: ${((Me=k==null?void 0:k.symbol)==null?void 0:Me.minQty)||0}`}),l.jsxs("div",{className:"absolute right-0 h-full flex",children:[l.jsx("button",{type:"button",className:"px-3 py-2 text-terminal-muted border-l border-terminal-border hover:bg-terminal-accent/30 transition-colors",onClick:()=>z(-1),children:""}),l.jsx("button",{type:"button",className:"px-3 py-2 text-terminal-muted border-l border-terminal-border hover:bg-terminal-accent/30 transition-colors",onClick:()=>z(1),children:"+"})]})]}),D("amount")&&l.jsx("p",{className:"text-xs text-red-500 mt-1",children:D("amount")})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{type:"button",onClick:()=>s(e),className:`text-xs px-3 py-1 rounded-md transition-colors ${A?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-terminal-muted hover:text-terminal-text border border-terminal-border hover:border-terminal-accent"}`,children:A?"Hide Advanced":"Show Advanced"})}),A&&l.jsxs("div",{className:"space-y-3 p-3 bg-terminal-accent/10 rounded-md",children:[l.jsx("h4",{className:"text-sm font-medium text-terminal-text mb-2",children:"Advanced Options"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"stopLoss",checked:((Ee=O.stopLoss)==null?void 0:Ee.enabled)||!1,onChange:se=>a(e,{stopLoss:{...O.stopLoss,enabled:se.target.checked}}),className:"mr-2"}),l.jsx("label",{htmlFor:"stopLoss",className:"text-sm text-terminal-text",children:"Stop Loss"})]}),((Ke=O.stopLoss)==null?void 0:Ke.enabled)&&l.jsx("input",{type:"number",placeholder:"Stop loss price",value:((Nt=O.stopLoss)==null?void 0:Nt.price)||"",onChange:se=>a(e,{stopLoss:{...O.stopLoss,price:parseFloat(se.target.value)||void 0}}),className:"w-full bg-terminal-accent/30 border border-terminal-border rounded-md py-1 px-2 text-sm"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"takeProfit",checked:((te=O.takeProfit)==null?void 0:te.enabled)||!1,onChange:se=>a(e,{takeProfit:{...O.takeProfit,enabled:se.target.checked}}),className:"mr-2"}),l.jsx("label",{htmlFor:"takeProfit",className:"text-sm text-terminal-text",children:"Take Profit"})]}),((he=O.takeProfit)==null?void 0:he.enabled)&&l.jsx("input",{type:"number",placeholder:"Take profit price",value:((Ze=O.takeProfit)==null?void 0:Ze.price)||"",onChange:se=>a(e,{takeProfit:{...O.takeProfit,price:parseFloat(se.target.value)||void 0}}),className:"w-full bg-terminal-accent/30 border border-terminal-border rounded-md py-1 px-2 text-sm"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-terminal-muted mb-1",children:"Estimated Cost"}),l.jsx("div",{className:"w-full bg-terminal-accent/20 border border-terminal-border rounded-md py-2 px-3 text-sm",children:J>0?`${zf(J)} ${$}`:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-terminal-muted mb-1",children:"Commission"}),l.jsx("div",{className:"w-full bg-terminal-accent/20 border border-terminal-border rounded-md py-2 px-3 text-sm",children:U>0?`~${zf(U)} ${$}`:"Calculated on execution"})]}),S&&l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-terminal-muted mb-1",children:"Available"}),l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{children:zf(S.available)}),l.jsx("span",{children:$})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-terminal-muted mb-1",children:"Max Amount"}),l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{children:zf(S.maxAmount)}),l.jsx("span",{children:Z})]})]})]}),_&&l.jsxs("div",{className:`p-3 rounded-md mb-4 ${_.success?"bg-green-500/20 border border-green-500/30":"bg-red-500/20 border border-red-500/30"}`,children:[l.jsxs("div",{className:"flex items-center",children:[_.success?l.jsx(Fg,{size:16,className:"text-green-400 mr-2"}):l.jsx(op,{size:16,className:"text-red-400 mr-2"}),l.jsx("span",{className:`text-sm font-medium ${_.success?"text-green-400":"text-red-400"}`,children:_.success?"Order Placed Successfully":"Order Failed"}),l.jsx("button",{onClick:()=>m(e),className:"ml-auto p-1 rounded hover:bg-white/10",children:l.jsx(Cr,{size:14})})]}),_.orderId&&l.jsxs("p",{className:"text-xs text-terminal-muted mt-1",children:["Order ID: ",_.orderId]}),_.error&&l.jsx("p",{className:"text-xs text-red-300 mt-1",children:_.error})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto pt-4",children:[l.jsx("button",{type:"button",disabled:!F||j||R,className:"w-full py-2.5 rounded-md font-medium bg-terminal-positive hover:bg-terminal-positive/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",onClick:()=>ee("buy"),children:j&&x.side==="buy"?"Placing...":`Buy ${Z}`}),l.jsx("button",{type:"button",disabled:!F||j||R,className:"w-full py-2.5 rounded-md font-medium bg-terminal-negative hover:bg-terminal-negative/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",onClick:()=>ee("sell"),children:j&&x.side==="sell"?"Placing...":`Sell ${Z}`})]})]})]}):l.jsx("div",{className:"h-full flex flex-col items-center justify-center p-6",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx(op,{className:"w-12 h-12 text-terminal-muted mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-terminal-text mb-2",children:"No Trading Instrument Selected"}),l.jsx("p",{className:"text-sm text-terminal-muted mb-4",children:"Please select an account, exchange, market, and trading pair using the group selector in the widget header."}),l.jsxs("div",{className:"bg-terminal-accent/20 p-3 rounded-md text-xs text-terminal-muted",children:["Current selection: ",N?Object.entries({account:N.account||"Not set",exchange:N.exchange||"Not set",market:N.market||"Not set",pair:N.tradingPair||"Not set"}).map(([se,ae])=>`${se}: ${ae}`).join(", "):"No group selected"]})]})})},WSe=[{id:"transfer-1",type:"transfer",description:"Money transfer between accounts",amount:"-500 000 ",isNegative:!0,date:"Today",time:"16:23",account:"Speculative Account"},{id:"deposit-1",type:"deposit",description:"Account deposit",amount:"500 000 ",isNegative:!1,date:"Today",time:"16:23",account:"Speculative Account"},{id:"tax-1",type:"tax",description:"Tax adjustment",amount:"1 026 ",isNegative:!1,date:"January 20, 2025",time:"23:35",account:"Speculative Account"},{id:"tax-2",type:"tax",description:"Tax withholding",amount:"-25 873 ",isNegative:!0,date:"January 01, 2025",time:"01:57",account:"Speculative Account"},{id:"fee-1",type:"fee",description:"Variation margin deduction",amount:"-5,47 ",isNegative:!0,date:"September 13, 2024",time:"19:03",account:"Speculative Account"}],DSe=()=>{const[e,t]=b.useState("all"),r=i=>{switch(i){case"transfer":return l.jsx(Os,{size:20,className:"text-blue-400"});case"deposit":return l.jsx(z5,{size:20,className:"text-green-400"});case"tax":return l.jsx(Os,{size:20,className:"text-gray-400"});case"fee":return l.jsx(Os,{size:20,className:"text-red-400"});default:return l.jsx(Os,{size:20,className:"text-terminal-muted"})}},n={};return WSe.forEach(i=>{n[i.date]||(n[i.date]=[]),n[i.date].push(i)}),l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:l.jsx(Ja,{size:16,className:"text-terminal-muted"})}),l.jsx("input",{type:"text",className:"bg-terminal-accent/30 border border-terminal-border rounded-md py-2 pl-10 pr-3 text-sm w-64",placeholder:"Transaction History",readOnly:!0})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("button",{className:"p-1 rounded hover:bg-terminal-accent/50",children:l.jsx(Vo,{size:16,className:"text-terminal-muted"})})})]}),l.jsx("div",{className:"flex-grow overflow-auto",children:Object.entries(n).map(([i,o])=>l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm font-medium mb-2",children:i}),o.map(s=>l.jsxs("div",{className:"flex items-center py-3 border-b border-terminal-border/20 hover:bg-terminal-accent/10",children:[l.jsx("div",{className:"mr-3 p-1 rounded-full bg-terminal-accent/30",children:r(s.type)}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("div",{className:"text-sm",children:s.description}),l.jsx("div",{className:"text-xs text-terminal-muted",children:s.account})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:`text-sm ${s.isNegative?"text-terminal-negative":"text-terminal-positive"}`,children:s.amount}),l.jsx("div",{className:"text-xs text-terminal-muted",children:s.time})]})]},s.id))]},i))})]})},Kr=b.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:de("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Kr.displayName="Card";const Un=b.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:de("flex flex-col space-y-1.5 p-6",e),...t}));Un.displayName="CardHeader";const Jn=b.forwardRef(({className:e,...t},r)=>l.jsx("h3",{ref:r,className:de("text-2xl font-semibold leading-none tracking-tight",e),...t}));Jn.displayName="CardTitle";const $Se=b.forwardRef(({className:e,...t},r)=>l.jsx("p",{ref:r,className:de("text-sm text-muted-foreground",e),...t}));$Se.displayName="CardDescription";const Qn=b.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:de("p-6 pt-0",e),...t}));Qn.displayName="CardContent";const XSe=b.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:de("flex items-center p-6 pt-0",e),...t}));XSe.displayName="CardFooter";class ff extends b.Component{constructor(){super(...arguments);Ii(this,"state",{hasError:!1});Ii(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error(" Error Boundary caught an error:",r,n),this.setState({error:r,errorInfo:n})}render(){if(this.state.hasError){const{fallbackTitle:r="-   ",showDetails:n=!1}=this.props;return l.jsxs(Kr,{className:"m-4 border-red-200 bg-red-50",children:[l.jsx(Un,{children:l.jsxs(Jn,{className:"flex items-center gap-2 text-red-800",children:[l.jsx(Qa,{className:"h-5 w-5"}),r]})}),l.jsxs(Qn,{className:"space-y-4",children:[l.jsx("p",{className:"text-red-700",children:"    ,       ."}),n&&this.state.error&&l.jsxs("div",{className:"bg-red-100 p-3 rounded-lg text-sm",children:[l.jsx("strong",{children:" :"}),l.jsx("pre",{className:"mt-2 text-red-800 overflow-auto",children:this.state.error.message})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ie,{onClick:this.handleRetry,variant:"outline",size:"sm",children:[l.jsx(Ri,{className:"h-4 w-4 mr-2"})," "]}),l.jsx(ie,{onClick:()=>window.location.reload(),variant:"default",size:"sm",children:" "})]})]})]})}return this.props.children}}const Cv={exchange:"binance",symbol:"BTC/USDT",market:"spot",displayDepth:10,showCumulative:!0,priceDecimals:2,amountDecimals:4,isSubscribed:!1,isLoading:!1,error:null},uD=ui((e,t)=>({widgets:{},getWidget:r=>{const{widgets:n}=t();return n[r]||{...Cv}},updateWidget:(r,n)=>{e(i=>({widgets:{...i.widgets,[r]:{...i.widgets[r]||Cv,...n}}}))},removeWidget:r=>{e(n=>{const{[r]:i,...o}=n.widgets;return{widgets:o}})},setWidgetSettings:(r,n)=>{e(i=>({widgets:{...i.widgets,[r]:{...i.widgets[r]||Cv,...n}}}))}})),FSe=({dashboardId:e="default",widgetId:t="orderbook-widget-v2",initialExchange:r="binance",initialSymbol:n="BTC/USDT"})=>{const{subscribe:i,unsubscribe:o,getOrderBook:s,initializeOrderBookData:a,providers:c,activeProviderId:u,dataFetchSettings:d,getActiveSubscriptionsList:g}=ut(),{getWidget:f,updateWidget:m,setWidgetSettings:v}=uD(),{getGroupById:p,selectedGroupId:I,getTransparentGroup:h}=zr(),y=f(t),C=p(I),x=(C==null?void 0:C.exchange)||"binance",A=(C==null?void 0:C.tradingPair)||"BTC/USDT",w=(C==null?void 0:C.market)||"spot",{displayDepth:S,showCumulative:k,priceDecimals:R,amountDecimals:j,isSubscribed:_,isLoading:O,error:P}=y,N=s(x,A,w),B=g();H.useEffect(()=>{var V,z,ee,D;console.log(` [OrderBook-${t}] Raw data received:`,{exchange:x,symbol:A,market:w,rawOrderBook:N,hasData:!!N,dataKeys:N?Object.keys(N):null,bidsLength:((V=N==null?void 0:N.bids)==null?void 0:V.length)||0,asksLength:((z=N==null?void 0:N.asks)==null?void 0:z.length)||0,timestamp:N==null?void 0:N.timestamp,firstBid:(ee=N==null?void 0:N.bids)==null?void 0:ee[0],firstAsk:(D=N==null?void 0:N.asks)==null?void 0:D[0]})},[N,x,A,w,t]),B.find(V=>V.key.exchange===x&&V.key.symbol===A&&V.key.dataType==="orderbook"&&V.key.market===w);const E=b.useMemo(()=>{if(console.log(` [OrderBook-${t}] Processing orderbook data:`,{hasRawData:!!N,rawOrderBook:N}),!N)return console.log(` [OrderBook-${t}] No raw orderbook data`),null;try{if(!N.bids||!N.asks||!Array.isArray(N.bids)||!Array.isArray(N.asks))return console.warn(` [OrderBook-${t}] Invalid orderbook data format:`,{rawOrderBook:N,hasBids:!!N.bids,hasAsks:!!N.asks,bidsIsArray:Array.isArray(N.bids),asksIsArray:Array.isArray(N.asks),bidsType:typeof N.bids,asksType:typeof N.asks}),null;if(N.bids.length>0){const F=N.bids[0];console.log(` [OrderBook-${t}] Format sample - bid:`,{isArray:Array.isArray(F),type:typeof F,value:F,keys:F&&typeof F=="object"?Object.keys(F):null})}if(N.asks.length>0){const F=N.asks[0];console.log(` [OrderBook-${t}] Format sample - ask:`,{isArray:Array.isArray(F),type:typeof F,value:F,keys:F&&typeof F=="object"?Object.keys(F):null})}const V=F=>{if(Array.isArray(F)){const[Z,$]=F;return typeof Z!="number"||typeof $!="number"?(console.warn(` [OrderBook-${t}] Invalid orderbook array entry:`,{entry:F,price:Z,amount:$,priceType:typeof Z,amountType:typeof $}),null):{price:Z,amount:$,total:Z*$}}return!F||typeof F.price!="number"||typeof F.amount!="number"?(console.warn(` [OrderBook-${t}] Invalid orderbook object entry:`,{entry:F,hasPrice:"price"in F,hasAmount:"amount"in F,priceType:typeof F.price,amountType:typeof F.amount}),null):{price:F.price,amount:F.amount,total:F.price*F.amount}},z=N.bids.slice(0,S).map(V).filter(F=>!!F),ee=N.asks.slice(0,S).map(V).filter(F=>!!F);if(console.log(` [OrderBook-${t}] Processed entries:`,{originalBidsLength:N.bids.length,originalAsksLength:N.asks.length,processedBidsLength:z.length,processedAsksLength:ee.length,displayDepth:S,sampleBid:z[0],sampleAsk:ee[0]}),k){let F=0,Z=0;z.forEach($=>{F+=$.amount,$.cumulative=F}),ee.forEach($=>{Z+=$.amount,$.cumulative=Z})}const D={bids:z,asks:ee,timestamp:N.timestamp,spread:ee.length>0&&z.length>0?ee[0].price-z[0].price:0,spreadPercent:ee.length>0&&z.length>0?(ee[0].price-z[0].price)/z[0].price*100:0};return console.log(` [OrderBook-${t}] Processing completed successfully:`,{result:D,hasBids:D.bids.length>0,hasAsks:D.asks.length>0,spread:D.spread,spreadPercent:D.spreadPercent}),D}catch(V){return console.error(` [OrderBook-${t}] Error processing orderbook data:`,V),null}},[N,S,k,t]);b.useMemo(()=>{if(!E)return{bidVolume:0,askVolume:0,bidCount:0,askCount:0,totalVolume:0,bestBid:0,bestAsk:0};const V=E.bids.reduce((F,Z)=>F+Z.total,0),z=E.asks.reduce((F,Z)=>F+Z.total,0),ee=E.bids.length>0?E.bids[0].price:0,D=E.asks.length>0?E.asks[0].price:0;return{bidVolume:V,askVolume:z,bidCount:E.bids.length,askCount:E.asks.length,totalVolume:V+z,bestBid:ee,bestAsk:D}},[E]);const M=b.useRef(null);b.useEffect(()=>{if(!u){console.log(` [OrderBook-${t}] No active provider, skipping initialization`);return}const V={exchange:x,symbol:A,market:w};return(!M.current||M.current.exchange!==x||M.current.symbol!==A||M.current.market!==w)&&(console.log(` [OrderBook-${t}] Subscription parameters changed:`,{previous:M.current,current:V}),m(t,{isLoading:!0,error:null}),(async()=>{try{console.log(` [OrderBook-${t}] Initializing orderbook data via REST for ${x}:${w}:${A}`);const D=await a(x,A,w);console.log(` [OrderBook-${t}] REST initialization completed:`,{bids:D.bids.length,asks:D.asks.length,timestamp:D.timestamp});const F=`${e}-${t}`,Z=await i(F,x,A,"orderbook",void 0,w);Z.success?(m(t,{isSubscribed:!0,isLoading:!1,error:null}),console.log(` [OrderBook-${t}] WebSocket subscription started for ${x}:${w}:${A}`)):(m(t,{isSubscribed:!1,isLoading:!1,error:Z.error||"Subscription failed"}),console.error(` [OrderBook-${t}] WebSocket subscription failed:`,Z.error))}catch(D){console.error(` [OrderBook-${t}] REST initialization failed:`,D),m(t,{isLoading:!1,error:D instanceof Error?D.message:"Failed to load orderbook data"})}})(),M.current=V),()=>{if(M.current){const ee=`${e}-${t}`;o(ee,x,A,"orderbook",void 0,w),console.log(` [OrderBook-${t}] Cleaned up subscription for ${x}:${w}:${A}`)}}},[x,A,w,u,t,e,a,i,o,m]);const G=V=>V.toFixed(R),T=V=>V.toFixed(j),L=V=>V>=1e6?(V/1e6).toFixed(2)+"M":V>=1e3?(V/1e3).toFixed(2)+"K":V.toFixed(2),W=({asks:V})=>{const z=b.useRef(null),ee=Hi({count:V.length,getScrollElement:()=>z.current,estimateSize:()=>24,measureElement:void 0});return l.jsx("div",{ref:z,className:"flex-1 overflow-auto",children:l.jsx("div",{style:{height:ee.getTotalSize(),width:"100%",position:"relative"},children:ee.getVirtualItems().map(D=>{const F=V[V.length-1-D.index];return l.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"24px !important",transform:`translateY(${D.start}px)`},className:"grid grid-cols-3 gap-2 text-xs px-2 py-1 bg-red-50/20 hover:bg-red-50/30 dark:bg-red-900/20 dark:hover:bg-red-900/30 border-l-2 border-red-500 dark:border-red-400",children:[l.jsx("div",{className:"font-mono text-red-600 dark:text-red-400 leading-none",children:G(F.price)}),l.jsx("div",{className:"font-mono text-right text-terminal-text leading-none",children:T(F.amount)}),l.jsx("div",{className:"font-mono text-right text-terminal-muted leading-none",children:k?T(F.cumulative||0):L(F.total)})]},D.key)})})})},X=({bids:V})=>{const z=b.useRef(null),ee=Hi({count:V.length,getScrollElement:()=>z.current,estimateSize:()=>24,measureElement:void 0});return l.jsx("div",{ref:z,className:"flex-1 overflow-auto",children:l.jsx("div",{style:{height:ee.getTotalSize(),width:"100%",position:"relative"},children:ee.getVirtualItems().map(D=>{const F=V[D.index];return l.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"24px !important",transform:`translateY(${D.start}px)`},className:"grid grid-cols-3 gap-2 text-xs px-2 py-1 bg-green-50/20 hover:bg-green-50/30 dark:bg-green-900/20 dark:hover:bg-green-900/30 border-l-2 border-green-500 dark:border-green-400",children:[l.jsx("div",{className:"font-mono text-green-600 dark:text-green-400 leading-none",children:G(F.price)}),l.jsx("div",{className:"font-mono text-right text-terminal-text leading-none",children:T(F.amount)}),l.jsx("div",{className:"font-mono text-right text-terminal-muted leading-none",children:k?T(F.cumulative||0):L(F.total)})]},D.key)})})})};return l.jsx("div",{className:"w-full h-full flex flex-col",children:E?l.jsxs("div",{className:"flex-1 flex flex-col space-y-1",children:[(console.log(` [OrderBook-${t}] Render: Displaying orderbook data`,{bidsCount:E.bids.length,asksCount:E.asks.length,spread:E.spread,timestamp:E.timestamp}),null),l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs font-medium text-terminal-muted px-2 py-1 border-b border-terminal-border",children:[l.jsx("div",{children:"Price"}),l.jsx("div",{className:"text-right",children:"Volume"}),l.jsx("div",{className:"text-right",children:k?"Cumul.":"Total"})]}),l.jsx(W,{asks:E.asks}),l.jsxs("div",{className:"bg-terminal-accent p-2 text-center border-y border-terminal-border flex-shrink-0",children:[l.jsxs("div",{className:"text-xs text-terminal-text",children:["Spread: ",G(E.spread)]}),l.jsxs("div",{className:"text-xs text-terminal-muted",children:["(",E.spreadPercent.toFixed(4),"%)"]})]}),l.jsx(X,{bids:E.bids})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-terminal-muted",children:l.jsx("div",{className:"text-center",children:(console.log(` [OrderBook-${t}] Render: No processed data`,{isSubscribed:_,hasRawData:!!N,processedOrderBook:E}),_?"Waiting for data...":"Subscribe to receive orderbook data")})})})},KSe=e=>l.jsx(ff,{children:l.jsx(FSe,{...e})}),rR={isAggregatedTrades:!0,tradesLimit:500,isSubscribed:!1,isLoading:!1,error:null,showTableHeader:!1,showStats:!1},dD=ui((e,t)=>({widgets:{},getWidget:r=>{const{widgets:n}=t();return n[r]||{...rR}},updateWidget:(r,n)=>{e(i=>({widgets:{...i.widgets,[r]:{...i.widgets[r]||rR,...n}}}))},removeWidget:r=>{e(n=>{const{[r]:i,...o}=n.widgets;return{widgets:o}})}})),VSe=({dashboardId:e="default",widgetId:t="trades-widget-v2",selectedGroupId:r})=>{const{getTrades:n,subscribe:i,unsubscribe:o,initializeTradesData:s,getActiveSubscriptionsList:a,activeProviderId:c}=ut(),{getWidget:u,updateWidget:d}=dD(),g=u(t),{getGroupById:f,selectedGroupId:m,getTransparentGroup:v}=zr(),p=r||m,I=p?f(p):v(),h=I&&I.account&&I.exchange&&I.market&&I.tradingPair,y=(I==null?void 0:I.exchange)||"binance",C=(I==null?void 0:I.tradingPair)||"BTC/USDT",x=(I==null?void 0:I.market)||"spot",A=n(y,C,x),w=a();b.useEffect(()=>{console.log(` [TradesWidget] Store data for ${y}:${x}:${C} - ${A.length} trades`),A.length>0&&(console.log(` [TradesWidget] Store: First trade: ${JSON.stringify(A[0])}`),console.log(` [TradesWidget] Store: Last trade: ${JSON.stringify(A[A.length-1])}`))},[A.length,y,C,x]);const S=w.find(T=>T.key.exchange===y&&T.key.symbol===C&&T.key.dataType==="trades"&&T.key.market===x),[k,R]=b.useState(!1),j=b.useRef(null),[_]=b.useState({side:"all",minPrice:"",maxPrice:"",minAmount:"",maxAmount:""}),[O]=b.useState("timestamp"),[P]=b.useState("desc");b.useEffect(()=>{if(!h||!c)return;(async()=>{try{d(t,{isLoading:!0,error:null}),R(!1),console.log(` [TradesWidget] Loading initial trades via REST for ${y}:${x}:${C} (aggregated: ${g.isAggregatedTrades}, limit: ${g.tradesLimit})`);const L=await s(y,C,x,g.tradesLimit,g.isAggregatedTrades);L&&L.length>0?(R(!0),console.log(` [TradesWidget] Initial trades loaded via REST: ${L.length} trades`),console.log(` [TradesWidget] First trade: ${JSON.stringify(L[0])}`),console.log(` [TradesWidget] Last trade: ${JSON.stringify(L[L.length-1])}`)):(console.warn(" [TradesWidget] No initial trades received via REST"),R(!0)),d(t,{isLoading:!1})}catch(L){console.error(" [TradesWidget] Failed to load initial trades:",L),d(t,{error:L instanceof Error?L.message:"Failed to load trades",isLoading:!1}),R(!0)}})()},[h,y,C,x,g.isAggregatedTrades,g.tradesLimit,c,s,d,t]);const N=async()=>{if(!c||!h){d(t,{error:"No active provider or instrument selected"});return}try{d(t,{isLoading:!0,error:null});const T=`${e}-${t}`,L={isAggregated:g.isAggregatedTrades,tradesLimit:g.tradesLimit},W=await i(T,y,C,"trades",void 0,x,L);W.success?(d(t,{isSubscribed:!0,isLoading:!1}),j.current={exchange:y,symbol:C,market:x,isAggregated:g.isAggregatedTrades,tradesLimit:g.tradesLimit},console.log(` [TradesWidget] Subscribed to ${y}:${x}:${C} (aggregated: ${g.isAggregatedTrades}, limit: ${g.tradesLimit})`)):d(t,{error:W.error||"Subscription failed",isLoading:!1})}catch(T){d(t,{error:T instanceof Error?T.message:"Subscription failed",isLoading:!1})}};b.useEffect(()=>{c&&!g.isSubscribed&&k&&h&&(console.log(` [TradesWidget] Auto-subscribing to ${y}:${x}:${C}`),N())},[c,k,h]),b.useEffect(()=>{if(g.isSubscribed){const T=j.current;if(T&&(T.exchange!==y||T.symbol!==C||T.market!==x||T.isAggregated!==g.isAggregatedTrades||T.tradesLimit!==g.tradesLimit)){console.log(" [TradesWidget] Settings changed, resubscribing...");const W=`${e}-${t}`;o(W,T.exchange,T.symbol,"trades",void 0,T.market),setTimeout(()=>{N()},100)}}},[y,C,x,g.isAggregatedTrades,g.tradesLimit,g.isSubscribed]),b.useEffect(()=>()=>{const T=`${e}-${t}`;if(console.log(` [TradesWidget] Cleanup: unsubscribing from current settings ${y}:${x}:${C} (aggregated: ${g.isAggregatedTrades})`),o(T,y,C,"trades",void 0,x),j.current){const L=j.current;(L.exchange!==y||L.symbol!==C||L.market!==x||L.isAggregated!==g.isAggregatedTrades)&&(console.log(` [TradesWidget] Cleanup: also unsubscribing from previous settings ${L.exchange}:${L.market}:${L.symbol} (aggregated: ${L.isAggregated})`),o(T,L.exchange,L.symbol,"trades",void 0,L.market))}d(t,{isSubscribed:!1,isLoading:!1,error:null})},[e,t,y,C,x,g.isAggregatedTrades,o,d]);const B=b.useMemo(()=>{let T=[...A];if(_.side!=="all"&&(T=T.filter(W=>W.side===_.side)),_.minPrice){const W=parseFloat(_.minPrice);isNaN(W)||(T=T.filter(X=>X.price>=W))}if(_.maxPrice){const W=parseFloat(_.maxPrice);isNaN(W)||(T=T.filter(X=>X.price<=W))}if(_.minAmount){const W=parseFloat(_.minAmount);isNaN(W)||(T=T.filter(X=>X.amount>=W))}if(_.maxAmount){const W=parseFloat(_.maxAmount);isNaN(W)||(T=T.filter(X=>X.amount<=W))}T.sort((W,X)=>{let V=0;switch(O){case"timestamp":V=W.timestamp-X.timestamp;break;case"price":V=W.price-X.price;break;case"amount":V=W.amount-X.amount;break}return P==="asc"?V:-V});const L=g.tradesLimit;return L>0&&(T=T.slice(0,L)),T},[A,_,O,P,g.tradesLimit]),E=b.useMemo(()=>{if(B.length===0)return{totalAmount:0,totalVolume:0,avgPrice:0,buyCount:0,sellCount:0};const T=B.reduce((z,ee)=>z+ee.amount,0),L=B.reduce((z,ee)=>z+ee.price*ee.amount,0),W=L/T,X=B.filter(z=>z.side==="buy").length,V=B.filter(z=>z.side==="sell").length;return{totalAmount:T,totalVolume:L,avgPrice:W,buyCount:X,sellCount:V}},[B]),M=T=>T.toFixed(8).replace(/\.?0+$/,""),G=T=>T>=1e6?(T/1e6).toFixed(2)+"M":T>=1e3?(T/1e3).toFixed(2)+"K":T.toFixed(2);return h?l.jsxs("div",{className:"w-full h-full flex flex-col",children:[g.error&&l.jsx("div",{className:"text-red-500 bg-red-50 dark:bg-red-950/30 p-3 rounded-lg border border-red-200 dark:border-red-800 text-sm",children:g.error}),l.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:l.jsx(zSe,{trades:B,currentSubscription:S,showTableHeader:g.showTableHeader})}),g.showStats&&B.length>0&&l.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs flex-shrink-0 mt-2 border-t border-gray-200 dark:border-white/10 pt-2",children:[l.jsxs("div",{className:"bg-terminal-widget p-2 rounded border border-terminal-border",children:[l.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[l.jsx(lP,{className:"h-3 w-3"}),l.jsx("span",{children:"Volume:"})]}),l.jsx("div",{className:"font-mono text-gray-900 dark:text-gray-100",children:M(E.totalAmount)})]}),l.jsxs("div",{className:"bg-terminal-widget p-2 rounded border border-terminal-border",children:[l.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[l.jsx(tF,{className:"h-3 w-3"}),l.jsx("span",{children:"Total:"})]}),l.jsx("div",{className:"font-mono text-gray-900 dark:text-gray-100",children:G(E.totalVolume)})]}),l.jsxs("div",{className:"bg-terminal-widget p-2 rounded border border-terminal-border",children:[l.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[l.jsx(mr,{className:"h-3 w-3"}),l.jsx("span",{children:"Buys:"})]}),l.jsx("div",{className:"font-mono text-gray-900 dark:text-gray-100",children:E.buyCount})]}),l.jsxs("div",{className:"bg-terminal-widget p-2 rounded border border-terminal-border",children:[l.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400",children:[l.jsx(Ui,{className:"h-3 w-3"}),l.jsx("span",{children:"Sells:"})]}),l.jsx("div",{className:"font-mono text-gray-900 dark:text-gray-100",children:E.sellCount})]})]})]}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-center text-terminal-muted",children:l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-medium mb-2",children:"No instrument selected"}),l.jsx("div",{className:"text-sm",children:"Please select a trading instrument in the selector"})]})})},zSe=({trades:e,currentSubscription:t,showTableHeader:r})=>{const n=b.useRef(null),i=Hi({count:e.length,getScrollElement:()=>n.current,estimateSize:()=>20,overscan:5,measureElement:void 0}),o=a=>new Date(a).toLocaleTimeString(),s=a=>a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return e.length===0?l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 dark:text-gray-400",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-medium mb-2",children:"No trades available"}),l.jsx("div",{className:"text-sm",children:t!=null&&t.isActive?"Waiting for trade data...":"No active subscription"})]})}):l.jsxs("div",{className:"w-full h-full flex flex-col",children:[r&&l.jsxs("div",{className:"grid grid-cols-4 text-xs font-medium text-gray-700 dark:text-gray-300 select-none py-1 px-2 border-b border-gray-200/50 dark:border-white/10 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(io,{className:"h-3 w-3"}),l.jsx("span",{children:"Time"})]}),l.jsx("div",{className:"text-right",children:"Price"}),l.jsx("div",{className:"text-right",children:"Size"}),l.jsx("div",{className:"text-right",children:"Total"})]}),l.jsx("div",{ref:n,className:"overflow-auto flex-1",style:{minHeight:0},children:l.jsx("div",{style:{height:i.getTotalSize(),width:"100%",position:"relative"},children:i.getVirtualItems().map(a=>{const c=e[a.index],u=c.side==="buy",d=c.side==="sell";return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"20px !important",transform:`translateY(${a.start}px)`},children:l.jsxs("div",{className:"grid grid-cols-4 text-xs font-mono px-2 hover:bg-gray-50 dark:hover:bg-white/5",style:{height:"20px !important",lineHeight:"20px !important",minHeight:"20px !important",maxHeight:"20px !important",backgroundColor:u?"hsla(134, 61%, 41%, 0.1)":d?"hsla(0, 84%, 60%, 0.1)":"transparent"},children:[l.jsx("div",{className:"text-gray-600 dark:text-gray-400 flex items-center",children:o(c.timestamp)}),l.jsx("div",{className:`text-right flex items-center justify-end ${u?"text-green-600 dark:text-green-400":d?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-gray-100"}`,children:s(c.price)}),l.jsx("div",{className:"text-right text-gray-900 dark:text-gray-100 flex items-center justify-end",children:s(c.amount)}),l.jsx("div",{className:`text-right flex items-center justify-end ${u?"text-green-600 dark:text-green-400":d?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:s(c.price*c.amount)})]})},a.index)})})})]})},YSe=e=>l.jsx(ff,{children:l.jsx(VSe,{...e})});var USe="Label",gD=b.forwardRef((e,t)=>l.jsx(Ug.label,{...e,ref:t,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));gD.displayName=USe;var fD=gD;const JSe=Xg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ue=b.forwardRef(({className:e,...t},r)=>l.jsx(fD,{ref:r,className:de(JSe(),e),...t}));ue.displayName=fD.displayName;function D1(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Iy="Switch",[QSe]=Wi(Iy),[qSe,eke]=QSe(Iy),hD=b.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:o,required:s,disabled:a,value:c="on",onCheckedChange:u,form:d,...g}=e,[f,m]=b.useState(null),v=Ye(t,C=>m(C)),p=b.useRef(!1),I=f?d||!!f.closest("form"):!0,[h,y]=Ys({prop:i,defaultProp:o??!1,onChange:u,caller:Iy});return l.jsxs(qSe,{scope:r,checked:h,disabled:a,children:[l.jsx(Te.button,{type:"button",role:"switch","aria-checked":h,"aria-required":s,"data-state":yD(h),"data-disabled":a?"":void 0,disabled:a,value:c,...g,ref:v,onClick:we(e.onClick,C=>{y(x=>!x),I&&(p.current=C.isPropagationStopped(),p.current||C.stopPropagation())})}),I&&l.jsx(ID,{control:f,bubbles:!p.current,name:n,value:c,checked:h,required:s,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});hD.displayName=Iy;var pD="SwitchThumb",mD=b.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,i=eke(pD,r);return l.jsx(Te.span,{"data-state":yD(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});mD.displayName=pD;var tke="SwitchBubbleInput",ID=b.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...i},o)=>{const s=b.useRef(null),a=Ye(s,o),c=D1(r),u=YA(t);return b.useEffect(()=>{const d=s.current;if(!d)return;const g=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==r&&m){const v=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(v)}},[c,r,n]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:a,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ID.displayName=tke;function yD(e){return e?"checked":"unchecked"}var CD=hD,rke=mD;const ji=b.forwardRef(({className:e,...t},r)=>l.jsx(CD,{className:de("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:l.jsx(rke,{className:de("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ji.displayName=CD.displayName;const nke=()=>{const{dataFetchSettings:e,setDataFetchMethod:t,setRestInterval:r,getActiveSubscriptionsList:n}=ut(),[i,o]=b.useState(e.restIntervals.trades.toString()),[s,a]=b.useState(e.restIntervals.candles.toString()),[c,u]=b.useState(e.restIntervals.orderbook.toString()),d=n(),g=async h=>{console.log(` Changing data fetch method to: ${h}...`),await t(h),console.log(` Data fetch method successfully changed to: ${h}`)},f=(h,y)=>{const C=parseInt(y);!isNaN(C)&&C>0&&(r(h,C),console.log(` ${h} interval set to ${C}ms`))},m=()=>{f("trades",i)},v=()=>{f("candles",s)},p=()=>{f("orderbook",c)},I=h=>h<1e3?`${h}ms`:h<6e4?`${h/1e3}s`:`${h/6e4}m`;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(ue,{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Data Fetching Method"}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(ji,{id:"websocket-mode",checked:e.method==="websocket",onCheckedChange:h=>g(h?"websocket":"rest")}),l.jsx(ue,{htmlFor:"websocket-mode",className:"flex items-center gap-2 text-gray-900 dark:text-gray-100",children:e.method==="websocket"?l.jsxs(l.Fragment,{children:[l.jsx(Kg,{className:"h-4 w-4 text-green-500 dark:text-green-400"}),"WebSocket (real-time)"]}):l.jsxs(l.Fragment,{children:[l.jsx(sp,{className:"h-4 w-4 text-orange-500 dark:text-orange-400"}),"REST (interval requests)"]})})]})}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-blue-50 dark:bg-blue-950/30 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:e.method==="websocket"?"Real-time data fetching via WebSocket connections. Automatically falls back to REST if WebSocket is not supported.":"Data fetching via REST API with configurable intervals. Suitable for debugging and exchanges without WebSocket support."})]}),l.jsx(Ir,{}),e.method==="rest"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(io,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),l.jsx(ue,{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"REST Request Intervals"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(zm,{className:"h-4 w-4 text-blue-500 dark:text-blue-400"}),l.jsx(ue,{className:"text-sm text-gray-800 dark:text-gray-200",children:"Trades"}),l.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Current: ",I(e.restIntervals.trades)]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Pe,{type:"number",placeholder:"Interval in milliseconds",value:i,onChange:h=>o(h.target.value),className:"flex-1",min:"100",step:"100"}),l.jsx(ie,{onClick:m,size:"sm",children:"Apply"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(J5,{className:"h-4 w-4 text-green-500 dark:text-green-400"}),l.jsx(ue,{className:"text-sm text-gray-800 dark:text-gray-200",children:"Candles"}),l.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Current: ",I(e.restIntervals.candles)]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Pe,{type:"number",placeholder:"Interval in milliseconds",value:s,onChange:h=>a(h.target.value),className:"flex-1",min:"100",step:"100"}),l.jsx(ie,{onClick:v,size:"sm",children:"Apply"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Eo,{className:"h-4 w-4 text-purple-500 dark:text-purple-400"}),l.jsx(ue,{className:"text-sm text-gray-800 dark:text-gray-200",children:"Order Book"}),l.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Current: ",I(e.restIntervals.orderbook)]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Pe,{type:"number",placeholder:"Interval in milliseconds",value:c,onChange:h=>u(h.target.value),className:"flex-1",min:"100",step:"100"}),l.jsx(ie,{onClick:p,size:"sm",children:"Apply"})]})]}),l.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300 bg-yellow-50 dark:bg-yellow-950/30 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[l.jsx("span",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:" Recommendations:"})," ",l.jsx("span",{className:"text-yellow-700 dark:text-yellow-300",children:"Trades 500-1000ms, Candles 5000ms, OrderBook 200-500ms. Too frequent requests may lead to API rate limit violations."})]})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(ue,{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Active Subscriptions"}),l.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Total active subscriptions: ",l.jsx("span",{className:"font-mono",children:d.length})]}),d.length>0&&l.jsx("div",{className:"space-y-3 max-h-32 overflow-y-auto",children:d.map((h,y)=>l.jsxs("div",{className:"flex items-center justify-between text-xs bg-gray-50 dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${h.isActive?"bg-green-500":"bg-gray-400"}`}),l.jsxs("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:[h.key.exchange,":",h.key.symbol,":",h.key.dataType]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[h.method==="websocket"?"":""," ",h.method]}),l.jsxs("span",{className:"font-mono text-blue-600 dark:text-blue-400",children:[h.subscriberCount," subscriber",h.subscriberCount!==1?"s":""]})]})]},y))}),d.length===0&&l.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 italic text-center py-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:"No active subscriptions. Add data widgets to create subscriptions."})]}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 pt-3 border-t border-gray-200 dark:border-gray-700",children:" Subscriptions are automatically deduplicated - if multiple widgets request the same data, only one connection is created."})]})},ike=()=>l.jsx(ff,{children:l.jsx(nke,{})}),oke=()=>{const{subscribe:e,unsubscribe:t,getTrades:r,getActiveSubscriptionsList:n,dataFetchSettings:i}=ut(),[o,s]=b.useState("binance"),[a,c]=b.useState("BTC/USDT"),[u,d]=b.useState([{id:"demo-1",name:"Subscriber A",isActive:!1,color:"bg-blue-100 text-blue-800"},{id:"demo-2",name:"Subscriber B",isActive:!1,color:"bg-green-100 text-green-800"},{id:"demo-3",name:"Subscriber C",isActive:!1,color:"bg-purple-100 text-purple-800"},{id:"demo-4",name:"Subscriber D",isActive:!1,color:"bg-orange-100 text-orange-800"}]),g=n(),f=r(o,a),m=g.find(C=>C.key.exchange===o&&C.key.symbol===a&&C.key.dataType==="trades"),v=async C=>{const x=u.find(A=>A.id===C);x&&(x.isActive?t(C,o,a,"trades"):await e(C,o,a,"trades"),d(A=>A.map(w=>w.id===C?{...w,isActive:!w.isActive}:w)))},p=async()=>{if(u.every(x=>x.isActive)){for(const x of u)x.isActive&&t(x.id,o,a,"trades");d(x=>x.map(A=>({...A,isActive:!1})))}else{for(const x of u)x.isActive||await e(x.id,o,a,"trades");d(x=>x.map(A=>({...A,isActive:!0})))}},I=u.filter(C=>C.isActive).length,h=u.every(C=>C.isActive),y=u.some(C=>C.isActive);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(ue,{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Data settings"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-gray-600 dark:text-gray-400",children:"Exchange"}),l.jsx(Pe,{value:o,onChange:C=>s(C.target.value),placeholder:"binance",disabled:y,className:"mt-1"})]}),l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-gray-600 dark:text-gray-400",children:"Trading pair"}),l.jsx(Pe,{value:a,onChange:C=>c(C.target.value),placeholder:"BTC/USDT",disabled:y,className:"mt-1"})]})]}),l.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300 bg-blue-50 dark:bg-blue-950/50 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[" Fetch method: ",l.jsx("strong",{children:i.method==="websocket"?"WebSocket":"REST"}),i.method==="rest"&&l.jsxs("span",{children:[" (interval: ",i.restIntervals.trades,"ms)"]})]})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(ue,{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Subscribers"}),l.jsx(ie,{onClick:p,size:"sm",variant:h?"destructive":"default",children:h?l.jsxs(l.Fragment,{children:[l.jsx(pF,{className:"h-4 w-4 mr-1"}),"Unsubscribe all"]}):l.jsxs(l.Fragment,{children:[l.jsx(Jm,{className:"h-4 w-4 mr-1"}),"Subscribe all"]})})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map(C=>l.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${C.isActive?"border-green-500 bg-green-50 dark:bg-green-950/30 dark:border-green-400":"border-gray-200 bg-gray-50 dark:bg-gray-800 dark:border-gray-700"}`,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${C.isActive?"bg-green-500":"bg-gray-400"}`}),l.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:C.name})]}),l.jsx(ie,{onClick:()=>v(C.id),size:"sm",variant:C.isActive?"destructive":"outline",children:C.isActive?"Stop":"Start"})]}),l.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["ID: ",C.id]})]},C.id))})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(ue,{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Deduplication statistics"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Md,{className:"h-4 w-4 text-blue-500 dark:text-blue-400"}),l.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Active subscribers"})]}),l.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:I}),l.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:["of ",u.length," total"]})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-950/30 p-3 rounded-lg border border-green-200 dark:border-green-800",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Kg,{className:"h-4 w-4 text-green-500 dark:text-green-400"}),l.jsx("span",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Real connections"})]}),l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:m?1:0}),l.jsx("div",{className:"text-xs text-green-700 dark:text-green-300",children:m?"Shared connection":"No connection"})]})]}),m&&l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Eo,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),l.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Connection information"})]}),l.jsxs("div",{className:"text-xs space-y-1 text-gray-700 dark:text-gray-300",children:[l.jsxs("div",{children:[" Key: ",l.jsxs("span",{className:"font-mono",children:[o,":",a,":trades"]})]}),l.jsxs("div",{children:[" Subscribers: ",l.jsx("span",{className:"font-mono",children:m.subscriberCount})]}),l.jsxs("div",{children:[" Method: ",l.jsx("span",{className:"font-mono",children:m.method})]}),l.jsxs("div",{children:[" Status: ",l.jsx("span",{className:"font-mono",children:m.isActive?"Active":"Inactive"})]}),l.jsxs("div",{children:[" Last update: ",l.jsx("span",{className:"font-mono",children:m.lastUpdate?new Date(m.lastUpdate).toLocaleTimeString():"Never"})]})]})]}),l.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300 bg-yellow-50 dark:bg-yellow-950/30 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[l.jsx("strong",{className:"text-yellow-800 dark:text-yellow-200",children:" Deduplication principle:"}),l.jsx("br",{}),l.jsx("span",{className:"text-yellow-700 dark:text-yellow-300",children:"No matter how many subscribers request the same data  the system creates only one connection to the API. This saves server resources and doesn't exceed API limits."})]})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs(ue,{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["Latest data (",f.length," trades)"]}),f.length>0?l.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:f.slice(0,5).map((C,x)=>l.jsxs("div",{className:"flex justify-between text-xs bg-gray-50 dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[l.jsx("span",{className:`font-mono font-medium ${C.side==="buy"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:C.side.toUpperCase()}),l.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:C.price}),l.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:C.amount}),l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(C.timestamp).toLocaleTimeString()})]},x))}):l.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-6 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:y?"Waiting for data...":"Activate subscribers to receive data"})]})]})},ske=()=>l.jsx(ff,{children:l.jsx(oke,{})});var ake=[" ","Enter","ArrowUp","ArrowDown"],lke=[" ","Enter"],il="Select",[yy,Cy,cke]=RA(il),[xu]=Wi(il,[cke,rI]),vy=rI(),[uke,fa]=xu(il),[dke,gke]=xu(il),vD=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:o,value:s,defaultValue:a,onValueChange:c,dir:u,name:d,autoComplete:g,disabled:f,required:m,form:v}=e,p=vy(t),[I,h]=b.useState(null),[y,C]=b.useState(null),[x,A]=b.useState(!1),w=II(u),[S,k]=Ys({prop:n,defaultProp:i??!1,onChange:o,caller:il}),[R,j]=Ys({prop:s,defaultProp:a,onChange:c,caller:il}),_=b.useRef(null),O=I?v||!!I.closest("form"):!0,[P,N]=b.useState(new Set),B=Array.from(P).map(E=>E.props.value).join(";");return l.jsx(ez,{...p,children:l.jsxs(uke,{required:m,scope:t,trigger:I,onTriggerChange:h,valueNode:y,onValueNodeChange:C,valueNodeHasChildren:x,onValueNodeHasChildrenChange:A,contentId:$s(),value:R,onValueChange:j,open:S,onOpenChange:k,dir:w,triggerPointerDownPosRef:_,disabled:f,children:[l.jsx(yy.Provider,{scope:t,children:l.jsx(dke,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback(E=>{N(M=>new Set(M).add(E))},[]),onNativeOptionRemove:b.useCallback(E=>{N(M=>{const G=new Set(M);return G.delete(E),G})},[]),children:r})}),O?l.jsxs(XD,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:g,value:R,onChange:E=>j(E.target.value),disabled:f,form:v,children:[R===void 0?l.jsx("option",{value:""}):null,Array.from(P)]},B):null]})})};vD.displayName=il;var bD="SelectTrigger",xD=b.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,o=vy(r),s=fa(bD,r),a=s.disabled||n,c=Ye(t,s.onTriggerChange),u=Cy(r),d=b.useRef("touch"),[g,f,m]=KD(p=>{const I=u().filter(C=>!C.disabled),h=I.find(C=>C.value===s.value),y=VD(I,p,h);y!==void 0&&s.onValueChange(y.value)}),v=p=>{a||(s.onOpenChange(!0),m()),p&&(s.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return l.jsx(WP,{asChild:!0,...o,children:l.jsx(Te.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":FD(s.value)?"":void 0,...i,ref:c,onClick:we(i.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&v(p)}),onPointerDown:we(i.onPointerDown,p=>{d.current=p.pointerType;const I=p.target;I.hasPointerCapture(p.pointerId)&&I.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:we(i.onKeyDown,p=>{const I=g.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(I&&p.key===" ")&&ake.includes(p.key)&&(v(),p.preventDefault())})})})});xD.displayName=bD;var AD="SelectValue",wD=b.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:o,placeholder:s="",...a}=e,c=fa(AD,r),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,g=Ye(t,c.onValueNodeChange);return er(()=>{u(d)},[u,d]),l.jsx(Te.span,{...a,ref:g,style:{pointerEvents:"none"},children:FD(c.value)?l.jsx(l.Fragment,{children:s}):o})});wD.displayName=AD;var fke="SelectIcon",SD=b.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return l.jsx(Te.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});SD.displayName=fke;var hke="SelectPortal",kD=e=>l.jsx(Fm,{asChild:!0,...e});kD.displayName=hke;var ol="SelectContent",BD=b.forwardRef((e,t)=>{const r=fa(ol,e.__scopeSelect),[n,i]=b.useState();if(er(()=>{i(new DocumentFragment)},[]),!r.open){const o=n;return o?Li.createPortal(l.jsx(ND,{scope:e.__scopeSelect,children:l.jsx(yy.Slot,{scope:e.__scopeSelect,children:l.jsx("div",{children:e.children})})}),o):null}return l.jsx(jD,{...e,ref:t})});BD.displayName=ol;var bi=10,[ND,ha]=xu(ol),pke="SelectContentImpl",mke=Gd("SelectContent.RemoveScroll"),jD=b.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:g,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:p,avoidCollisions:I,...h}=e,y=fa(ol,r),[C,x]=b.useState(null),[A,w]=b.useState(null),S=Ye(t,F=>x(F)),[k,R]=b.useState(null),[j,_]=b.useState(null),O=Cy(r),[P,N]=b.useState(!1),B=b.useRef(!1);b.useEffect(()=>{if(C)return oM(C)},[C]),U_();const E=b.useCallback(F=>{const[Z,...$]=O().map(K=>K.ref.current),[J]=$.slice(-1),U=document.activeElement;for(const K of F)if(K===U||(K==null||K.scrollIntoView({block:"nearest"}),K===Z&&A&&(A.scrollTop=0),K===J&&A&&(A.scrollTop=A.scrollHeight),K==null||K.focus(),document.activeElement!==U))return},[O,A]),M=b.useCallback(()=>E([k,C]),[E,k,C]);b.useEffect(()=>{P&&M()},[P,M]);const{onOpenChange:G,triggerPointerDownPosRef:T}=y;b.useEffect(()=>{if(C){let F={x:0,y:0};const Z=J=>{var U,K;F={x:Math.abs(Math.round(J.pageX)-(((U=T.current)==null?void 0:U.x)??0)),y:Math.abs(Math.round(J.pageY)-(((K=T.current)==null?void 0:K.y)??0))}},$=J=>{F.x<=10&&F.y<=10?J.preventDefault():C.contains(J.target)||G(!1),document.removeEventListener("pointermove",Z),T.current=null};return T.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",$,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",$,{capture:!0})}}},[C,G,T]),b.useEffect(()=>{const F=()=>G(!1);return window.addEventListener("blur",F),window.addEventListener("resize",F),()=>{window.removeEventListener("blur",F),window.removeEventListener("resize",F)}},[G]);const[L,W]=KD(F=>{const Z=O().filter(U=>!U.disabled),$=Z.find(U=>U.ref.current===document.activeElement),J=VD(Z,F,$);J&&setTimeout(()=>J.ref.current.focus())}),X=b.useCallback((F,Z,$)=>{const J=!B.current&&!$;(y.value!==void 0&&y.value===Z||J)&&(R(F),J&&(B.current=!0))},[y.value]),V=b.useCallback(()=>C==null?void 0:C.focus(),[C]),z=b.useCallback((F,Z,$)=>{const J=!B.current&&!$;(y.value!==void 0&&y.value===Z||J)&&_(F)},[y.value]),ee=n==="popper"?Tx:TD,D=ee===Tx?{side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:g,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:p,avoidCollisions:I}:{};return l.jsx(ND,{scope:r,content:C,viewport:A,onViewportChange:w,itemRefCallback:X,selectedItem:k,onItemLeave:V,itemTextRefCallback:z,focusSelectedItem:M,selectedItemText:j,position:n,isPositioned:P,searchRef:L,children:l.jsx(hw,{as:mke,allowPinchZoom:!0,children:l.jsx(fw,{asChild:!0,trapped:y.open,onMountAutoFocus:F=>{F.preventDefault()},onUnmountAutoFocus:we(i,F=>{var Z;(Z=y.trigger)==null||Z.focus({preventScroll:!0}),F.preventDefault()}),children:l.jsx(Dg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:F=>F.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:l.jsx(ee,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:F=>F.preventDefault(),...h,...D,onPlaced:()=>N(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...h.style},onKeyDown:we(h.onKeyDown,F=>{const Z=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!Z&&F.key.length===1&&W(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let J=O().filter(U=>!U.disabled).map(U=>U.ref.current);if(["ArrowUp","End"].includes(F.key)&&(J=J.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const U=F.target,K=J.indexOf(U);J=J.slice(K+1)}setTimeout(()=>E(J)),F.preventDefault()}})})})})})})});jD.displayName=pke;var Ike="SelectItemAlignedPosition",TD=b.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,o=fa(ol,r),s=ha(ol,r),[a,c]=b.useState(null),[u,d]=b.useState(null),g=Ye(t,S=>d(S)),f=Cy(r),m=b.useRef(!1),v=b.useRef(!0),{viewport:p,selectedItem:I,selectedItemText:h,focusSelectedItem:y}=s,C=b.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&u&&p&&I&&h){const S=o.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),R=o.valueNode.getBoundingClientRect(),j=h.getBoundingClientRect();if(o.dir!=="rtl"){const U=j.left-k.left,K=R.left-U,re=S.left-K,ce=S.width+re,Me=Math.max(ce,k.width),Ee=window.innerWidth-bi,Ke=eb(K,[bi,Math.max(bi,Ee-Me)]);a.style.minWidth=ce+"px",a.style.left=Ke+"px"}else{const U=k.right-j.right,K=window.innerWidth-R.right-U,re=window.innerWidth-S.right-K,ce=S.width+re,Me=Math.max(ce,k.width),Ee=window.innerWidth-bi,Ke=eb(K,[bi,Math.max(bi,Ee-Me)]);a.style.minWidth=ce+"px",a.style.right=Ke+"px"}const _=f(),O=window.innerHeight-bi*2,P=p.scrollHeight,N=window.getComputedStyle(u),B=parseInt(N.borderTopWidth,10),E=parseInt(N.paddingTop,10),M=parseInt(N.borderBottomWidth,10),G=parseInt(N.paddingBottom,10),T=B+E+P+G+M,L=Math.min(I.offsetHeight*5,T),W=window.getComputedStyle(p),X=parseInt(W.paddingTop,10),V=parseInt(W.paddingBottom,10),z=S.top+S.height/2-bi,ee=O-z,D=I.offsetHeight/2,F=I.offsetTop+D,Z=B+E+F,$=T-Z;if(Z<=z){const U=_.length>0&&I===_[_.length-1].ref.current;a.style.bottom="0px";const K=u.clientHeight-p.offsetTop-p.offsetHeight,re=Math.max(ee,D+(U?V:0)+K+M),ce=Z+re;a.style.height=ce+"px"}else{const U=_.length>0&&I===_[0].ref.current;a.style.top="0px";const re=Math.max(z,B+p.offsetTop+(U?X:0)+D)+$;a.style.height=re+"px",p.scrollTop=Z-z+p.offsetTop}a.style.margin=`${bi}px 0`,a.style.minHeight=L+"px",a.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[f,o.trigger,o.valueNode,a,u,p,I,h,o.dir,n]);er(()=>C(),[C]);const[x,A]=b.useState();er(()=>{u&&A(window.getComputedStyle(u).zIndex)},[u]);const w=b.useCallback(S=>{S&&v.current===!0&&(C(),y==null||y(),v.current=!1)},[C,y]);return l.jsx(Cke,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:w,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:l.jsx(Te.div,{...i,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});TD.displayName=Ike;var yke="SelectPopperPosition",Tx=b.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=bi,...o}=e,s=vy(r);return l.jsx(DP,{...s,...o,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Tx.displayName=yke;var[Cke,$1]=xu(ol,{}),Ex="SelectViewport",ED=b.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,o=ha(Ex,r),s=$1(Ex,r),a=Ye(t,o.onViewportChange),c=b.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),l.jsx(yy.Slot,{scope:r,children:l.jsx(Te.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:we(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:f}=s;if(f!=null&&f.current&&g){const m=Math.abs(c.current-d.scrollTop);if(m>0){const v=window.innerHeight-bi*2,p=parseFloat(g.style.minHeight),I=parseFloat(g.style.height),h=Math.max(p,I);if(h<v){const y=h+m,C=Math.min(v,y),x=y-C;g.style.height=C+"px",g.style.bottom==="0px"&&(d.scrollTop=x>0?x:0,g.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});ED.displayName=Ex;var RD="SelectGroup",[vke,bke]=xu(RD),xke=b.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=$s();return l.jsx(vke,{scope:r,id:i,children:l.jsx(Te.div,{role:"group","aria-labelledby":i,...n,ref:t})})});xke.displayName=RD;var OD="SelectLabel",GD=b.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=bke(OD,r);return l.jsx(Te.div,{id:i.id,...n,ref:t})});GD.displayName=OD;var Bm="SelectItem",[Ake,PD]=xu(Bm),_D=b.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:o,...s}=e,a=fa(Bm,r),c=ha(Bm,r),u=a.value===n,[d,g]=b.useState(o??""),[f,m]=b.useState(!1),v=Ye(t,y=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,y,n,i)}),p=$s(),I=b.useRef("touch"),h=()=>{i||(a.onValueChange(n),a.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(Ake,{scope:r,value:n,disabled:i,textId:p,isSelected:u,onItemTextChange:b.useCallback(y=>{g(C=>C||((y==null?void 0:y.textContent)??"").trim())},[]),children:l.jsx(yy.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:l.jsx(Te.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:v,onFocus:we(s.onFocus,()=>m(!0)),onBlur:we(s.onBlur,()=>m(!1)),onClick:we(s.onClick,()=>{I.current!=="mouse"&&h()}),onPointerUp:we(s.onPointerUp,()=>{I.current==="mouse"&&h()}),onPointerDown:we(s.onPointerDown,y=>{I.current=y.pointerType}),onPointerMove:we(s.onPointerMove,y=>{var C;I.current=y.pointerType,i?(C=c.onItemLeave)==null||C.call(c):I.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:we(s.onPointerLeave,y=>{var C;y.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:we(s.onKeyDown,y=>{var x;((x=c.searchRef)==null?void 0:x.current)!==""&&y.key===" "||(lke.includes(y.key)&&h(),y.key===" "&&y.preventDefault())})})})})});_D.displayName=Bm;var ed="SelectItemText",MD=b.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...o}=e,s=fa(ed,r),a=ha(ed,r),c=PD(ed,r),u=gke(ed,r),[d,g]=b.useState(null),f=Ye(t,h=>g(h),c.onItemTextChange,h=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,h,c.value,c.disabled)}),m=d==null?void 0:d.textContent,v=b.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:I}=u;return er(()=>(p(v),()=>I(v)),[p,I,v]),l.jsxs(l.Fragment,{children:[l.jsx(Te.span,{id:c.textId,...o,ref:f}),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Li.createPortal(o.children,s.valueNode):null]})});MD.displayName=ed;var ZD="SelectItemIndicator",HD=b.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return PD(ZD,r).isSelected?l.jsx(Te.span,{"aria-hidden":!0,...n,ref:t}):null});HD.displayName=ZD;var Rx="SelectScrollUpButton",LD=b.forwardRef((e,t)=>{const r=ha(Rx,e.__scopeSelect),n=$1(Rx,e.__scopeSelect),[i,o]=b.useState(!1),s=Ye(t,n.onScrollButtonChange);return er(()=>{if(r.viewport&&r.isPositioned){let a=function(){const u=c.scrollTop>0;o(u)};const c=r.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),i?l.jsx(DD,{...e,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=r;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});LD.displayName=Rx;var Ox="SelectScrollDownButton",WD=b.forwardRef((e,t)=>{const r=ha(Ox,e.__scopeSelect),n=$1(Ox,e.__scopeSelect),[i,o]=b.useState(!1),s=Ye(t,n.onScrollButtonChange);return er(()=>{if(r.viewport&&r.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=r.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),i?l.jsx(DD,{...e,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=r;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});WD.displayName=Ox;var DD=b.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,o=ha("SelectScrollButton",r),s=b.useRef(null),a=Cy(r),c=b.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),er(()=>{var d;const u=a().find(g=>g.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),l.jsx(Te.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:we(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(n,50))}),onPointerMove:we(i.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),s.current===null&&(s.current=window.setInterval(n,50))}),onPointerLeave:we(i.onPointerLeave,()=>{c()})})}),wke="SelectSeparator",$D=b.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return l.jsx(Te.div,{"aria-hidden":!0,...n,ref:t})});$D.displayName=wke;var Gx="SelectArrow",Ske=b.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=vy(r),o=fa(Gx,r),s=ha(Gx,r);return o.open&&s.position==="popper"?l.jsx($P,{...i,...n,ref:t}):null});Ske.displayName=Gx;var kke="SelectBubbleInput",XD=b.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const i=b.useRef(null),o=Ye(n,i),s=D1(t);return b.useEffect(()=>{const a=i.current;if(!a)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==t&&d){const g=new Event("change",{bubbles:!0});d.call(a,t),a.dispatchEvent(g)}},[s,t]),l.jsx(Te.select,{...r,style:{..._G,...r.style},ref:o,defaultValue:t})});XD.displayName=kke;function FD(e){return e===""||e===void 0}function KD(e){const t=nr(e),r=b.useRef(""),n=b.useRef(0),i=b.useCallback(s=>{const a=r.current+s;t(a),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(a)},[t]),o=b.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,o]}function VD(e,t,r){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let s=Bke(e,Math.max(o,0));i.length===1&&(s=s.filter(u=>u!==r));const c=s.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function Bke(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Nke=vD,zD=xD,jke=wD,Tke=SD,Eke=kD,YD=BD,Rke=ED,UD=GD,JD=_D,Oke=MD,Gke=HD,QD=LD,qD=WD,e$=$D;const Rn=Nke,On=jke,hn=b.forwardRef(({className:e,children:t,...r},n)=>l.jsxs(zD,{ref:n,className:de("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,l.jsx(Tke,{asChild:!0,children:l.jsx(Vr,{className:"h-4 w-4 opacity-50"})})]}));hn.displayName=zD.displayName;const t$=b.forwardRef(({className:e,...t},r)=>l.jsx(QD,{ref:r,className:de("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(oP,{className:"h-4 w-4"})}));t$.displayName=QD.displayName;const r$=b.forwardRef(({className:e,...t},r)=>l.jsx(qD,{ref:r,className:de("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(Vr,{className:"h-4 w-4"})}));r$.displayName=qD.displayName;const pn=b.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>l.jsx(Eke,{children:l.jsxs(YD,{ref:i,className:de("relative z-[11000] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[l.jsx(t$,{}),l.jsx(Rke,{className:de("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),l.jsx(r$,{})]})}));pn.displayName=YD.displayName;const Pke=b.forwardRef(({className:e,...t},r)=>l.jsx(UD,{ref:r,className:de("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Pke.displayName=UD.displayName;const Xe=b.forwardRef(({className:e,children:t,...r},n)=>l.jsxs(JD,{ref:n,className:de("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Gke,{children:l.jsx(Ym,{className:"h-4 w-4"})})}),l.jsx(Oke,{children:t})]}));Xe.displayName=JD.displayName;const _ke=b.forwardRef(({className:e,...t},r)=>l.jsx(e$,{ref:r,className:de("-mx-1 my-1 h-px bg-muted",e),...t}));_ke.displayName=e$.displayName;const Mke=["binance","bybit","okx","kucoin","coinbase","huobi","kraken","bitfinex","gateio","mexc","bitget"],Zke=()=>{const{createProvider:e,updateProvider:t,removeProvider:r,providers:n}=ut(),{showSuccess:i,showError:o}=lu(),[s,a]=b.useState({type:"ccxt-browser",name:"",exchanges:[],timeout:3e4}),[c,u]=b.useState(""),[d,g]=b.useState(!1),[f,m]=b.useState(null),[v,p]=b.useState(null),I=(B,E)=>{a(M=>({...M,[B]:E}))},h=(B,E)=>{p(M=>M?{...M,[B]:E}:null)},y=(B,E=!1)=>{const M=E?v:s,G=E?p:a;B&&M&&!M.exchanges.includes(B)&&G(T=>T?{...T,exchanges:[...T.exchanges,B]}:null)},C=(B,E=!1)=>{(E?p:a)(G=>G?{...G,exchanges:G.exchanges.filter(T=>T!==B)}:null)},x=(B=!1)=>{(B?p:a)(M=>M?{...M,exchanges:["*"]}:null)},A=(B=!1)=>{c.trim()&&(y(c.trim().toLowerCase(),B),u(""))},w=B=>{var E,M;return!(!B.name.trim()||B.exchanges.length===0||(B.type==="ccxt-server"||B.type==="custom-server-with-adapter")&&!((E=B.serverUrl)!=null&&E.trim())||B.type==="marketmaker.cc"&&!((M=B.apiUrl)!=null&&M.trim()))},S=B=>{m(B.id),p({type:B.type,name:B.name,exchanges:[...B.exchanges],priority:B.priority,serverUrl:B.type==="ccxt-server"||B.type==="custom-server-with-adapter"?B.config.serverUrl:void 0,timeout:B.type==="ccxt-server"||B.type==="marketmaker.cc"||B.type==="custom-server-with-adapter"?B.config.timeout:3e4,token:B.type==="ccxt-server"?B.config.token:void 0,apiUrl:B.type==="marketmaker.cc"?B.config.apiUrl:void 0,jsonSchema:B.type==="custom-server-with-adapter"?B.config.jsonSchema:void 0})},k=()=>{m(null),p(null)},R=async()=>{if(!(!v||!f||!w(v))){g(!0);try{const B={name:v.name,exchanges:v.exchanges,priority:v.priority};v.type==="ccxt-server"&&(B.config={serverUrl:v.serverUrl,timeout:v.timeout||3e4,token:v.token}),t(f,B),i(`Provider "${v.name}" successfully updated!`,"Provider configuration has been updated"),m(null),p(null)}catch(B){o("Error updating provider",B instanceof Error?B.message:"Unknown error")}finally{g(!1)}}},j=(B,E)=>{confirm(`Are you sure you want to delete provider "${E}"?`)&&(r(B),i(`Provider "${E}" deleted successfully!`,"Provider has been removed from the system"))},_=async()=>{if(w(s)){g(!0);try{const B={};s.type==="ccxt-browser"?B.options={}:s.type==="ccxt-server"?(B.serverUrl=s.serverUrl,B.timeout=s.timeout||3e4,B.token=s.token):s.type==="marketmaker.cc"?(B.apiUrl=s.apiUrl,B.timeout=s.timeout||3e4,B.authentication={}):s.type==="custom-server-with-adapter"&&(B.serverUrl=s.serverUrl,B.timeout=s.timeout||3e4,B.jsonSchema=s.jsonSchema||{},B.authentication={});const E=e(s.type,s.name,s.exchanges,B);s.priority!==void 0&&t(E.id,{priority:s.priority}),i(`Provider "${E.name}" successfully created!`,"New data provider has been added to the system"),a({type:"ccxt-browser",name:"",exchanges:[],timeout:3e4})}catch(B){o("Error creating provider",B instanceof Error?B.message:"Unknown error")}finally{g(!1)}}},O=w(s),P=v?w(v):!1,N=(B,E,M=!1)=>l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{children:"Supported Exchanges"}),l.jsx("div",{className:"flex gap-2 mb-2",children:l.jsx(ie,{type:"button",size:"sm",variant:"outline",onClick:()=>x(M),disabled:B.exchanges.includes("*"),children:" All Exchanges (Universal)"})}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Mke.map(G=>l.jsx(ie,{type:"button",size:"sm",variant:B.exchanges.includes(G)?"default":"outline",onClick:()=>B.exchanges.includes(G)?C(G,M):y(G,M),disabled:B.exchanges.includes("*"),className:"text-xs",children:G},G))}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Pe,{placeholder:"Custom exchange",value:c,onChange:G=>u(G.target.value),disabled:B.exchanges.includes("*"),onKeyPress:G=>G.key==="Enter"&&A(M)}),l.jsx(ie,{type:"button",size:"sm",onClick:()=>A(M),disabled:!c.trim()||B.exchanges.includes("*"),children:"Add"})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:B.exchanges.map(G=>l.jsxs(Ot,{variant:"secondary",className:"text-xs",children:[G==="*"?" All Exchanges":G,l.jsx(Cr,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>C(G,M)})]},G))})]});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:" API keys are automatically taken from your active user accounts"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{children:"Provider Type"}),l.jsxs(Rn,{value:s.type,onValueChange:B=>I("type",B),children:[l.jsx(hn,{children:l.jsx(On,{})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"ccxt-browser",children:l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx("span",{className:"font-medium",children:"CCXT Browser"}),l.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Implemented"})]})}),l.jsx(Xe,{value:"ccxt-server",children:l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx("span",{className:"font-medium",children:"CCXT Server"}),l.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Implemented"})]})}),l.jsx(Xe,{value:"marketmaker.cc",disabled:!0,children:l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx("span",{className:"font-medium text-muted-foreground",children:"MarketMaker.cc"}),l.jsx("span",{className:"text-xs text-red-500 dark:text-red-400",children:"Not Implemented"})]})}),l.jsx(Xe,{value:"custom-server-with-adapter",disabled:!0,children:l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx("span",{className:"font-medium text-muted-foreground",children:"Custom Server with Adapter"}),l.jsx("span",{className:"text-xs text-red-500 dark:text-red-400",children:"Not Implemented"})]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"provider-name",children:"Provider Name"}),l.jsx(Pe,{id:"provider-name",value:s.name,onChange:B=>I("name",B.target.value),placeholder:"e.g., Main Trading Provider"})]}),N(s),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"priority",children:"Priority (optional)"}),l.jsx(Pe,{id:"priority",type:"number",value:s.priority||"",onChange:B=>I("priority",B.target.value?parseInt(B.target.value):void 0),placeholder:"Auto-assigned if empty",min:1,max:1e3}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower number = higher priority"})]}),s.type==="ccxt-server"&&l.jsxs("div",{className:"space-y-4 border-t pt-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"server-url",children:"Server URL"}),l.jsx(Pe,{id:"server-url",value:s.serverUrl||"",onChange:B=>I("serverUrl",B.target.value),placeholder:"http://localhost:3001"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"token",children:"Authentication Token"}),l.jsx(Pe,{id:"token",type:"password",value:s.token||"",onChange:B=>I("token",B.target.value),placeholder:"your-secret-token"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Token for server authentication"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"timeout",children:"Timeout (ms)"}),l.jsx(Pe,{id:"timeout",type:"number",value:s.timeout||3e4,onChange:B=>I("timeout",parseInt(B.target.value)||3e4),min:1e3,max:6e4})]})]}),l.jsxs(ie,{onClick:_,disabled:!O||d,className:"w-full flex items-center gap-2",children:[l.jsx(Us,{className:"h-4 w-4"}),d?"Creating Provider...":"Create Provider"]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-sm font-medium",children:"Existing Providers"}),l.jsxs("div",{className:"space-y-3",children:[Object.values(n).map(B=>l.jsx("div",{children:f===B.id&&v?l.jsx("div",{className:"border border-blue-200 dark:border-blue-800 rounded-lg p-4 bg-blue-50 dark:bg-blue-950/50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{children:"Provider Name"}),l.jsx(Pe,{value:v.name,onChange:E=>h("name",E.target.value),placeholder:"Provider name"})]}),N(v,h,!0),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{children:"Priority"}),l.jsx(Pe,{type:"number",value:v.priority||"",onChange:E=>h("priority",E.target.value?parseInt(E.target.value):void 0),placeholder:"Priority number",min:1,max:1e3})]}),v.type==="ccxt-server"&&l.jsxs("div",{className:"space-y-4 border-t pt-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{children:"Server URL"}),l.jsx(Pe,{value:v.serverUrl||"",onChange:E=>h("serverUrl",E.target.value),placeholder:"http://localhost:3001"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{children:"Authentication Token"}),l.jsx(Pe,{type:"password",value:v.token||"",onChange:E=>h("token",E.target.value),placeholder:"your-secret-token"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{children:"Timeout (ms)"}),l.jsx(Pe,{type:"number",value:v.timeout||3e4,onChange:E=>h("timeout",parseInt(E.target.value)||3e4),min:1e3,max:6e4})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ie,{size:"sm",onClick:R,disabled:!P||d,className:"flex items-center gap-1",children:[l.jsx(cP,{className:"h-3 w-3"}),"Save"]}),l.jsxs(ie,{size:"sm",variant:"outline",onClick:k,children:[l.jsx(Cr,{className:"h-3 w-3"}),"Cancel"]})]})]})}):l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 dark:bg-muted/20 rounded-lg border border-border",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-medium text-sm",children:B.name}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[B.type,"  ",B.exchanges.join(", "),"  Priority: ",B.priority]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ot,{variant:B.status==="connected"?"default":"secondary",children:B.status}),l.jsx(ie,{size:"sm",variant:"outline",onClick:()=>S(B),className:"h-7 w-7 p-0",children:l.jsx(WA,{className:"h-3 w-3"})}),l.jsx(ie,{size:"sm",variant:"outline",onClick:()=>j(B.id,B.name),className:"h-7 w-7 p-0 text-red-600 hover:text-red-700",children:l.jsx(Zo,{className:"h-3 w-3"})})]})]})},B.id)),Object.keys(n).length===0&&l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No providers created yet"})]})]})]})},Hke=()=>l.jsx(ff,{fallbackTitle:"Data Provider Setup Widget Error",showDetails:!1,children:l.jsx(Zke,{})});function Lke(){const[e,t]=b.useState([]),[r,n]=b.useState(!0);return b.useEffect(()=>{t(No.getLogs()),n(!1);const i=No.subscribe(o=>{t(o)});return()=>{i()}},[]),{logs:e,isLoading:r,stats:No.getStats(),clearLogs:()=>No.clearLogs(),getFilteredLogs:i=>No.getFilteredLogs(i)}}const n$=e=>{switch(e){case"connected":return l.jsx(Kg,{className:"h-4 w-4 text-green-500"});case"connecting":return l.jsx(zm,{className:"h-4 w-4 text-yellow-500 animate-spin"});case"disconnected":return l.jsx(sp,{className:"h-4 w-4 text-gray-500"});case"error":return l.jsx(op,{className:"h-4 w-4 text-red-500"});default:return l.jsx(sp,{className:"h-4 w-4 text-gray-500"})}},Wke=e=>{const t={connected:"default",connecting:"secondary",disconnected:"outline",error:"destructive"};return l.jsxs(Ot,{variant:t[e]||"outline",className:"flex items-center gap-1",children:[n$(e),e]})},nR=e=>e===0?"Never":new Date(e).toLocaleTimeString(),iR=e=>{if(e===0)return"N/A";const t=Date.now()-e,r=Math.floor(t/1e3),n=Math.floor(r/60),i=Math.floor(n/60);return i>0?`${i}h ${n%60}m`:n>0?`${n}m ${r%60}s`:`${r}s`},i$=()=>{const{providers:e,activeProviderId:t,dataFetchSettings:r,getActiveSubscriptionsList:n,removeProvider:i,setActiveProvider:o,enableProvider:s,disableProvider:a,toggleProvider:c,isProviderEnabled:u,getEnabledProviders:d,updateProvider:g,cleanup:f,forceCloseSubscription:m,getSubscriptionKey:v}=ut(),{logs:p,stats:I,clearLogs:h}=Lke(),[y,C]=b.useState(null),[x,A]=b.useState({name:"",exchanges:[],priority:1}),[w,S]=b.useState({exchange:"",method:"",status:"",hasError:!1,showOnlyErrors:!1}),[k,R]=b.useState(!1),j=n(),_=Object.values(e),O=d(),P=j.filter(Z=>Z.method==="websocket"),N=j.filter(Z=>Z.method==="rest"),B=Z=>{i(Z)},E=Z=>{c(Z)},M=()=>{f()},G=Z=>{const $=v(Z.key.exchange,Z.key.symbol,Z.key.dataType,Z.key.timeframe,Z.key.market);m($)},T=Z=>{C(Z.id),A({name:Z.name,exchanges:Z.exchanges,priority:Z.priority,type:Z.type,serverUrl:Z.type==="ccxt-server"||Z.type==="custom-server-with-adapter"?Z.config.serverUrl:void 0,token:Z.type==="ccxt-server"?Z.config.token:void 0,timeout:Z.type==="ccxt-server"||Z.type==="marketmaker.cc"||Z.type==="custom-server-with-adapter"?Z.config.timeout:void 0,apiUrl:Z.type==="marketmaker.cc"?Z.config.apiUrl:void 0,jsonSchema:Z.type==="custom-server-with-adapter"?Z.config.jsonSchema:void 0})},L=()=>{if(!y)return;const Z={name:x.name,exchanges:x.exchanges,priority:x.priority};x.type==="ccxt-server"?Z.config={serverUrl:x.serverUrl,token:x.token,timeout:x.timeout||3e4}:x.type==="marketmaker.cc"?Z.config={apiUrl:x.apiUrl,timeout:x.timeout||3e4,authentication:{}}:x.type==="custom-server-with-adapter"&&(Z.config={serverUrl:x.serverUrl,timeout:x.timeout||3e4,jsonSchema:x.jsonSchema||{},authentication:{}}),g(y,Z),C(null)},W=()=>{C(null)},X=()=>{let Z=p;return w.showOnlyErrors&&(Z=Z.filter($=>$.error||$.status&&$.status>=400)),w.exchange&&(Z=Z.filter($=>$.exchange===w.exchange)),w.method&&(Z=Z.filter($=>$.method===w.method)),w.status&&(Z=Z.filter($=>$.status===parseInt(w.status))),Z.slice(0,50)},V=()=>{const Z=new Set(p.filter($=>$.exchange).map($=>$.exchange));return Array.from(Z).sort()},z=()=>{const Z=new Set(p.map($=>$.method));return Array.from(Z).sort()},ee=Z=>new Date(Z).toLocaleTimeString(),D=(Z,$)=>$?"text-red-600 bg-red-50":Z?Z>=200&&Z<300?"text-green-600 bg-green-50":Z>=400?"text-red-600 bg-red-50":"text-yellow-600 bg-yellow-50":"text-gray-600 bg-gray-50",F=()=>{const Z=["*","binance","bybit","okx","kucoin","coinbase","huobi","kraken","bitfinex","gateio","mexc","bitget"];return l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-xs",children:"Exchanges"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:Z.map($=>l.jsx(ie,{size:"sm",variant:x.exchanges.includes($)?"default":"outline",className:"h-6 px-2 text-xs",onClick:()=>{A($==="*"?J=>({...J,exchanges:["*"]}):J=>{let U=J.exchanges.filter(K=>K!=="*");return U.includes($)?U=U.filter(K=>K!==$):U=[...U,$],{...J,exchanges:U}})},children:$==="*"?" All":$},$))})]})};return l.jsxs("div",{className:"space-y-4 p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(Ot,{variant:"outline",className:"flex items-center gap-1",children:[l.jsx(zm,{className:"h-3 w-3"}),j.filter(Z=>Z.isActive).length," active"]}),l.jsxs(Ot,{variant:"secondary",className:"flex items-center gap-1",children:[l.jsx(jk,{className:"h-3 w-3"}),O.length," enabled"]})]}),l.jsxs(ie,{size:"sm",variant:"outline",onClick:M,children:[l.jsx(Zo,{className:"h-3 w-3 mr-1"}),"Clear all"]})]}),l.jsxs(Kr,{children:[l.jsx(Un,{children:l.jsxs(Jn,{className:"text-sm flex items-center gap-2",children:[l.jsx(Vo,{className:"h-4 w-4"}),"Current settings"]})}),l.jsxs(Qn,{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Fetch method:"}),l.jsx(Ot,{variant:r.method==="websocket"?"default":"secondary",children:r.method==="websocket"?" WebSocket":" REST"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Legacy active provider:"}),l.jsx("span",{className:"font-mono text-xs",children:t||"Not selected"})]})]}),O.length>0&&l.jsxs("div",{className:"border-t pt-3",children:[l.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"Enabled providers by priority:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:O.sort((Z,$)=>Z.priority-$.priority).map(Z=>l.jsxs(Ot,{variant:"secondary",className:"text-xs",children:["#",Z.priority," ",Z.name]},Z.id))})]}),r.method==="rest"&&l.jsxs("div",{className:"border-t pt-3",children:[l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"REST request intervals:"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/50 p-2 rounded border border-blue-200 dark:border-blue-800",children:[l.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Trades"}),l.jsxs("div",{className:"font-mono text-blue-800 dark:text-blue-200",children:[r.restIntervals.trades,"ms"]})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-950/50 p-2 rounded border border-green-200 dark:border-green-800",children:[l.jsx("div",{className:"font-medium text-green-900 dark:text-green-100",children:"Candles"}),l.jsxs("div",{className:"font-mono text-green-800 dark:text-green-200",children:[r.restIntervals.candles,"ms"]})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/50 p-2 rounded border border-purple-200 dark:border-purple-800",children:[l.jsx("div",{className:"font-medium text-purple-900 dark:text-purple-100",children:"OrderBook"}),l.jsxs("div",{className:"font-mono text-purple-800 dark:text-purple-200",children:[r.restIntervals.orderbook,"ms"]})]})]})]})]})]}),l.jsxs(Kr,{children:[l.jsx(Un,{children:l.jsxs(Jn,{className:"text-sm flex items-center gap-2",children:[l.jsx(Eo,{className:"h-4 w-4"}),"Data providers (",_.length,")"]})}),l.jsxs(Qn,{className:"space-y-3",children:[_.length===0?l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No configured data providers"}):_.sort((Z,$)=>Z.priority-$.priority).map(Z=>l.jsx("div",{className:`p-3 border rounded-lg ${y===Z.id?"bg-blue-50 dark:bg-blue-950/50 border-blue-200 dark:border-blue-800":""}`,children:y===Z.id?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs",children:"Name"}),l.jsx(Pe,{value:x.name,onChange:$=>A(J=>({...J,name:$.target.value})),className:"h-8 text-sm"})]}),l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs",children:"Priority"}),l.jsx(Pe,{type:"number",value:x.priority,onChange:$=>A(J=>({...J,priority:parseInt($.target.value)||1})),className:"h-8 text-sm"})]})]}),x.type==="ccxt-server"&&l.jsxs("div",{className:"space-y-3 border-t pt-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs",children:"Server URL"}),l.jsx(Pe,{value:x.serverUrl||"",onChange:$=>A(J=>({...J,serverUrl:$.target.value})),placeholder:"http://localhost:3001",className:"h-8 text-sm"})]}),l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs",children:"Timeout (ms)"}),l.jsx(Pe,{type:"number",value:x.timeout||3e4,onChange:$=>A(J=>({...J,timeout:parseInt($.target.value)||3e4})),className:"h-8 text-sm",min:1e3,max:6e4})]})]}),l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs",children:"Authentication Token"}),l.jsx(Pe,{type:"password",value:x.token||"",onChange:$=>A(J=>({...J,token:$.target.value})),placeholder:"your-secret-token",className:"h-8 text-sm"})]})]}),F(),l.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[l.jsxs(ie,{size:"sm",onClick:L,children:[l.jsx(cP,{className:"h-3 w-3 mr-1"}),"Save"]}),l.jsxs(ie,{size:"sm",variant:"outline",onClick:W,children:[l.jsx(Cr,{className:"h-3 w-3 mr-1"}),"Cancel"]})]})]}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[n$(Z.status),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"font-medium text-sm",children:Z.name}),l.jsxs(Ot,{variant:"outline",className:"text-xs",children:[l.jsx(lP,{className:"h-3 w-3 mr-1"}),Z.priority]})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[l.jsx("span",{children:Z.type}),l.jsx(K5,{className:"h-3 w-3"}),l.jsx("span",{children:Z.exchanges.includes("*")?" All exchanges":Z.exchanges.join(", ")})]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[Z.id===t&&l.jsx(Ot,{variant:"secondary",className:"text-xs",children:"Legacy Active"}),Z.status==="connected"&&l.jsx(Ot,{variant:"default",className:"text-xs",children:"Enabled"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[Wke(Z.status),l.jsx(ie,{size:"sm",variant:Z.status==="connected"?"destructive":"default",onClick:()=>E(Z.id),children:Z.status==="connected"?l.jsxs(l.Fragment,{children:[l.jsx(gF,{className:"h-3 w-3 mr-1"}),"Disable"]}):l.jsxs(l.Fragment,{children:[l.jsx(jk,{className:"h-3 w-3 mr-1"}),"Enable"]})}),l.jsx(ie,{size:"sm",variant:"outline",onClick:()=>T(Z),children:l.jsx(WA,{className:"h-3 w-3"})}),l.jsx(ie,{size:"sm",variant:"outline",onClick:()=>B(Z.id),children:l.jsx(Zo,{className:"h-3 w-3"})})]})]})},Z.id)),O.length===0&&_.length>0&&l.jsxs("div",{className:"p-3 border border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-950/50 rounded-lg flex items-center gap-2",children:[l.jsx(Qa,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),l.jsx("span",{className:"text-sm text-orange-700 dark:text-orange-300",children:"No providers are enabled. Enable at least one provider to receive data."})]})]})]}),l.jsxs(Kr,{children:[l.jsx(Un,{children:l.jsxs(Jn,{className:"text-sm flex items-center gap-2",children:[l.jsx(Kg,{className:"h-4 w-4"}),"WebSocket subscriptions (",P.length,")"]})}),l.jsx(Qn,{className:"space-y-3",children:P.length===0?l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No active WebSocket subscriptions"}):P.map((Z,$)=>l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${Z.isActive?"bg-green-500":"bg-gray-400"}`}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium text-sm",children:[Z.key.exchange,"  ",Z.key.market||"spot","  ",Z.key.symbol]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z.key.dataType,Z.key.timeframe?`  ${Z.key.timeframe}`:"","  Updated: ",nR(Z.lastUpdate)]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[l.jsx(Md,{className:"h-3 w-3"}),Z.subscriberCount]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[l.jsx(io,{className:"h-3 w-3"}),iR(Z.lastUpdate)]}),l.jsx(Ot,{variant:Z.isActive?"default":"outline",children:Z.isActive?" Active":" Inactive"}),l.jsx(ie,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>G(Z),title:"Force close WebSocket connection",children:l.jsx(Cr,{className:"h-3 w-3"})})]})]},$))})]}),l.jsxs(Kr,{children:[l.jsx(Un,{children:l.jsxs(Jn,{className:"text-sm flex items-center gap-2",children:[l.jsx(fF,{className:"h-4 w-4"}),"REST polling cycles (",N.length,")"]})}),l.jsx(Qn,{className:"space-y-3",children:N.length===0?l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No active REST cycles"}):N.map((Z,$)=>l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${Z.isFallback?"bg-orange-50 dark:bg-orange-950/50 border-orange-200 dark:border-orange-800":"bg-background border-border"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${Z.isActive?"bg-orange-500":"bg-gray-400"}`}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("p",{className:"font-medium text-sm",children:[Z.key.exchange,"  ",Z.key.market||"spot","  ",Z.key.symbol]}),Z.isFallback&&l.jsx(Ot,{variant:"outline",className:"text-xs bg-orange-100 dark:bg-orange-950/70 text-orange-700 dark:text-orange-300 border-orange-300 dark:border-orange-700",children:" Fallback"})]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z.key.dataType,Z.key.timeframe?`  ${Z.key.timeframe}`:"","  Interval: ",r.restIntervals[Z.key.dataType],"ms"]}),Z.isFallback&&l.jsx("p",{className:"text-xs text-orange-600",children:"WebSocket unavailable, using REST"}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Last request: ",nR(Z.lastUpdate)]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[l.jsx(Md,{className:"h-3 w-3"}),Z.subscriberCount]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[l.jsx(io,{className:"h-3 w-3"}),iR(Z.lastUpdate)]}),l.jsx(Ot,{variant:Z.isActive?"secondary":"outline",children:Z.isActive?" Polling":" Stopped"}),l.jsx(ie,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>G(Z),title:"Force close REST polling",children:l.jsx(Cr,{className:"h-3 w-3"})})]})]},$))})]}),l.jsxs(Kr,{children:[l.jsx(Un,{children:l.jsx(Jn,{className:"text-sm",children:"General statistics"})}),l.jsx(Qn,{children:l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Total subscriptions:"}),l.jsx("span",{className:"font-mono",children:j.length})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Active:"}),l.jsx("span",{className:"font-mono text-green-600",children:j.filter(Z=>Z.isActive).length})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"WebSocket:"}),l.jsx("span",{className:"font-mono text-blue-600",children:P.length})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"REST cycles:"}),l.jsx("span",{className:"font-mono text-orange-600",children:N.length})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Providers:"}),l.jsx("span",{className:"font-mono",children:_.length})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Enabled:"}),l.jsx("span",{className:"font-mono text-green-600",children:O.length})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Subscribers:"}),l.jsx("span",{className:"font-mono",children:j.reduce((Z,$)=>Z+$.subscriberCount,0)})]})]})]})})]}),l.jsxs(Kr,{children:[l.jsx(Un,{children:l.jsxs(Jn,{className:"text-sm flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(dF,{className:"h-4 w-4"}),"REST Request Logs (",p.length,")"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(Ot,{variant:"outline",className:"text-xs",children:[l.jsx(ZA,{className:"h-3 w-3 mr-1"}),I.recentRequests," recent"]}),l.jsx(ie,{size:"sm",variant:"outline",onClick:()=>R(!k),children:k?l.jsx(oP,{className:"h-3 w-3"}):l.jsx(Vr,{className:"h-3 w-3"})})]})]})}),l.jsxs(Qn,{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-4 gap-3 text-sm",children:[l.jsxs("div",{className:"text-center p-2 bg-blue-50 dark:bg-blue-950/50 rounded border border-blue-200 dark:border-blue-800",children:[l.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Total"}),l.jsx("div",{className:"font-mono text-blue-800 dark:text-blue-200",children:I.totalRequests})]}),l.jsxs("div",{className:"text-center p-2 bg-green-50 dark:bg-green-950/50 rounded border border-green-200 dark:border-green-800",children:[l.jsx("div",{className:"font-medium text-green-900 dark:text-green-100",children:"Success"}),l.jsx("div",{className:"font-mono text-green-800 dark:text-green-200",children:I.successRequests})]}),l.jsxs("div",{className:"text-center p-2 bg-red-50 dark:bg-red-950/50 rounded border border-red-200 dark:border-red-800",children:[l.jsx("div",{className:"font-medium text-red-900 dark:text-red-100",children:"Errors"}),l.jsx("div",{className:"font-mono text-red-800 dark:text-red-200",children:I.errorRequests})]}),l.jsxs("div",{className:"text-center p-2 bg-purple-50 dark:bg-purple-950/50 rounded border border-purple-200 dark:border-purple-800",children:[l.jsx("div",{className:"font-medium text-purple-900 dark:text-purple-100",children:"Avg Time"}),l.jsxs("div",{className:"font-mono text-purple-800 dark:text-purple-200",children:[I.averageResponseTime,"ms"]})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(ie,{size:"sm",variant:w.showOnlyErrors?"default":"outline",onClick:()=>S(Z=>({...Z,showOnlyErrors:!Z.showOnlyErrors})),children:[l.jsx(Qa,{className:"h-3 w-3 mr-1"}),"Only Errors"]})}),l.jsxs(ie,{size:"sm",variant:"outline",onClick:h,children:[l.jsx(Zo,{className:"h-3 w-3 mr-1"}),"Clear Logs"]})]}),k&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(aP,{className:"h-3 w-3 text-gray-500"}),l.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Filters:"})]}),l.jsxs(Rn,{value:w.exchange,onValueChange:Z=>S($=>({...$,exchange:Z})),children:[l.jsx(hn,{className:"w-32 h-7 text-xs",children:l.jsx(On,{placeholder:"Exchange"})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"",children:"All Exchanges"}),V().map(Z=>l.jsx(Xe,{value:Z,children:Z},Z))]})]}),l.jsxs(Rn,{value:w.method,onValueChange:Z=>S($=>({...$,method:Z})),children:[l.jsx(hn,{className:"w-24 h-7 text-xs",children:l.jsx(On,{placeholder:"Method"})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"",children:"All"}),z().map(Z=>l.jsx(Xe,{value:Z,children:Z},Z))]})]})]}),l.jsx("div",{className:"space-y-2 max-h-96 overflow-auto",children:X().length===0?l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No requests logged yet"}):X().map(Z=>l.jsx("div",{className:`p-3 border rounded-lg text-xs ${Z.error||Z.status&&Z.status>=400?"bg-red-50 dark:bg-red-950/50 border-red-200 dark:border-red-800":"bg-background border-border"}`,children:l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Ot,{variant:"outline",className:"text-xs px-1 py-0",children:Z.method}),Z.exchange&&l.jsx(Ot,{variant:"secondary",className:"text-xs px-1 py-0",children:Z.exchange}),Z.operation&&l.jsx(Ot,{variant:"outline",className:"text-xs px-1 py-0 bg-blue-50 text-blue-700",children:Z.operation})]}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 font-mono break-all",children:Z.url}),Z.error&&l.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400 mb-1",children:[" ",Z.error]})]}),l.jsxs("div",{className:"flex flex-col items-end gap-1 text-right",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[Z.status&&l.jsx(Ot,{variant:"outline",className:`text-xs px-1 py-0 ${D(Z.status,Z.error)}`,children:Z.status}),Z.responseTime&&l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[l.jsx(yF,{className:"h-3 w-3"}),Z.responseTime,"ms"]})]}),l.jsx("div",{className:"text-xs text-gray-500",children:ee(Z.timestamp)})]})]})},Z.id))})]})]})]})]})},Dke=()=>{const{showSuccess:e,showError:t,showWarning:r,showInfo:n,notifications:i,unreadCount:o,markAllAsRead:s,clearAll:a}=lu(),c=()=>{e("Provider successfully updated!","Configuration has been saved and applied",!1)},u=()=>{t("Connection failed","Unable to connect to exchange API. Please check your credentials.",!1)},d=()=>{r("Rate limit approaching","You are approaching the API rate limit. Consider reducing request frequency.",!1)},g=()=>{n("New market data available","Real-time data stream has been established for BTC/USDT",!1)},f=()=>{t("Critical system error","Database connection lost. Manual intervention required.",!0)};return l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-sm font-medium",children:"Test Notifications"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs(ie,{size:"sm",variant:"outline",onClick:c,className:"flex items-center gap-2",children:[l.jsx(Fg,{className:"h-4 w-4 text-green-600"}),"Success"]}),l.jsxs(ie,{size:"sm",variant:"outline",onClick:u,className:"flex items-center gap-2",children:[l.jsx(Jl,{className:"h-4 w-4 text-red-600"}),"Error"]}),l.jsxs(ie,{size:"sm",variant:"outline",onClick:d,className:"flex items-center gap-2",children:[l.jsx(Qa,{className:"h-4 w-4 text-orange-600"}),"Warning"]}),l.jsxs(ie,{size:"sm",variant:"outline",onClick:g,className:"flex items-center gap-2",children:[l.jsx(HA,{className:"h-4 w-4 text-blue-600"}),"Info"]})]}),l.jsx(ie,{size:"sm",variant:"destructive",onClick:f,className:"w-full",children:"Test Persistent Error"})]}),i.length>0&&l.jsxs("div",{className:"space-y-2 border-t pt-4",children:[l.jsx("h3",{className:"text-sm font-medium",children:"Quick Actions"}),l.jsxs("div",{className:"flex gap-2",children:[o>0&&l.jsxs(ie,{size:"sm",variant:"outline",onClick:s,className:"flex items-center gap-2",children:[l.jsx(_A,{className:"h-4 w-4"}),"Mark All Read"]}),l.jsxs(ie,{size:"sm",variant:"outline",onClick:a,className:"flex items-center gap-2",children:[l.jsx(Zo,{className:"h-4 w-4"}),"Clear All"]})]})]}),l.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsx("p",{children:" Click the bell icon in navbar to view history"}),l.jsx("p",{children:" Notifications appear as toasts on the right"}),l.jsx("p",{children:" Persistent notifications stay until dismissed"}),l.jsxs("p",{children:[" Total notifications: ",i.length]}),l.jsxs("p",{children:[" Unread: ",o]})]})]})},by=b.forwardRef(({className:e,...t},r)=>l.jsx("div",{className:"relative w-full overflow-auto",children:l.jsx("table",{ref:r,className:de("w-full caption-bottom text-sm",e),...t})}));by.displayName="Table";const xy=b.forwardRef(({className:e,...t},r)=>l.jsx("thead",{ref:r,className:de("[&_tr]:border-b",e),...t}));xy.displayName="TableHeader";const Ay=b.forwardRef(({className:e,...t},r)=>l.jsx("tbody",{ref:r,className:de("[&_tr:last-child]:border-0",e),...t}));Ay.displayName="TableBody";const $ke=b.forwardRef(({className:e,...t},r)=>l.jsx("tfoot",{ref:r,className:de("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));$ke.displayName="TableFooter";const sl=b.forwardRef(({className:e,...t},r)=>l.jsx("tr",{ref:r,className:de("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));sl.displayName="TableRow";const ot=b.forwardRef(({className:e,...t},r)=>l.jsx("th",{ref:r,className:de("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ot.displayName="TableHead";const st=b.forwardRef(({className:e,...t},r)=>l.jsx("td",{ref:r,className:de("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));st.displayName="TableCell";const Xke=b.forwardRef(({className:e,...t},r)=>l.jsx("caption",{ref:r,className:de("mt-4 text-sm text-muted-foreground",e),...t}));Xke.displayName="TableCaption";const Fke=({deals:e,onSelectDeal:t,onAddDeal:r,onEditDeal:n,onDeleteDeal:i})=>{const[o,s]=b.useState(null),[a,c]=b.useState(""),u=I=>{o===I.id?(s(null),c("")):(s(I.id),c(I.note||""))},d=I=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(I),g=I=>new Intl.NumberFormat("en-US").format(I),f=e.reduce((I,h)=>I+(h.total>0?h.total:0),0),m=e.reduce((I,h)=>I+(h.total<0?Math.abs(h.total):0),0),v=e.filter(I=>I.total>0).length,p=e.length>0?v/e.length*100:0;return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mr,{className:"h-5 w-5 text-primary"}),l.jsx("span",{className:"font-medium",children:"Deals"})]}),l.jsxs(ie,{onClick:r,size:"sm",className:"gap-2",children:[l.jsx(Us,{className:"h-4 w-4"}),"Add Deal"]})]}),l.jsxs("div",{className:"flex-1 p-3 overflow-auto",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-muted/50 rounded-lg",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Deals"}),l.jsx("div",{className:"text-lg font-bold",children:e.length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Win Rate"}),l.jsxs("div",{className:"text-lg font-bold text-green-400",children:[p.toFixed(1),"%"]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Profit"}),l.jsxs("div",{className:"text-lg font-bold text-green-400",children:["+",d(f)]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Loss"}),l.jsxs("div",{className:"text-lg font-bold text-red-400",children:["-",d(m)]})]})]}),a&&l.jsx("div",{className:"mb-4 p-3 bg-muted/50 rounded-lg border border-border/50",children:l.jsx("p",{className:"text-sm text-muted-foreground",children:a})}),l.jsx("div",{className:"rounded-md border",children:l.jsxs(by,{children:[l.jsx(xy,{children:l.jsxs(sl,{children:[l.jsx(ot,{children:"Name"}),l.jsx(ot,{className:"text-center",children:"Stocks"}),l.jsx(ot,{className:"text-center",children:"Coins"}),l.jsx(ot,{className:"text-center",children:"Pairs"}),l.jsx(ot,{className:"text-center",children:"Credited"}),l.jsx(ot,{className:"text-center",children:"Debited"}),l.jsx(ot,{className:"text-center",children:"Total"}),l.jsx(ot,{className:"text-center",children:"Time"}),l.jsx(ot,{className:"text-center",children:"Actions"})]})}),l.jsx(Ay,{children:e.map(I=>l.jsxs(sl,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>t(I.id),children:[l.jsx(st,{className:"font-medium",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:I.name||"Unnamed Deal"}),I.note&&l.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:I.note})]})}),l.jsx(st,{className:"text-center",children:g(I.stocks)}),l.jsx(st,{className:"text-center",children:g(I.coins)}),l.jsx(st,{className:"text-center",children:g(I.pairs)}),l.jsx(st,{className:"text-center",children:l.jsxs("div",{className:"text-sm",children:[d(I.credited),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["(",I.credited_trades," trades)"]})]})}),l.jsx(st,{className:"text-center",children:l.jsxs("div",{className:"text-sm",children:[d(I.debited),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["(",I.debited_trades," trades)"]})]})}),l.jsx(st,{className:"text-center",children:l.jsxs("div",{className:`text-sm font-medium ${I.total>=0?"text-green-400":"text-red-400"}`,children:[d(I.total),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["(",I.total_trades," trades)"]})]})}),l.jsx(st,{className:"text-center",children:l.jsxs("div",{className:"text-xs",children:[l.jsx("div",{children:I.timestamp_open}),l.jsx("div",{children:I.timestamp_closed}),l.jsxs("div",{className:"text-muted-foreground",children:["(",I.duration,")"]})]})}),l.jsx(st,{className:"text-center",children:l.jsxs("div",{className:"flex justify-center gap-1",children:[l.jsx(ie,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:h=>{h.stopPropagation(),t(I.id)},children:l.jsx(MA,{className:"h-3 w-3"})}),l.jsx(ie,{variant:o===I.id?"default":"outline",size:"icon",className:"h-7 w-7",onClick:h=>{h.stopPropagation(),u(I)},children:l.jsx(HA,{className:"h-3 w-3"})}),l.jsx(ie,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:h=>{h.stopPropagation(),n(I.id)},children:l.jsx(WA,{className:"h-3 w-3"})}),l.jsx(ie,{variant:"outline",size:"icon",className:"h-7 w-7 hover:bg-destructive hover:text-destructive-foreground",onClick:h=>{h.stopPropagation(),i(I.id)},children:l.jsx(Zo,{className:"h-3 w-3"})})]})})]},I.id))})]})}),e.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(mr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"No deals yet"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Start tracking your trading deals"}),l.jsxs(ie,{onClick:r,className:"gap-2",children:[l.jsx(Us,{className:"h-4 w-4"}),"Create First Deal"]})]})]})]})},o$=b.forwardRef(({className:e,...t},r)=>l.jsx("textarea",{className:de("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));o$.displayName="Textarea";var wy="Checkbox",[Kke]=Wi(wy),[Vke,X1]=Kke(wy);function zke(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:i,disabled:o,form:s,name:a,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:g}=e,[f,m]=Ys({prop:r,defaultProp:i??!1,onChange:c,caller:wy}),[v,p]=b.useState(null),[I,h]=b.useState(null),y=b.useRef(!1),C=v?!!s||!!v.closest("form"):!0,x={checked:f,disabled:o,setChecked:m,control:v,setControl:p,name:a,form:s,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:Ks(i)?!1:i,isFormControl:C,bubbleInput:I,setBubbleInput:h};return l.jsx(Vke,{scope:t,...x,children:Yke(g)?g(x):n})}var s$="CheckboxTrigger",a$=b.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},i)=>{const{control:o,value:s,disabled:a,checked:c,required:u,setControl:d,setChecked:g,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:v}=X1(s$,e),p=Ye(i,d),I=b.useRef(c);return b.useEffect(()=>{const h=o==null?void 0:o.form;if(h){const y=()=>g(I.current);return h.addEventListener("reset",y),()=>h.removeEventListener("reset",y)}},[o,g]),l.jsx(Te.button,{type:"button",role:"checkbox","aria-checked":Ks(c)?"mixed":c,"aria-required":u,"data-state":g$(c),"data-disabled":a?"":void 0,disabled:a,value:s,...n,ref:p,onKeyDown:we(t,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:we(r,h=>{g(y=>Ks(y)?!0:!y),v&&m&&(f.current=h.isPropagationStopped(),f.current||h.stopPropagation())})})});a$.displayName=s$;var F1=b.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:o,required:s,disabled:a,value:c,onCheckedChange:u,form:d,...g}=e;return l.jsx(zke,{__scopeCheckbox:r,checked:i,defaultChecked:o,disabled:a,required:s,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>l.jsxs(l.Fragment,{children:[l.jsx(a$,{...g,ref:t,__scopeCheckbox:r}),f&&l.jsx(d$,{__scopeCheckbox:r})]})})});F1.displayName=wy;var l$="CheckboxIndicator",c$=b.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,o=X1(l$,r);return l.jsx(ci,{present:n||Ks(o.checked)||o.checked===!0,children:l.jsx(Te.span,{"data-state":g$(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});c$.displayName=l$;var u$="CheckboxBubbleInput",d$=b.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:s,required:a,disabled:c,name:u,value:d,form:g,bubbleInput:f,setBubbleInput:m}=X1(u$,e),v=Ye(r,m),p=D1(o),I=YA(n);b.useEffect(()=>{const y=f;if(!y)return;const C=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(C,"checked").set,w=!i.current;if(p!==o&&A){const S=new Event("click",{bubbles:w});y.indeterminate=Ks(o),A.call(y,Ks(o)?!1:o),y.dispatchEvent(S)}},[f,p,o,i]);const h=b.useRef(Ks(o)?!1:o);return l.jsx(Te.input,{type:"checkbox","aria-hidden":!0,defaultChecked:s??h.current,required:a,disabled:c,name:u,value:d,form:g,...t,tabIndex:-1,ref:v,style:{...t.style,...I,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});d$.displayName=u$;function Yke(e){return typeof e=="function"}function Ks(e){return e==="indeterminate"}function g$(e){return Ks(e)?"indeterminate":e?"checked":"unchecked"}const Px=b.forwardRef(({className:e,...t},r)=>l.jsx(F1,{ref:r,className:de("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:l.jsx(c$,{className:de("flex items-center justify-center text-current"),children:l.jsx(Ym,{className:"h-4 w-4"})})}));Px.displayName=F1.displayName;const Uke=({selectionMode:e=!1,onBack:t,onTradesSelected:r})=>{const[n,i]=b.useState(new Set),[o,s]=b.useState(""),a=[{id:"TXN123456",datetime:"2024-06-01 14:23:45",stock:"BTC",symbol:"BTC/USDT",side:"buy",type:"limit",orderType:"market",price:43250.5,amount:.1234,value:5337.02,fee:5.34,pnl:null},{id:"TXN123455",datetime:"2024-06-01 14:20:32",stock:"ETH",symbol:"ETH/USDT",side:"sell",type:"market",orderType:"limit",price:2845.3,amount:2.567,value:7305.51,fee:.0026,pnl:245.67},{id:"TXN123454",datetime:"2024-06-01 14:18:21",stock:"SOL",symbol:"SOL/USDT",side:"buy",type:"limit",orderType:"market",price:98.45,amount:15.67,value:1543.32,fee:1.54,pnl:null},{id:"TXN123453",datetime:"2024-06-01 14:15:18",stock:"BNB",symbol:"BNB/USDT",side:"sell",type:"stop-limit",orderType:"stop-limit",price:315.67,amount:12.34,value:3897.37,fee:3.9,pnl:-89.45},{id:"TXN123452",datetime:"2024-06-01 14:12:05",stock:"BTC",symbol:"BTC/USDT",side:"buy",type:"market",orderType:"market",price:43100,amount:.0567,value:2443.77,fee:2.44,pnl:null}],c={totalTrades:247,totalVolume:125678.9,totalFees:234.56,totalPnl:567.89,winRate:68.5},u=a.filter(p=>p.symbol.toLowerCase().includes(o.toLowerCase())||p.stock.toLowerCase().includes(o.toLowerCase())||p.side.toLowerCase().includes(o.toLowerCase())),d=p=>{if(!e)return;const I=new Set(n);I.has(p)?I.delete(p):I.add(p),i(I)},g=()=>{n.size===u.length?i(new Set):i(new Set(u.map(p=>p.id)))},f=()=>{const p=a.filter(I=>n.has(I.id));r==null||r(p)},m=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:8}).format(p),v=p=>new Intl.NumberFormat("en-US").format(p);return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[t&&l.jsx(ie,{variant:"outline",size:"icon",onClick:t,children:l.jsx(iP,{className:"h-4 w-4"})}),l.jsx(Tn,{className:"h-5 w-5 text-primary"}),l.jsx("span",{className:"font-medium",children:e?"Select Trades":"My Trades"})]}),e&&n.size>0&&l.jsxs(ie,{onClick:f,className:"gap-2",children:[l.jsx(Ym,{className:"h-4 w-4"}),"Add Selected (",n.size,")"]})]}),l.jsx("div",{className:"flex-1 p-3 overflow-auto",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[l.jsxs("div",{className:"flex items-center gap-2 text-green-500 text-sm",children:[l.jsx(mr,{className:"h-4 w-4"}),"Total P&L"]}),l.jsxs("div",{className:"text-xl font-bold text-green-500",children:["+",m(c.totalPnl)]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Win Rate: ",c.winRate,"%"]})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[l.jsxs("div",{className:"flex items-center gap-2 text-blue-500 text-sm",children:[l.jsx(Tn,{className:"h-4 w-4"}),"Total Volume"]}),l.jsx("div",{className:"text-xl font-bold",children:m(c.totalVolume)}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.totalTrades," trades"]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{placeholder:"Search trades...",value:o,onChange:p=>s(p.target.value),className:"pl-10"})]}),l.jsx("div",{className:"rounded-md border",children:l.jsxs(by,{children:[l.jsx(xy,{children:l.jsxs(sl,{children:[e&&l.jsx(ot,{className:"w-12",children:l.jsx(Px,{checked:n.size===u.length&&u.length>0,onCheckedChange:g})}),l.jsx(ot,{children:"Date"}),l.jsx(ot,{children:"Stock"}),l.jsx(ot,{children:"Symbol"}),l.jsx(ot,{children:"Side"}),l.jsx(ot,{children:"Type"}),l.jsx(ot,{children:"Price"}),l.jsx(ot,{children:"Amount"}),l.jsx(ot,{children:"Value"}),l.jsx(ot,{children:"Fee"}),!e&&l.jsx(ot,{children:"P&L"})]})}),l.jsx(Ay,{children:u.map(p=>l.jsxs(sl,{className:`${p.side==="buy"?"bg-green-500/5":"bg-red-500/5"} ${e?"cursor-pointer hover:bg-muted/50":""}`,onClick:()=>e&&d(p.id),children:[e&&l.jsx(st,{children:l.jsx(Px,{checked:n.has(p.id),onCheckedChange:()=>d(p.id)})}),l.jsx(st,{className:"text-xs",children:p.datetime}),l.jsx(st,{className:"font-medium",children:p.stock}),l.jsx(st,{children:p.symbol}),l.jsx(st,{children:l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.side==="buy"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:p.side.toUpperCase()})}),l.jsx(st,{className:"text-xs",children:p.orderType}),l.jsx(st,{children:m(p.price)}),l.jsx(st,{children:v(p.amount)}),l.jsx(st,{children:m(p.value)}),l.jsx(st,{children:m(p.fee)}),!e&&l.jsx(st,{children:p.pnl!==null&&l.jsxs("span",{className:`text-sm font-medium ${p.pnl>=0?"text-green-400":"text-red-400"}`,children:[p.pnl>=0?"+":"",m(p.pnl)]})})]},p.id))})]})}),!e&&l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-xs",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-muted-foreground",children:"Total Trades"}),l.jsx("div",{className:"font-bold",children:c.totalTrades})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted-foreground",children:"Total Fees"}),l.jsx("div",{className:"font-bold",children:m(c.totalFees)})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-muted-foreground",children:"Avg Trade"}),l.jsx("div",{className:"font-bold",children:m(c.totalVolume/c.totalTrades)})]})]}),l.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Real-time trade tracking  Last update: ",new Date().toLocaleTimeString()]})]})})]})},Jke=({deal:e,onBack:t,onUpdateDeal:r,onDeleteTrade:n,onAddTrades:i})=>{const[o,s]=b.useState(!1),[a,c]=b.useState(e),u=(p,I)=>{const h={...a,[p]:I};c(h),r(h)},d=p=>{const I={...a,trades:a.trades.filter(y=>y.uuid!==p.uuid)},h=f(I);c(h),r(h),n(p)},g=p=>{const I=p.map(C=>({uuid:C.id,order:`ORD${Math.random().toString(36).substr(2,6).toUpperCase()}`,datetime:C.datetime,stock:C.stock,symbol:C.symbol,type:C.type,side:C.side,price:C.price,amount:C.amount,fee:C.fee})),h={...a,trades:[...a.trades,...I]},y=f(h);c(y),r(y),i(p),s(!1)},f=p=>{const I=p.trades.filter(k=>k.side==="buy"),h=p.trades.filter(k=>k.side==="sell"),y=h.reduce((k,R)=>k+R.price*R.amount,0),C=I.reduce((k,R)=>k+R.price*R.amount,0),x=y-C,A=new Set(p.trades.map(k=>k.stock)).size,w=new Set(p.trades.map(k=>k.symbol)).size,S=p.trades.reduce((k,R)=>k+R.amount,0);return{...p,credited:y,debited:C,total:x,credited_trades:h.length,debited_trades:I.length,total_trades:p.trades.length,stocks:A,pairs:w,coins:S}},m=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:8}).format(p),v=p=>new Intl.NumberFormat("en-US").format(p);return o?l.jsx(Uke,{selectionMode:!0,onBack:()=>s(!1),onTradesSelected:g}):l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ie,{variant:"outline",size:"icon",onClick:t,children:l.jsx(iP,{className:"h-4 w-4"})}),l.jsx("span",{className:"font-medium",children:"Deal Details"})]}),l.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>s(!0),className:"gap-2",children:[l.jsx(tC,{className:"h-4 w-4"}),"Add Trades"]})]}),l.jsxs("div",{className:"flex-1 p-3 overflow-auto",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Deal Name"}),l.jsx(Pe,{placeholder:"Deal name",value:a.name,onChange:p=>u("name",p.target.value)})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Note"}),l.jsx(o$,{placeholder:"Deal note",value:a.note||"",onChange:p=>u("note",p.target.value),rows:2})]})]}),l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-7 gap-4 mb-6 p-4 bg-muted/50 rounded-lg",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Stocks"}),l.jsx("div",{className:"font-medium",children:v(a.stocks)})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Pairs"}),l.jsx("div",{className:"font-medium",children:v(a.pairs)})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Coins"}),l.jsx("div",{className:"font-medium",children:v(a.coins)})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Credited"}),l.jsxs("div",{className:"font-medium text-green-400",children:[m(a.credited),l.jsxs("div",{className:"text-xs",children:["(",a.credited_trades," trades)"]})]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Debited"}),l.jsxs("div",{className:"font-medium text-red-400",children:[m(a.debited),l.jsxs("div",{className:"text-xs",children:["(",a.debited_trades," trades)"]})]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),l.jsxs("div",{className:`font-medium ${a.total>=0?"text-green-400":"text-red-400"}`,children:[m(a.total),l.jsxs("div",{className:"text-xs",children:["(",a.total_trades," trades)"]})]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Time"}),l.jsxs("div",{className:"text-xs",children:[l.jsx("div",{children:a.timestamp_open}),l.jsx("div",{children:a.timestamp_closed}),l.jsxs("div",{className:"text-muted-foreground",children:["(",a.duration,")"]})]})]})]}),l.jsx("div",{className:"rounded-md border",children:l.jsxs(by,{children:[l.jsx(xy,{children:l.jsxs(sl,{children:[l.jsx(ot,{children:"Order ID"}),l.jsx(ot,{children:"Date"}),l.jsx(ot,{children:"Stock"}),l.jsx(ot,{children:"Pair"}),l.jsx(ot,{children:"Type"}),l.jsx(ot,{children:"Side"}),l.jsx(ot,{children:"Price"}),l.jsx(ot,{children:"Amount"}),l.jsx(ot,{children:"Value"}),l.jsx(ot,{children:"Fee"}),l.jsx(ot,{children:"Actions"})]})}),l.jsx(Ay,{children:a.trades.map(p=>l.jsxs(sl,{className:p.side==="buy"?"bg-green-500/10":"bg-red-500/10",children:[l.jsx(st,{className:"font-medium",children:p.order}),l.jsx(st,{className:"text-xs",children:p.datetime}),l.jsx(st,{children:p.stock}),l.jsx(st,{children:p.symbol}),l.jsx(st,{className:"text-xs",children:p.type}),l.jsx(st,{children:l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.side==="buy"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:p.side.toUpperCase()})}),l.jsx(st,{children:m(p.price)}),l.jsx(st,{children:v(p.amount)}),l.jsx(st,{children:m(p.price*p.amount)}),l.jsx(st,{children:m(p.fee)}),l.jsx(st,{children:l.jsx(ie,{variant:"outline",size:"icon",className:"h-7 w-7 hover:bg-destructive hover:text-destructive-foreground",onClick:()=>d(p),children:l.jsx(Zo,{className:"h-3 w-3"})})})]},p.uuid))})]})}),a.trades.length===0&&l.jsxs("div",{className:"text-center py-12 border rounded-lg",children:[l.jsx(tC,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"No trades in this deal"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Add trades to track deal performance"}),l.jsxs(ie,{onClick:()=>s(!0),className:"gap-2",children:[l.jsx(tC,{className:"h-4 w-4"}),"Add Trades"]})]})]})]})},Qke=({dashboardId:e="default",widgetId:t="deals-widget",initialMode:r="list",initialDealId:n})=>{const[i,o]=b.useState(r),[s,a]=b.useState(n||null),[c,u]=b.useState([]);b.useEffect(()=>{u([{id:"1",name:"BTC Long Position",note:"Successful BTC growth trading with good entry based on technical analysis",stocks:2,coins:.5,pairs:1,credited:45250.5,debited:42670.75,total:2579.75,credited_trades:3,debited_trades:2,total_trades:5,timestamp_open:"2024-06-01 09:30:00",timestamp_closed:"2024-06-01 15:45:00",duration:"6h 15m",trades:[{uuid:"1",order:"ORD001",datetime:"2024-06-01 09:30:15",stock:"BTC",symbol:"BTC/USDT",type:"limit",side:"buy",price:42200.5,amount:.25,fee:2.26},{uuid:"2",order:"ORD002",datetime:"2024-06-01 11:45:20",stock:"BTC",symbol:"BTC/USDT",type:"market",side:"buy",price:42470.25,amount:.25,fee:2.27},{uuid:"3",order:"ORD003",datetime:"2024-06-01 15:30:45",stock:"BTC",symbol:"BTC/USDT",type:"limit",side:"sell",price:45100.75,amount:.3,fee:2.39},{uuid:"4",order:"ORD004",datetime:"2024-06-01 15:45:12",stock:"BTC",symbol:"BTC/USDT",type:"market",side:"sell",price:45400.25,amount:.2,fee:2.4}]},{id:"2",name:"ETH Swing Trade",note:"Average profitability with decent risk management",stocks:5,coins:2.3,pairs:2,credited:7420.8,debited:6990.7,total:430.1,credited_trades:4,debited_trades:3,total_trades:7,timestamp_open:"2024-06-02 14:20:00",timestamp_closed:"2024-06-03 11:10:00",duration:"20h 50m",trades:[{uuid:"5",order:"ORD005",datetime:"2024-06-02 14:20:15",stock:"ETH",symbol:"ETH/USDT",type:"limit",side:"buy",price:3050.3,amount:1.15,fee:1.75},{uuid:"6",order:"ORD006",datetime:"2024-06-02 16:45:20",stock:"ETH",symbol:"ETH/USDT",type:"market",side:"buy",price:3025.4,amount:1.15,fee:1.74},{uuid:"7",order:"ORD007",datetime:"2024-06-03 10:30:45",stock:"ETH",symbol:"ETH/USDT",type:"limit",side:"sell",price:3245.75,amount:1.2,fee:1.95},{uuid:"8",order:"ORD008",datetime:"2024-06-03 11:10:12",stock:"ETH",symbol:"ETH/USDT",type:"market",side:"sell",price:3180.25,amount:1.1,fee:1.75}]},{id:"3",name:"AAPL Day Trade",note:"Loss trade, bad entry timing and market conditions",stocks:10,coins:0,pairs:1,credited:1520.3,debited:1555,total:-34.7,credited_trades:2,debited_trades:2,total_trades:4,timestamp_open:"2024-06-03 09:45:00",timestamp_closed:"2024-06-03 16:00:00",duration:"6h 15m",trades:[{uuid:"9",order:"ORD009",datetime:"2024-06-03 09:45:15",stock:"AAPL",symbol:"AAPL/USD",type:"market",side:"buy",price:155.5,amount:5,fee:.78},{uuid:"10",order:"ORD010",datetime:"2024-06-03 11:20:20",stock:"AAPL",symbol:"AAPL/USD",type:"limit",side:"buy",price:155,amount:5,fee:.77},{uuid:"11",order:"ORD011",datetime:"2024-06-03 15:30:45",stock:"AAPL",symbol:"AAPL/USD",type:"market",side:"sell",price:152.15,amount:5,fee:.76},{uuid:"12",order:"ORD012",datetime:"2024-06-03 16:00:12",stock:"AAPL",symbol:"AAPL/USD",type:"limit",side:"sell",price:152.4,amount:5,fee:.76}]}])},[]);const d=C=>{a(C),o("details")},g=()=>{o("list"),a(null)},f=()=>{const C={id:Date.now().toString(),name:"New Deal",note:"",stocks:0,coins:0,pairs:0,credited:0,debited:0,total:0,credited_trades:0,debited_trades:0,total_trades:0,timestamp_open:new Date().toISOString().slice(0,19).replace("T"," "),timestamp_closed:"",duration:"0m",trades:[]};u(x=>[...x,C]),a(C.id),o("details")},m=C=>{a(C),o("details")},v=C=>{u(x=>x.filter(A=>A.id!==C)),s===C&&g()},p=C=>{u(x=>x.map(A=>A.id===C.id?C:A))},I=C=>{console.log("Trade removed from deal:",C.uuid)},h=C=>{console.log("Trades added to deal:",C.length)},y=c.find(C=>C.id===s);return i==="details"&&y?l.jsx(Jke,{deal:y,onBack:g,onUpdateDeal:p,onDeleteTrade:I,onAddTrades:h}):l.jsx(Fke,{deals:c,onSelectDeal:d,onAddDeal:f,onEditDeal:m,onDeleteDeal:v})},qke=()=>{const{users:e,activeUserId:t}=ct(),r=e.find(n=>n.id===t);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Active User ID:"}),l.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:t||"None"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Total Users:"}),l.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:e.length})]}),r&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Active User:"}),l.jsxs("div",{className:"ml-4 space-y-2",children:[l.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:["Email: ",r.email]}),l.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:["Name: ",r.name||"Not set"]}),l.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:["Accounts: ",r.accounts.length]}),r.accounts.length>0&&l.jsxs("div",{children:[l.jsx("h5",{className:"font-semibold text-blue-600 dark:text-blue-400 mt-2 mb-3",children:"Accounts:"}),l.jsx("div",{className:"space-y-3",children:r.accounts.map((n,i)=>l.jsxs("div",{className:"ml-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[l.jsxs("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:["#",i+1]}),l.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:["Exchange: ",n.exchange]}),l.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:["Email: ",n.email]}),l.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:["Has API Key: ",n.key?"Yes":"No"]}),l.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:["Has Secret: ",n.privateKey?"Yes":"No"]})]},n.id))})]})]})]}),!r&&l.jsx("div",{children:l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No active user selected"})})]})},eBe=()=>{const[e,t]=b.useState(null),[r,n]=b.useState(!0),i=()=>{t(Gi.getCacheStats())},o=()=>{Gi.clearCache(),i()},s=()=>{Gi.cleanup(),i()};b.useEffect(()=>{i()},[]),b.useEffect(()=>{if(!r)return;const u=setInterval(i,2e3);return()=>clearInterval(u)},[r]);const a=u=>{const d=Math.floor(u/1e3),g=Math.floor(d/60),f=Math.floor(g/60);return f>0?`${f}h ${g%60}m`:g>0?`${g}m ${d%60}s`:`${d}s`},c=b.useMemo(()=>{if(!e||!e.instances)return null;const u={byProvider:{},byUser:{},byExchange:{},byCcxtType:{},byMarketType:{}};return e.instances.forEach(d=>{u.byProvider[d.providerId]||(u.byProvider[d.providerId]=[]),u.byProvider[d.providerId].push(d),u.byUser[d.userId]||(u.byUser[d.userId]=[]),u.byUser[d.userId].push(d),u.byExchange[d.exchangeId]||(u.byExchange[d.exchangeId]=[]),u.byExchange[d.exchangeId].push(d),u.byCcxtType[d.ccxtType]||(u.byCcxtType[d.ccxtType]=[]),u.byCcxtType[d.ccxtType].push(d),u.byMarketType[d.marketType]||(u.byMarketType[d.marketType]=[]),u.byMarketType[d.marketType].push(d)}),u},[e]);return e?l.jsxs(Kr,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Eo,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),l.jsx("h3",{className:"text-lg font-semibold",children:"CCXT Browser Provider Cache"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(ie,{variant:r?"default":"outline",size:"sm",onClick:()=>n(!r),children:[l.jsx(Ri,{className:`h-4 w-4 mr-1 ${r?"animate-spin":""}`}),"Auto ",r?"ON":"OFF"]})})]}),l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-100 dark:bg-blue-900/20 p-3 rounded-lg border dark:border-blue-800/30",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Eo,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),l.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Total Instances"})]}),l.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.totalInstances})]}),l.jsxs("div",{className:"bg-green-100 dark:bg-green-900/20 p-3 rounded-lg border dark:border-green-800/30",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Vo,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),l.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Markets Cache"})]}),l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.totalMarketsCache})]})]}),c&&l.jsxs("div",{className:"border border-border rounded-lg p-3",children:[l.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[l.jsx(q5,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),l.jsx("span",{className:"text-purple-700 dark:text-purple-300",children:"CCXT Type Distribution"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(c.byCcxtType).map(([u,d])=>l.jsxs("div",{className:`p-3 rounded-lg border ${u==="pro"?"bg-purple-100 dark:bg-purple-900/20 dark:border-purple-800/30":"bg-blue-100 dark:bg-blue-900/20 dark:border-blue-800/30"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u==="pro"?l.jsx(CF,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}):l.jsx(Eo,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),l.jsx("span",{className:`font-medium ${u==="pro"?"text-purple-700 dark:text-purple-300":"text-blue-700 dark:text-blue-300"}`,children:u==="pro"?"CCXT Pro (WebSocket)":"CCXT Regular (REST)"})]}),l.jsx("div",{className:`text-xl font-bold ${u==="pro"?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400"}`,children:d.length})]},u))})]}),e.instances.length>0&&l.jsxs("div",{className:"border border-border rounded-lg p-3",children:[l.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[l.jsx(Md,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{children:"Instance Details"})]}),l.jsx("div",{className:"space-y-2",children:e.instances.map((u,d)=>l.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg border-l-4 border-l-blue-500",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-mono text-xs text-muted-foreground mb-1",children:"Instance Key:"}),l.jsx("div",{className:"font-mono text-xs bg-background p-1 rounded border border-border break-all",children:u.key})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-muted-foreground",children:"Provider:"}),l.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:u.providerId})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-muted-foreground",children:"User:"}),l.jsx("span",{className:"font-medium",children:u.userId})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-muted-foreground",children:"Account:"}),l.jsx("span",{className:"font-medium",children:u.accountId})]})]})]}),l.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-3 pt-2 border-t border-border text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Exchange:"}),l.jsx("div",{className:"font-medium text-green-600 dark:text-green-400",children:u.exchangeId})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Market:"}),l.jsx("div",{className:"font-medium text-orange-600 dark:text-orange-400",children:u.marketType})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Type:"}),l.jsx("div",{className:`font-medium ${u.ccxtType==="pro"?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400"}`,children:u.ccxtType})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Markets:"}),l.jsx("div",{className:`font-medium ${u.marketsLoaded?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:u.marketsLoaded?" Loaded":" Not loaded"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 mt-2 pt-2 border-t border-border text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(io,{className:"h-3 w-3"}),l.jsxs("span",{children:["Age: ",a(u.age)]})]}),l.jsxs("div",{children:["Last Access: ",new Date(u.lastAccess).toLocaleTimeString()]})]})]},d))})]}),e.totalInstances===0&&l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(Eo,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("h4",{className:"font-medium mb-1",children:"No CCXT Instances Cached"}),l.jsx("p",{className:"text-sm",children:"Cache will populate when CCXT instances are created"})]}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[l.jsxs(ie,{variant:"outline",size:"sm",onClick:o,disabled:e.totalInstances===0,children:[l.jsx(Zo,{className:"h-4 w-4 mr-1"}),"Clear Cache (",e.totalInstances,")"]}),l.jsxs(ie,{variant:"outline",size:"sm",onClick:s,disabled:e.totalInstances===0,children:[l.jsx(Ri,{className:"h-4 w-4 mr-1"}),"Cleanup Expired"]}),l.jsxs(ie,{variant:"outline",size:"sm",onClick:i,children:[l.jsx(Ri,{className:"h-4 w-4 mr-1"}),"Refresh Stats"]})]})]})]}):l.jsx(Kr,{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vo,{className:"h-5 w-5 animate-spin"}),l.jsx("span",{children:"Loading cache stats..."})]})})},tBe=()=>{var I;const[e,t]=b.useState(!1),[r,n]=b.useState(null),[i,o]=b.useState(null),{users:s,activeUserId:a}=ct(),{fetchBalance:c,getBalance:u}=ut(),d=s.find(h=>h.id===a),g=((I=d==null?void 0:d.accounts)==null?void 0:I.filter(h=>h.exchange.toLowerCase()==="bingx"&&h.key&&h.privateKey))||[],f=b.useCallback(async()=>{t(!0),o(null);try{console.log(" [DebugBingX] Starting BingX diagnostics...");const h={timestamp:new Date().toISOString(),userInfo:{activeUserId:a,totalUsers:s.length,activeUser:d?{id:d.id,email:d.email,totalAccounts:d.accounts.length}:null},bingxAccounts:g.map(y=>{var C,x;return{id:y.id,exchange:y.exchange,email:y.email,hasApiKey:!!y.key,hasSecret:!!y.privateKey,sandbox:!1,keyLength:((C=y.key)==null?void 0:C.length)||0,secretLength:((x=y.privateKey)==null?void 0:x.length)||0}}),ccxtCache:Gi.getCacheStats(),balanceData:{},errors:[]};for(const y of g){console.log(` [DebugBingX] Checking balance data for account ${y.id}`);const C=u(y.id,"trading"),x=u(y.id,"funding");h.balanceData[y.id]={trading:C?{timestamp:C.timestamp,balanceCount:C.balances.length,totalBalance:C.balances.reduce((A,w)=>A+w.total,0),currencies:C.balances.map(A=>A.currency)}:null,funding:x?{timestamp:x.timestamp,balanceCount:x.balances.length,totalBalance:x.balances.reduce((A,w)=>A+w.total,0),currencies:x.balances.map(A=>A.currency)}:null}}for(const y of g)try{console.log(` [DebugBingX] Force fetching balance for account ${y.id}`),await c(y.id,"trading"),await c(y.id,"funding"),console.log(` [DebugBingX] Successfully fetched balances for account ${y.id}`)}catch(C){const x=`Failed to fetch balance for ${y.id}: ${C.message}`;console.error(` [DebugBingX] ${x}`),h.errors.push(x)}h.ccxtCacheAfter=Gi.getCacheStats(),n(h),console.log(" [DebugBingX] Diagnostics completed:",h)}catch(h){const y=`Diagnostics failed: ${h.message}`;console.error(` [DebugBingX] ${y}`),o(y)}finally{t(!1)}},[s,a,d,g,c,u]),m=b.useCallback(()=>{Gi.clearCache(),console.log(" [DebugBingX] CCXT cache cleared"),n(null)},[]),v=b.useCallback(async()=>{m(),await new Promise(h=>setTimeout(h,500)),await f()},[m,f]);b.useEffect(()=>{g.length>0&&f()},[g.length,f]);const p=(h,y,C)=>l.jsxs("div",{className:"flex items-center gap-2",children:[h?l.jsx(Fg,{className:"h-4 w-4 text-green-500"}):l.jsx(Jl,{className:"h-4 w-4 text-red-500"}),l.jsx("span",{className:h?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:h?y:C})]});return l.jsxs(Kr,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vo,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),l.jsx("h3",{className:"text-lg font-semibold",children:"BingX Debug Widget"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ie,{variant:"outline",size:"sm",onClick:f,disabled:e,children:[l.jsx(Ri,{className:`h-4 w-4 mr-1 ${e?"animate-spin":""}`}),"Run Diagnostics"]}),l.jsx(ie,{variant:"outline",size:"sm",onClick:v,disabled:e,children:" Force Refresh"})]})]}),i&&l.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-800 rounded",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Qa,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),l.jsx("span",{className:"text-red-700 dark:text-red-300 font-medium",children:"Error"})]}),l.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:i})]}),l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"border border-border rounded-lg p-3",children:[l.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[l.jsx(Tn,{className:"h-4 w-4"}),"User & BingX Accounts Status"]}),l.jsxs("div",{className:"space-y-2 text-sm",children:[p(!!d,"Active user found","No active user"),p(g.length>0,`${g.length} BingX account(s) found`,"No BingX accounts found"),g.map(h=>l.jsxs("div",{className:"ml-6 p-2 bg-muted/50 rounded text-xs",children:[l.jsxs("div",{className:"font-medium",children:[h.email," (",h.exchange,")"]}),l.jsxs("div",{className:"text-muted-foreground",children:["ID: ",h.id," | API Key: ",h.key?`${h.key.substring(0,8)}...`:"Not set"]}),p(!!h.key&&!!h.privateKey,"API credentials configured","Missing API credentials")]},h.id))]})]}),(r==null?void 0:r.ccxtCache)&&l.jsxs("div",{className:"border border-border rounded-lg p-3",children:[l.jsx("h4",{className:"font-medium mb-2",children:"CCXT Cache Status"}),l.jsxs("div",{className:"text-sm space-y-1",children:[l.jsxs("div",{children:["Total Instances: ",l.jsx("span",{className:"font-mono",children:r.ccxtCache.totalInstances})]}),l.jsxs("div",{children:["Markets Cache: ",l.jsx("span",{className:"font-mono",children:r.ccxtCache.totalMarketsCache})]}),r.ccxtCache.instances&&r.ccxtCache.instances.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("div",{className:"font-medium text-xs",children:"Active Instances:"}),r.ccxtCache.instances.map((h,y)=>l.jsxs("div",{className:"ml-2 text-xs bg-muted/50 p-1 rounded mt-1",children:[l.jsx("div",{className:"font-mono text-[10px]",children:h.key}),l.jsxs("div",{className:"text-muted-foreground",children:[h.exchangeId," | ",h.userId," | ",h.accountId," | ",h.ccxtType]})]},y))]})]})]}),(r==null?void 0:r.balanceData)&&l.jsxs("div",{className:"border border-border rounded-lg p-3",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Balance Data Status"}),l.jsx("div",{className:"space-y-2",children:Object.keys(r.balanceData).length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No balance data found"}):Object.entries(r.balanceData).map(([h,y])=>{const C=g.find(x=>x.id===h);return l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"font-medium",children:(C==null?void 0:C.email)||h}),l.jsxs("div",{className:"ml-2 space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs w-16",children:"Trading:"}),y.trading?l.jsxs("span",{className:"text-green-600 dark:text-green-400 text-xs",children:[y.trading.balanceCount," currencies, Total: ",y.trading.totalBalance.toFixed(4)]}):l.jsx("span",{className:"text-red-600 dark:text-red-400 text-xs",children:"No data"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs w-16",children:"Funding:"}),y.funding?l.jsxs("span",{className:"text-green-600 dark:text-green-400 text-xs",children:[y.funding.balanceCount," currencies, Total: ",y.funding.totalBalance.toFixed(4)]}):l.jsx("span",{className:"text-red-600 dark:text-red-400 text-xs",children:"No data"})]})]})]},h)})})]}),(r==null?void 0:r.errors)&&r.errors.length>0&&l.jsxs("div",{className:"border border-red-300 dark:border-red-800 rounded-lg p-3 bg-red-50 dark:bg-red-900/10",children:[l.jsx("h4",{className:"font-medium mb-2 text-red-700 dark:text-red-300",children:"Errors"}),l.jsx("div",{className:"space-y-1",children:r.errors.map((h,y)=>l.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 font-mono",children:h},y))})]}),r&&l.jsxs("div",{className:"border border-border rounded-lg p-3",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Raw Debug Info"}),l.jsx("pre",{className:"text-xs bg-muted/50 p-2 rounded overflow-auto max-h-48",children:JSON.stringify(r,null,2)})]})]})]})},rBe=()=>{const{providers:e,getEnabledProviders:t}=ut(),[r,n]=b.useState(null),[i,o]=b.useState([]),[s,a]=b.useState(!1),[c,u]=b.useState(!1),d=b.useRef(null),g=()=>{u(!1)};b.useEffect(()=>{const p=I=>{d.current&&!d.current.contains(I.target)&&g()};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const f=t();b.useEffect(()=>{!r&&f.length>0&&n(f[0].id)},[r,f]),b.useEffect(()=>{if(!r)return;(async()=>{a(!0);try{const I=e[r];if(!I)return;let h=[];switch(I.type){case"ccxt-browser":case"ccxt-server":const y=Oi();y&&(h=Object.keys(y.exchanges||{}).sort());break;case"custom":case"custom-server-with-adapter":case"marketmaker.cc":default:I.exchanges.includes("*")?h=["binance","bybit","okx","kucoin","moex","spbex"]:h=I.exchanges.filter(C=>C!=="*");break}o(h)}catch(I){console.error("Failed to load exchanges:",I),o([])}finally{a(!1)}})()},[r,e]);const m=r?e[r]:null,v=p=>{switch(p){case"ccxt-browser":return l.jsx(ZA,{size:16,className:"text-terminal-text/80"});case"ccxt-server":return l.jsx(I0,{size:16,className:"text-terminal-text/80"});case"stocksharp":return l.jsx(Eo,{size:16,className:"text-terminal-text/80"});default:return l.jsx(I0,{size:16,className:"text-terminal-text/60"})}};return l.jsxs("div",{ref:d,className:"h-full flex flex-col space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-terminal-text mb-2",children:"Select Provider"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>{g(),u(!c)},className:"w-full flex items-center justify-between px-3 py-2 bg-terminal-bg border border-terminal-border rounded text-sm focus:outline-none focus:border-terminal-accent",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[m&&v(m.type),l.jsx("span",{children:(m==null?void 0:m.name)||"Select provider..."})]}),l.jsx(Vr,{size:16,className:"text-terminal-text/70"})]}),c&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-terminal-widget border border-terminal-border rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:f.map(p=>l.jsxs("button",{onClick:()=>{n(p.id),u(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 hover:bg-terminal-accent/20 text-left text-sm",children:[v(p.type),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:p.name}),l.jsx("div",{className:"text-xs text-terminal-muted",children:p.type})]})]},p.id))})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-sm font-medium text-terminal-text",children:"Available Exchanges"}),l.jsxs("span",{className:"text-xs text-terminal-muted",children:[i.length," exchanges"]})]}),s?l.jsxs("div",{className:"flex items-center justify-center py-8 text-terminal-muted",children:[l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-terminal-accent"}),l.jsx("span",{className:"ml-2 text-sm",children:"Loading exchanges..."})]}):l.jsx(nBe,{exchanges:i})]}),m&&l.jsx("div",{className:"bg-terminal-widget/50 border border-terminal-border/50 rounded p-3",children:l.jsxs("div",{className:"text-xs text-terminal-muted space-y-1",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Provider:"})," ",m.name]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Type:"})," ",m.type]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Status:"})," ",m.status]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Priority:"})," ",m.priority]}),m.exchanges.includes("*")?l.jsxs("div",{children:[l.jsx("strong",{children:"Scope:"})," All exchanges"]}):l.jsxs("div",{children:[l.jsx("strong",{children:"Scope:"})," ",m.exchanges.length," specific exchanges"]})]})})]})},nBe=({exchanges:e})=>{const t=b.useRef(null),r=Hi({count:e.length,getScrollElement:()=>t.current,estimateSize:()=>40,overscan:10});return e.length===0?l.jsx("div",{className:"flex-1 bg-terminal-bg border border-terminal-border rounded",children:l.jsx("div",{className:"p-4 text-center text-terminal-muted text-sm",children:"No exchanges available"})}):l.jsx("div",{className:"flex-1 bg-terminal-bg border border-terminal-border rounded overflow-hidden",children:l.jsx("div",{ref:t,className:"h-full overflow-auto",style:{contain:"strict"},children:l.jsx("div",{style:{height:r.getTotalSize(),width:"100%",position:"relative"},children:r.getVirtualItems().map(n=>{const i=e[n.index];return l.jsx("div",{"data-index":n.index,ref:r.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.start}px)`},children:l.jsx("div",{className:"px-3 py-2 hover:bg-terminal-accent/10 transition-colors border-b border-terminal-border/50 last:border-b-0",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-terminal-text",children:i}),l.jsxs("span",{className:"text-xs text-terminal-muted",children:["#",n.index+1]})]})})},n.key)})})})})},iBe=()=>{const{getMarketsForExchange:e,getAllSupportedExchanges:t}=ut(),{users:r,activeUserId:n}=ct(),[i,o]=b.useState(null),[s,a]=b.useState(!1),[c,u]=b.useState(null),[d,g]=b.useState([]),[f,m]=b.useState(!1),[v,p]=b.useState(!1),[I,h]=b.useState(!1),y=b.useRef(null),C=()=>{p(!1),h(!1)};b.useEffect(()=>{const k=R=>{y.current&&!y.current.contains(R.target)&&C()};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const x=r.find(k=>k.id===n),A=(x==null?void 0:x.accounts)||[],w=i?Array.from(new Set(A.map(k=>k.exchange))).sort():t();b.useEffect(()=>{!s&&!i&&A.length>0&&o(A[0].id)},[i,A,s]),b.useEffect(()=>{if(i&&!c){const k=A.find(R=>R.id===i);k&&u(k.exchange)}},[i,c,A]),b.useEffect(()=>{if(!c)return;(async()=>{m(!0);try{const R=await e(c);g(R)}catch(R){console.error("Failed to load markets:",R),g([])}finally{m(!1)}})()},[c,e]);const S=i?A.find(k=>k.id===i):null;return l.jsxs("div",{ref:y,className:"h-full flex flex-col space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-terminal-text mb-2",children:"Select Account (Optional)"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>{C(),p(!v)},className:"w-full flex items-center justify-between px-3 py-2 bg-terminal-bg border border-terminal-border rounded text-sm focus:outline-none focus:border-terminal-accent",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Tn,{size:16,className:"text-terminal-text/80"}),l.jsx("span",{children:(S==null?void 0:S.email)||(i===null?"No account (all exchanges)":"Select account...")})]}),l.jsx(Vr,{size:16,className:"text-terminal-text/70"})]}),v&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-terminal-widget border border-terminal-border rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:[l.jsxs("button",{onClick:()=>{o(null),a(!0),p(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 hover:bg-terminal-accent/20 text-left text-sm text-terminal-muted",children:[l.jsx(Tn,{size:16,className:"text-terminal-text/60"}),l.jsx("span",{children:"No account (all exchanges)"})]}),A.map(k=>l.jsxs("button",{onClick:()=>{o(k.id),a(!0),u(k.exchange),p(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 hover:bg-terminal-accent/20 text-left text-sm",children:[l.jsx(Tn,{size:16,className:"text-terminal-text/70"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:k.email}),l.jsx("div",{className:"text-xs text-terminal-muted",children:k.exchange})]})]},k.id))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-terminal-text mb-2",children:"Select Exchange"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>{C(),h(!I)},className:"w-full flex items-center justify-between px-3 py-2 bg-terminal-bg border border-terminal-border rounded text-sm focus:outline-none focus:border-terminal-accent",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Pd,{size:16,className:"text-terminal-text/80"}),l.jsx("span",{children:c||"Select exchange..."})]}),l.jsx(Vr,{size:16,className:"text-terminal-text/70"})]}),I&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-terminal-widget border border-terminal-border rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:w.map(k=>l.jsxs("button",{onClick:()=>{u(k),h(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 hover:bg-terminal-accent/20 text-left text-sm",children:[l.jsx(Pd,{size:16,className:"text-terminal-text/70"}),l.jsx("span",{children:k})]},k))})]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-sm font-medium text-terminal-text",children:"Available Markets"}),l.jsxs("span",{className:"text-xs text-terminal-muted",children:[d.length," markets"]})]}),c?f?l.jsxs("div",{className:"flex items-center justify-center py-8 text-terminal-muted",children:[l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-terminal-accent"}),l.jsx("span",{className:"ml-2 text-sm",children:"Loading markets..."})]}):l.jsx("div",{className:"bg-terminal-bg border border-terminal-border rounded max-h-80 overflow-y-auto",children:d.length===0?l.jsxs("div",{className:"p-4 text-center text-terminal-muted text-sm",children:["No markets available for ",c]}):l.jsx("div",{className:"divide-y divide-terminal-border/50",children:d.map((k,R)=>l.jsx("div",{className:"px-3 py-2 hover:bg-terminal-accent/10 transition-colors",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-terminal-text font-medium",children:k}),l.jsxs("div",{className:"text-xs text-terminal-muted",children:[k==="spot"&&"Spot trading",k==="futures"&&"Futures contracts",k==="margin"&&"Margin trading",k==="options"&&"Options contracts",k==="inverse"&&"Inverse perpetual contracts",k==="swap"&&"Perpetual swap contracts",k==="advanced"&&"Advanced trading features",!["spot","futures","margin","options","inverse","swap","advanced"].includes(k)&&"Market type"]})]}),l.jsxs("span",{className:"text-xs text-terminal-muted",children:["#",R+1]})]})},k))})}):l.jsx("div",{className:"bg-terminal-bg border border-terminal-border rounded p-4 text-center text-terminal-muted text-sm",children:"Please select an exchange to view markets"})]}),l.jsx("div",{className:"bg-terminal-widget/50 border border-terminal-border/50 rounded p-3",children:l.jsxs("div",{className:"text-xs text-terminal-muted space-y-1",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Account:"})," ",(S==null?void 0:S.email)||"None selected"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Exchange:"})," ",c||"None selected"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Markets Count:"})," ",d.length]}),S&&l.jsxs("div",{children:[l.jsx("strong",{children:"Account Exchange:"})," ",S.exchange]})]})})]})},oBe=()=>{const{getSymbolsForExchange:e,getMarketsForExchange:t,getAllSupportedExchanges:r}=ut(),{users:n,activeUserId:i}=ct(),[o,s]=b.useState(null),[a,c]=b.useState(!1),[u,d]=b.useState(null),[g,f]=b.useState(null),[m,v]=b.useState([]),[p,I]=b.useState([]),[h,y]=b.useState([]),[C,x]=b.useState(""),[A,w]=b.useState(!1),[S,k]=b.useState(!1),[R,j]=b.useState(!1),[_,O]=b.useState(!1),P=b.useRef(null),N=()=>{k(!1),j(!1),O(!1)};b.useEffect(()=>{const T=L=>{P.current&&!P.current.contains(L.target)&&N()};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const B=n.find(T=>T.id===i),E=(B==null?void 0:B.accounts)||[],M=o?Array.from(new Set(E.map(T=>T.exchange))).sort():r();b.useEffect(()=>{!a&&!o&&E.length>0&&s(E[0].id)},[o,E,a]),b.useEffect(()=>{if(o&&!u){const T=E.find(L=>L.id===o);T&&d(T.exchange)}},[o,u,E]),b.useEffect(()=>{if(!u)return;(async()=>{try{const L=await t(u);v(L),L.length>0&&!g&&f(L[0])}catch(L){console.error("Failed to load markets:",L),v([])}})()},[u,t,g]),b.useEffect(()=>{if(!u||!g)return;(async()=>{w(!0);try{const L=await e(u,void 0,g);I(L)}catch(L){console.error("Failed to load pairs:",L),I([])}finally{w(!1)}})()},[u,g,e]),b.useEffect(()=>{if(!C.trim())y(p);else{const T=C.toLowerCase(),L=p.filter(W=>W.toLowerCase().includes(T));y(L)}},[p,C]);const G=o?E.find(T=>T.id===o):null;return l.jsxs("div",{ref:P,className:"h-full flex flex-col space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-terminal-text mb-2",children:"Select Account (Optional)"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>{N(),k(!S)},className:"w-full flex items-center justify-between px-3 py-2 bg-terminal-bg border border-terminal-border rounded text-sm focus:outline-none focus:border-terminal-accent",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Tn,{size:16,className:"text-terminal-text/80"}),l.jsx("span",{children:(G==null?void 0:G.email)||(o===null?"No account (all exchanges)":"Select account...")})]}),l.jsx(Vr,{size:16,className:"text-terminal-text/70"})]}),S&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-terminal-widget border border-terminal-border rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:[l.jsxs("button",{onClick:()=>{s(null),c(!0),k(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 hover:bg-terminal-accent/20 text-left text-sm text-terminal-muted",children:[l.jsx(Tn,{size:16,className:"text-terminal-text/60"}),l.jsx("span",{children:"No account (all exchanges)"})]}),E.map(T=>l.jsxs("button",{onClick:()=>{s(T.id),c(!0),d(T.exchange),k(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 hover:bg-terminal-accent/20 text-left text-sm",children:[l.jsx(Tn,{size:16,className:"text-terminal-text/70"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:T.email}),l.jsx("div",{className:"text-xs text-terminal-muted",children:T.exchange})]})]},T.id))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-terminal-text mb-2",children:"Select Exchange"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>{N(),j(!R)},className:"w-full flex items-center justify-between px-3 py-2 bg-terminal-bg border border-terminal-border rounded text-sm focus:outline-none focus:border-terminal-accent",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Pd,{size:16,className:"text-terminal-text/80"}),l.jsx("span",{children:u||"Select exchange..."})]}),l.jsx(Vr,{size:16,className:"text-terminal-text/70"})]}),R&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-terminal-widget border border-terminal-border rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:M.map(T=>l.jsxs("button",{onClick:()=>{d(T),f(null),j(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 hover:bg-terminal-accent/20 text-left text-sm",children:[l.jsx(Pd,{size:16,className:"text-terminal-text/70"}),l.jsx("span",{children:T})]},T))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-terminal-text mb-2",children:"Select Market"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>{N(),O(!_)},disabled:!u,className:"w-full flex items-center justify-between px-3 py-2 bg-terminal-bg border border-terminal-border rounded text-sm focus:outline-none focus:border-terminal-accent disabled:opacity-50",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(mr,{size:16,className:"text-terminal-text/80"}),l.jsx("span",{children:g||"Select market..."})]}),l.jsx(Vr,{size:16,className:"text-terminal-text/70"})]}),_&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-terminal-widget border border-terminal-border rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:m.map(T=>l.jsxs("button",{onClick:()=>{f(T),O(!1)},className:"w-full flex items-center space-x-2 px-3 py-2 hover:bg-terminal-accent/20 text-left text-sm",children:[l.jsx(mr,{size:16,className:"text-terminal-text/70"}),l.jsx("span",{children:T})]},T))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-terminal-text mb-2",children:"Search Pairs"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-terminal-muted"}),l.jsx("input",{type:"text",placeholder:"Filter pairs (e.g., BTC, ETH, USDT)...",value:C,onChange:T=>x(T.target.value),className:"w-full pl-10 pr-3 py-2 bg-terminal-bg border border-terminal-border rounded text-sm focus:outline-none focus:border-terminal-accent"})]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-sm font-medium text-terminal-text",children:"Trading Pairs"}),l.jsxs("span",{className:"text-xs text-terminal-muted",children:[h.length," of ",p.length," pairs"]})]}),!u||!g?l.jsx("div",{className:"bg-terminal-bg border border-terminal-border rounded p-4 text-center text-terminal-muted text-sm",children:"Please select exchange and market to view pairs"}):A?l.jsxs("div",{className:"flex items-center justify-center py-8 text-terminal-muted",children:[l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-terminal-accent"}),l.jsx("span",{className:"ml-2 text-sm",children:"Loading pairs..."})]}):l.jsx(sBe,{pairs:h,searchQuery:C,selectedExchange:u,selectedMarket:g})]}),l.jsx("div",{className:"bg-terminal-widget/50 border border-terminal-border/50 rounded p-3",children:l.jsxs("div",{className:"text-xs text-terminal-muted space-y-1",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Account:"})," ",(G==null?void 0:G.email)||"None selected"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Exchange:"})," ",u||"None selected"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Market:"})," ",g||"None selected"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Total Pairs:"})," ",p.length]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Filtered Pairs:"})," ",h.length]}),C&&l.jsxs("div",{children:[l.jsx("strong",{children:"Search:"}),' "',C,'"']})]})})]})},sBe=({pairs:e,searchQuery:t,selectedExchange:r,selectedMarket:n})=>{const i=b.useRef(null),o=Hi({count:e.length,getScrollElement:()=>i.current,estimateSize:()=>50,overscan:10});return e.length===0?l.jsx("div",{className:"bg-terminal-bg border border-terminal-border rounded max-h-80",children:l.jsx("div",{className:"p-4 text-center text-terminal-muted text-sm",children:t?`No pairs found for "${t}"`:`No pairs available for ${r}/${n}`})}):l.jsx("div",{className:"bg-terminal-bg border border-terminal-border rounded max-h-80 overflow-hidden",children:l.jsx("div",{ref:i,className:"h-80 overflow-auto",style:{contain:"strict"},children:l.jsx("div",{style:{height:o.getTotalSize(),width:"100%",position:"relative"},children:o.getVirtualItems().map(s=>{const a=e[s.index],c=a.split("/"),u=c[0]||"",d=c[1]||"";return l.jsx("div",{"data-index":s.index,ref:o.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${s.start}px)`},children:l.jsx("div",{className:"px-3 py-2 hover:bg-terminal-accent/10 transition-colors border-b border-terminal-border/50 last:border-b-0",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-terminal-text font-medium",children:a}),l.jsx("div",{className:"text-xs text-terminal-muted",children:u&&d?`${u} to ${d}`:"Trading pair"})]}),l.jsxs("span",{className:"text-xs text-terminal-muted",children:["#",s.index+1]})]})})},s.key)})})})})},aBe=({guideLines:e})=>l.jsx(l.Fragment,{children:e.map((t,r)=>l.jsx("div",{className:"absolute pointer-events-none",style:{left:t.orientation==="vertical"?`${t.position}px`:`${t.start}px`,top:t.orientation==="horizontal"?`${t.position}px`:`${t.start}px`,width:t.orientation==="vertical"?"1px":`${t.length}px`,height:t.orientation==="horizontal"?"1px":`${t.length}px`,backgroundColor:"#2D9CDB",boxShadow:"0 0 0 1px rgba(45, 156, 219, 0.5)",zIndex:9999}},`${t.orientation}-${t.position}-${r}`))}),oR=40,lBe=200,cBe=({className:e})=>{const t=Mt(a=>a.activeDashboardId),r=Mt(a=>a.dashboards),n=Mt(a=>a.toggleWidgetMinimized),i=r.find(a=>a.id===t),o=(i==null?void 0:i.widgets.filter(a=>a.isMinimized))||[],s=a=>{t&&n(t,a)};return o.length===0?null:l.jsx("div",{className:de("fixed bottom-0 left-0 right-0 z-[9999] bg-terminal-accent/20 backdrop-blur-sm border-t border-terminal-border","flex items-center justify-center gap-2 p-2",e),style:{height:oR+16},children:o.map((a,c)=>l.jsx("button",{onClick:()=>s(a.id),className:de("flex items-center px-3 py-2 rounded-md transition-all duration-200","bg-terminal-widget/80 hover:bg-terminal-widget border border-terminal-border","text-terminal-text hover:text-terminal-text-bright","shadow-sm hover:shadow-md transform hover:scale-105","min-w-0 max-w-[200px]"),style:{width:lBe,height:oR-8},title:`Click to expand: ${a.userTitle||a.defaultTitle}`,children:l.jsx("span",{className:"text-xs font-medium truncate",children:a.userTitle||a.defaultTitle})},a.id))})},uBe={chart:Iee,portfolio:d2,userBalances:fSe,userTradingData:PSe,orderForm:LSe,transactionHistory:DSe,custom:d2,orderbook:KSe,trades:YSe,deals:Qke,dataProviderSettings:ike,dataProviderDemo:ske,dataProviderSetup:Hke,dataProviderDebug:i$,notificationTest:Dke,debugUserData:qke,debugCCXTCache:eBe,debugBingX:tBe,exchanges:rBe,markets:iBe,pairs:oBe},dBe=()=>{const[e,t]=b.useState(null),[r,n]=b.useState(new Date),i=Mt(p=>p.activeDashboardId),o=Mt(p=>p.dashboards),s=Mt(p=>p.removeWidget),a=o.find(p=>p.id===i),c=(a==null?void 0:a.widgets)||[],u=b.useRef(null),[d,g]=b.useState(null),[f,m]=b.useState([]);b.useCallback((p,I)=>(g(p),m([]),{x:null,y:null}),[]),b.useCallback((p,I)=>(g(p),m([]),{x:null,y:null}),[]),b.useCallback(()=>{g(null),m([])},[]);const v=b.useCallback(p=>{p.preventDefault(),t({x:p.clientX,y:p.clientY})},[]);return b.useEffect(()=>{const p=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(p)},[]),H.useEffect(()=>{console.log("TradingTerminal: Dashboard changed",{activeDashboardId:i,activeDashboard:a==null?void 0:a.title,widgetsCount:c.length,widgets:c.map(p=>({id:p.id,title:p.title,position:p.position}))})},[i,a,c]),l.jsxs("div",{className:"min-h-screen bg-terminal-bg text-terminal-text flex flex-col",onContextMenu:v,onClick:()=>e&&t(null),children:[l.jsx(hJ,{}),l.jsxs("main",{ref:u,className:"flex-1 p-0 h-[calc(100vh-86px)] relative",style:{marginTop:0},children:[l.jsx(aBe,{guideLines:f}),c.map(p=>{const I=uBe[p.type],h=p.type==="userTradingData"?l.jsx(GSe,{widgetId:p.id}):p.type==="userBalances"?l.jsx(gSe,{widgetId:p.id}):void 0;return l.jsx(L4,{id:p.id,title:p.title,defaultTitle:p.defaultTitle,userTitle:p.userTitle,position:{x:p.position.x,y:p.position.y},size:{width:p.position.width,height:p.position.height},zIndex:p.position.zIndex||1,isActive:!0,groupId:p.groupId,widgetType:p.type,showGroupSelector:p.showGroupSelector,headerActions:h,onRemove:()=>a&&s(a.id,p.id),children:l.jsx(I,{widgetId:p.id,selectedGroupId:p.groupId})},p.id)})]}),e&&l.jsx(W4,{position:e,onClose:()=>t(null)}),l.jsx(cBe,{}),l.jsxs("div",{className:"fixed bottom-2 right-2 flex items-center text-terminal-muted text-xs bg-terminal-accent/30 px-3 py-1 rounded-md",children:[l.jsx("span",{className:"mr-2",children:r.toLocaleTimeString("ru-RU",{hour12:!1})}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),l.jsx("span",{children:"Online"})]})]})]})},gBe=()=>l.jsx(dBe,{}),fBe=()=>{const e=h_();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},hBe=()=>l.jsxs("div",{className:"hide fixed left-2 bottom-2 z-[5000] bg-terminal-accent/30 text-terminal-muted px-3 py-1 rounded-md flex items-center text-xs",children:[l.jsx("span",{children:"2 059,62 USD"}),l.jsx("span",{className:"mx-2",children:"|"}),l.jsxs("span",{children:["Today ",l.jsx("span",{className:"text-terminal-negative",children:"-1,24 USD"})," ",l.jsx("span",{className:"text-xs text-terminal-muted",children:"(0,06%)"})]})]}),sR="rightClickInfoDismissed",pBe=()=>{const[e,t]=b.useState(!1);return b.useEffect(()=>{const n=localStorage.getItem(sR)==="true";t(!n)},[]),{showMessage:e,dismissMessage:()=>{localStorage.setItem(sR,"true"),t(!1)}}},mBe=()=>{const{showMessage:e,dismissMessage:t}=pBe();return b.useEffect(()=>{if(!e)return;const r=()=>{t()};return document.addEventListener("contextmenu",r),()=>{document.removeEventListener("contextmenu",r)}},[e,t]),e?l.jsx("div",{className:"fixed bottom-2 left-1/2 transform -translate-x-1/2 z-[5000] bg-terminal-accent/30 text-terminal-muted px-3 py-1 rounded-md text-xs",children:l.jsx("span",{children:"Right-click to add widgets"})}):null},IBe=()=>{const{providers:e,createProvider:t,getProviderForExchange:r,getProviderExchangeMappings:n}=ut(),{users:i,activeUserId:o,addUser:s,addAccount:a}=ct(),c=i.find(I=>I.id===o),u=["binance","bybit","okx"],d=()=>{t("ccxt-browser","Test Browser Provider",["binance","bybit"],{sandbox:!0})},g=()=>{t("ccxt-browser","Universal Provider",["*"],{sandbox:!0})},f=()=>{t("ccxt-server","CCXT Express Server",["*"],{serverUrl:"http://localhost:3001",token:"your-secret-token",timeout:3e4,sandbox:!0})},m=()=>{s({email:"test@example.com",name:"Test User"})},v=()=>{o&&a(o,{exchange:"binance",email:"test@binance.com",key:"test-api-key",privateKey:"test-secret-key"})},p=n(u);return l.jsxs(Kr,{className:"w-full max-w-4xl mx-auto mt-4",children:[l.jsx(Un,{children:l.jsx(Jn,{children:" Provider-Account Integration Test"})}),l.jsxs(Qn,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:" Users & Accounts"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx(ie,{onClick:m,size:"sm",children:"Create Test User"}),l.jsx(ie,{onClick:v,size:"sm",disabled:!o,children:"Add Binance Account"})]}),l.jsxs("div",{className:"text-sm",children:["Active User: ",c?c.name||c.email:"None",l.jsx("br",{}),"Accounts: ",(c==null?void 0:c.accounts.length)||0]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:" Data Providers"}),l.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[l.jsx(ie,{onClick:d,size:"sm",children:"Create Browser Provider"}),l.jsx(ie,{onClick:g,size:"sm",children:"Create Universal Browser"}),l.jsx(ie,{onClick:f,size:"sm",children:"Create Server Provider"})]}),l.jsxs("div",{className:"text-sm",children:["Total Providers: ",Object.keys(e).length]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:" Provider-Exchange Mappings"}),l.jsx("div",{className:"space-y-2",children:u.map(I=>{const h=r(I),y=p.find(C=>C.exchange===I);return l.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[l.jsxs("strong",{children:[I,":"]})," ",h?l.jsxs("span",{className:"text-green-600",children:[h.name," (Priority: ",h.priority,")",y!=null&&y.account?" [With API Keys]":" [No Keys]"]}):l.jsx("span",{className:"text-red-600",children:"No Provider"})]},I)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:" All Providers"}),l.jsx("div",{className:"space-y-1",children:Object.values(e).map(I=>l.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[l.jsx("strong",{children:I.name})," - ",I.type," - Exchanges: ",I.exchanges.join(", ")," - Priority: ",I.priority]},I.id))})]})]})]})},yBe=()=>{const{getTimeframesForExchange:e}=ut(),[t,r]=b.useState({});return b.useEffect(()=>{const n=["binance","bybit","okx","kucoin"],i={};console.log(" [TestTimeframes] Testing direct CCXT access");const o=Oi();if(o){if(console.log(" [TestTimeframes] CCXT is available"),console.log(" [TestTimeframes] Available exchanges:",Object.keys(o).filter(s=>typeof o[s]=="function").slice(0,10)),o.binance)try{const s=new o.binance;console.log(" [TestTimeframes] Binance timeframes:",s.timeframes),i.binance_direct=s.timeframes}catch(s){console.error(" [TestTimeframes] Error creating Binance instance:",s),i.binance_direct={error:s.message}}}else console.error(" [TestTimeframes] CCXT is not available"),i.ccxt_available=!1;n.forEach(s=>{console.log(` [TestTimeframes] Testing ${s}`);try{const a=e(s);i[s]=a,console.log(` [TestTimeframes] ${s} timeframes:`,a)}catch(a){console.error(` [TestTimeframes] Error getting timeframes for ${s}:`,a),i[s]={error:a.message}}}),r(i)},[e]),l.jsxs("div",{className:"p-4 bg-gray-900 text-white",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:" Timeframes Test Results"}),l.jsx("pre",{className:"text-xs bg-gray-800 p-4 rounded overflow-auto",children:JSON.stringify(t,null,2)})]})},CBe=()=>{const{providers:e,getProviderForExchange:t,initializeChartData:r,getCandles:n,subscribe:i,unsubscribe:o,getActiveSubscriptionsList:s}=ut(),[a,c]=b.useState([]),[u,d]=b.useState(!1),g=h=>{c(y=>[...y,`${new Date().toLocaleTimeString()}: ${h}`]),console.log(`[TestChart] ${h}`)},f=()=>{g("=== Testing Providers ===");const h=Object.values(e);g(`Found ${h.length} providers`),h.forEach(C=>{g(`Provider: ${C.name} (${C.id}) - Status: ${C.status} - Exchanges: ${C.exchanges.join(", ")}`)});const y=t("binance");g(`Provider for Binance: ${y?y.name:"None"}`)},m=()=>{g("=== Testing CCXT ===");try{const h=window.ccxt;if(h){g(`CCXT loaded: version ${h.version||"unknown"}`),g(`Available exchanges: ${Object.keys(h).filter(C=>typeof h[C]=="function").slice(0,5).join(", ")}...`);const y=new h.binance;g(`Binance instance created: ${y.id}`)}else g(" CCXT not loaded")}catch(h){g(` CCXT error: ${h}`)}},v=async()=>{g("=== Testing Chart Data Initialization ==="),d(!0);try{const h=await r("binance","BTC/USDT","1h","spot");if(g(` Chart data loaded: ${h.length} candles`),h.length>0){const y=h[0],C=h[h.length-1];g(`First candle: ${new Date(y.timestamp).toLocaleString()} - Close: ${y.close}`),g(`Last candle: ${new Date(C.timestamp).toLocaleString()} - Close: ${C.close}`)}}catch(h){g(` Chart data error: ${h}`)}finally{d(!1)}},p=async()=>{g("=== Testing Subscription ===");try{const h=await i("test-widget","binance","BTC/USDT","candles","1h","spot");g(`Subscription result: ${h.success?" Success":" Failed"} - ${h.error||"OK"}`);const y=s();g(`Active subscriptions: ${y.length}`),y.forEach(x=>{g(`- ${x.key.exchange}:${x.key.symbol}:${x.key.dataType} (${x.method}) - Active: ${x.isActive}`)});const C=n("binance","BTC/USDT","1h","spot");g(`Stored candles: ${C.length}`)}catch(h){g(` Subscription error: ${h}`)}},I=async()=>{c([]),f(),m(),await v(),await p(),g("=== All Tests Completed ===")};return b.useEffect(()=>{I()},[]),l.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Chart Widget Test"}),l.jsxs("div",{className:"mb-4 space-x-2",children:[l.jsx("button",{onClick:I,disabled:u,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:u?"Running Tests...":"Run All Tests"}),l.jsx("button",{onClick:f,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Test Providers"}),l.jsx("button",{onClick:m,className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Test CCXT"}),l.jsx("button",{onClick:v,disabled:u,className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50",children:"Test Chart Data"})]}),l.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg max-h-96 overflow-y-auto",children:[l.jsx("h3",{className:"font-bold mb-2",children:"Test Results:"}),a.length===0?l.jsx("p",{className:"text-gray-500",children:"No tests run yet"}):l.jsx("div",{className:"space-y-1",children:a.map((h,y)=>l.jsx("div",{className:`text-sm font-mono ${h.includes("")?"text-red-600":h.includes("")?"text-green-600":h.includes("===")?"text-blue-600 font-bold":"text-gray-700"}`,children:h},y))})]})]})},vBe=()=>{const{createProvider:e,providers:t}=ut(),{showSuccess:r,showError:n}=lu(),[i,o]=b.useState("http://localhost:3001"),[s,a]=b.useState("your-secret-token"),[c,u]=b.useState(!1),[d,g]=b.useState(!1),f=async()=>{g(!0);try{const p=await fetch(`${i}/health`);if(p.ok){const I=await p.json();r("Connection successful!",`Server is running: ${I.message}`)}else throw new Error(`HTTP ${p.status}`)}catch(p){n("Connection failed",`Could not connect to server: ${p instanceof Error?p.message:"Unknown error"}`)}finally{g(!1)}},m=async()=>{u(!0);try{const p=e("ccxt-server","Test CCXT Server",["*"],{serverUrl:i,token:s,timeout:3e4});r("CCXT Server Provider created!",`Provider "${p.name}" has been created successfully`)}catch(p){n("Error creating provider",p instanceof Error?p.message:"Unknown error")}finally{u(!1)}},v=Object.values(t).filter(p=>p.type==="ccxt-server");return l.jsxs(Kr,{className:"w-full max-w-2xl",children:[l.jsx(Un,{children:l.jsx(Jn,{children:"Test CCXT Server Provider"})}),l.jsxs(Qn,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"server-url",children:"Server URL"}),l.jsx(Pe,{id:"server-url",value:i,onChange:p=>o(p.target.value),placeholder:"http://localhost:3001"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"token",children:"Authentication Token"}),l.jsx(Pe,{id:"token",type:"password",value:s,onChange:p=>a(p.target.value),placeholder:"your-secret-token"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ie,{onClick:f,disabled:d||!i,variant:"outline",children:d?"Testing...":"Test Connection"}),l.jsx(ie,{onClick:m,disabled:c||!i||!s,children:c?"Creating...":"Create Provider"})]}),v.length>0&&l.jsxs("div",{className:"border-t pt-4",children:[l.jsx("h4",{className:"text-sm font-medium mb-2",children:"Existing CCXT Server Providers:"}),l.jsx("div",{className:"space-y-2",children:v.map(p=>l.jsxs("div",{className:"text-sm p-2 bg-muted rounded",children:[l.jsx("div",{className:"font-medium",children:p.name}),l.jsxs("div",{className:"text-muted-foreground",children:["URL: ",p.config.serverUrl]}),l.jsxs("div",{className:"text-muted-foreground",children:["Exchanges: ",p.exchanges.join(", ")]})]},p.id))})]})]})]})},bBe=()=>{const{createProvider:e,providers:t,removeProvider:r}=ut(),{showSuccess:n,showError:i}=lu(),o=()=>{try{const c=e("ccxt-server","Test CCXT Server (Debug)",["binance","bybit"],{serverUrl:"http://localhost:3001",token:"your-secret-token",timeout:3e4});n("Test CCXT Server Provider Created",`Provider "${c.name}" created for Debug Widget testing`)}catch(c){i("Error creating test provider",c instanceof Error?c.message:"Unknown error")}},s=()=>{const c=Object.values(t).filter(u=>u.name.includes("Test CCXT Server (Debug)"));c.forEach(u=>{r(u.id)}),c.length>0&&n("Test providers cleaned up",`Removed ${c.length} test provider(s)`)},a=Object.values(t).filter(c=>c.type==="ccxt-server"&&c.name.includes("Test CCXT Server (Debug)"));return l.jsxs("div",{className:"space-y-6 p-4",children:[l.jsxs(Kr,{children:[l.jsx(Un,{children:l.jsx(Jn,{children:"Test Debug Widget CCXT Server Editing"})}),l.jsxs(Qn,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ie,{onClick:o,children:"Create Test CCXT Server Provider"}),l.jsx(ie,{variant:"outline",onClick:s,disabled:a.length===0,children:"Cleanup Test Providers"})]}),a.length>0&&l.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded",children:[l.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:" Test CCXT Server provider created! Now you can:"}),l.jsxs("ul",{className:"text-sm text-green-600 dark:text-green-400 mt-2 ml-4 list-disc",children:[l.jsx("li",{children:"Find the provider in the Debug Widget below"}),l.jsx("li",{children:"Click the Edit button (pencil icon)"}),l.jsx("li",{children:"Modify Server URL, Token, and Timeout fields"}),l.jsx("li",{children:"Test that changes are saved correctly"})]})]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.jsx("p",{children:l.jsx("strong",{children:"Testing Instructions:"})}),l.jsxs("ol",{className:"list-decimal ml-4 mt-1 space-y-1",children:[l.jsx("li",{children:"Create a test CCXT Server provider using the button above"}),l.jsx("li",{children:"In the Debug Widget below, find your test provider"}),l.jsx("li",{children:"Click the Edit button (pencil icon) to enter edit mode"}),l.jsxs("li",{children:["Verify that CCXT Server specific fields appear:",l.jsxs("ul",{className:"list-disc ml-4 mt-1",children:[l.jsx("li",{children:"Server URL (should show: http://localhost:3001)"}),l.jsx("li",{children:"Authentication Token (should show: your-secret-token)"}),l.jsx("li",{children:"Timeout (should show: 30000)"})]})]}),l.jsx("li",{children:"Modify the values and click Save"}),l.jsx("li",{children:"Verify that changes are persisted"})]})]})]})]}),l.jsxs(Kr,{children:[l.jsx(Un,{children:l.jsx(Jn,{children:"Data Provider Debug Widget"})}),l.jsx(Qn,{children:l.jsx(i$,{})})]})]})},xBe=({isOpen:e,onClose:t,title:r,children:n})=>e?Li.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[10002] flex",children:[l.jsx("div",{className:"flex-1 bg-black/20 backdrop-blur-sm",onClick:t}),l.jsxs("div",{className:de("w-80 bg-terminal-bg border-l border-terminal-border","transform transition-transform duration-300 ease-in-out","translate-x-0"),children:[l.jsxs("div",{className:"h-12 px-4 py-3 bg-terminal-accent/60 flex items-center justify-between border-b border-terminal-border",children:[l.jsx("h2",{className:"text-sm font-medium text-terminal-text",children:r}),l.jsx("button",{onClick:t,className:"p-1 rounded-sm hover:bg-terminal-widget/50 text-terminal-muted hover:text-terminal-text transition-colors",children:l.jsx(Cr,{size:16})})]}),l.jsx("div",{className:"h-[calc(100vh-48px)] overflow-auto p-4",children:n})]})]}),document.body):null,aR={"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w","1M":"1M"},ABe=({exchange:e,symbol:t,timeframe:r,market:n,isSubscribed:i,isLoading:o,error:s,dataFetchMethod:a,connectionStatus:c,onExchangeChange:u,onSymbolChange:d,onTimeframeChange:g,onMarketChange:f,onSubscribe:m,onUnsubscribe:v,isReadOnly:p=!1})=>{var G;const{exchanges:I,loading:h,error:y}=z_(),{getMarketsForExchange:C,getSymbolsForExchange:x,getTimeframesForExchange:A}=ut(),w=b.useMemo(()=>{if(!e)return["1m","5m","15m","30m","1h","4h","1d"].map(W=>({id:W,label:aR[W]||W}));console.log(` [ChartSettings] Getting timeframes for exchange: ${e}`);const T=A(e);return console.log(" [ChartSettings] Received timeframes:",T),T.map(L=>({id:L,label:aR[L]||L}))},[e,A]);b.useEffect(()=>{const T=w.map(L=>L.id);r&&!T.includes(r)&&(console.log(` [ChartSettings] Current timeframe ${r} not available for ${e}, switching to ${T[0]}`),g(T[0]))},[w,r,e,g]);const S=[{id:"binance",name:"Binance"},{id:"bybit",name:"Bybit"},{id:"okx",name:"OKX"},{id:"kucoin",name:"KuCoin"},{id:"coinbase",name:"Coinbase"},{id:"kraken",name:"Kraken"},{id:"huobi",name:"Huobi"},{id:"gateio",name:"Gate.io"}],k=y||I.length===0?S:I,[R,j]=b.useState(["spot","futures","margin"]),[_,O]=b.useState(["BTC/USDT","ETH/USDT","BNB/USDT","ADA/USDT","SOL/USDT","XRP/USDT","DOT/USDT","DOGE/USDT","AVAX/USDT","MATIC/USDT"]),[P,N]=b.useState(!1),[B,E]=b.useState(!1);b.useEffect(()=>{if(!e||!C){j(["spot","futures","margin"]);return}const L=setTimeout(async()=>{N(!0);try{console.log(` Loading markets for exchange: ${e}`);const W=await C(e);console.log(` Loaded markets for ${e}:`,W),j(W&&W.length>0?W:["spot","futures","margin"])}catch(W){console.error(" Failed to load markets:",W),j(["spot","futures","margin"])}finally{N(!1)}},100);return()=>clearTimeout(L)},[e,C]),b.useEffect(()=>{if(!e||!n||!x)return;const L=setTimeout(async()=>{E(!0);try{console.log(` Loading symbols for ${e}:${n}`);const W=await x(e,void 0,n);console.log(` Loaded ${W.length} symbols for ${e}:${n}`),W&&W.length>0?O(W):(O(["BTC/USDT","ETH/USDT","BNB/USDT","ADA/USDT","SOL/USDT","XRP/USDT","DOT/USDT","DOGE/USDT","AVAX/USDT","MATIC/USDT"]),console.warn(` No symbols loaded for ${e}:${n}, using fallback`))}catch(W){console.error(" Failed to load symbols:",W),O(["BTC/USDT","ETH/USDT","BNB/USDT"])}finally{E(!1)}},100);return()=>clearTimeout(L)},[e,n,x]);const M=()=>{switch(c){case"connected":return l.jsx(Kg,{className:"w-4 h-4 text-green-500"});case"connecting":return l.jsx(zm,{className:"w-4 h-4 text-yellow-500 animate-spin"});default:return l.jsx(sp,{className:"w-4 h-4 text-red-500"})}};return l.jsxs("div",{className:"space-y-6 p-4",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(ue,{className:"text-sm font-medium",children:"Connection Status"}),l.jsxs("div",{className:"flex items-center gap-3",children:[M(),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:t}),l.jsxs("span",{className:"text-muted-foreground",children:["(",e.toUpperCase(),")"]}),l.jsx(Ot,{variant:c==="connected"?"default":"secondary",children:c})]})]}),s&&l.jsx("div",{className:"text-red-400 text-sm bg-red-50 dark:bg-red-950/20 p-2 rounded",children:s})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(ue,{className:"text-sm font-medium",children:"Market Configuration"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-xs",children:"Exchange"}),p?l.jsx("div",{className:"h-8 px-3 py-2 bg-muted border border-input rounded-md text-sm flex items-center",children:((G=k.find(T=>T.id===e))==null?void 0:G.name)||e}):l.jsx(J0,{value:e,onValueChange:u,options:k.map(T=>T.id),placeholder:"Select exchange...",searchPlaceholder:"Search exchanges...",loading:h,className:"h-8",optionLabels:k.reduce((T,L)=>({...T,[L.id]:L.name}),{})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-xs",children:"Market"}),p?l.jsx("div",{className:"h-8 px-3 py-2 bg-muted border border-input rounded-md text-sm flex items-center",children:n.charAt(0).toUpperCase()+n.slice(1)}):l.jsxs(Rn,{value:n,onValueChange:f,children:[l.jsxs(hn,{className:"h-8",children:[l.jsx(On,{}),P&&l.jsx(Um,{className:"h-4 w-4 animate-spin ml-2"})]}),l.jsx(pn,{children:R.map(T=>l.jsx(Xe,{value:T,children:T.charAt(0).toUpperCase()+T.slice(1)},T))})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-xs",children:"Symbol"}),p?l.jsx(Pe,{value:t,readOnly:!0,className:"h-8 bg-muted"}):l.jsx(J0,{value:t,onValueChange:d,options:_,placeholder:"Select symbol...",loading:B,className:"h-8",searchPlaceholder:"Search symbols..."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-xs",children:"Timeframe"}),l.jsxs(Rn,{value:r,onValueChange:g,children:[l.jsx(hn,{className:"h-8",children:l.jsx(On,{})}),l.jsx(pn,{children:w.map(T=>l.jsx(Xe,{value:T.id,children:T.label},T.id))})]})]})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(ue,{className:"text-sm font-medium",children:"Data Connection"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs(Ot,{variant:"outline",className:"text-xs",children:["Method: ",a.toUpperCase()]}),l.jsxs(ie,{onClick:i?v:m,disabled:o,size:"sm",variant:i?"destructive":"default",className:"flex items-center gap-2",children:[o?l.jsx(Ri,{className:"w-3 h-3 animate-spin"}):i?l.jsx(LA,{className:"w-3 h-3"}):l.jsx(Jm,{className:"w-3 h-3"}),o?"Loading...":i?"Disconnect":"Connect"]})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsx("p",{children:" WebSocket provides real-time updates"}),l.jsx("p",{children:" REST polling updates at intervals"}),l.jsx("p",{children:" Chart data is cached for performance"})]})]})]})},wBe=({widgetId:e,selectedGroupId:t})=>{const{getWidget:r,updateWidget:n}=TZ(),{subscribe:i,unsubscribe:o,dataFetchSettings:s,getActiveSubscriptionsList:a}=ut(),{getGroupById:c,selectedGroupId:u,getTransparentGroup:d}=zr(),g=t||u,f=g?c(g):d(),m=f&&f.account&&f.exchange&&f.market&&f.tradingPair,v=(f==null?void 0:f.exchange)||"",p=(f==null?void 0:f.tradingPair)||"",I=(f==null?void 0:f.market)||"spot",h=r(e),y=h.timeframe,C=a(),x=b.useMemo(()=>{if(m)return C.find(P=>P.key.exchange===v&&P.key.symbol===p&&P.key.dataType==="candles"&&P.key.timeframe===y&&P.key.market===I)},[C,m,v,p,y,I]),A=()=>x?x.isActive?"connected":"connecting":"disconnected",w=x?x.isActive:!1,S=P=>{if(x){const N=`widget-${e}`;o(N,v,p,"candles",y,I)}if(n(e,{timeframe:P}),x){const N=`widget-${e}`;setTimeout(async()=>{try{n(e,{isLoading:!0,error:null});const B=await i(N,v,p,"candles",P,I);B.success?n(e,{isSubscribed:!0,isLoading:!1}):n(e,{error:B.error||"Subscription failed",isLoading:!1})}catch(B){n(e,{error:B instanceof Error?B.message:"Subscription failed",isLoading:!1})}},100)}},k=P=>{if(!f)return;if(x){const B=`widget-${e}`;o(B,v,p,"candles",y,I)}const{updateGroup:N}=zr.getState();N(f.id,{...f,exchange:P}),console.log(` Chart settings: Exchange changed to ${P} in groupStore`)},R=P=>{if(!f)return;if(x){const B=`widget-${e}`;o(B,v,p,"candles",y,I)}const{updateGroup:N}=zr.getState();N(f.id,{...f,tradingPair:P}),console.log(` Chart settings: Symbol changed to ${P} in groupStore`)},j=P=>{if(!f)return;if(x){const B=`widget-${e}`;o(B,v,p,"candles",y,I)}const{updateGroup:N}=zr.getState();N(f.id,{...f,market:P}),console.log(` Chart settings: Market changed to ${P} in groupStore`)},_=async()=>{if(!m){n(e,{error:"No instrument selected"});return}try{n(e,{isLoading:!0,error:null});const P=`widget-${e}`,N=await i(P,v,p,"candles",y,I);N.success?n(e,{isSubscribed:!0,isLoading:!1}):n(e,{error:N.error||"Subscription failed",isLoading:!1})}catch(P){n(e,{error:P instanceof Error?P.message:"Subscription failed",isLoading:!1})}},O=()=>{if(!m)return;const P=`widget-${e}`;o(P,v,p,"candles",y,I),n(e,{isSubscribed:!1})};return m?l.jsx(ABe,{exchange:v,symbol:p,timeframe:y,market:I,isSubscribed:w,isLoading:h.isLoading,error:h.error,dataFetchMethod:s.method,connectionStatus:A(),onExchangeChange:k,onSymbolChange:R,onTimeframeChange:S,onMarketChange:j,onSubscribe:_,onUnsubscribe:O,isReadOnly:!1}):l.jsxs("div",{className:"p-4 text-center text-terminal-muted",children:[l.jsx("div",{className:"text-lg font-medium mb-2",children:"No instrument selected"}),l.jsx("div",{className:"text-sm",children:"Please select a trading instrument in the selector"})]})},SBe=({widgetId:e,isSubscribed:t=!1,isLoading:r=!1,error:n=null,onSubscribe:i,onUnsubscribe:o})=>{const{subscribe:s,unsubscribe:a,providers:c,activeProviderId:u,dataFetchSettings:d,getActiveSubscriptionsList:g}=ut(),{getWidget:f,updateWidget:m}=dD(),v=f(e),{getGroupById:p,selectedGroupId:I,getTransparentGroup:h}=zr(),y=I?p(I):h(),C=(y==null?void 0:y.exchange)||"binance",x=(y==null?void 0:y.tradingPair)||"BTC/USDT",A=(y==null?void 0:y.market)||"spot",[w,S]=b.useState({side:"all",minPrice:"",maxPrice:"",minAmount:"",maxAmount:"",showLastN:"100"}),[k,R]=b.useState("timestamp"),[j,_]=b.useState("desc"),[O,P]=b.useState(!0),B=g().find(W=>W.key.exchange===C&&W.key.symbol===x&&W.key.dataType==="trades"&&W.key.market===A),E=async()=>{if(!u){m(e,{error:"No active provider"});return}try{m(e,{isLoading:!0,error:null});const W=`settings-${e}`,X={isAggregated:v.isAggregatedTrades,tradesLimit:v.tradesLimit},V=await s(W,C,x,"trades",void 0,A,X);V.success?(m(e,{isSubscribed:!0,isLoading:!1}),console.log(` [TradesSettings] Subscribed to ${C}:${A}:${x} (aggregated: ${v.isAggregatedTrades}, limit: ${v.tradesLimit})`)):m(e,{error:V.error||"Subscription failed",isLoading:!1})}catch(W){m(e,{error:W instanceof Error?W.message:"Subscription failed",isLoading:!1})}},M=()=>{const W=`settings-${e}`;a(W,C,x,"trades",void 0,A),m(e,{isSubscribed:!1}),console.log(` [TradesSettings] Unsubscribed from ${C}:${A}:${x}`)},G=v.isSubscribed||t,T=v.isLoading||r,L=v.error||n;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(hF,{className:"h-4 w-4"}),l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Trades Configuration"})]}),l.jsx("p",{className:"text-xs text-terminal-muted mb-3",children:"Configure trades data aggregation and limits"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Aggregate Trades"}),l.jsx("p",{className:"text-xs text-terminal-muted/70",children:"Combine multiple trades into one for better performance"})]}),l.jsx(ji,{checked:v.isAggregatedTrades,onCheckedChange:W=>m(e,{isAggregatedTrades:W})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"space-y-1",children:l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Show Table Header"})}),l.jsx(ji,{checked:v.showTableHeader,onCheckedChange:W=>m(e,{showTableHeader:W})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"space-y-1",children:l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Show Statistics"})}),l.jsx(ji,{checked:v.showStats,onCheckedChange:W=>m(e,{showStats:W})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Trades Limit"}),l.jsxs(Rn,{value:v.tradesLimit.toString(),onValueChange:W=>m(e,{tradesLimit:parseInt(W)}),children:[l.jsx(hn,{children:l.jsx(On,{})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"100",children:"100 trades"}),l.jsx(Xe,{value:"200",children:"200 trades"}),l.jsx(Xe,{value:"500",children:"500 trades"}),l.jsx(Xe,{value:"1000",children:"1000 trades"})]})]})]}),l.jsxs("div",{className:"p-3 rounded border bg-terminal-widget border-terminal-border space-y-2",children:[l.jsx("div",{className:"text-xs text-terminal-muted",children:"Current Instrument:"}),l.jsxs("div",{className:"text-sm text-terminal-text",children:[l.jsx("strong",{children:C}),"  ",l.jsx("strong",{children:x}),"  ",l.jsx("strong",{children:A})]}),B&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-xs",children:[" Method: ",l.jsx("strong",{children:B.method==="websocket"?"WebSocket":B.isFallback?"REST (fallback)":"REST"})]}),l.jsx("span",{className:`w-2 h-2 rounded-full ${B.isActive?"bg-green-500":"bg-gray-400"}`})]}),B.isFallback&&l.jsx("div",{className:"text-orange-600 bg-orange-100 p-2 rounded text-xs",children:" WebSocket unavailable, using REST fallback"}),l.jsxs("div",{className:"text-xs",children:[" Subscribers: ",l.jsx("strong",{children:B.subscriberCount})]}),B.lastUpdate>0&&l.jsxs("div",{className:"text-xs",children:[" Last update: ",l.jsx("strong",{children:new Date(B.lastUpdate).toLocaleTimeString()})]})]})]})]})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Data Connection"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Control real-time data subscription"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[B&&l.jsxs(Ot,{variant:"outline",className:"text-xs",children:["Method: ",B.method==="websocket"?"WebSocket":B.isFallback?"REST (fallback)":"REST"]}),l.jsxs(ie,{onClick:G?M:E,disabled:T,size:"sm",variant:G?"destructive":"default",className:"flex items-center gap-2",children:[T?l.jsx(Ri,{className:"w-3 h-3 animate-spin"}):G?l.jsx(LA,{className:"w-3 h-3"}):l.jsx(Jm,{className:"w-3 h-3"}),T?"Loading...":G?"Disconnect":"Connect"]})]}),L&&l.jsx("div",{className:"text-red-400 text-sm bg-red-50 dark:bg-red-950/20 p-2 rounded",children:L}),l.jsxs("div",{className:"text-xs text-terminal-muted",children:[l.jsx("p",{children:" WebSocket provides real-time updates"}),l.jsx("p",{children:" REST polling updates at intervals"}),l.jsx("p",{children:" Trades data is cached for performance"})]})]})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{children:l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(aP,{className:"h-4 w-4"}),l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Filters"})]})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Side"}),l.jsxs(Rn,{value:w.side,onValueChange:W=>S(X=>({...X,side:W})),children:[l.jsx(hn,{className:"mt-1",children:l.jsx(On,{})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"all",children:"All trades"}),l.jsx(Xe,{value:"buy",children:"Buy only"}),l.jsx(Xe,{value:"sell",children:"Sell only"})]})]})]}),l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Show last"}),l.jsx(Pe,{type:"number",value:w.showLastN,onChange:W=>S(X=>({...X,showLastN:W.target.value})),placeholder:"100",className:"mt-1"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Min. price"}),l.jsx(Pe,{type:"number",value:w.minPrice,onChange:W=>S(X=>({...X,minPrice:W.target.value})),placeholder:"0",className:"mt-1"})]}),l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Max. price"}),l.jsx(Pe,{type:"number",value:w.maxPrice,onChange:W=>S(X=>({...X,maxPrice:W.target.value})),placeholder:"No limit",className:"mt-1"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Min. volume"}),l.jsx(Pe,{type:"number",value:w.minAmount,onChange:W=>S(X=>({...X,minAmount:W.target.value})),placeholder:"0",className:"mt-1"})]}),l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Max. volume"}),l.jsx(Pe,{type:"number",value:w.maxAmount,onChange:W=>S(X=>({...X,maxAmount:W.target.value})),placeholder:"No limit",className:"mt-1"})]})]})]})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Sorting"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Configure how trades are sorted"})]}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-muted",children:"Sort by"}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs(Rn,{value:k,onValueChange:W=>R(W),children:[l.jsx(hn,{className:"flex-1",children:l.jsx(On,{})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"timestamp",children:"Time"}),l.jsx(Xe,{value:"price",children:"Price"}),l.jsx(Xe,{value:"amount",children:"Volume"})]})]}),l.jsx(ie,{variant:"outline",size:"sm",onClick:()=>_(W=>W==="asc"?"desc":"asc"),children:j==="asc"?l.jsx(V5,{className:"h-4 w-4"}):l.jsx(F5,{className:"h-4 w-4"})})]})]})})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Display Options"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Configure how trades are displayed"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(ue,{htmlFor:"auto-scroll",className:"text-sm text-terminal-text",children:"Auto-scroll to new trades"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Automatically scroll to show latest trades"})]}),l.jsx(ji,{id:"auto-scroll",checked:O,onCheckedChange:P})]})]}),l.jsx(Ir,{}),l.jsx("div",{className:"space-y-3",children:l.jsx(ie,{variant:"outline",className:"w-full",onClick:()=>{S({side:"all",minPrice:"",maxPrice:"",minAmount:"",maxAmount:"",showLastN:"100"}),R("timestamp"),_("desc"),P(!0)},children:"Reset to Default"})})]})},kBe=({widgetId:e})=>{const{subscribe:t,unsubscribe:r,initializeOrderBookData:n,providers:i,activeProviderId:o,dataFetchSettings:s,getActiveSubscriptionsList:a}=ut(),{getWidget:c,updateWidget:u,setWidgetSettings:d}=uD(),{getGroupById:g,selectedGroupId:f,getTransparentGroup:m}=zr(),v=c(e),p=g(f),I=(p==null?void 0:p.exchange)||"binance",h=(p==null?void 0:p.tradingPair)||"BTC/USDT",y=(p==null?void 0:p.market)||"spot",{displayDepth:C,showCumulative:x,priceDecimals:A,amountDecimals:w,isSubscribed:S,isLoading:k,error:R}=v,j=a(),_=b.useMemo(()=>j.find(B=>B.key.exchange===I&&B.key.symbol===h&&B.key.dataType==="orderbook"&&B.key.market===y),[j,I,h,y]),O=async()=>{if(!o){u(e,{error:"No active provider"});return}try{u(e,{isLoading:!0,error:null}),console.log(` [OrderBook-${e}] Initializing orderbook data via REST`);const B=await n(I,h,y),E=`${e}-settings`,M=await t(E,I,h,"orderbook",void 0,y);M.success?(u(e,{isSubscribed:!0,isLoading:!1,error:null}),console.log(` [OrderBook-${e}] Subscription successful`)):u(e,{isSubscribed:!1,isLoading:!1,error:M.error||"Subscription failed"})}catch(B){console.error(" Error in orderbook subscription:",B),u(e,{error:B instanceof Error?B.message:"Subscription failed",isLoading:!1,isSubscribed:!1})}},P=()=>{const B=`${e}-settings`;r(B,I,h,"orderbook",void 0,y),u(e,{isSubscribed:!1}),console.log(` [OrderBook-${e}] Unsubscribed`)},N=B=>new Date(B).toLocaleTimeString();return l.jsxs("div",{className:"space-y-6 text-terminal-text",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Data Connection"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Control real-time orderbook data subscription"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[_&&l.jsxs(Ot,{variant:"outline",className:"text-xs",children:["Method: ",_.method==="websocket"?"WebSocket":_.isFallback?"REST (fallback)":"REST"]}),l.jsxs(ie,{onClick:S?P:O,disabled:k||!o,size:"sm",variant:S?"destructive":"default",className:"flex items-center gap-2",children:[k?l.jsx(Ri,{className:"w-3 h-3 animate-spin"}):S?l.jsx(LA,{className:"w-3 h-3"}):l.jsx(Jm,{className:"w-3 h-3"}),k?"Loading...":S?"Disconnect":"Connect"]})]}),R&&l.jsx("div",{className:"text-red-400 text-sm bg-red-50 dark:bg-red-950/20 p-2 rounded",children:R}),S&&_&&l.jsxs("div",{className:`text-xs p-2 rounded space-y-1 ${_.isFallback?"text-orange-700 bg-orange-50 border border-orange-200":"text-gray-500 bg-blue-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{children:[" Method: ",l.jsx("strong",{children:_.method==="websocket"?"WebSocket (real-time)":_.isFallback?" REST (fallback from WebSocket)":"REST (interval)"})]}),l.jsx("span",{className:`w-2 h-2 rounded-full ${_.isActive?"bg-green-500":"bg-gray-400"}`})]}),_.isFallback&&l.jsx("div",{className:"text-orange-600 bg-orange-100 p-1 rounded text-xs",children:" WebSocket unavailable for this exchange/pair, using REST as fallback"}),_.method==="rest"&&l.jsxs("div",{children:[" Update interval: ",l.jsxs("strong",{children:[s.restIntervals.orderbook,"ms"]})]}),l.jsxs("div",{children:[" Subscribers: ",l.jsx("strong",{children:_.subscriberCount})]}),_.lastUpdate>0&&l.jsxs("div",{children:[" Last update: ",l.jsx("strong",{children:N(_.lastUpdate)})]}),_.ccxtMethod&&l.jsxs("div",{className:"text-xs bg-blue-100 p-1 rounded",children:[" CCXT method: ",l.jsx("strong",{children:_.ccxtMethod}),_.ccxtMethod==="watchOrderBookForSymbols"&&" ( diff updates)",_.ccxtMethod==="watchOrderBook"&&" ( full snapshots)",_.ccxtMethod==="fetchOrderBook"&&" ( REST requests)"]})]}),S&&!_&&l.jsx("div",{className:"text-xs text-yellow-600 bg-yellow-50 p-2 rounded",children:" Subscription is being created... Please wait for connection."}),l.jsxs("div",{className:"text-xs text-terminal-muted bg-terminal-widget/50 p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Exchange:"})," ",I]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Symbol:"})," ",h]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Market:"})," ",y]})]})]})]}),l.jsx(Ir,{}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Display Settings"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Configure how order book is displayed"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-text",children:"Depth"}),l.jsxs(Rn,{value:C.toString(),onValueChange:B=>d(e,{...v,displayDepth:parseInt(B)}),children:[l.jsx(hn,{className:"bg-terminal-widget border-terminal-border",children:l.jsx(On,{})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"5",children:"5 levels"}),l.jsx(Xe,{value:"10",children:"10 levels"}),l.jsx(Xe,{value:"20",children:"20 levels"}),l.jsx(Xe,{value:"50",children:"50 levels"})]})]})]}),l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-text",children:"Price decimals"}),l.jsxs(Rn,{value:A.toString(),onValueChange:B=>d(e,{...v,priceDecimals:parseInt(B)}),children:[l.jsx(hn,{className:"bg-terminal-widget border-terminal-border",children:l.jsx(On,{})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"0",children:"0"}),l.jsx(Xe,{value:"1",children:"1"}),l.jsx(Xe,{value:"2",children:"2"}),l.jsx(Xe,{value:"4",children:"4"}),l.jsx(Xe,{value:"8",children:"8"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(ue,{className:"text-xs text-terminal-text",children:"Volume decimals"}),l.jsxs(Rn,{value:w.toString(),onValueChange:B=>d(e,{...v,amountDecimals:parseInt(B)}),children:[l.jsx(hn,{className:"bg-terminal-widget border-terminal-border",children:l.jsx(On,{})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"0",children:"0"}),l.jsx(Xe,{value:"2",children:"2"}),l.jsx(Xe,{value:"4",children:"4"}),l.jsx(Xe,{value:"6",children:"6"}),l.jsx(Xe,{value:"8",children:"8"})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[l.jsx(ji,{id:"show-cumulative",checked:x,onCheckedChange:B=>d(e,{...v,showCumulative:B})}),l.jsx(ue,{htmlFor:"show-cumulative",className:"text-xs text-terminal-text",children:"Cumulative volume"})]})]})]}),l.jsx(Ir,{}),l.jsx("div",{className:"space-y-3",children:l.jsx(ie,{variant:"outline",className:"w-full",onClick:()=>{d(e,{exchange:"binance",symbol:"BTC/USDT",market:"spot",displayDepth:10,showCumulative:!0,priceDecimals:2,amountDecimals:4})},children:"Reset to Default"})}),!S&&l.jsx("div",{className:"text-xs text-terminal-muted text-center pt-2 border-t border-terminal-border",children:" Widget automatically deduplicates subscriptions - if multiple widgets request the same data, only one connection is created."})]})},BBe=({showTotal:e,hideSmallAmounts:t,displayType:r,smallAmountThreshold:n,onShowTotalChange:i,onHideSmallAmountsChange:o,onDisplayTypeChange:s,onSmallAmountThresholdChange:a})=>l.jsxs("div",{className:"space-y-6 text-terminal-text",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs(ue,{className:"text-sm font-medium text-terminal-text flex items-center gap-2",children:[l.jsx(Os,{className:"w-4 h-4"}),"Display Settings"]}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Configure how balances are displayed"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Display Type"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Choose between table or pie chart view"})]}),l.jsxs(Rn,{value:r,onValueChange:s,children:[l.jsx(hn,{className:"w-32 bg-terminal-bg border-terminal-border",children:l.jsx(On,{})}),l.jsxs(pn,{children:[l.jsx(Xe,{value:"table",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(IF,{className:"w-4 h-4"}),"Table"]})}),l.jsx(Xe,{value:"pie",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Q5,{className:"w-4 h-4"}),"Pie Chart"]})})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Show Total"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Display total portfolio value at bottom"})]}),l.jsx(ji,{checked:e,onCheckedChange:i})]})]})]}),l.jsx(Ir,{className:"border-terminal-border"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs(ue,{className:"text-sm font-medium text-terminal-text flex items-center gap-2",children:[t?l.jsx(sP,{className:"w-4 h-4"}):l.jsx(MA,{className:"w-4 h-4"}),"Filtering Settings"]}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Control which balances to show or hide"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Hide Small Amounts"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Hide balances below threshold"})]}),l.jsx(ji,{checked:t,onCheckedChange:o})]}),t&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Threshold (USD)"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Hide balances below this USD value"})]}),l.jsx("div",{className:"w-24",children:l.jsx(Pe,{type:"number",min:"0",step:"0.1",value:n,onChange:c=>a(parseFloat(c.target.value)||0),className:"bg-terminal-bg border-terminal-border text-terminal-text text-right"})})]})]})]}),l.jsx(Ir,{className:"border-terminal-border"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-sm font-medium text-terminal-text",children:"Current Settings"}),l.jsxs("div",{className:"text-xs text-terminal-muted space-y-1",children:[l.jsxs("div",{children:[" Display: ",r==="table"?"Table View":"Pie Chart View"]}),l.jsxs("div",{children:[" Total: ",e?"Shown":"Hidden"]}),l.jsxs("div",{children:[" Small amounts: ",t?`Hidden (< $${n})`:"Shown"]})]})]})]}),NBe=({widgetId:e})=>{const{getWidget:t,updateWidget:r}=EZ(),n=t(e),{showTotal:i,hideSmallAmounts:o,displayType:s,smallAmountThreshold:a}=n.settings,c=b.useCallback(f=>{r(e,{showTotal:f})},[e,r]),u=b.useCallback(f=>{r(e,{hideSmallAmounts:f})},[e,r]),d=b.useCallback(f=>{r(e,{displayType:f})},[e,r]),g=b.useCallback(f=>{r(e,{smallAmountThreshold:f})},[e,r]);return l.jsx(BBe,{showTotal:i,hideSmallAmounts:o,displayType:s,smallAmountThreshold:a,onShowTotalChange:c,onHideSmallAmountsChange:u,onDisplayTypeChange:d,onSmallAmountThresholdChange:g})},jBe=({settings:e,onShowZeroPositionsChange:t,onShowClosedOrdersChange:r,onTradesLimitChange:n,onAccountChange:i})=>{const{users:o,activeUserId:s}=ct(),a=o.find(d=>d.id===s),c=b.useMemo(()=>!(a!=null&&a.accounts)||!Array.isArray(a.accounts)?[]:a.accounts.filter(d=>d.key&&d.privateKey),[a==null?void 0:a.accounts]),u=d=>{const g=parseInt(d.target.value);!isNaN(g)&&g>=10&&g<=1e3&&n(g)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-sm font-medium text-terminal-text",children:"Account Selection"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-sm text-terminal-text",children:"Data Source"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Choose which account(s) to display data for"}),l.jsxs(Rn,{value:e.selectedAccountId||"all",onValueChange:i,children:[l.jsx(hn,{className:"w-full h-8 bg-terminal-bg border-terminal-border text-sm",children:l.jsx(On,{})}),l.jsxs(pn,{className:"bg-terminal-widget border-terminal-border",children:[l.jsx(Xe,{value:"all",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Tn,{className:"w-3 h-3"}),"All Accounts (",c.length,")"]})}),c.map(d=>l.jsx(Xe,{value:d.id,children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-medium",children:d.exchange}),l.jsx("span",{className:"text-xs text-terminal-muted",children:d.email})]})},d.id))]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-sm font-medium text-terminal-text",children:"Display Options"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(ue,{className:"text-sm text-terminal-text",children:"Show Zero Positions"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Display positions with zero amount"})]}),l.jsx(ji,{checked:e.showZeroPositions,onCheckedChange:t})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(ue,{className:"text-sm text-terminal-text",children:"Show Closed Orders"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Include closed and canceled orders"})]}),l.jsx(ji,{checked:e.showClosedOrders,onCheckedChange:r})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-sm font-medium text-terminal-text",children:"Data Limits"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{className:"text-sm text-terminal-text",children:"Trades Limit"}),l.jsx("p",{className:"text-xs text-terminal-muted",children:"Maximum number of trades to fetch (10-1000)"}),l.jsx(Pe,{type:"number",min:"10",max:"1000",step:"10",value:e.tradesLimit,onChange:u,className:"w-24 h-8 text-sm"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-sm font-medium text-terminal-text",children:"Current Settings"}),l.jsxs("div",{className:"text-xs text-terminal-muted space-y-1",children:[l.jsxs("p",{children:["Active Tab: ",l.jsx("span",{className:"text-terminal-text",children:e.activeTab})]}),l.jsxs("p",{children:["Selected Account: ",l.jsx("span",{className:"text-terminal-text",children:e.selectedAccountId==="all"?"All Accounts":"Specific Account"})]}),l.jsxs("p",{children:["Zero Positions: ",l.jsx("span",{className:"text-terminal-text",children:e.showZeroPositions?"Yes":"No"})]}),l.jsxs("p",{children:["Closed Orders: ",l.jsx("span",{className:"text-terminal-text",children:e.showClosedOrders?"Yes":"No"})]}),l.jsxs("p",{children:["Trades Limit: ",l.jsx("span",{className:"text-terminal-text",children:e.tradesLimit})]})]})]})]})},TBe=({widgetId:e})=>{const{getWidget:t,updateWidget:r}=km(),n=t(e),i=b.useCallback(c=>{r(e,{showZeroPositions:c})},[e,r]),o=b.useCallback(c=>{r(e,{showClosedOrders:c})},[e,r]),s=b.useCallback(c=>{r(e,{tradesLimit:c})},[e,r]),a=b.useCallback(c=>{r(e,{selectedAccountId:c})},[e,r]);return l.jsx(jBe,{settings:n.settings,onShowZeroPositionsChange:i,onShowClosedOrdersChange:o,onTradesLimitChange:s,onAccountChange:a})},EBe=()=>{const{isOpen:e,widgetId:t,widgetType:r,widgetTitle:n,groupId:i,closeDrawer:o}=__(),s=()=>{if(!t||!r)return null;switch(r){case"chart":return l.jsx(wBe,{widgetId:t,selectedGroupId:i||void 0});case"orderbook":case"orderBook":return l.jsx(kBe,{widgetId:t});case"portfolio":return l.jsx("div",{className:"text-terminal-muted",children:"Portfolio settings coming soon..."});case"trades":return l.jsx(SBe,{widgetId:t});case"orderForm":return l.jsx("div",{className:"text-terminal-muted",children:"Order Form settings coming soon..."});case"userBalances":return l.jsx(NBe,{widgetId:t});case"userTradingData":return l.jsx(TBe,{widgetId:t});default:return l.jsx("div",{className:"text-terminal-muted",children:"No settings available for this widget"})}};return l.jsx(xBe,{isOpen:e,onClose:o,title:`${n||"Widget"} Settings`,children:s()})},RBe=yw,OBe=Cw,f$=b.forwardRef(({className:e,...t},r)=>l.jsx(Jg,{ref:r,className:de("fixed inset-0 z-[10003] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));f$.displayName=Jg.displayName;const h$=b.forwardRef(({className:e,children:t,...r},n)=>l.jsxs(OBe,{children:[l.jsx(f$,{}),l.jsxs(Qg,{ref:n,className:de("fixed left-[50%] top-[50%] z-[10004] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,l.jsxs(mI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(Cr,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));h$.displayName=Qg.displayName;const p$=({className:e,...t})=>l.jsx("div",{className:de("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});p$.displayName="DialogHeader";const m$=b.forwardRef(({className:e,...t},r)=>l.jsx(qg,{ref:r,className:de("text-lg font-semibold leading-none tracking-tight",e),...t}));m$.displayName=qg.displayName;const I$=b.forwardRef(({className:e,...t},r)=>l.jsx(ef,{ref:r,className:de("text-sm text-muted-foreground",e),...t}));I$.displayName=ef.displayName;function GBe({open:e,onOpenChange:t}){const{isLocked:r,needsMasterPassword:n,unlockStore:i,setupMasterPassword:o,users:s}=ct(),[a,c]=b.useState(""),[u,d]=b.useState(""),[g,f]=b.useState(!1),[m,v]=b.useState(""),[p,I]=b.useState(!1),h=s.some(A=>A.accounts.length>0),y=e!==void 0?e:r&&h,C=n;b.useEffect(()=>{y&&(c(""),d(""),v(""))},[y]);const x=async A=>{A.preventDefault(),v(""),I(!0);try{if(C){if(a.length<8){v("Password must be at least 8 characters long");return}if(a!==u){v("Passwords do not match");return}await o(a)?t==null||t(!1):v("Failed to set up master password")}else await i(a)?t==null||t(!1):v("Incorrect password")}catch(w){v(w instanceof Error?w.message:"An error occurred")}finally{I(!1)}};return l.jsx(RBe,{open:y,onOpenChange:t,children:l.jsxs(h$,{className:"sm:max-w-[425px]",onInteractOutside:A=>A.preventDefault(),children:[l.jsxs(p$,{children:[l.jsx(m$,{className:"flex items-center gap-2",children:C?l.jsxs(l.Fragment,{children:[l.jsx(Tk,{className:"h-5 w-5 text-green-500"}),"Set Up Master Password"]}):l.jsxs(l.Fragment,{children:[l.jsx(sF,{className:"h-5 w-5 text-yellow-500"}),"Unlock Vault"]})}),l.jsx(I$,{children:C?"Create a master password to encrypt your API keys. This password will be required to access your trading accounts.":"Enter your master password to unlock and access your encrypted API keys."})]}),l.jsxs("form",{onSubmit:x,className:"space-y-4 mt-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"password",children:C?"Master Password":"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(Pe,{id:"password",type:g?"text":"password",value:a,onChange:A=>c(A.target.value),placeholder:C?"Enter a strong password":"Enter your password",className:"pr-10",autoFocus:!0,disabled:p}),l.jsx("button",{type:"button",onClick:()=>f(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:g?l.jsx(sP,{className:"h-4 w-4"}):l.jsx(MA,{className:"h-4 w-4"})})]})]}),C&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(ue,{htmlFor:"confirmPassword",children:"Confirm Password"}),l.jsx(Pe,{id:"confirmPassword",type:g?"text":"password",value:u,onChange:A=>d(A.target.value),placeholder:"Confirm your password",disabled:p})]}),m&&l.jsx("p",{className:"text-sm text-red-500",children:m}),C&&l.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsx("p",{children:"Password requirements:"}),l.jsx("ul",{className:"list-disc list-inside",children:l.jsx("li",{className:a.length>=8?"text-green-500":"",children:"At least 8 characters"})})]}),l.jsx(ie,{type:"submit",className:"w-full",disabled:p,children:p?"Processing...":C?l.jsxs(l.Fragment,{children:[l.jsx(Tk,{className:"h-4 w-4 mr-2"}),"Create Master Password"]}):l.jsxs(l.Fragment,{children:[l.jsx(oF,{className:"h-4 w-4 mr-2"}),"Unlock"]})})]}),!C&&l.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Your API keys are encrypted and can only be accessed with your master password."})]})})}const PBe=new r9,_Be=()=>l.jsx(i9,{client:PBe,children:l.jsx(z9,{children:l.jsxs(yz,{children:[l.jsx(tK,{}),l.jsx(OK,{}),l.jsx(F9,{children:l.jsxs(D9,{children:[l.jsx(ps,{path:"/",element:l.jsx(gBe,{})}),l.jsx(ps,{path:"/test-providers",element:l.jsx(IBe,{})}),l.jsx(ps,{path:"/test-timeframes",element:l.jsx(yBe,{})}),l.jsx(ps,{path:"/test-chart",element:l.jsx(CBe,{})}),l.jsx(ps,{path:"/test-ccxt-server",element:l.jsx(vBe,{})}),l.jsx(ps,{path:"/test-debug-ccxt-server",element:l.jsx(bBe,{})}),l.jsx(ps,{path:"*",element:l.jsx(fBe,{})})]})}),l.jsx(hBe,{}),l.jsx(mBe,{}),l.jsx(jz,{}),l.jsx(EBe,{}),l.jsx(GBe,{})]})})});TG(document.getElementById("root")).render(l.jsx(_Be,{}));export{G_ as a,cZ as b,fC as c,Oi as g,P_ as w};
